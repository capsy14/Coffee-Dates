function D2(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var G=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Na(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function O2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var c_={exports:{}},pd={},l_={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),N2=Symbol.for("react.portal"),M2=Symbol.for("react.fragment"),L2=Symbol.for("react.strict_mode"),j2=Symbol.for("react.profiler"),B2=Symbol.for("react.provider"),F2=Symbol.for("react.context"),U2=Symbol.for("react.forward_ref"),$2=Symbol.for("react.suspense"),z2=Symbol.for("react.memo"),V2=Symbol.for("react.lazy"),yv=Symbol.iterator;function H2(t){return t===null||typeof t!="object"?null:(t=yv&&t[yv]||t["@@iterator"],typeof t=="function"?t:null)}var f_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u_=Object.assign,d_={};function Ma(t,e,r){this.props=t,this.context=e,this.refs=d_,this.updater=r||f_}Ma.prototype.isReactComponent={};Ma.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ma.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function h_(){}h_.prototype=Ma.prototype;function _m(t,e,r){this.props=t,this.context=e,this.refs=d_,this.updater=r||f_}var bm=_m.prototype=new h_;bm.constructor=_m;u_(bm,Ma.prototype);bm.isPureReactComponent=!0;var wv=Array.isArray,p_=Object.prototype.hasOwnProperty,Sm={current:null},m_={key:!0,ref:!0,__self:!0,__source:!0};function g_(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)p_.call(e,n)&&!m_.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:El,type:t,key:s,ref:o,props:i,_owner:Sm.current}}function G2(t,e){return{$$typeof:El,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Em(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function q2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var _v=/\/+/g;function Ph(t,e){return typeof t=="object"&&t!==null&&t.key!=null?q2(""+t.key):e.toString(36)}function Vf(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case El:case N2:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Ph(o,0):n,wv(i)?(r="",t!=null&&(r=t.replace(_v,"$&/")+"/"),Vf(i,e,r,"",function(l){return l})):i!=null&&(Em(i)&&(i=G2(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_v,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",wv(t))for(var a=0;a<t.length;a++){s=t[a];var c=n+Ph(s,a);o+=Vf(s,e,r,c,i)}else if(c=H2(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=n+Ph(s,a++),o+=Vf(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kl(t,e,r){if(t==null)return t;var n=[],i=0;return Vf(t,n,"","",function(s){return e.call(r,s,i++)}),n}function J2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lr={current:null},Hf={transition:null},K2={ReactCurrentDispatcher:Lr,ReactCurrentBatchConfig:Hf,ReactCurrentOwner:Sm};De.Children={map:Kl,forEach:function(t,e,r){Kl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Em(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=Ma;De.Fragment=M2;De.Profiler=j2;De.PureComponent=_m;De.StrictMode=L2;De.Suspense=$2;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K2;De.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=u_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Sm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)p_.call(e,c)&&!m_.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:El,type:t.type,key:i,ref:s,props:n,_owner:o}};De.createContext=function(t){return t={$$typeof:F2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B2,_context:t},t.Consumer=t};De.createElement=g_;De.createFactory=function(t){var e=g_.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:U2,render:t}};De.isValidElement=Em;De.lazy=function(t){return{$$typeof:V2,_payload:{_status:-1,_result:t},_init:J2}};De.memo=function(t,e){return{$$typeof:z2,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Hf.transition;Hf.transition={};try{t()}finally{Hf.transition=e}};De.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};De.useCallback=function(t,e){return Lr.current.useCallback(t,e)};De.useContext=function(t){return Lr.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return Lr.current.useDeferredValue(t)};De.useEffect=function(t,e){return Lr.current.useEffect(t,e)};De.useId=function(){return Lr.current.useId()};De.useImperativeHandle=function(t,e,r){return Lr.current.useImperativeHandle(t,e,r)};De.useInsertionEffect=function(t,e){return Lr.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return Lr.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return Lr.current.useMemo(t,e)};De.useReducer=function(t,e,r){return Lr.current.useReducer(t,e,r)};De.useRef=function(t){return Lr.current.useRef(t)};De.useState=function(t){return Lr.current.useState(t)};De.useSyncExternalStore=function(t,e,r){return Lr.current.useSyncExternalStore(t,e,r)};De.useTransition=function(){return Lr.current.useTransition()};De.version="18.2.0";l_.exports=De;var V=l_.exports;const Ce=Na(V),W2=D2({__proto__:null,default:Ce},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2=V,Q2=Symbol.for("react.element"),X2=Symbol.for("react.fragment"),Z2=Object.prototype.hasOwnProperty,e6=Y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t6={key:!0,ref:!0,__self:!0,__source:!0};function v_(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Z2.call(e,n)&&!t6.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Q2,type:t,key:s,ref:o,props:i,_owner:e6.current}}pd.Fragment=X2;pd.jsx=v_;pd.jsxs=v_;c_.exports=pd;var k=c_.exports,Hp={},y_={exports:{}},sn={},w_={exports:{}},__={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,P){var M=x.length;x.push(P);e:for(;0<M;){var O=M-1>>>1,_=x[O];if(0<i(_,P))x[O]=P,x[M]=_,M=O;else break e}}function r(x){return x.length===0?null:x[0]}function n(x){if(x.length===0)return null;var P=x[0],M=x.pop();if(M!==P){x[0]=M;e:for(var O=0,_=x.length,L=_>>>1;O<L;){var W=2*(O+1)-1,I=x[W],z=W+1,q=x[z];if(0>i(I,M))z<_&&0>i(q,I)?(x[O]=q,x[z]=M,O=z):(x[O]=I,x[W]=M,O=W);else if(z<_&&0>i(q,M))x[O]=q,x[z]=M,O=z;else break e}}return P}function i(x,P){var M=x.sortIndex-P.sortIndex;return M!==0?M:x.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],f=1,u=null,h=3,g=!1,p=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(x){for(var P=r(l);P!==null;){if(P.callback===null)n(l);else if(P.startTime<=x)n(l),P.sortIndex=P.expirationTime,e(c,P);else break;P=r(l)}}function T(x){if(y=!1,w(x),!p)if(r(c)!==null)p=!0,R(D);else{var P=r(l);P!==null&&C(T,P.startTime-x)}}function D(x,P){p=!1,y&&(y=!1,S(N),N=-1),g=!0;var M=h;try{for(w(P),u=r(c);u!==null&&(!(u.expirationTime>P)||x&&!U());){var O=u.callback;if(typeof O=="function"){u.callback=null,h=u.priorityLevel;var _=O(u.expirationTime<=P);P=t.unstable_now(),typeof _=="function"?u.callback=_:u===r(c)&&n(c),w(P)}else n(c);u=r(c)}if(u!==null)var L=!0;else{var W=r(l);W!==null&&C(T,W.startTime-P),L=!1}return L}finally{u=null,h=M,g=!1}}var B=!1,j=null,N=-1,F=5,$=-1;function U(){return!(t.unstable_now()-$<F)}function A(){if(j!==null){var x=t.unstable_now();$=x;var P=!0;try{P=j(!0,x)}finally{P?m():(B=!1,j=null)}}else B=!1}var m;if(typeof E=="function")m=function(){E(A)};else if(typeof MessageChannel<"u"){var d=new MessageChannel,v=d.port2;d.port1.onmessage=A,m=function(){v.postMessage(null)}}else m=function(){b(A,0)};function R(x){j=x,B||(B=!0,m())}function C(x,P){N=b(function(){x(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,R(D))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(x){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var M=h;h=P;try{return x()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,P){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var M=h;h=x;try{return P()}finally{h=M}},t.unstable_scheduleCallback=function(x,P,M){var O=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?O+M:O):M=O,x){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=M+_,x={id:f++,callback:P,priorityLevel:x,startTime:M,expirationTime:_,sortIndex:-1},M>O?(x.sortIndex=M,e(l,x),r(c)===null&&x===r(l)&&(y?(S(N),N=-1):y=!0,C(T,M-O))):(x.sortIndex=_,e(c,x),p||g||(p=!0,R(D))),x},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(x){var P=h;return function(){var M=h;h=P;try{return x.apply(this,arguments)}finally{h=M}}}})(__);w_.exports=__;var r6=w_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_=V,nn=r6;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S_=new Set,Kc={};function mo(t,e){ya(t,e),ya(t+"Capture",e)}function ya(t,e){for(Kc[t]=e,t=0;t<e.length;t++)S_.add(e[t])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gp=Object.prototype.hasOwnProperty,n6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bv={},Sv={};function i6(t){return Gp.call(Sv,t)?!0:Gp.call(bv,t)?!1:n6.test(t)?Sv[t]=!0:(bv[t]=!0,!1)}function s6(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o6(t,e,r,n){if(e===null||typeof e>"u"||s6(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jr(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Sr[t]=new jr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Sr[e]=new jr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Sr[t]=new jr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Sr[t]=new jr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Sr[t]=new jr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Sr[t]=new jr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Sr[t]=new jr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Sr[t]=new jr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Sr[t]=new jr(t,5,!1,t.toLowerCase(),null,!1,!1)});var xm=/[\-:]([a-z])/g;function Rm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xm,Rm);Sr[e]=new jr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xm,Rm);Sr[e]=new jr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xm,Rm);Sr[e]=new jr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Sr[t]=new jr(t,1,!1,t.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Sr[t]=new jr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Am(t,e,r,n){var i=Sr.hasOwnProperty(e)?Sr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(o6(e,r,i,n)&&(r=null),n||i===null?i6(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var qi=b_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),qo=Symbol.for("react.portal"),Jo=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),qp=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),x_=Symbol.for("react.context"),Tm=Symbol.for("react.forward_ref"),Jp=Symbol.for("react.suspense"),Kp=Symbol.for("react.suspense_list"),Pm=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),R_=Symbol.for("react.offscreen"),Ev=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=Ev&&t[Ev]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,Ih;function bc(t){if(Ih===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ih=e&&e[1]||""}return`
`+Ih+t}var kh=!1;function Dh(t,e){if(!t||kh)return"";kh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{kh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?bc(t):""}function a6(t){switch(t.tag){case 5:return bc(t.type);case 16:return bc("Lazy");case 13:return bc("Suspense");case 19:return bc("SuspenseList");case 0:case 2:case 15:return t=Dh(t.type,!1),t;case 11:return t=Dh(t.type.render,!1),t;case 1:return t=Dh(t.type,!0),t;default:return""}}function Wp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jo:return"Fragment";case qo:return"Portal";case qp:return"Profiler";case Cm:return"StrictMode";case Jp:return"Suspense";case Kp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x_:return(t.displayName||"Context")+".Consumer";case E_:return(t._context.displayName||"Context")+".Provider";case Tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pm:return e=t.displayName||null,e!==null?e:Wp(t.type)||"Memo";case cs:e=t._payload,t=t._init;try{return Wp(t(e))}catch{}}return null}function c6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wp(e);case 8:return e===Cm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function A_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function l6(t){var e=A_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=l6(t))}function C_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=A_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Su(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yp(t,e){var r=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function xv(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ks(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T_(t,e){e=e.checked,e!=null&&Am(t,"checked",e,!1)}function Qp(t,e){T_(t,e);var r=ks(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Xp(t,e.type,ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rv(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Xp(t,e,r){(e!=="number"||Su(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Sc=Array.isArray;function aa(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ks(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Zp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Av(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Y(92));if(Sc(r)){if(1<r.length)throw Error(Y(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ks(r)}}function P_(t,e){var r=ks(e.value),n=ks(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Cv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ql,k_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f6=["Webkit","ms","Moz","O"];Object.keys(Dc).forEach(function(t){f6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dc[e]=Dc[t]})});function D_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Dc.hasOwnProperty(t)&&Dc[t]?(""+e).trim():e+"px"}function O_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=D_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var u6=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t0(t,e){if(e){if(u6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function r0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n0=null;function Im(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var i0=null,ca=null,la=null;function Tv(t){if(t=Al(t)){if(typeof i0!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=wd(e),i0(t.stateNode,t.type,e))}}function N_(t){ca?la?la.push(t):la=[t]:ca=t}function M_(){if(ca){var t=ca,e=la;if(la=ca=null,Tv(t),e)for(t=0;t<e.length;t++)Tv(e[t])}}function L_(t,e){return t(e)}function j_(){}var Oh=!1;function B_(t,e,r){if(Oh)return t(e,r);Oh=!0;try{return L_(t,e,r)}finally{Oh=!1,(ca!==null||la!==null)&&(j_(),M_())}}function Yc(t,e){var r=t.stateNode;if(r===null)return null;var n=wd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Y(231,e,typeof r));return r}var s0=!1;if(Bi)try{var ec={};Object.defineProperty(ec,"passive",{get:function(){s0=!0}}),window.addEventListener("test",ec,ec),window.removeEventListener("test",ec,ec)}catch{s0=!1}function d6(t,e,r,n,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(f){this.onError(f)}}var Oc=!1,Eu=null,xu=!1,o0=null,h6={onError:function(t){Oc=!0,Eu=t}};function p6(t,e,r,n,i,s,o,a,c){Oc=!1,Eu=null,d6.apply(h6,arguments)}function m6(t,e,r,n,i,s,o,a,c){if(p6.apply(this,arguments),Oc){if(Oc){var l=Eu;Oc=!1,Eu=null}else throw Error(Y(198));xu||(xu=!0,o0=l)}}function go(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function F_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pv(t){if(go(t)!==t)throw Error(Y(188))}function g6(t){var e=t.alternate;if(!e){if(e=go(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Pv(i),t;if(s===n)return Pv(i),e;s=s.sibling}throw Error(Y(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(r.alternate!==n)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?t:e}function U_(t){return t=g6(t),t!==null?$_(t):null}function $_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$_(t);if(e!==null)return e;t=t.sibling}return null}var z_=nn.unstable_scheduleCallback,Iv=nn.unstable_cancelCallback,v6=nn.unstable_shouldYield,y6=nn.unstable_requestPaint,qt=nn.unstable_now,w6=nn.unstable_getCurrentPriorityLevel,km=nn.unstable_ImmediatePriority,V_=nn.unstable_UserBlockingPriority,Ru=nn.unstable_NormalPriority,_6=nn.unstable_LowPriority,H_=nn.unstable_IdlePriority,md=null,fi=null;function b6(t){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(md,t,void 0,(t.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:x6,S6=Math.log,E6=Math.LN2;function x6(t){return t>>>=0,t===0?32:31-(S6(t)/E6|0)|0}var Xl=64,Zl=4194304;function Ec(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Au(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Ec(a):(s&=o,s!==0&&(n=Ec(s)))}else o=r&~i,o!==0?n=Ec(o):s!==0&&(n=Ec(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Bn(e),i=1<<r,n|=t[r],e&=~i;return n}function R6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A6(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Bn(s),a=1<<o,c=i[o];c===-1?(!(a&r)||a&n)&&(i[o]=R6(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function a0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function G_(){var t=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),t}function Nh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bn(e),t[e]=r}function C6(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Bn(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Dm(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Bn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var rt=0;function q_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J_,Om,K_,W_,Y_,c0=!1,ef=[],_s=null,bs=null,Ss=null,Qc=new Map,Xc=new Map,us=[],T6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kv(t,e){switch(t){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Qc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(e.pointerId)}}function tc(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Al(e),e!==null&&Om(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function P6(t,e,r,n,i){switch(e){case"focusin":return _s=tc(_s,t,e,r,n,i),!0;case"dragenter":return bs=tc(bs,t,e,r,n,i),!0;case"mouseover":return Ss=tc(Ss,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Qc.set(s,tc(Qc.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Xc.set(s,tc(Xc.get(s)||null,t,e,r,n,i)),!0}return!1}function Q_(t){var e=Xs(t.target);if(e!==null){var r=go(e);if(r!==null){if(e=r.tag,e===13){if(e=F_(r),e!==null){t.blockedOn=e,Y_(t.priority,function(){K_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=l0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);n0=n,r.target.dispatchEvent(n),n0=null}else return e=Al(r),e!==null&&Om(e),t.blockedOn=r,!1;e.shift()}return!0}function Dv(t,e,r){Gf(t)&&r.delete(e)}function I6(){c0=!1,_s!==null&&Gf(_s)&&(_s=null),bs!==null&&Gf(bs)&&(bs=null),Ss!==null&&Gf(Ss)&&(Ss=null),Qc.forEach(Dv),Xc.forEach(Dv)}function rc(t,e){t.blockedOn===e&&(t.blockedOn=null,c0||(c0=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,I6)))}function Zc(t){function e(i){return rc(i,t)}if(0<ef.length){rc(ef[0],t);for(var r=1;r<ef.length;r++){var n=ef[r];n.blockedOn===t&&(n.blockedOn=null)}}for(_s!==null&&rc(_s,t),bs!==null&&rc(bs,t),Ss!==null&&rc(Ss,t),Qc.forEach(e),Xc.forEach(e),r=0;r<us.length;r++)n=us[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<us.length&&(r=us[0],r.blockedOn===null);)Q_(r),r.blockedOn===null&&us.shift()}var fa=qi.ReactCurrentBatchConfig,Cu=!0;function k6(t,e,r,n){var i=rt,s=fa.transition;fa.transition=null;try{rt=1,Nm(t,e,r,n)}finally{rt=i,fa.transition=s}}function D6(t,e,r,n){var i=rt,s=fa.transition;fa.transition=null;try{rt=4,Nm(t,e,r,n)}finally{rt=i,fa.transition=s}}function Nm(t,e,r,n){if(Cu){var i=l0(t,e,r,n);if(i===null)Hh(t,e,n,Tu,r),kv(t,n);else if(P6(i,t,e,r,n))n.stopPropagation();else if(kv(t,n),e&4&&-1<T6.indexOf(t)){for(;i!==null;){var s=Al(i);if(s!==null&&J_(s),s=l0(t,e,r,n),s===null&&Hh(t,e,n,Tu,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Hh(t,e,n,null,r)}}var Tu=null;function l0(t,e,r,n){if(Tu=null,t=Im(n),t=Xs(t),t!==null)if(e=go(t),e===null)t=null;else if(r=e.tag,r===13){if(t=F_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tu=t,null}function X_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(w6()){case km:return 1;case V_:return 4;case Ru:case _6:return 16;case H_:return 536870912;default:return 16}default:return 16}}var gs=null,Mm=null,qf=null;function Z_(){if(qf)return qf;var t,e=Mm,r=e.length,n,i="value"in gs?gs.value:gs.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return qf=i.slice(t,1<n?1-n:void 0)}function Jf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tf(){return!0}function Ov(){return!1}function on(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tf:Ov,this.isPropagationStopped=Ov,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tf)},persist:function(){},isPersistent:tf}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lm=on(La),Rl=Ut({},La,{view:0,detail:0}),O6=on(Rl),Mh,Lh,nc,gd=Ut({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nc&&(nc&&t.type==="mousemove"?(Mh=t.screenX-nc.screenX,Lh=t.screenY-nc.screenY):Lh=Mh=0,nc=t),Mh)},movementY:function(t){return"movementY"in t?t.movementY:Lh}}),Nv=on(gd),N6=Ut({},gd,{dataTransfer:0}),M6=on(N6),L6=Ut({},Rl,{relatedTarget:0}),jh=on(L6),j6=Ut({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),B6=on(j6),F6=Ut({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U6=on(F6),$6=Ut({},La,{data:0}),Mv=on($6),z6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=H6[t])?!!e[t]:!1}function jm(){return G6}var q6=Ut({},Rl,{key:function(t){if(t.key){var e=z6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?V6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jm,charCode:function(t){return t.type==="keypress"?Jf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J6=on(q6),K6=Ut({},gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lv=on(K6),W6=Ut({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jm}),Y6=on(W6),Q6=Ut({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),X6=on(Q6),Z6=Ut({},gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ex=on(Z6),tx=[9,13,27,32],Bm=Bi&&"CompositionEvent"in window,Nc=null;Bi&&"documentMode"in document&&(Nc=document.documentMode);var rx=Bi&&"TextEvent"in window&&!Nc,eb=Bi&&(!Bm||Nc&&8<Nc&&11>=Nc),jv=String.fromCharCode(32),Bv=!1;function tb(t,e){switch(t){case"keyup":return tx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function nx(t,e){switch(t){case"compositionend":return rb(e);case"keypress":return e.which!==32?null:(Bv=!0,jv);case"textInput":return t=e.data,t===jv&&Bv?null:t;default:return null}}function ix(t,e){if(Ko)return t==="compositionend"||!Bm&&tb(t,e)?(t=Z_(),qf=Mm=gs=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eb&&e.locale!=="ko"?null:e.data;default:return null}}var sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sx[t.type]:e==="textarea"}function nb(t,e,r,n){N_(n),e=Pu(e,"onChange"),0<e.length&&(r=new Lm("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Mc=null,el=null;function ox(t){pb(t,0)}function vd(t){var e=Qo(t);if(C_(e))return t}function ax(t,e){if(t==="change")return e}var ib=!1;if(Bi){var Bh;if(Bi){var Fh="oninput"in document;if(!Fh){var Uv=document.createElement("div");Uv.setAttribute("oninput","return;"),Fh=typeof Uv.oninput=="function"}Bh=Fh}else Bh=!1;ib=Bh&&(!document.documentMode||9<document.documentMode)}function $v(){Mc&&(Mc.detachEvent("onpropertychange",sb),el=Mc=null)}function sb(t){if(t.propertyName==="value"&&vd(el)){var e=[];nb(e,el,t,Im(t)),B_(ox,e)}}function cx(t,e,r){t==="focusin"?($v(),Mc=e,el=r,Mc.attachEvent("onpropertychange",sb)):t==="focusout"&&$v()}function lx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vd(el)}function fx(t,e){if(t==="click")return vd(e)}function ux(t,e){if(t==="input"||t==="change")return vd(e)}function dx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:dx;function tl(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Gp.call(e,i)||!Un(t[i],e[i]))return!1}return!0}function zv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vv(t,e){var r=zv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zv(r)}}function ob(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ob(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ab(){for(var t=window,e=Su();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Su(t.document)}return e}function Fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hx(t){var e=ab(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ob(r.ownerDocument.documentElement,r)){if(n!==null&&Fm(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Vv(r,s);var o=Vv(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var px=Bi&&"documentMode"in document&&11>=document.documentMode,Wo=null,f0=null,Lc=null,u0=!1;function Hv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;u0||Wo==null||Wo!==Su(n)||(n=Wo,"selectionStart"in n&&Fm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Lc&&tl(Lc,n)||(Lc=n,n=Pu(f0,"onSelect"),0<n.length&&(e=new Lm("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Wo)))}function rf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yo={animationend:rf("Animation","AnimationEnd"),animationiteration:rf("Animation","AnimationIteration"),animationstart:rf("Animation","AnimationStart"),transitionend:rf("Transition","TransitionEnd")},Uh={},cb={};Bi&&(cb=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function yd(t){if(Uh[t])return Uh[t];if(!Yo[t])return t;var e=Yo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cb)return Uh[t]=e[r];return t}var lb=yd("animationend"),fb=yd("animationiteration"),ub=yd("animationstart"),db=yd("transitionend"),hb=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){hb.set(t,e),mo(e,[t])}for(var $h=0;$h<Gv.length;$h++){var zh=Gv[$h],mx=zh.toLowerCase(),gx=zh[0].toUpperCase()+zh.slice(1);Ns(mx,"on"+gx)}Ns(lb,"onAnimationEnd");Ns(fb,"onAnimationIteration");Ns(ub,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(db,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(xc));function qv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,m6(n,e,void 0,t),t.currentTarget=null}function pb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;qv(i,a,l),s=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;qv(i,a,l),s=c}}}if(xu)throw t=o0,xu=!1,o0=null,t}function Pt(t,e){var r=e[g0];r===void 0&&(r=e[g0]=new Set);var n=t+"__bubble";r.has(n)||(mb(e,t,2,!1),r.add(n))}function Vh(t,e,r){var n=0;e&&(n|=4),mb(r,t,n,e)}var nf="_reactListening"+Math.random().toString(36).slice(2);function rl(t){if(!t[nf]){t[nf]=!0,S_.forEach(function(r){r!=="selectionchange"&&(vx.has(r)||Vh(r,!1,t),Vh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nf]||(e[nf]=!0,Vh("selectionchange",!1,e))}}function mb(t,e,r,n){switch(X_(e)){case 1:var i=k6;break;case 4:i=D6;break;default:i=Nm}r=i.bind(null,e,r,t),i=void 0,!s0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Hh(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xs(a),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}a=a.parentNode}}n=n.return}B_(function(){var l=s,f=Im(r),u=[];e:{var h=hb.get(t);if(h!==void 0){var g=Lm,p=t;switch(t){case"keypress":if(Jf(r)===0)break e;case"keydown":case"keyup":g=J6;break;case"focusin":p="focus",g=jh;break;case"focusout":p="blur",g=jh;break;case"beforeblur":case"afterblur":g=jh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=M6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Y6;break;case lb:case fb:case ub:g=B6;break;case db:g=X6;break;case"scroll":g=O6;break;case"wheel":g=ex;break;case"copy":case"cut":case"paste":g=U6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Lv}var y=(e&4)!==0,b=!y&&t==="scroll",S=y?h!==null?h+"Capture":null:h;y=[];for(var E=l,w;E!==null;){w=E;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,S!==null&&(T=Yc(E,S),T!=null&&y.push(nl(E,T,w)))),b)break;E=E.return}0<y.length&&(h=new g(h,p,null,r,f),u.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&r!==n0&&(p=r.relatedTarget||r.fromElement)&&(Xs(p)||p[Fi]))break e;if((g||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=r.relatedTarget||r.toElement,g=l,p=p?Xs(p):null,p!==null&&(b=go(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=l),g!==p)){if(y=Nv,T="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(y=Lv,T="onPointerLeave",S="onPointerEnter",E="pointer"),b=g==null?h:Qo(g),w=p==null?h:Qo(p),h=new y(T,E+"leave",g,r,f),h.target=b,h.relatedTarget=w,T=null,Xs(f)===l&&(y=new y(S,E+"enter",p,r,f),y.target=w,y.relatedTarget=b,T=y),b=T,g&&p)t:{for(y=g,S=p,E=0,w=y;w;w=bo(w))E++;for(w=0,T=S;T;T=bo(T))w++;for(;0<E-w;)y=bo(y),E--;for(;0<w-E;)S=bo(S),w--;for(;E--;){if(y===S||S!==null&&y===S.alternate)break t;y=bo(y),S=bo(S)}y=null}else y=null;g!==null&&Jv(u,h,g,y,!1),p!==null&&b!==null&&Jv(u,b,p,y,!0)}}e:{if(h=l?Qo(l):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var D=ax;else if(Fv(h))if(ib)D=ux;else{D=lx;var B=cx}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(D=fx);if(D&&(D=D(t,l))){nb(u,D,r,f);break e}B&&B(t,h,l),t==="focusout"&&(B=h._wrapperState)&&B.controlled&&h.type==="number"&&Xp(h,"number",h.value)}switch(B=l?Qo(l):window,t){case"focusin":(Fv(B)||B.contentEditable==="true")&&(Wo=B,f0=l,Lc=null);break;case"focusout":Lc=f0=Wo=null;break;case"mousedown":u0=!0;break;case"contextmenu":case"mouseup":case"dragend":u0=!1,Hv(u,r,f);break;case"selectionchange":if(px)break;case"keydown":case"keyup":Hv(u,r,f)}var j;if(Bm)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ko?tb(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(eb&&r.locale!=="ko"&&(Ko||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ko&&(j=Z_()):(gs=f,Mm="value"in gs?gs.value:gs.textContent,Ko=!0)),B=Pu(l,N),0<B.length&&(N=new Mv(N,t,null,r,f),u.push({event:N,listeners:B}),j?N.data=j:(j=rb(r),j!==null&&(N.data=j)))),(j=rx?nx(t,r):ix(t,r))&&(l=Pu(l,"onBeforeInput"),0<l.length&&(f=new Mv("onBeforeInput","beforeinput",null,r,f),u.push({event:f,listeners:l}),f.data=j))}pb(u,e)})}function nl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Pu(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Yc(t,r),s!=null&&n.unshift(nl(t,s,i)),s=Yc(t,e),s!=null&&n.push(nl(t,s,i))),t=t.return}return n}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jv(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,l=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&l!==null&&(a=l,i?(c=Yc(r,s),c!=null&&o.unshift(nl(r,c,a))):i||(c=Yc(r,s),c!=null&&o.push(nl(r,c,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var yx=/\r\n?/g,wx=/\u0000|\uFFFD/g;function Kv(t){return(typeof t=="string"?t:""+t).replace(yx,`
`).replace(wx,"")}function sf(t,e,r){if(e=Kv(e),Kv(t)!==e&&r)throw Error(Y(425))}function Iu(){}var d0=null,h0=null;function p0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var m0=typeof setTimeout=="function"?setTimeout:void 0,_x=typeof clearTimeout=="function"?clearTimeout:void 0,Wv=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Wv<"u"?function(t){return Wv.resolve(null).then(t).catch(Sx)}:m0;function Sx(t){setTimeout(function(){throw t})}function Gh(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Zc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Zc(e)}function Es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),si="__reactFiber$"+ja,il="__reactProps$"+ja,Fi="__reactContainer$"+ja,g0="__reactEvents$"+ja,Ex="__reactListeners$"+ja,xx="__reactHandles$"+ja;function Xs(t){var e=t[si];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Fi]||r[si]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Yv(t);t!==null;){if(r=t[si])return r;t=Yv(t)}return e}t=r,r=t.parentNode}return null}function Al(t){return t=t[si]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function wd(t){return t[il]||null}var v0=[],Xo=-1;function Ms(t){return{current:t}}function Dt(t){0>Xo||(t.current=v0[Xo],v0[Xo]=null,Xo--)}function lt(t,e){Xo++,v0[Xo]=t.current,t.current=e}var Ds={},Dr=Ms(Ds),Gr=Ms(!1),no=Ds;function wa(t,e){var r=t.type.contextTypes;if(!r)return Ds;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qr(t){return t=t.childContextTypes,t!=null}function ku(){Dt(Gr),Dt(Dr)}function Qv(t,e,r){if(Dr.current!==Ds)throw Error(Y(168));lt(Dr,e),lt(Gr,r)}function gb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Y(108,c6(t)||"Unknown",i));return Ut({},r,n)}function Du(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ds,no=Dr.current,lt(Dr,t),lt(Gr,Gr.current),!0}function Xv(t,e,r){var n=t.stateNode;if(!n)throw Error(Y(169));r?(t=gb(t,e,no),n.__reactInternalMemoizedMergedChildContext=t,Dt(Gr),Dt(Dr),lt(Dr,t)):Dt(Gr),lt(Gr,r)}var Ii=null,_d=!1,qh=!1;function vb(t){Ii===null?Ii=[t]:Ii.push(t)}function Rx(t){_d=!0,vb(t)}function Ls(){if(!qh&&Ii!==null){qh=!0;var t=0,e=rt;try{var r=Ii;for(rt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ii=null,_d=!1}catch(i){throw Ii!==null&&(Ii=Ii.slice(t+1)),z_(km,Ls),i}finally{rt=e,qh=!1}}return null}var Zo=[],ea=0,Ou=null,Nu=0,hn=[],pn=0,io=null,Oi=1,Ni="";function Ws(t,e){Zo[ea++]=Nu,Zo[ea++]=Ou,Ou=t,Nu=e}function yb(t,e,r){hn[pn++]=Oi,hn[pn++]=Ni,hn[pn++]=io,io=t;var n=Oi;t=Ni;var i=32-Bn(n)-1;n&=~(1<<i),r+=1;var s=32-Bn(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Oi=1<<32-Bn(e)+i|r<<i|n,Ni=s+t}else Oi=1<<s|r<<i|n,Ni=t}function Um(t){t.return!==null&&(Ws(t,1),yb(t,1,0))}function $m(t){for(;t===Ou;)Ou=Zo[--ea],Zo[ea]=null,Nu=Zo[--ea],Zo[ea]=null;for(;t===io;)io=hn[--pn],hn[pn]=null,Ni=hn[--pn],hn[pn]=null,Oi=hn[--pn],hn[pn]=null}var rn=null,en=null,Ot=!1,Ln=null;function wb(t,e){var r=gn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Zv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rn=t,en=Es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=io!==null?{id:Oi,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=gn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,rn=t,en=null,!0):!1;default:return!1}}function y0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function w0(t){if(Ot){var e=en;if(e){var r=e;if(!Zv(t,e)){if(y0(t))throw Error(Y(418));e=Es(r.nextSibling);var n=rn;e&&Zv(t,e)?wb(n,r):(t.flags=t.flags&-4097|2,Ot=!1,rn=t)}}else{if(y0(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ot=!1,rn=t}}}function e1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function of(t){if(t!==rn)return!1;if(!Ot)return e1(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!p0(t.type,t.memoizedProps)),e&&(e=en)){if(y0(t))throw _b(),Error(Y(418));for(;e;)wb(t,e),e=Es(e.nextSibling)}if(e1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){en=Es(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}en=null}}else en=rn?Es(t.stateNode.nextSibling):null;return!0}function _b(){for(var t=en;t;)t=Es(t.nextSibling)}function _a(){en=rn=null,Ot=!1}function zm(t){Ln===null?Ln=[t]:Ln.push(t)}var Ax=qi.ReactCurrentBatchConfig;function kn(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Mu=Ms(null),Lu=null,ta=null,Vm=null;function Hm(){Vm=ta=Lu=null}function Gm(t){var e=Mu.current;Dt(Mu),t._currentValue=e}function _0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ua(t,e){Lu=t,Vm=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vr=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Vm!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(Lu===null)throw Error(Y(308));ta=t,Lu.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var Zs=null;function qm(t){Zs===null?Zs=[t]:Zs.push(t)}function bb(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,qm(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ui(t,n)}function Ui(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ls=!1;function Jm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ve&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ui(t,r)}return i=n.interleaved,i===null?(e.next=e,qm(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ui(t,r)}function Kf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dm(t,r)}}function t1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ju(t,e,r,n){var i=t.updateQueue;ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=c))}if(s!==null){var u=i.baseState;o=0,f=l=c=null,a=s;do{var h=a.lane,g=a.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(h=e,g=r,y.tag){case 1:if(p=y.payload,typeof p=="function"){u=p.call(g,u,h);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(g,u,h):p,h==null)break e;u=Ut({},u,h);break e;case 2:ls=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(l=f=g,c=u):f=f.next=g,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(f===null&&(c=u),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oo|=o,t.lanes=o,t.memoizedState=u}}function r1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Y(191,i));i.call(n)}}}var Eb=new b_.Component().refs;function b0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ut({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bd={isMounted:function(t){return(t=t._reactInternals)?go(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Mr(),i=As(t),s=Li(n,i);s.payload=e,r!=null&&(s.callback=r),e=xs(t,s,i),e!==null&&(Fn(e,t,i,n),Kf(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Mr(),i=As(t),s=Li(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=xs(t,s,i),e!==null&&(Fn(e,t,i,n),Kf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Mr(),n=As(t),i=Li(r,n);i.tag=2,e!=null&&(i.callback=e),e=xs(t,i,n),e!==null&&(Fn(e,t,n,r),Kf(e,t,n))}};function n1(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!tl(r,n)||!tl(i,s):!0}function xb(t,e,r){var n=!1,i=Ds,s=e.contextType;return typeof s=="object"&&s!==null?s=wn(s):(i=qr(e)?no:Dr.current,n=e.contextTypes,s=(n=n!=null)?wa(t,i):Ds),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bd,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function i1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&bd.enqueueReplaceState(e,e.state,null)}function S0(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Eb,Jm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wn(s):(s=qr(e)?no:Dr.current,i.context=wa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(b0(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bd.enqueueReplaceState(i,i.state,null),ju(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ic(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var n=r.stateNode}if(!n)throw Error(Y(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Eb&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,t))}return t}function af(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function s1(t){var e=t._init;return e(t._payload)}function Rb(t){function e(S,E){if(t){var w=S.deletions;w===null?(S.deletions=[E],S.flags|=16):w.push(E)}}function r(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function n(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function i(S,E){return S=Cs(S,E),S.index=0,S.sibling=null,S}function s(S,E,w){return S.index=w,t?(w=S.alternate,w!==null?(w=w.index,w<E?(S.flags|=2,E):w):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,E,w,T){return E===null||E.tag!==6?(E=Zh(w,S.mode,T),E.return=S,E):(E=i(E,w),E.return=S,E)}function c(S,E,w,T){var D=w.type;return D===Jo?f(S,E,w.props.children,T,w.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cs&&s1(D)===E.type)?(T=i(E,w.props),T.ref=ic(S,E,w),T.return=S,T):(T=eu(w.type,w.key,w.props,null,S.mode,T),T.ref=ic(S,E,w),T.return=S,T)}function l(S,E,w,T){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=ep(w,S.mode,T),E.return=S,E):(E=i(E,w.children||[]),E.return=S,E)}function f(S,E,w,T,D){return E===null||E.tag!==7?(E=ro(w,S.mode,T,D),E.return=S,E):(E=i(E,w),E.return=S,E)}function u(S,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Zh(""+E,S.mode,w),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wl:return w=eu(E.type,E.key,E.props,null,S.mode,w),w.ref=ic(S,null,E),w.return=S,w;case qo:return E=ep(E,S.mode,w),E.return=S,E;case cs:var T=E._init;return u(S,T(E._payload),w)}if(Sc(E)||Za(E))return E=ro(E,S.mode,w,null),E.return=S,E;af(S,E)}return null}function h(S,E,w,T){var D=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:a(S,E,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wl:return w.key===D?c(S,E,w,T):null;case qo:return w.key===D?l(S,E,w,T):null;case cs:return D=w._init,h(S,E,D(w._payload),T)}if(Sc(w)||Za(w))return D!==null?null:f(S,E,w,T,null);af(S,w)}return null}function g(S,E,w,T,D){if(typeof T=="string"&&T!==""||typeof T=="number")return S=S.get(w)||null,a(E,S,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wl:return S=S.get(T.key===null?w:T.key)||null,c(E,S,T,D);case qo:return S=S.get(T.key===null?w:T.key)||null,l(E,S,T,D);case cs:var B=T._init;return g(S,E,w,B(T._payload),D)}if(Sc(T)||Za(T))return S=S.get(w)||null,f(E,S,T,D,null);af(E,T)}return null}function p(S,E,w,T){for(var D=null,B=null,j=E,N=E=0,F=null;j!==null&&N<w.length;N++){j.index>N?(F=j,j=null):F=j.sibling;var $=h(S,j,w[N],T);if($===null){j===null&&(j=F);break}t&&j&&$.alternate===null&&e(S,j),E=s($,E,N),B===null?D=$:B.sibling=$,B=$,j=F}if(N===w.length)return r(S,j),Ot&&Ws(S,N),D;if(j===null){for(;N<w.length;N++)j=u(S,w[N],T),j!==null&&(E=s(j,E,N),B===null?D=j:B.sibling=j,B=j);return Ot&&Ws(S,N),D}for(j=n(S,j);N<w.length;N++)F=g(j,S,N,w[N],T),F!==null&&(t&&F.alternate!==null&&j.delete(F.key===null?N:F.key),E=s(F,E,N),B===null?D=F:B.sibling=F,B=F);return t&&j.forEach(function(U){return e(S,U)}),Ot&&Ws(S,N),D}function y(S,E,w,T){var D=Za(w);if(typeof D!="function")throw Error(Y(150));if(w=D.call(w),w==null)throw Error(Y(151));for(var B=D=null,j=E,N=E=0,F=null,$=w.next();j!==null&&!$.done;N++,$=w.next()){j.index>N?(F=j,j=null):F=j.sibling;var U=h(S,j,$.value,T);if(U===null){j===null&&(j=F);break}t&&j&&U.alternate===null&&e(S,j),E=s(U,E,N),B===null?D=U:B.sibling=U,B=U,j=F}if($.done)return r(S,j),Ot&&Ws(S,N),D;if(j===null){for(;!$.done;N++,$=w.next())$=u(S,$.value,T),$!==null&&(E=s($,E,N),B===null?D=$:B.sibling=$,B=$);return Ot&&Ws(S,N),D}for(j=n(S,j);!$.done;N++,$=w.next())$=g(j,S,N,$.value,T),$!==null&&(t&&$.alternate!==null&&j.delete($.key===null?N:$.key),E=s($,E,N),B===null?D=$:B.sibling=$,B=$);return t&&j.forEach(function(A){return e(S,A)}),Ot&&Ws(S,N),D}function b(S,E,w,T){if(typeof w=="object"&&w!==null&&w.type===Jo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Wl:e:{for(var D=w.key,B=E;B!==null;){if(B.key===D){if(D=w.type,D===Jo){if(B.tag===7){r(S,B.sibling),E=i(B,w.props.children),E.return=S,S=E;break e}}else if(B.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cs&&s1(D)===B.type){r(S,B.sibling),E=i(B,w.props),E.ref=ic(S,B,w),E.return=S,S=E;break e}r(S,B);break}else e(S,B);B=B.sibling}w.type===Jo?(E=ro(w.props.children,S.mode,T,w.key),E.return=S,S=E):(T=eu(w.type,w.key,w.props,null,S.mode,T),T.ref=ic(S,E,w),T.return=S,S=T)}return o(S);case qo:e:{for(B=w.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){r(S,E.sibling),E=i(E,w.children||[]),E.return=S,S=E;break e}else{r(S,E);break}else e(S,E);E=E.sibling}E=ep(w,S.mode,T),E.return=S,S=E}return o(S);case cs:return B=w._init,b(S,E,B(w._payload),T)}if(Sc(w))return p(S,E,w,T);if(Za(w))return y(S,E,w,T);af(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(r(S,E.sibling),E=i(E,w),E.return=S,S=E):(r(S,E),E=Zh(w,S.mode,T),E.return=S,S=E),o(S)):r(S,E)}return b}var ba=Rb(!0),Ab=Rb(!1),Cl={},ui=Ms(Cl),sl=Ms(Cl),ol=Ms(Cl);function eo(t){if(t===Cl)throw Error(Y(174));return t}function Km(t,e){switch(lt(ol,e),lt(sl,t),lt(ui,Cl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:e0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=e0(e,t)}Dt(ui),lt(ui,e)}function Sa(){Dt(ui),Dt(sl),Dt(ol)}function Cb(t){eo(ol.current);var e=eo(ui.current),r=e0(e,t.type);e!==r&&(lt(sl,t),lt(ui,r))}function Wm(t){sl.current===t&&(Dt(ui),Dt(sl))}var Bt=Ms(0);function Bu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jh=[];function Ym(){for(var t=0;t<Jh.length;t++)Jh[t]._workInProgressVersionPrimary=null;Jh.length=0}var Wf=qi.ReactCurrentDispatcher,Kh=qi.ReactCurrentBatchConfig,so=0,Ft=null,or=null,pr=null,Fu=!1,jc=!1,al=0,Cx=0;function Rr(){throw Error(Y(321))}function Qm(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Un(t[r],e[r]))return!1;return!0}function Xm(t,e,r,n,i,s){if(so=s,Ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wf.current=t===null||t.memoizedState===null?kx:Dx,t=r(n,i),jc){s=0;do{if(jc=!1,al=0,25<=s)throw Error(Y(301));s+=1,pr=or=null,e.updateQueue=null,Wf.current=Ox,t=r(n,i)}while(jc)}if(Wf.current=Uu,e=or!==null&&or.next!==null,so=0,pr=or=Ft=null,Fu=!1,e)throw Error(Y(300));return t}function Zm(){var t=al!==0;return al=0,t}function ei(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Ft.memoizedState=pr=t:pr=pr.next=t,pr}function _n(){if(or===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=or.next;var e=pr===null?Ft.memoizedState:pr.next;if(e!==null)pr=e,or=t;else{if(t===null)throw Error(Y(310));or=t,t={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},pr===null?Ft.memoizedState=pr=t:pr=pr.next=t}return pr}function cl(t,e){return typeof e=="function"?e(t):e}function Wh(t){var e=_n(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var n=or,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,c=null,l=s;do{var f=l.lane;if((so&f)===f)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var u={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=u,o=n):c=c.next=u,Ft.lanes|=f,oo|=f}l=l.next}while(l!==null&&l!==s);c===null?o=n:c.next=a,Un(n,e.memoizedState)||(Vr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Ft.lanes|=s,oo|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Yh(t){var e=_n(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Un(s,e.memoizedState)||(Vr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Tb(){}function Pb(t,e){var r=Ft,n=_n(),i=e(),s=!Un(n.memoizedState,i);if(s&&(n.memoizedState=i,Vr=!0),n=n.queue,eg(Db.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||pr!==null&&pr.memoizedState.tag&1){if(r.flags|=2048,ll(9,kb.bind(null,r,n,i,e),void 0,null),gr===null)throw Error(Y(349));so&30||Ib(r,e,i)}return i}function Ib(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function kb(t,e,r,n){e.value=r,e.getSnapshot=n,Ob(e)&&Nb(t)}function Db(t,e,r){return r(function(){Ob(e)&&Nb(t)})}function Ob(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Un(t,r)}catch{return!0}}function Nb(t){var e=Ui(t,1);e!==null&&Fn(e,t,1,-1)}function o1(t){var e=ei();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:t},e.queue=t,t=t.dispatch=Ix.bind(null,Ft,t),[e.memoizedState,t]}function ll(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Mb(){return _n().memoizedState}function Yf(t,e,r,n){var i=ei();Ft.flags|=t,i.memoizedState=ll(1|e,r,void 0,n===void 0?null:n)}function Sd(t,e,r,n){var i=_n();n=n===void 0?null:n;var s=void 0;if(or!==null){var o=or.memoizedState;if(s=o.destroy,n!==null&&Qm(n,o.deps)){i.memoizedState=ll(e,r,s,n);return}}Ft.flags|=t,i.memoizedState=ll(1|e,r,s,n)}function a1(t,e){return Yf(8390656,8,t,e)}function eg(t,e){return Sd(2048,8,t,e)}function Lb(t,e){return Sd(4,2,t,e)}function jb(t,e){return Sd(4,4,t,e)}function Bb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fb(t,e,r){return r=r!=null?r.concat([t]):null,Sd(4,4,Bb.bind(null,e,t),r)}function tg(){}function Ub(t,e){var r=_n();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Qm(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function $b(t,e){var r=_n();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Qm(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function zb(t,e,r){return so&21?(Un(r,e)||(r=G_(),Ft.lanes|=r,oo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vr=!0),t.memoizedState=r)}function Tx(t,e){var r=rt;rt=r!==0&&4>r?r:4,t(!0);var n=Kh.transition;Kh.transition={};try{t(!1),e()}finally{rt=r,Kh.transition=n}}function Vb(){return _n().memoizedState}function Px(t,e,r){var n=As(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Hb(t))Gb(e,r);else if(r=bb(t,e,r,n),r!==null){var i=Mr();Fn(r,t,n,i),qb(r,e,n)}}function Ix(t,e,r){var n=As(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hb(t))Gb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Un(a,o)){var c=e.interleaved;c===null?(i.next=i,qm(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=bb(t,e,i,n),r!==null&&(i=Mr(),Fn(r,t,n,i),qb(r,e,n))}}function Hb(t){var e=t.alternate;return t===Ft||e!==null&&e===Ft}function Gb(t,e){jc=Fu=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function qb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Dm(t,r)}}var Uu={readContext:wn,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},kx={readContext:wn,useCallback:function(t,e){return ei().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:a1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Yf(4194308,4,Bb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Yf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yf(4,2,t,e)},useMemo:function(t,e){var r=ei();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ei();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Px.bind(null,Ft,t),[n.memoizedState,t]},useRef:function(t){var e=ei();return t={current:t},e.memoizedState=t},useState:o1,useDebugValue:tg,useDeferredValue:function(t){return ei().memoizedState=t},useTransition:function(){var t=o1(!1),e=t[0];return t=Tx.bind(null,t[1]),ei().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ft,i=ei();if(Ot){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=e(),gr===null)throw Error(Y(349));so&30||Ib(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,a1(Db.bind(null,n,s,t),[t]),n.flags|=2048,ll(9,kb.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ei(),e=gr.identifierPrefix;if(Ot){var r=Ni,n=Oi;r=(n&~(1<<32-Bn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=al++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Cx++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dx={readContext:wn,useCallback:Ub,useContext:wn,useEffect:eg,useImperativeHandle:Fb,useInsertionEffect:Lb,useLayoutEffect:jb,useMemo:$b,useReducer:Wh,useRef:Mb,useState:function(){return Wh(cl)},useDebugValue:tg,useDeferredValue:function(t){var e=_n();return zb(e,or.memoizedState,t)},useTransition:function(){var t=Wh(cl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:Tb,useSyncExternalStore:Pb,useId:Vb,unstable_isNewReconciler:!1},Ox={readContext:wn,useCallback:Ub,useContext:wn,useEffect:eg,useImperativeHandle:Fb,useInsertionEffect:Lb,useLayoutEffect:jb,useMemo:$b,useReducer:Yh,useRef:Mb,useState:function(){return Yh(cl)},useDebugValue:tg,useDeferredValue:function(t){var e=_n();return or===null?e.memoizedState=t:zb(e,or.memoizedState,t)},useTransition:function(){var t=Yh(cl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:Tb,useSyncExternalStore:Pb,useId:Vb,unstable_isNewReconciler:!1};function Ea(t,e){try{var r="",n=e;do r+=a6(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function E0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Nx=typeof WeakMap=="function"?WeakMap:Map;function Jb(t,e,r){r=Li(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){zu||(zu=!0,O0=n),E0(t,e)},r}function Kb(t,e,r){r=Li(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){E0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){E0(t,e),typeof n!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function c1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Nx;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Kx.bind(null,t,e,r),e.then(t,t))}function l1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f1(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Li(-1,1),e.tag=2,xs(r,e,1))),r.lanes|=1),t)}var Mx=qi.ReactCurrentOwner,Vr=!1;function Or(t,e,r,n){e.child=t===null?Ab(e,null,r,n):ba(e,t.child,r,n)}function u1(t,e,r,n,i){r=r.render;var s=e.ref;return ua(e,i),n=Xm(t,e,r,n,s,i),r=Zm(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$i(t,e,i)):(Ot&&r&&Um(e),e.flags|=1,Or(t,e,n,i),e.child)}function d1(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!lg(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Wb(t,e,s,n,i)):(t=eu(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:tl,r(o,n)&&t.ref===e.ref)return $i(t,e,i)}return e.flags|=1,t=Cs(s,n),t.ref=e.ref,t.return=e,e.child=t}function Wb(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(tl(s,n)&&t.ref===e.ref)if(Vr=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Vr=!0);else return e.lanes=t.lanes,$i(t,e,i)}return x0(t,e,r,n,i)}function Yb(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(na,Qr),Qr|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(na,Qr),Qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,lt(na,Qr),Qr|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,lt(na,Qr),Qr|=n;return Or(t,e,i,r),e.child}function Qb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function x0(t,e,r,n,i){var s=qr(r)?no:Dr.current;return s=wa(e,s),ua(e,i),r=Xm(t,e,r,n,s,i),n=Zm(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$i(t,e,i)):(Ot&&n&&Um(e),e.flags|=1,Or(t,e,r,i),e.child)}function h1(t,e,r,n,i){if(qr(r)){var s=!0;Du(e)}else s=!1;if(ua(e,i),e.stateNode===null)Qf(t,e),xb(e,r,n),S0(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=wn(l):(l=qr(r)?no:Dr.current,l=wa(e,l));var f=r.getDerivedStateFromProps,u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==l)&&i1(e,o,n,l),ls=!1;var h=e.memoizedState;o.state=h,ju(e,n,o,i),c=e.memoizedState,a!==n||h!==c||Gr.current||ls?(typeof f=="function"&&(b0(e,r,f,n),c=e.memoizedState),(a=ls||n1(e,r,a,n,h,c,l))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Sb(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:kn(e.type,a),o.props=l,u=e.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=qr(r)?no:Dr.current,c=wa(e,c));var g=r.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==c)&&i1(e,o,n,c),ls=!1,h=e.memoizedState,o.state=h,ju(e,n,o,i);var p=e.memoizedState;a!==u||h!==p||Gr.current||ls?(typeof g=="function"&&(b0(e,r,g,n),p=e.memoizedState),(l=ls||n1(e,r,l,n,h,p,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return R0(t,e,r,n,s,i)}function R0(t,e,r,n,i,s){Qb(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Xv(e,r,!1),$i(t,e,s);n=e.stateNode,Mx.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=ba(e,t.child,null,s),e.child=ba(e,null,a,s)):Or(t,e,a,s),e.memoizedState=n.state,i&&Xv(e,r,!0),e.child}function Xb(t){var e=t.stateNode;e.pendingContext?Qv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qv(t,e.context,!1),Km(t,e.containerInfo)}function p1(t,e,r,n,i){return _a(),zm(i),e.flags|=256,Or(t,e,r,n),e.child}var A0={dehydrated:null,treeContext:null,retryLane:0};function C0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zb(t,e,r){var n=e.pendingProps,i=Bt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),lt(Bt,i&1),t===null)return w0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Rd(o,n,0,null),t=ro(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=C0(r),e.memoizedState=A0,t):rg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Lx(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Cs(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Cs(a,s):(s=ro(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?C0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=A0,n}return s=t.child,t=s.sibling,n=Cs(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function rg(t,e){return e=Rd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cf(t,e,r,n){return n!==null&&zm(n),ba(e,t.child,null,r),t=rg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lx(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Qh(Error(Y(422))),cf(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Rd({mode:"visible",children:n.children},i,0,null),s=ro(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ba(e,t.child,null,o),e.child.memoizedState=C0(o),e.memoizedState=A0,s);if(!(e.mode&1))return cf(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Y(419)),n=Qh(s,n,void 0),cf(t,e,o,n)}if(a=(o&t.childLanes)!==0,Vr||a){if(n=gr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ui(t,i),Fn(n,t,i,-1))}return cg(),n=Qh(Error(Y(421))),cf(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Wx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,en=Es(i.nextSibling),rn=e,Ot=!0,Ln=null,t!==null&&(hn[pn++]=Oi,hn[pn++]=Ni,hn[pn++]=io,Oi=t.id,Ni=t.overflow,io=e),e=rg(e,n.children),e.flags|=4096,e)}function m1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),_0(t.return,e,r)}function Xh(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function eS(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Or(t,e,n.children,r),n=Bt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&m1(t,r,e);else if(t.tag===19)m1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(lt(Bt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Bu(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Xh(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bu(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Xh(e,!0,r,null,s);break;case"together":Xh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $i(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,r=Cs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Cs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function jx(t,e,r){switch(e.tag){case 3:Xb(e),_a();break;case 5:Cb(e);break;case 1:qr(e.type)&&Du(e);break;case 4:Km(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;lt(Mu,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(lt(Bt,Bt.current&1),e.flags|=128,null):r&e.child.childLanes?Zb(t,e,r):(lt(Bt,Bt.current&1),t=$i(t,e,r),t!==null?t.sibling:null);lt(Bt,Bt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eS(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(Bt,Bt.current),n)break;return null;case 22:case 23:return e.lanes=0,Yb(t,e,r)}return $i(t,e,r)}var tS,T0,rS,nS;tS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};T0=function(){};rS=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,eo(ui.current);var s=null;switch(r){case"input":i=Yp(t,i),n=Yp(t,n),s=[];break;case"select":i=Ut({},i,{value:void 0}),n=Ut({},n,{value:void 0}),s=[];break;case"textarea":i=Zp(t,i),n=Zp(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Iu)}t0(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Kc.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var c=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Kc.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Pt("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}r&&(s=s||[]).push("style",r);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};nS=function(t,e,r,n){r!==n&&(e.flags|=4)};function sc(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ar(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Bx(t,e,r){var n=e.pendingProps;switch($m(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(e),null;case 1:return qr(e.type)&&ku(),Ar(e),null;case 3:return n=e.stateNode,Sa(),Dt(Gr),Dt(Dr),Ym(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(of(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ln!==null&&(L0(Ln),Ln=null))),T0(t,e),Ar(e),null;case 5:Wm(e);var i=eo(ol.current);if(r=e.type,t!==null&&e.stateNode!=null)rS(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Y(166));return Ar(e),null}if(t=eo(ui.current),of(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[si]=e,n[il]=s,t=(e.mode&1)!==0,r){case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":case"embed":Pt("load",n);break;case"video":case"audio":for(i=0;i<xc.length;i++)Pt(xc[i],n);break;case"source":Pt("error",n);break;case"img":case"image":case"link":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"input":xv(n,s),Pt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Pt("invalid",n);break;case"textarea":Av(n,s),Pt("invalid",n)}t0(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&sf(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sf(n.textContent,a,t),i=["children",""+a]):Kc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pt("scroll",n)}switch(r){case"input":Yl(n),Rv(n,s,!0);break;case"textarea":Yl(n),Cv(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Iu)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[si]=e,t[il]=n,tS(t,e,!1,!1),e.stateNode=t;e:{switch(o=r0(r,n),r){case"dialog":Pt("cancel",t),Pt("close",t),i=n;break;case"iframe":case"object":case"embed":Pt("load",t),i=n;break;case"video":case"audio":for(i=0;i<xc.length;i++)Pt(xc[i],t);i=n;break;case"source":Pt("error",t),i=n;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),i=n;break;case"details":Pt("toggle",t),i=n;break;case"input":xv(t,n),i=Yp(t,n),Pt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ut({},n,{value:void 0}),Pt("invalid",t);break;case"textarea":Av(t,n),i=Zp(t,n),Pt("invalid",t);break;default:i=n}t0(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?O_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&k_(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wc(t,c):typeof c=="number"&&Wc(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kc.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Pt("scroll",t):c!=null&&Am(t,s,c,o))}switch(r){case"input":Yl(t),Rv(t,n,!1);break;case"textarea":Yl(t),Cv(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ks(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?aa(t,!!n.multiple,s,!1):n.defaultValue!=null&&aa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Iu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ar(e),null;case 6:if(t&&e.stateNode!=null)nS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Y(166));if(r=eo(ol.current),eo(ui.current),of(e)){if(n=e.stateNode,r=e.memoizedProps,n[si]=e,(s=n.nodeValue!==r)&&(t=rn,t!==null))switch(t.tag){case 3:sf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sf(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[si]=e,e.stateNode=n}return Ar(e),null;case 13:if(Dt(Bt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&en!==null&&e.mode&1&&!(e.flags&128))_b(),_a(),e.flags|=98560,s=!1;else if(s=of(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[si]=e}else _a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ar(e),s=!1}else Ln!==null&&(L0(Ln),Ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Bt.current&1?cr===0&&(cr=3):cg())),e.updateQueue!==null&&(e.flags|=4),Ar(e),null);case 4:return Sa(),T0(t,e),t===null&&rl(e.stateNode.containerInfo),Ar(e),null;case 10:return Gm(e.type._context),Ar(e),null;case 17:return qr(e.type)&&ku(),Ar(e),null;case 19:if(Dt(Bt),s=e.memoizedState,s===null)return Ar(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)sc(s,!1);else{if(cr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bu(t),o!==null){for(e.flags|=128,sc(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return lt(Bt,Bt.current&1|2),e.child}t=t.sibling}s.tail!==null&&qt()>xa&&(e.flags|=128,n=!0,sc(s,!1),e.lanes=4194304)}else{if(!n)if(t=Bu(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),sc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ot)return Ar(e),null}else 2*qt()-s.renderingStartTime>xa&&r!==1073741824&&(e.flags|=128,n=!0,sc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qt(),e.sibling=null,r=Bt.current,lt(Bt,n?r&1|2:r&1),e):(Ar(e),null);case 22:case 23:return ag(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Qr&1073741824&&(Ar(e),e.subtreeFlags&6&&(e.flags|=8192)):Ar(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Fx(t,e){switch($m(e),e.tag){case 1:return qr(e.type)&&ku(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sa(),Dt(Gr),Dt(Dr),Ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wm(e),null;case 13:if(Dt(Bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));_a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt(Bt),null;case 4:return Sa(),null;case 10:return Gm(e.type._context),null;case 22:case 23:return ag(),null;case 24:return null;default:return null}}var lf=!1,Pr=!1,Ux=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ra(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Vt(t,e,n)}else r.current=null}function P0(t,e,r){try{r()}catch(n){Vt(t,e,n)}}var g1=!1;function $x(t,e){if(d0=Cu,t=ab(),Fm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,l=0,f=0,u=t,h=null;t:for(;;){for(var g;u!==r||i!==0&&u.nodeType!==3||(a=o+i),u!==s||n!==0&&u.nodeType!==3||(c=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(g=u.firstChild)!==null;)h=u,u=g;for(;;){if(u===t)break t;if(h===r&&++l===i&&(a=o),h===s&&++f===n&&(c=o),(g=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=g}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(h0={focusedElem:t,selectionRange:r},Cu=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,b=p.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?y:kn(e.type,y),b);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(T){Vt(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return p=g1,g1=!1,p}function Bc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&P0(e,r,s)}i=i.next}while(i!==n)}}function Ed(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function I0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function iS(t){var e=t.alternate;e!==null&&(t.alternate=null,iS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[si],delete e[il],delete e[g0],delete e[Ex],delete e[xx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sS(t){return t.tag===5||t.tag===3||t.tag===4}function v1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function k0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Iu));else if(n!==4&&(t=t.child,t!==null))for(k0(t,e,r),t=t.sibling;t!==null;)k0(t,e,r),t=t.sibling}function D0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(D0(t,e,r),t=t.sibling;t!==null;)D0(t,e,r),t=t.sibling}var wr=null,Nn=!1;function es(t,e,r){for(r=r.child;r!==null;)oS(t,e,r),r=r.sibling}function oS(t,e,r){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(md,r)}catch{}switch(r.tag){case 5:Pr||ra(r,e);case 6:var n=wr,i=Nn;wr=null,es(t,e,r),wr=n,Nn=i,wr!==null&&(Nn?(t=wr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):wr.removeChild(r.stateNode));break;case 18:wr!==null&&(Nn?(t=wr,r=r.stateNode,t.nodeType===8?Gh(t.parentNode,r):t.nodeType===1&&Gh(t,r),Zc(t)):Gh(wr,r.stateNode));break;case 4:n=wr,i=Nn,wr=r.stateNode.containerInfo,Nn=!0,es(t,e,r),wr=n,Nn=i;break;case 0:case 11:case 14:case 15:if(!Pr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&P0(r,e,o),i=i.next}while(i!==n)}es(t,e,r);break;case 1:if(!Pr&&(ra(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Vt(r,e,a)}es(t,e,r);break;case 21:es(t,e,r);break;case 22:r.mode&1?(Pr=(n=Pr)||r.memoizedState!==null,es(t,e,r),Pr=n):es(t,e,r);break;default:es(t,e,r)}}function y1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Ux),e.forEach(function(n){var i=Yx.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Cn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wr=a.stateNode,Nn=!1;break e;case 3:wr=a.stateNode.containerInfo,Nn=!0;break e;case 4:wr=a.stateNode.containerInfo,Nn=!0;break e}a=a.return}if(wr===null)throw Error(Y(160));oS(s,o,i),wr=null,Nn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Vt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aS(e,t),e=e.sibling}function aS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Vn(t),n&4){try{Bc(3,t,t.return),Ed(3,t)}catch(y){Vt(t,t.return,y)}try{Bc(5,t,t.return)}catch(y){Vt(t,t.return,y)}}break;case 1:Cn(e,t),Vn(t),n&512&&r!==null&&ra(r,r.return);break;case 5:if(Cn(e,t),Vn(t),n&512&&r!==null&&ra(r,r.return),t.flags&32){var i=t.stateNode;try{Wc(i,"")}catch(y){Vt(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&T_(i,s),r0(a,o);var l=r0(a,s);for(o=0;o<c.length;o+=2){var f=c[o],u=c[o+1];f==="style"?O_(i,u):f==="dangerouslySetInnerHTML"?k_(i,u):f==="children"?Wc(i,u):Am(i,f,u,l)}switch(a){case"input":Qp(i,s);break;case"textarea":P_(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?aa(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?aa(i,!!s.multiple,s.defaultValue,!0):aa(i,!!s.multiple,s.multiple?[]:"",!1))}i[il]=s}catch(y){Vt(t,t.return,y)}}break;case 6:if(Cn(e,t),Vn(t),n&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Vt(t,t.return,y)}}break;case 3:if(Cn(e,t),Vn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zc(e.containerInfo)}catch(y){Vt(t,t.return,y)}break;case 4:Cn(e,t),Vn(t);break;case 13:Cn(e,t),Vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sg=qt())),n&4&&y1(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(Pr=(l=Pr)||f,Cn(e,t),Pr=l):Cn(e,t),Vn(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!f&&t.mode&1)for(oe=t,f=t.child;f!==null;){for(u=oe=f;oe!==null;){switch(h=oe,g=h.child,h.tag){case 0:case 11:case 14:case 15:Bc(4,h,h.return);break;case 1:ra(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Vt(n,r,y)}}break;case 5:ra(h,h.return);break;case 22:if(h.memoizedState!==null){_1(u);continue}}g!==null?(g.return=h,oe=g):_1(u)}f=f.sibling}e:for(f=null,u=t;;){if(u.tag===5){if(f===null){f=u;try{i=u.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=D_("display",o))}catch(y){Vt(t,t.return,y)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=l?"":u.memoizedProps}catch(y){Vt(t,t.return,y)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Cn(e,t),Vn(t),n&4&&y1(t);break;case 21:break;default:Cn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sS(r)){var n=r;break e}r=r.return}throw Error(Y(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Wc(i,""),n.flags&=-33);var s=v1(t);D0(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=v1(t);k0(t,a,o);break;default:throw Error(Y(161))}}catch(c){Vt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zx(t,e,r){oe=t,cS(t)}function cS(t,e,r){for(var n=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||lf;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Pr;a=lf;var l=Pr;if(lf=o,(Pr=c)&&!l)for(oe=i;oe!==null;)o=oe,c=o.child,o.tag===22&&o.memoizedState!==null?b1(i):c!==null?(c.return=o,oe=c):b1(i);for(;s!==null;)oe=s,cS(s),s=s.sibling;oe=i,lf=a,Pr=l}w1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):w1(t)}}function w1(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pr||Ed(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Pr)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:kn(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&r1(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}r1(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var f=l.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&Zc(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Pr||e.flags&512&&I0(e)}catch(h){Vt(e,e.return,h)}}if(e===t){oe=null;break}if(r=e.sibling,r!==null){r.return=e.return,oe=r;break}oe=e.return}}function _1(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,oe=r;break}oe=e.return}}function b1(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ed(4,e)}catch(c){Vt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Vt(e,i,c)}}var s=e.return;try{I0(e)}catch(c){Vt(e,s,c)}break;case 5:var o=e.return;try{I0(e)}catch(c){Vt(e,o,c)}}}catch(c){Vt(e,e.return,c)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var Vx=Math.ceil,$u=qi.ReactCurrentDispatcher,ng=qi.ReactCurrentOwner,vn=qi.ReactCurrentBatchConfig,Ve=0,gr=null,Zt=null,br=0,Qr=0,na=Ms(0),cr=0,fl=null,oo=0,xd=0,ig=0,Fc=null,$r=null,sg=0,xa=1/0,Ci=null,zu=!1,O0=null,Rs=null,ff=!1,vs=null,Vu=0,Uc=0,N0=null,Xf=-1,Zf=0;function Mr(){return Ve&6?qt():Xf!==-1?Xf:Xf=qt()}function As(t){return t.mode&1?Ve&2&&br!==0?br&-br:Ax.transition!==null?(Zf===0&&(Zf=G_()),Zf):(t=rt,t!==0||(t=window.event,t=t===void 0?16:X_(t.type)),t):1}function Fn(t,e,r,n){if(50<Uc)throw Uc=0,N0=null,Error(Y(185));xl(t,r,n),(!(Ve&2)||t!==gr)&&(t===gr&&(!(Ve&2)&&(xd|=r),cr===4&&ds(t,br)),Jr(t,n),r===1&&Ve===0&&!(e.mode&1)&&(xa=qt()+500,_d&&Ls()))}function Jr(t,e){var r=t.callbackNode;A6(t,e);var n=Au(t,t===gr?br:0);if(n===0)r!==null&&Iv(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Iv(r),e===1)t.tag===0?Rx(S1.bind(null,t)):vb(S1.bind(null,t)),bx(function(){!(Ve&6)&&Ls()}),r=null;else{switch(q_(n)){case 1:r=km;break;case 4:r=V_;break;case 16:r=Ru;break;case 536870912:r=H_;break;default:r=Ru}r=gS(r,lS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function lS(t,e){if(Xf=-1,Zf=0,Ve&6)throw Error(Y(327));var r=t.callbackNode;if(da()&&t.callbackNode!==r)return null;var n=Au(t,t===gr?br:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Hu(t,n);else{e=n;var i=Ve;Ve|=2;var s=uS();(gr!==t||br!==e)&&(Ci=null,xa=qt()+500,to(t,e));do try{qx();break}catch(a){fS(t,a)}while(1);Hm(),$u.current=s,Ve=i,Zt!==null?e=0:(gr=null,br=0,e=cr)}if(e!==0){if(e===2&&(i=a0(t),i!==0&&(n=i,e=M0(t,i))),e===1)throw r=fl,to(t,0),ds(t,n),Jr(t,qt()),r;if(e===6)ds(t,n);else{if(i=t.current.alternate,!(n&30)&&!Hx(i)&&(e=Hu(t,n),e===2&&(s=a0(t),s!==0&&(n=s,e=M0(t,s))),e===1))throw r=fl,to(t,0),ds(t,n),Jr(t,qt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Y(345));case 2:Ys(t,$r,Ci);break;case 3:if(ds(t,n),(n&130023424)===n&&(e=sg+500-qt(),10<e)){if(Au(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Mr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=m0(Ys.bind(null,t,$r,Ci),e);break}Ys(t,$r,Ci);break;case 4:if(ds(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Bn(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vx(n/1960))-n,10<n){t.timeoutHandle=m0(Ys.bind(null,t,$r,Ci),n);break}Ys(t,$r,Ci);break;case 5:Ys(t,$r,Ci);break;default:throw Error(Y(329))}}}return Jr(t,qt()),t.callbackNode===r?lS.bind(null,t):null}function M0(t,e){var r=Fc;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=Hu(t,e),t!==2&&(e=$r,$r=r,e!==null&&L0(e)),t}function L0(t){$r===null?$r=t:$r.push.apply($r,t)}function Hx(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Un(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(t,e){for(e&=~ig,e&=~xd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Bn(e),n=1<<r;t[r]=-1,e&=~n}}function S1(t){if(Ve&6)throw Error(Y(327));da();var e=Au(t,0);if(!(e&1))return Jr(t,qt()),null;var r=Hu(t,e);if(t.tag!==0&&r===2){var n=a0(t);n!==0&&(e=n,r=M0(t,n))}if(r===1)throw r=fl,to(t,0),ds(t,e),Jr(t,qt()),r;if(r===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ys(t,$r,Ci),Jr(t,qt()),null}function og(t,e){var r=Ve;Ve|=1;try{return t(e)}finally{Ve=r,Ve===0&&(xa=qt()+500,_d&&Ls())}}function ao(t){vs!==null&&vs.tag===0&&!(Ve&6)&&da();var e=Ve;Ve|=1;var r=vn.transition,n=rt;try{if(vn.transition=null,rt=1,t)return t()}finally{rt=n,vn.transition=r,Ve=e,!(Ve&6)&&Ls()}}function ag(){Qr=na.current,Dt(na)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,_x(r)),Zt!==null)for(r=Zt.return;r!==null;){var n=r;switch($m(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ku();break;case 3:Sa(),Dt(Gr),Dt(Dr),Ym();break;case 5:Wm(n);break;case 4:Sa();break;case 13:Dt(Bt);break;case 19:Dt(Bt);break;case 10:Gm(n.type._context);break;case 22:case 23:ag()}r=r.return}if(gr=t,Zt=t=Cs(t.current,null),br=Qr=e,cr=0,fl=null,ig=xd=oo=0,$r=Fc=null,Zs!==null){for(e=0;e<Zs.length;e++)if(r=Zs[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Zs=null}return t}function fS(t,e){do{var r=Zt;try{if(Hm(),Wf.current=Uu,Fu){for(var n=Ft.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Fu=!1}if(so=0,pr=or=Ft=null,jc=!1,al=0,ng.current=null,r===null||r.return===null){cr=1,fl=e,Zt=null;break}e:{var s=t,o=r.return,a=r,c=e;if(e=br,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,f=a,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=l1(o);if(g!==null){g.flags&=-257,f1(g,o,a,s,e),g.mode&1&&c1(s,l,e),e=g,c=l;var p=e.updateQueue;if(p===null){var y=new Set;y.add(c),e.updateQueue=y}else p.add(c);break e}else{if(!(e&1)){c1(s,l,e),cg();break e}c=Error(Y(426))}}else if(Ot&&a.mode&1){var b=l1(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),f1(b,o,a,s,e),zm(Ea(c,a));break e}}s=c=Ea(c,a),cr!==4&&(cr=2),Fc===null?Fc=[s]:Fc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=Jb(s,c,e);t1(s,S);break e;case 1:a=c;var E=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Rs===null||!Rs.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=Kb(s,a,e);t1(s,T);break e}}s=s.return}while(s!==null)}hS(r)}catch(D){e=D,Zt===r&&r!==null&&(Zt=r=r.return);continue}break}while(1)}function uS(){var t=$u.current;return $u.current=Uu,t===null?Uu:t}function cg(){(cr===0||cr===3||cr===2)&&(cr=4),gr===null||!(oo&268435455)&&!(xd&268435455)||ds(gr,br)}function Hu(t,e){var r=Ve;Ve|=2;var n=uS();(gr!==t||br!==e)&&(Ci=null,to(t,e));do try{Gx();break}catch(i){fS(t,i)}while(1);if(Hm(),Ve=r,$u.current=n,Zt!==null)throw Error(Y(261));return gr=null,br=0,cr}function Gx(){for(;Zt!==null;)dS(Zt)}function qx(){for(;Zt!==null&&!v6();)dS(Zt)}function dS(t){var e=mS(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,e===null?hS(t):Zt=e,ng.current=null}function hS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Fx(r,e),r!==null){r.flags&=32767,Zt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{cr=6,Zt=null;return}}else if(r=Bx(r,e,Qr),r!==null){Zt=r;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);cr===0&&(cr=5)}function Ys(t,e,r){var n=rt,i=vn.transition;try{vn.transition=null,rt=1,Jx(t,e,r,n)}finally{vn.transition=i,rt=n}return null}function Jx(t,e,r,n){do da();while(vs!==null);if(Ve&6)throw Error(Y(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(C6(t,s),t===gr&&(Zt=gr=null,br=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ff||(ff=!0,gS(Ru,function(){return da(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=vn.transition,vn.transition=null;var o=rt;rt=1;var a=Ve;Ve|=4,ng.current=null,$x(t,r),aS(r,t),hx(h0),Cu=!!d0,h0=d0=null,t.current=r,zx(r),y6(),Ve=a,rt=o,vn.transition=s}else t.current=r;if(ff&&(ff=!1,vs=t,Vu=i),s=t.pendingLanes,s===0&&(Rs=null),b6(r.stateNode),Jr(t,qt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(zu)throw zu=!1,t=O0,O0=null,t;return Vu&1&&t.tag!==0&&da(),s=t.pendingLanes,s&1?t===N0?Uc++:(Uc=0,N0=t):Uc=0,Ls(),null}function da(){if(vs!==null){var t=q_(Vu),e=vn.transition,r=rt;try{if(vn.transition=null,rt=16>t?16:t,vs===null)var n=!1;else{if(t=vs,vs=null,Vu=0,Ve&6)throw Error(Y(331));var i=Ve;for(Ve|=4,oe=t.current;oe!==null;){var s=oe,o=s.child;if(oe.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(oe=l;oe!==null;){var f=oe;switch(f.tag){case 0:case 11:case 15:Bc(8,f,s)}var u=f.child;if(u!==null)u.return=f,oe=u;else for(;oe!==null;){f=oe;var h=f.sibling,g=f.return;if(iS(f),f===l){oe=null;break}if(h!==null){h.return=g,oe=h;break}oe=g}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,oe=o;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bc(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,oe=S;break e}oe=s.return}}var E=t.current;for(oe=E;oe!==null;){o=oe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,oe=w;else e:for(o=E;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ed(9,a)}}catch(D){Vt(a,a.return,D)}if(a===o){oe=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,oe=T;break e}oe=a.return}}if(Ve=i,Ls(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(md,t)}catch{}n=!0}return n}finally{rt=r,vn.transition=e}}return!1}function E1(t,e,r){e=Ea(r,e),e=Jb(t,e,1),t=xs(t,e,1),e=Mr(),t!==null&&(xl(t,1,e),Jr(t,e))}function Vt(t,e,r){if(t.tag===3)E1(t,t,r);else for(;e!==null;){if(e.tag===3){E1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rs===null||!Rs.has(n))){t=Ea(r,t),t=Kb(e,t,1),e=xs(e,t,1),t=Mr(),e!==null&&(xl(e,1,t),Jr(e,t));break}}e=e.return}}function Kx(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Mr(),t.pingedLanes|=t.suspendedLanes&r,gr===t&&(br&r)===r&&(cr===4||cr===3&&(br&130023424)===br&&500>qt()-sg?to(t,0):ig|=r),Jr(t,e)}function pS(t,e){e===0&&(t.mode&1?(e=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):e=1);var r=Mr();t=Ui(t,e),t!==null&&(xl(t,e,r),Jr(t,r))}function Wx(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),pS(t,r)}function Yx(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Y(314))}n!==null&&n.delete(e),pS(t,r)}var mS;mS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gr.current)Vr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Vr=!1,jx(t,e,r);Vr=!!(t.flags&131072)}else Vr=!1,Ot&&e.flags&1048576&&yb(e,Nu,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Qf(t,e),t=e.pendingProps;var i=wa(e,Dr.current);ua(e,r),i=Xm(null,e,n,t,i,r);var s=Zm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qr(n)?(s=!0,Du(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jm(e),i.updater=bd,e.stateNode=i,i._reactInternals=e,S0(e,n,t,r),e=R0(null,e,n,!0,s,r)):(e.tag=0,Ot&&s&&Um(e),Or(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Qf(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Xx(n),t=kn(n,t),i){case 0:e=x0(null,e,n,t,r);break e;case 1:e=h1(null,e,n,t,r);break e;case 11:e=u1(null,e,n,t,r);break e;case 14:e=d1(null,e,n,kn(n.type,t),r);break e}throw Error(Y(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kn(n,i),x0(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kn(n,i),h1(t,e,n,i,r);case 3:e:{if(Xb(e),t===null)throw Error(Y(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Sb(t,e),ju(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ea(Error(Y(423)),e),e=p1(t,e,n,r,i);break e}else if(n!==i){i=Ea(Error(Y(424)),e),e=p1(t,e,n,r,i);break e}else for(en=Es(e.stateNode.containerInfo.firstChild),rn=e,Ot=!0,Ln=null,r=Ab(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_a(),n===i){e=$i(t,e,r);break e}Or(t,e,n,r)}e=e.child}return e;case 5:return Cb(e),t===null&&w0(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,p0(n,i)?o=null:s!==null&&p0(n,s)&&(e.flags|=32),Qb(t,e),Or(t,e,o,r),e.child;case 6:return t===null&&w0(e),null;case 13:return Zb(t,e,r);case 4:return Km(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ba(e,null,n,r):Or(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kn(n,i),u1(t,e,n,i,r);case 7:return Or(t,e,e.pendingProps,r),e.child;case 8:return Or(t,e,e.pendingProps.children,r),e.child;case 12:return Or(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,lt(Mu,n._currentValue),n._currentValue=o,s!==null)if(Un(s.value,o)){if(s.children===i.children&&!Gr.current){e=$i(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Li(-1,r&-r),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var f=l.pending;f===null?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),_0(s.return,r,e),a.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),_0(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Or(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ua(e,r),i=wn(i),n=n(i),e.flags|=1,Or(t,e,n,r),e.child;case 14:return n=e.type,i=kn(n,e.pendingProps),i=kn(n.type,i),d1(t,e,n,i,r);case 15:return Wb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kn(n,i),Qf(t,e),e.tag=1,qr(n)?(t=!0,Du(e)):t=!1,ua(e,r),xb(e,n,i),S0(e,n,i,r),R0(null,e,n,!0,t,r);case 19:return eS(t,e,r);case 22:return Yb(t,e,r)}throw Error(Y(156,e.tag))};function gS(t,e){return z_(t,e)}function Qx(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,r,n){return new Qx(t,e,r,n)}function lg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xx(t){if(typeof t=="function")return lg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tm)return 11;if(t===Pm)return 14}return 2}function Cs(t,e){var r=t.alternate;return r===null?(r=gn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function eu(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")lg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jo:return ro(r.children,i,s,e);case Cm:o=8,i|=8;break;case qp:return t=gn(12,r,e,i|2),t.elementType=qp,t.lanes=s,t;case Jp:return t=gn(13,r,e,i),t.elementType=Jp,t.lanes=s,t;case Kp:return t=gn(19,r,e,i),t.elementType=Kp,t.lanes=s,t;case R_:return Rd(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E_:o=10;break e;case x_:o=9;break e;case Tm:o=11;break e;case Pm:o=14;break e;case cs:o=16,n=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=gn(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ro(t,e,r,n){return t=gn(7,t,n,e),t.lanes=r,t}function Rd(t,e,r,n){return t=gn(22,t,n,e),t.elementType=R_,t.lanes=r,t.stateNode={isHidden:!1},t}function Zh(t,e,r){return t=gn(6,t,null,e),t.lanes=r,t}function ep(t,e,r){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zx(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fg(t,e,r,n,i,s,o,a,c){return t=new Zx(t,e,r,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jm(s),t}function eR(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function vS(t){if(!t)return Ds;t=t._reactInternals;e:{if(go(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var r=t.type;if(qr(r))return gb(t,r,e)}return e}function yS(t,e,r,n,i,s,o,a,c){return t=fg(r,n,!0,t,i,s,o,a,c),t.context=vS(null),r=t.current,n=Mr(),i=As(r),s=Li(n,i),s.callback=e??null,xs(r,s,i),t.current.lanes=i,xl(t,i,n),Jr(t,n),t}function Ad(t,e,r,n){var i=e.current,s=Mr(),o=As(i);return r=vS(r),e.context===null?e.context=r:e.pendingContext=r,e=Li(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=xs(i,e,o),t!==null&&(Fn(t,i,o,s),Kf(t,i,o)),o}function Gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ug(t,e){x1(t,e),(t=t.alternate)&&x1(t,e)}function tR(){return null}var wS=typeof reportError=="function"?reportError:function(t){console.error(t)};function dg(t){this._internalRoot=t}Cd.prototype.render=dg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Ad(t,e,null,null)};Cd.prototype.unmount=dg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){Ad(null,t,null,null)}),e[Fi]=null}};function Cd(t){this._internalRoot=t}Cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=W_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<us.length&&e!==0&&e<us[r].priority;r++);us.splice(r,0,t),r===0&&Q_(t)}};function hg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function R1(){}function rR(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=Gu(o);s.call(l)}}var o=yS(e,n,t,0,null,!1,!1,"",R1);return t._reactRootContainer=o,t[Fi]=o.current,rl(t.nodeType===8?t.parentNode:t),ao(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=Gu(c);a.call(l)}}var c=fg(t,0,!1,null,null,!1,!1,"",R1);return t._reactRootContainer=c,t[Fi]=c.current,rl(t.nodeType===8?t.parentNode:t),ao(function(){Ad(e,c,r,n)}),c}function Pd(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Gu(o);a.call(c)}}Ad(e,o,t,i)}else o=rR(r,e,t,i,n);return Gu(o)}J_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ec(e.pendingLanes);r!==0&&(Dm(e,r|1),Jr(e,qt()),!(Ve&6)&&(xa=qt()+500,Ls()))}break;case 13:ao(function(){var n=Ui(t,1);if(n!==null){var i=Mr();Fn(n,t,1,i)}}),ug(t,1)}};Om=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var r=Mr();Fn(e,t,134217728,r)}ug(t,134217728)}};K_=function(t){if(t.tag===13){var e=As(t),r=Ui(t,e);if(r!==null){var n=Mr();Fn(r,t,e,n)}ug(t,e)}};W_=function(){return rt};Y_=function(t,e){var r=rt;try{return rt=t,e()}finally{rt=r}};i0=function(t,e,r){switch(e){case"input":if(Qp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=wd(n);if(!i)throw Error(Y(90));C_(n),Qp(n,i)}}}break;case"textarea":P_(t,r);break;case"select":e=r.value,e!=null&&aa(t,!!r.multiple,e,!1)}};L_=og;j_=ao;var nR={usingClientEntryPoint:!1,Events:[Al,Qo,wd,N_,M_,og]},oc={findFiberByHostInstance:Xs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iR={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U_(t),t===null?null:t.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||tR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{md=uf.inject(iR),fi=uf}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nR;sn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hg(e))throw Error(Y(200));return eR(t,e,null,r)};sn.createRoot=function(t,e){if(!hg(t))throw Error(Y(299));var r=!1,n="",i=wS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fg(t,1,!1,null,null,r,!1,n,i),t[Fi]=e.current,rl(t.nodeType===8?t.parentNode:t),new dg(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=U_(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return ao(t)};sn.hydrate=function(t,e,r){if(!Td(e))throw Error(Y(200));return Pd(null,t,e,!0,r)};sn.hydrateRoot=function(t,e,r){if(!hg(t))throw Error(Y(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=wS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=yS(e,null,t,1,r??null,i,!1,s,o),t[Fi]=e.current,rl(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Cd(e)};sn.render=function(t,e,r){if(!Td(e))throw Error(Y(200));return Pd(null,t,e,!1,r)};sn.unmountComponentAtNode=function(t){if(!Td(t))throw Error(Y(40));return t._reactRootContainer?(ao(function(){Pd(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};sn.unstable_batchedUpdates=og;sn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Td(r))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Pd(t,e,r,!1,n)};sn.version="18.2.0-next-9e3b772b8-20220608";function _S(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_S)}catch(t){console.error(t)}}_S(),y_.exports=sn;var sR=y_.exports,A1=sR;Hp.createRoot=A1.createRoot,Hp.hydrateRoot=A1.hydrateRoot;var pg={exports:{}};const oR={},aR=Object.freeze(Object.defineProperty({__proto__:null,default:oR},Symbol.toStringTag,{value:"Module"})),cR=O2(aR);pg.exports;(function(t){(function(e,r){function n(m,d){if(!m)throw new Error(d||"Assertion failed")}function i(m,d){m.super_=d;var v=function(){};v.prototype=d.prototype,m.prototype=new v,m.prototype.constructor=m}function s(m,d,v){if(s.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((d==="le"||d==="be")&&(v=d,d=10),this._init(m||0,d||10,v||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=cR.Buffer}catch{}s.isBN=function(d){return d instanceof s?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===s.wordSize&&Array.isArray(d.words)},s.max=function(d,v){return d.cmp(v)>0?d:v},s.min=function(d,v){return d.cmp(v)<0?d:v},s.prototype._init=function(d,v,R){if(typeof d=="number")return this._initNumber(d,v,R);if(typeof d=="object")return this._initArray(d,v,R);v==="hex"&&(v=16),n(v===(v|0)&&v>=2&&v<=36),d=d.toString().replace(/\s+/g,"");var C=0;d[0]==="-"&&(C++,this.negative=1),C<d.length&&(v===16?this._parseHex(d,C,R):(this._parseBase(d,v,C),R==="le"&&this._initArray(this.toArray(),v,R)))},s.prototype._initNumber=function(d,v,R){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(n(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),v,R)},s.prototype._initArray=function(d,v,R){if(n(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var x,P,M=0;if(R==="be")for(C=d.length-1,x=0;C>=0;C-=3)P=d[C]|d[C-1]<<8|d[C-2]<<16,this.words[x]|=P<<M&67108863,this.words[x+1]=P>>>26-M&67108863,M+=24,M>=26&&(M-=26,x++);else if(R==="le")for(C=0,x=0;C<d.length;C+=3)P=d[C]|d[C+1]<<8|d[C+2]<<16,this.words[x]|=P<<M&67108863,this.words[x+1]=P>>>26-M&67108863,M+=24,M>=26&&(M-=26,x++);return this._strip()};function a(m,d){var v=m.charCodeAt(d);if(v>=48&&v<=57)return v-48;if(v>=65&&v<=70)return v-55;if(v>=97&&v<=102)return v-87;n(!1,"Invalid character in "+m)}function c(m,d,v){var R=a(m,v);return v-1>=d&&(R|=a(m,v-1)<<4),R}s.prototype._parseHex=function(d,v,R){this.length=Math.ceil((d.length-v)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var x=0,P=0,M;if(R==="be")for(C=d.length-1;C>=v;C-=2)M=c(d,v,C)<<x,this.words[P]|=M&67108863,x>=18?(x-=18,P+=1,this.words[P]|=M>>>26):x+=8;else{var O=d.length-v;for(C=O%2===0?v+1:v;C<d.length;C+=2)M=c(d,v,C)<<x,this.words[P]|=M&67108863,x>=18?(x-=18,P+=1,this.words[P]|=M>>>26):x+=8}this._strip()};function l(m,d,v,R){for(var C=0,x=0,P=Math.min(m.length,v),M=d;M<P;M++){var O=m.charCodeAt(M)-48;C*=R,O>=49?x=O-49+10:O>=17?x=O-17+10:x=O,n(O>=0&&x<R,"Invalid character"),C+=x}return C}s.prototype._parseBase=function(d,v,R){this.words=[0],this.length=1;for(var C=0,x=1;x<=67108863;x*=v)C++;C--,x=x/v|0;for(var P=d.length-R,M=P%C,O=Math.min(P,P-M)+R,_=0,L=R;L<O;L+=C)_=l(d,L,L+C,v),this.imuln(x),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(M!==0){var W=1;for(_=l(d,L,d.length,v),L=0;L<M;L++)W*=v;this.imuln(W),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},s.prototype.copy=function(d){d.words=new Array(this.length);for(var v=0;v<this.length;v++)d.words[v]=this.words[v];d.length=this.length,d.negative=this.negative,d.red=this.red};function f(m,d){m.words=d.words,m.length=d.length,m.negative=d.negative,m.red=d.red}if(s.prototype._move=function(d){f(d,this)},s.prototype.clone=function(){var d=new s(null);return this.copy(d),d},s.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(d,v){d=d||10,v=v|0||1;var R;if(d===16||d==="hex"){R="";for(var C=0,x=0,P=0;P<this.length;P++){var M=this.words[P],O=((M<<C|x)&16777215).toString(16);x=M>>>24-C&16777215,C+=2,C>=26&&(C-=26,P--),x!==0||P!==this.length-1?R=h[6-O.length]+O+R:R=O+R}for(x!==0&&(R=x.toString(16)+R);R.length%v!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(d===(d|0)&&d>=2&&d<=36){var _=g[d],L=p[d];R="";var W=this.clone();for(W.negative=0;!W.isZero();){var I=W.modrn(L).toString(d);W=W.idivn(L),W.isZero()?R=I+R:R=h[_-I.length]+I+R}for(this.isZero()&&(R="0"+R);R.length%v!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(d,v){return this.toArrayLike(o,d,v)}),s.prototype.toArray=function(d,v){return this.toArrayLike(Array,d,v)};var y=function(d,v){return d.allocUnsafe?d.allocUnsafe(v):new d(v)};s.prototype.toArrayLike=function(d,v,R){this._strip();var C=this.byteLength(),x=R||Math.max(1,C);n(C<=x,"byte array longer than desired length"),n(x>0,"Requested array length <= 0");var P=y(d,x),M=v==="le"?"LE":"BE";return this["_toArrayLike"+M](P,C),P},s.prototype._toArrayLikeLE=function(d,v){for(var R=0,C=0,x=0,P=0;x<this.length;x++){var M=this.words[x]<<P|C;d[R++]=M&255,R<d.length&&(d[R++]=M>>8&255),R<d.length&&(d[R++]=M>>16&255),P===6?(R<d.length&&(d[R++]=M>>24&255),C=0,P=0):(C=M>>>24,P+=2)}if(R<d.length)for(d[R++]=C;R<d.length;)d[R++]=0},s.prototype._toArrayLikeBE=function(d,v){for(var R=d.length-1,C=0,x=0,P=0;x<this.length;x++){var M=this.words[x]<<P|C;d[R--]=M&255,R>=0&&(d[R--]=M>>8&255),R>=0&&(d[R--]=M>>16&255),P===6?(R>=0&&(d[R--]=M>>24&255),C=0,P=0):(C=M>>>24,P+=2)}if(R>=0)for(d[R--]=C;R>=0;)d[R--]=0},Math.clz32?s.prototype._countBits=function(d){return 32-Math.clz32(d)}:s.prototype._countBits=function(d){var v=d,R=0;return v>=4096&&(R+=13,v>>>=13),v>=64&&(R+=7,v>>>=7),v>=8&&(R+=4,v>>>=4),v>=2&&(R+=2,v>>>=2),R+v},s.prototype._zeroBits=function(d){if(d===0)return 26;var v=d,R=0;return v&8191||(R+=13,v>>>=13),v&127||(R+=7,v>>>=7),v&15||(R+=4,v>>>=4),v&3||(R+=2,v>>>=2),v&1||R++,R},s.prototype.bitLength=function(){var d=this.words[this.length-1],v=this._countBits(d);return(this.length-1)*26+v};function b(m){for(var d=new Array(m.bitLength()),v=0;v<d.length;v++){var R=v/26|0,C=v%26;d[v]=m.words[R]>>>C&1}return d}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,v=0;v<this.length;v++){var R=this._zeroBits(this.words[v]);if(d+=R,R!==26)break}return d},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},s.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var v=0;v<d.length;v++)this.words[v]=this.words[v]|d.words[v];return this._strip()},s.prototype.ior=function(d){return n((this.negative|d.negative)===0),this.iuor(d)},s.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},s.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},s.prototype.iuand=function(d){var v;this.length>d.length?v=d:v=this;for(var R=0;R<v.length;R++)this.words[R]=this.words[R]&d.words[R];return this.length=v.length,this._strip()},s.prototype.iand=function(d){return n((this.negative|d.negative)===0),this.iuand(d)},s.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},s.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},s.prototype.iuxor=function(d){var v,R;this.length>d.length?(v=this,R=d):(v=d,R=this);for(var C=0;C<R.length;C++)this.words[C]=v.words[C]^R.words[C];if(this!==v)for(;C<v.length;C++)this.words[C]=v.words[C];return this.length=v.length,this._strip()},s.prototype.ixor=function(d){return n((this.negative|d.negative)===0),this.iuxor(d)},s.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},s.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},s.prototype.inotn=function(d){n(typeof d=="number"&&d>=0);var v=Math.ceil(d/26)|0,R=d%26;this._expand(v),R>0&&v--;for(var C=0;C<v;C++)this.words[C]=~this.words[C]&67108863;return R>0&&(this.words[C]=~this.words[C]&67108863>>26-R),this._strip()},s.prototype.notn=function(d){return this.clone().inotn(d)},s.prototype.setn=function(d,v){n(typeof d=="number"&&d>=0);var R=d/26|0,C=d%26;return this._expand(R+1),v?this.words[R]=this.words[R]|1<<C:this.words[R]=this.words[R]&~(1<<C),this._strip()},s.prototype.iadd=function(d){var v;if(this.negative!==0&&d.negative===0)return this.negative=0,v=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,v=this.isub(d),d.negative=1,v._normSign();var R,C;this.length>d.length?(R=this,C=d):(R=d,C=this);for(var x=0,P=0;P<C.length;P++)v=(R.words[P]|0)+(C.words[P]|0)+x,this.words[P]=v&67108863,x=v>>>26;for(;x!==0&&P<R.length;P++)v=(R.words[P]|0)+x,this.words[P]=v&67108863,x=v>>>26;if(this.length=R.length,x!==0)this.words[this.length]=x,this.length++;else if(R!==this)for(;P<R.length;P++)this.words[P]=R.words[P];return this},s.prototype.add=function(d){var v;return d.negative!==0&&this.negative===0?(d.negative=0,v=this.sub(d),d.negative^=1,v):d.negative===0&&this.negative!==0?(this.negative=0,v=d.sub(this),this.negative=1,v):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},s.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var v=this.iadd(d);return d.negative=1,v._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var R=this.cmp(d);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;var C,x;R>0?(C=this,x=d):(C=d,x=this);for(var P=0,M=0;M<x.length;M++)v=(C.words[M]|0)-(x.words[M]|0)+P,P=v>>26,this.words[M]=v&67108863;for(;P!==0&&M<C.length;M++)v=(C.words[M]|0)+P,P=v>>26,this.words[M]=v&67108863;if(P===0&&M<C.length&&C!==this)for(;M<C.length;M++)this.words[M]=C.words[M];return this.length=Math.max(this.length,M),C!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(d){return this.clone().isub(d)};function S(m,d,v){v.negative=d.negative^m.negative;var R=m.length+d.length|0;v.length=R,R=R-1|0;var C=m.words[0]|0,x=d.words[0]|0,P=C*x,M=P&67108863,O=P/67108864|0;v.words[0]=M;for(var _=1;_<R;_++){for(var L=O>>>26,W=O&67108863,I=Math.min(_,d.length-1),z=Math.max(0,_-m.length+1);z<=I;z++){var q=_-z|0;C=m.words[q]|0,x=d.words[z]|0,P=C*x+W,L+=P/67108864|0,W=P&67108863}v.words[_]=W|0,O=L|0}return O!==0?v.words[_]=O|0:v.length--,v._strip()}var E=function(d,v,R){var C=d.words,x=v.words,P=R.words,M=0,O,_,L,W=C[0]|0,I=W&8191,z=W>>>13,q=C[1]|0,J=q&8191,Q=q>>>13,ce=C[2]|0,re=ce&8191,ee=ce>>>13,et=C[3]|0,ne=et&8191,ye=et>>>13,Rn=C[4]|0,We=Rn&8191,tt=Rn>>>13,Ri=C[5]|0,nt=Ri&8191,it=Ri>>>13,rr=C[6]|0,He=rr&8191,Qe=rr>>>13,_e=C[7]|0,ue=_e&8191,se=_e>>>13,Be=C[8]|0,Fe=Be&8191,Te=Be>>>13,Re=C[9]|0,ie=Re&8191,Pe=Re>>>13,An=x[0]|0,st=An&8191,ft=An>>>13,Fs=x[1]|0,ut=Fs&8191,dt=Fs>>>13,Us=x[2]|0,ht=Us&8191,pt=Us>>>13,$s=x[3]|0,mt=$s&8191,gt=$s>>>13,zs=x[4]|0,vt=zs&8191,yt=zs>>>13,Vs=x[5]|0,wt=Vs&8191,_t=Vs>>>13,Hs=x[6]|0,bt=Hs&8191,St=Hs>>>13,Gs=x[7]|0,Et=Gs&8191,xt=Gs>>>13,qs=x[8]|0,Rt=qs&8191,At=qs>>>13,Js=x[9]|0,Ct=Js&8191,Tt=Js>>>13;R.negative=d.negative^v.negative,R.length=19,O=Math.imul(I,st),_=Math.imul(I,ft),_=_+Math.imul(z,st)|0,L=Math.imul(z,ft);var Wi=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,O=Math.imul(J,st),_=Math.imul(J,ft),_=_+Math.imul(Q,st)|0,L=Math.imul(Q,ft),O=O+Math.imul(I,ut)|0,_=_+Math.imul(I,dt)|0,_=_+Math.imul(z,ut)|0,L=L+Math.imul(z,dt)|0;var Yi=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,O=Math.imul(re,st),_=Math.imul(re,ft),_=_+Math.imul(ee,st)|0,L=Math.imul(ee,ft),O=O+Math.imul(J,ut)|0,_=_+Math.imul(J,dt)|0,_=_+Math.imul(Q,ut)|0,L=L+Math.imul(Q,dt)|0,O=O+Math.imul(I,ht)|0,_=_+Math.imul(I,pt)|0,_=_+Math.imul(z,ht)|0,L=L+Math.imul(z,pt)|0;var Qi=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,O=Math.imul(ne,st),_=Math.imul(ne,ft),_=_+Math.imul(ye,st)|0,L=Math.imul(ye,ft),O=O+Math.imul(re,ut)|0,_=_+Math.imul(re,dt)|0,_=_+Math.imul(ee,ut)|0,L=L+Math.imul(ee,dt)|0,O=O+Math.imul(J,ht)|0,_=_+Math.imul(J,pt)|0,_=_+Math.imul(Q,ht)|0,L=L+Math.imul(Q,pt)|0,O=O+Math.imul(I,mt)|0,_=_+Math.imul(I,gt)|0,_=_+Math.imul(z,mt)|0,L=L+Math.imul(z,gt)|0;var Xi=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,O=Math.imul(We,st),_=Math.imul(We,ft),_=_+Math.imul(tt,st)|0,L=Math.imul(tt,ft),O=O+Math.imul(ne,ut)|0,_=_+Math.imul(ne,dt)|0,_=_+Math.imul(ye,ut)|0,L=L+Math.imul(ye,dt)|0,O=O+Math.imul(re,ht)|0,_=_+Math.imul(re,pt)|0,_=_+Math.imul(ee,ht)|0,L=L+Math.imul(ee,pt)|0,O=O+Math.imul(J,mt)|0,_=_+Math.imul(J,gt)|0,_=_+Math.imul(Q,mt)|0,L=L+Math.imul(Q,gt)|0,O=O+Math.imul(I,vt)|0,_=_+Math.imul(I,yt)|0,_=_+Math.imul(z,vt)|0,L=L+Math.imul(z,yt)|0;var Zi=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,O=Math.imul(nt,st),_=Math.imul(nt,ft),_=_+Math.imul(it,st)|0,L=Math.imul(it,ft),O=O+Math.imul(We,ut)|0,_=_+Math.imul(We,dt)|0,_=_+Math.imul(tt,ut)|0,L=L+Math.imul(tt,dt)|0,O=O+Math.imul(ne,ht)|0,_=_+Math.imul(ne,pt)|0,_=_+Math.imul(ye,ht)|0,L=L+Math.imul(ye,pt)|0,O=O+Math.imul(re,mt)|0,_=_+Math.imul(re,gt)|0,_=_+Math.imul(ee,mt)|0,L=L+Math.imul(ee,gt)|0,O=O+Math.imul(J,vt)|0,_=_+Math.imul(J,yt)|0,_=_+Math.imul(Q,vt)|0,L=L+Math.imul(Q,yt)|0,O=O+Math.imul(I,wt)|0,_=_+Math.imul(I,_t)|0,_=_+Math.imul(z,wt)|0,L=L+Math.imul(z,_t)|0;var mh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(mh>>>26)|0,mh&=67108863,O=Math.imul(He,st),_=Math.imul(He,ft),_=_+Math.imul(Qe,st)|0,L=Math.imul(Qe,ft),O=O+Math.imul(nt,ut)|0,_=_+Math.imul(nt,dt)|0,_=_+Math.imul(it,ut)|0,L=L+Math.imul(it,dt)|0,O=O+Math.imul(We,ht)|0,_=_+Math.imul(We,pt)|0,_=_+Math.imul(tt,ht)|0,L=L+Math.imul(tt,pt)|0,O=O+Math.imul(ne,mt)|0,_=_+Math.imul(ne,gt)|0,_=_+Math.imul(ye,mt)|0,L=L+Math.imul(ye,gt)|0,O=O+Math.imul(re,vt)|0,_=_+Math.imul(re,yt)|0,_=_+Math.imul(ee,vt)|0,L=L+Math.imul(ee,yt)|0,O=O+Math.imul(J,wt)|0,_=_+Math.imul(J,_t)|0,_=_+Math.imul(Q,wt)|0,L=L+Math.imul(Q,_t)|0,O=O+Math.imul(I,bt)|0,_=_+Math.imul(I,St)|0,_=_+Math.imul(z,bt)|0,L=L+Math.imul(z,St)|0;var gh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(gh>>>26)|0,gh&=67108863,O=Math.imul(ue,st),_=Math.imul(ue,ft),_=_+Math.imul(se,st)|0,L=Math.imul(se,ft),O=O+Math.imul(He,ut)|0,_=_+Math.imul(He,dt)|0,_=_+Math.imul(Qe,ut)|0,L=L+Math.imul(Qe,dt)|0,O=O+Math.imul(nt,ht)|0,_=_+Math.imul(nt,pt)|0,_=_+Math.imul(it,ht)|0,L=L+Math.imul(it,pt)|0,O=O+Math.imul(We,mt)|0,_=_+Math.imul(We,gt)|0,_=_+Math.imul(tt,mt)|0,L=L+Math.imul(tt,gt)|0,O=O+Math.imul(ne,vt)|0,_=_+Math.imul(ne,yt)|0,_=_+Math.imul(ye,vt)|0,L=L+Math.imul(ye,yt)|0,O=O+Math.imul(re,wt)|0,_=_+Math.imul(re,_t)|0,_=_+Math.imul(ee,wt)|0,L=L+Math.imul(ee,_t)|0,O=O+Math.imul(J,bt)|0,_=_+Math.imul(J,St)|0,_=_+Math.imul(Q,bt)|0,L=L+Math.imul(Q,St)|0,O=O+Math.imul(I,Et)|0,_=_+Math.imul(I,xt)|0,_=_+Math.imul(z,Et)|0,L=L+Math.imul(z,xt)|0;var vh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(vh>>>26)|0,vh&=67108863,O=Math.imul(Fe,st),_=Math.imul(Fe,ft),_=_+Math.imul(Te,st)|0,L=Math.imul(Te,ft),O=O+Math.imul(ue,ut)|0,_=_+Math.imul(ue,dt)|0,_=_+Math.imul(se,ut)|0,L=L+Math.imul(se,dt)|0,O=O+Math.imul(He,ht)|0,_=_+Math.imul(He,pt)|0,_=_+Math.imul(Qe,ht)|0,L=L+Math.imul(Qe,pt)|0,O=O+Math.imul(nt,mt)|0,_=_+Math.imul(nt,gt)|0,_=_+Math.imul(it,mt)|0,L=L+Math.imul(it,gt)|0,O=O+Math.imul(We,vt)|0,_=_+Math.imul(We,yt)|0,_=_+Math.imul(tt,vt)|0,L=L+Math.imul(tt,yt)|0,O=O+Math.imul(ne,wt)|0,_=_+Math.imul(ne,_t)|0,_=_+Math.imul(ye,wt)|0,L=L+Math.imul(ye,_t)|0,O=O+Math.imul(re,bt)|0,_=_+Math.imul(re,St)|0,_=_+Math.imul(ee,bt)|0,L=L+Math.imul(ee,St)|0,O=O+Math.imul(J,Et)|0,_=_+Math.imul(J,xt)|0,_=_+Math.imul(Q,Et)|0,L=L+Math.imul(Q,xt)|0,O=O+Math.imul(I,Rt)|0,_=_+Math.imul(I,At)|0,_=_+Math.imul(z,Rt)|0,L=L+Math.imul(z,At)|0;var yh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(yh>>>26)|0,yh&=67108863,O=Math.imul(ie,st),_=Math.imul(ie,ft),_=_+Math.imul(Pe,st)|0,L=Math.imul(Pe,ft),O=O+Math.imul(Fe,ut)|0,_=_+Math.imul(Fe,dt)|0,_=_+Math.imul(Te,ut)|0,L=L+Math.imul(Te,dt)|0,O=O+Math.imul(ue,ht)|0,_=_+Math.imul(ue,pt)|0,_=_+Math.imul(se,ht)|0,L=L+Math.imul(se,pt)|0,O=O+Math.imul(He,mt)|0,_=_+Math.imul(He,gt)|0,_=_+Math.imul(Qe,mt)|0,L=L+Math.imul(Qe,gt)|0,O=O+Math.imul(nt,vt)|0,_=_+Math.imul(nt,yt)|0,_=_+Math.imul(it,vt)|0,L=L+Math.imul(it,yt)|0,O=O+Math.imul(We,wt)|0,_=_+Math.imul(We,_t)|0,_=_+Math.imul(tt,wt)|0,L=L+Math.imul(tt,_t)|0,O=O+Math.imul(ne,bt)|0,_=_+Math.imul(ne,St)|0,_=_+Math.imul(ye,bt)|0,L=L+Math.imul(ye,St)|0,O=O+Math.imul(re,Et)|0,_=_+Math.imul(re,xt)|0,_=_+Math.imul(ee,Et)|0,L=L+Math.imul(ee,xt)|0,O=O+Math.imul(J,Rt)|0,_=_+Math.imul(J,At)|0,_=_+Math.imul(Q,Rt)|0,L=L+Math.imul(Q,At)|0,O=O+Math.imul(I,Ct)|0,_=_+Math.imul(I,Tt)|0,_=_+Math.imul(z,Ct)|0,L=L+Math.imul(z,Tt)|0;var wh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(wh>>>26)|0,wh&=67108863,O=Math.imul(ie,ut),_=Math.imul(ie,dt),_=_+Math.imul(Pe,ut)|0,L=Math.imul(Pe,dt),O=O+Math.imul(Fe,ht)|0,_=_+Math.imul(Fe,pt)|0,_=_+Math.imul(Te,ht)|0,L=L+Math.imul(Te,pt)|0,O=O+Math.imul(ue,mt)|0,_=_+Math.imul(ue,gt)|0,_=_+Math.imul(se,mt)|0,L=L+Math.imul(se,gt)|0,O=O+Math.imul(He,vt)|0,_=_+Math.imul(He,yt)|0,_=_+Math.imul(Qe,vt)|0,L=L+Math.imul(Qe,yt)|0,O=O+Math.imul(nt,wt)|0,_=_+Math.imul(nt,_t)|0,_=_+Math.imul(it,wt)|0,L=L+Math.imul(it,_t)|0,O=O+Math.imul(We,bt)|0,_=_+Math.imul(We,St)|0,_=_+Math.imul(tt,bt)|0,L=L+Math.imul(tt,St)|0,O=O+Math.imul(ne,Et)|0,_=_+Math.imul(ne,xt)|0,_=_+Math.imul(ye,Et)|0,L=L+Math.imul(ye,xt)|0,O=O+Math.imul(re,Rt)|0,_=_+Math.imul(re,At)|0,_=_+Math.imul(ee,Rt)|0,L=L+Math.imul(ee,At)|0,O=O+Math.imul(J,Ct)|0,_=_+Math.imul(J,Tt)|0,_=_+Math.imul(Q,Ct)|0,L=L+Math.imul(Q,Tt)|0;var _h=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(_h>>>26)|0,_h&=67108863,O=Math.imul(ie,ht),_=Math.imul(ie,pt),_=_+Math.imul(Pe,ht)|0,L=Math.imul(Pe,pt),O=O+Math.imul(Fe,mt)|0,_=_+Math.imul(Fe,gt)|0,_=_+Math.imul(Te,mt)|0,L=L+Math.imul(Te,gt)|0,O=O+Math.imul(ue,vt)|0,_=_+Math.imul(ue,yt)|0,_=_+Math.imul(se,vt)|0,L=L+Math.imul(se,yt)|0,O=O+Math.imul(He,wt)|0,_=_+Math.imul(He,_t)|0,_=_+Math.imul(Qe,wt)|0,L=L+Math.imul(Qe,_t)|0,O=O+Math.imul(nt,bt)|0,_=_+Math.imul(nt,St)|0,_=_+Math.imul(it,bt)|0,L=L+Math.imul(it,St)|0,O=O+Math.imul(We,Et)|0,_=_+Math.imul(We,xt)|0,_=_+Math.imul(tt,Et)|0,L=L+Math.imul(tt,xt)|0,O=O+Math.imul(ne,Rt)|0,_=_+Math.imul(ne,At)|0,_=_+Math.imul(ye,Rt)|0,L=L+Math.imul(ye,At)|0,O=O+Math.imul(re,Ct)|0,_=_+Math.imul(re,Tt)|0,_=_+Math.imul(ee,Ct)|0,L=L+Math.imul(ee,Tt)|0;var bh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(bh>>>26)|0,bh&=67108863,O=Math.imul(ie,mt),_=Math.imul(ie,gt),_=_+Math.imul(Pe,mt)|0,L=Math.imul(Pe,gt),O=O+Math.imul(Fe,vt)|0,_=_+Math.imul(Fe,yt)|0,_=_+Math.imul(Te,vt)|0,L=L+Math.imul(Te,yt)|0,O=O+Math.imul(ue,wt)|0,_=_+Math.imul(ue,_t)|0,_=_+Math.imul(se,wt)|0,L=L+Math.imul(se,_t)|0,O=O+Math.imul(He,bt)|0,_=_+Math.imul(He,St)|0,_=_+Math.imul(Qe,bt)|0,L=L+Math.imul(Qe,St)|0,O=O+Math.imul(nt,Et)|0,_=_+Math.imul(nt,xt)|0,_=_+Math.imul(it,Et)|0,L=L+Math.imul(it,xt)|0,O=O+Math.imul(We,Rt)|0,_=_+Math.imul(We,At)|0,_=_+Math.imul(tt,Rt)|0,L=L+Math.imul(tt,At)|0,O=O+Math.imul(ne,Ct)|0,_=_+Math.imul(ne,Tt)|0,_=_+Math.imul(ye,Ct)|0,L=L+Math.imul(ye,Tt)|0;var Sh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Sh>>>26)|0,Sh&=67108863,O=Math.imul(ie,vt),_=Math.imul(ie,yt),_=_+Math.imul(Pe,vt)|0,L=Math.imul(Pe,yt),O=O+Math.imul(Fe,wt)|0,_=_+Math.imul(Fe,_t)|0,_=_+Math.imul(Te,wt)|0,L=L+Math.imul(Te,_t)|0,O=O+Math.imul(ue,bt)|0,_=_+Math.imul(ue,St)|0,_=_+Math.imul(se,bt)|0,L=L+Math.imul(se,St)|0,O=O+Math.imul(He,Et)|0,_=_+Math.imul(He,xt)|0,_=_+Math.imul(Qe,Et)|0,L=L+Math.imul(Qe,xt)|0,O=O+Math.imul(nt,Rt)|0,_=_+Math.imul(nt,At)|0,_=_+Math.imul(it,Rt)|0,L=L+Math.imul(it,At)|0,O=O+Math.imul(We,Ct)|0,_=_+Math.imul(We,Tt)|0,_=_+Math.imul(tt,Ct)|0,L=L+Math.imul(tt,Tt)|0;var Eh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Eh>>>26)|0,Eh&=67108863,O=Math.imul(ie,wt),_=Math.imul(ie,_t),_=_+Math.imul(Pe,wt)|0,L=Math.imul(Pe,_t),O=O+Math.imul(Fe,bt)|0,_=_+Math.imul(Fe,St)|0,_=_+Math.imul(Te,bt)|0,L=L+Math.imul(Te,St)|0,O=O+Math.imul(ue,Et)|0,_=_+Math.imul(ue,xt)|0,_=_+Math.imul(se,Et)|0,L=L+Math.imul(se,xt)|0,O=O+Math.imul(He,Rt)|0,_=_+Math.imul(He,At)|0,_=_+Math.imul(Qe,Rt)|0,L=L+Math.imul(Qe,At)|0,O=O+Math.imul(nt,Ct)|0,_=_+Math.imul(nt,Tt)|0,_=_+Math.imul(it,Ct)|0,L=L+Math.imul(it,Tt)|0;var xh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(xh>>>26)|0,xh&=67108863,O=Math.imul(ie,bt),_=Math.imul(ie,St),_=_+Math.imul(Pe,bt)|0,L=Math.imul(Pe,St),O=O+Math.imul(Fe,Et)|0,_=_+Math.imul(Fe,xt)|0,_=_+Math.imul(Te,Et)|0,L=L+Math.imul(Te,xt)|0,O=O+Math.imul(ue,Rt)|0,_=_+Math.imul(ue,At)|0,_=_+Math.imul(se,Rt)|0,L=L+Math.imul(se,At)|0,O=O+Math.imul(He,Ct)|0,_=_+Math.imul(He,Tt)|0,_=_+Math.imul(Qe,Ct)|0,L=L+Math.imul(Qe,Tt)|0;var Rh=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Rh>>>26)|0,Rh&=67108863,O=Math.imul(ie,Et),_=Math.imul(ie,xt),_=_+Math.imul(Pe,Et)|0,L=Math.imul(Pe,xt),O=O+Math.imul(Fe,Rt)|0,_=_+Math.imul(Fe,At)|0,_=_+Math.imul(Te,Rt)|0,L=L+Math.imul(Te,At)|0,O=O+Math.imul(ue,Ct)|0,_=_+Math.imul(ue,Tt)|0,_=_+Math.imul(se,Ct)|0,L=L+Math.imul(se,Tt)|0;var Ah=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Ah>>>26)|0,Ah&=67108863,O=Math.imul(ie,Rt),_=Math.imul(ie,At),_=_+Math.imul(Pe,Rt)|0,L=Math.imul(Pe,At),O=O+Math.imul(Fe,Ct)|0,_=_+Math.imul(Fe,Tt)|0,_=_+Math.imul(Te,Ct)|0,L=L+Math.imul(Te,Tt)|0;var Ch=(M+O|0)+((_&8191)<<13)|0;M=(L+(_>>>13)|0)+(Ch>>>26)|0,Ch&=67108863,O=Math.imul(ie,Ct),_=Math.imul(ie,Tt),_=_+Math.imul(Pe,Ct)|0,L=Math.imul(Pe,Tt);var Th=(M+O|0)+((_&8191)<<13)|0;return M=(L+(_>>>13)|0)+(Th>>>26)|0,Th&=67108863,P[0]=Wi,P[1]=Yi,P[2]=Qi,P[3]=Xi,P[4]=Zi,P[5]=mh,P[6]=gh,P[7]=vh,P[8]=yh,P[9]=wh,P[10]=_h,P[11]=bh,P[12]=Sh,P[13]=Eh,P[14]=xh,P[15]=Rh,P[16]=Ah,P[17]=Ch,P[18]=Th,M!==0&&(P[19]=M,R.length++),R};Math.imul||(E=S);function w(m,d,v){v.negative=d.negative^m.negative,v.length=m.length+d.length;for(var R=0,C=0,x=0;x<v.length-1;x++){var P=C;C=0;for(var M=R&67108863,O=Math.min(x,d.length-1),_=Math.max(0,x-m.length+1);_<=O;_++){var L=x-_,W=m.words[L]|0,I=d.words[_]|0,z=W*I,q=z&67108863;P=P+(z/67108864|0)|0,q=q+M|0,M=q&67108863,P=P+(q>>>26)|0,C+=P>>>26,P&=67108863}v.words[x]=M,R=P,P=C}return R!==0?v.words[x]=R:v.length--,v._strip()}function T(m,d,v){return w(m,d,v)}s.prototype.mulTo=function(d,v){var R,C=this.length+d.length;return this.length===10&&d.length===10?R=E(this,d,v):C<63?R=S(this,d,v):C<1024?R=w(this,d,v):R=T(this,d,v),R},s.prototype.mul=function(d){var v=new s(null);return v.words=new Array(this.length+d.length),this.mulTo(d,v)},s.prototype.mulf=function(d){var v=new s(null);return v.words=new Array(this.length+d.length),T(this,d,v)},s.prototype.imul=function(d){return this.clone().mulTo(d,this)},s.prototype.imuln=function(d){var v=d<0;v&&(d=-d),n(typeof d=="number"),n(d<67108864);for(var R=0,C=0;C<this.length;C++){var x=(this.words[C]|0)*d,P=(x&67108863)+(R&67108863);R>>=26,R+=x/67108864|0,R+=P>>>26,this.words[C]=P&67108863}return R!==0&&(this.words[C]=R,this.length++),v?this.ineg():this},s.prototype.muln=function(d){return this.clone().imuln(d)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(d){var v=b(d);if(v.length===0)return new s(1);for(var R=this,C=0;C<v.length&&v[C]===0;C++,R=R.sqr());if(++C<v.length)for(var x=R.sqr();C<v.length;C++,x=x.sqr())v[C]!==0&&(R=R.mul(x));return R},s.prototype.iushln=function(d){n(typeof d=="number"&&d>=0);var v=d%26,R=(d-v)/26,C=67108863>>>26-v<<26-v,x;if(v!==0){var P=0;for(x=0;x<this.length;x++){var M=this.words[x]&C,O=(this.words[x]|0)-M<<v;this.words[x]=O|P,P=M>>>26-v}P&&(this.words[x]=P,this.length++)}if(R!==0){for(x=this.length-1;x>=0;x--)this.words[x+R]=this.words[x];for(x=0;x<R;x++)this.words[x]=0;this.length+=R}return this._strip()},s.prototype.ishln=function(d){return n(this.negative===0),this.iushln(d)},s.prototype.iushrn=function(d,v,R){n(typeof d=="number"&&d>=0);var C;v?C=(v-v%26)/26:C=0;var x=d%26,P=Math.min((d-x)/26,this.length),M=67108863^67108863>>>x<<x,O=R;if(C-=P,C=Math.max(0,C),O){for(var _=0;_<P;_++)O.words[_]=this.words[_];O.length=P}if(P!==0)if(this.length>P)for(this.length-=P,_=0;_<this.length;_++)this.words[_]=this.words[_+P];else this.words[0]=0,this.length=1;var L=0;for(_=this.length-1;_>=0&&(L!==0||_>=C);_--){var W=this.words[_]|0;this.words[_]=L<<26-x|W>>>x,L=W&M}return O&&L!==0&&(O.words[O.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(d,v,R){return n(this.negative===0),this.iushrn(d,v,R)},s.prototype.shln=function(d){return this.clone().ishln(d)},s.prototype.ushln=function(d){return this.clone().iushln(d)},s.prototype.shrn=function(d){return this.clone().ishrn(d)},s.prototype.ushrn=function(d){return this.clone().iushrn(d)},s.prototype.testn=function(d){n(typeof d=="number"&&d>=0);var v=d%26,R=(d-v)/26,C=1<<v;if(this.length<=R)return!1;var x=this.words[R];return!!(x&C)},s.prototype.imaskn=function(d){n(typeof d=="number"&&d>=0);var v=d%26,R=(d-v)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(v!==0&&R++,this.length=Math.min(R,this.length),v!==0){var C=67108863^67108863>>>v<<v;this.words[this.length-1]&=C}return this._strip()},s.prototype.maskn=function(d){return this.clone().imaskn(d)},s.prototype.iaddn=function(d){return n(typeof d=="number"),n(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<=d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},s.prototype._iaddn=function(d){this.words[0]+=d;for(var v=0;v<this.length&&this.words[v]>=67108864;v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;return this.length=Math.max(this.length,v+1),this},s.prototype.isubn=function(d){if(n(typeof d=="number"),n(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var v=0;v<this.length&&this.words[v]<0;v++)this.words[v]+=67108864,this.words[v+1]-=1;return this._strip()},s.prototype.addn=function(d){return this.clone().iaddn(d)},s.prototype.subn=function(d){return this.clone().isubn(d)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(d,v,R){var C=d.length+R,x;this._expand(C);var P,M=0;for(x=0;x<d.length;x++){P=(this.words[x+R]|0)+M;var O=(d.words[x]|0)*v;P-=O&67108863,M=(P>>26)-(O/67108864|0),this.words[x+R]=P&67108863}for(;x<this.length-R;x++)P=(this.words[x+R]|0)+M,M=P>>26,this.words[x+R]=P&67108863;if(M===0)return this._strip();for(n(M===-1),M=0,x=0;x<this.length;x++)P=-(this.words[x]|0)+M,M=P>>26,this.words[x]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(d,v){var R=this.length-d.length,C=this.clone(),x=d,P=x.words[x.length-1]|0,M=this._countBits(P);R=26-M,R!==0&&(x=x.ushln(R),C.iushln(R),P=x.words[x.length-1]|0);var O=C.length-x.length,_;if(v!=="mod"){_=new s(null),_.length=O+1,_.words=new Array(_.length);for(var L=0;L<_.length;L++)_.words[L]=0}var W=C.clone()._ishlnsubmul(x,1,O);W.negative===0&&(C=W,_&&(_.words[O]=1));for(var I=O-1;I>=0;I--){var z=(C.words[x.length+I]|0)*67108864+(C.words[x.length+I-1]|0);for(z=Math.min(z/P|0,67108863),C._ishlnsubmul(x,z,I);C.negative!==0;)z--,C.negative=0,C._ishlnsubmul(x,1,I),C.isZero()||(C.negative^=1);_&&(_.words[I]=z)}return _&&_._strip(),C._strip(),v!=="div"&&R!==0&&C.iushrn(R),{div:_||null,mod:C}},s.prototype.divmod=function(d,v,R){if(n(!d.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var C,x,P;return this.negative!==0&&d.negative===0?(P=this.neg().divmod(d,v),v!=="mod"&&(C=P.div.neg()),v!=="div"&&(x=P.mod.neg(),R&&x.negative!==0&&x.iadd(d)),{div:C,mod:x}):this.negative===0&&d.negative!==0?(P=this.divmod(d.neg(),v),v!=="mod"&&(C=P.div.neg()),{div:C,mod:P.mod}):this.negative&d.negative?(P=this.neg().divmod(d.neg(),v),v!=="div"&&(x=P.mod.neg(),R&&x.negative!==0&&x.isub(d)),{div:P.div,mod:x}):d.length>this.length||this.cmp(d)<0?{div:new s(0),mod:this}:d.length===1?v==="div"?{div:this.divn(d.words[0]),mod:null}:v==="mod"?{div:null,mod:new s(this.modrn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new s(this.modrn(d.words[0]))}:this._wordDiv(d,v)},s.prototype.div=function(d){return this.divmod(d,"div",!1).div},s.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},s.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},s.prototype.divRound=function(d){var v=this.divmod(d);if(v.mod.isZero())return v.div;var R=v.div.negative!==0?v.mod.isub(d):v.mod,C=d.ushrn(1),x=d.andln(1),P=R.cmp(C);return P<0||x===1&&P===0?v.div:v.div.negative!==0?v.div.isubn(1):v.div.iaddn(1)},s.prototype.modrn=function(d){var v=d<0;v&&(d=-d),n(d<=67108863);for(var R=(1<<26)%d,C=0,x=this.length-1;x>=0;x--)C=(R*C+(this.words[x]|0))%d;return v?-C:C},s.prototype.modn=function(d){return this.modrn(d)},s.prototype.idivn=function(d){var v=d<0;v&&(d=-d),n(d<=67108863);for(var R=0,C=this.length-1;C>=0;C--){var x=(this.words[C]|0)+R*67108864;this.words[C]=x/d|0,R=x%d}return this._strip(),v?this.ineg():this},s.prototype.divn=function(d){return this.clone().idivn(d)},s.prototype.egcd=function(d){n(d.negative===0),n(!d.isZero());var v=this,R=d.clone();v.negative!==0?v=v.umod(d):v=v.clone();for(var C=new s(1),x=new s(0),P=new s(0),M=new s(1),O=0;v.isEven()&&R.isEven();)v.iushrn(1),R.iushrn(1),++O;for(var _=R.clone(),L=v.clone();!v.isZero();){for(var W=0,I=1;!(v.words[0]&I)&&W<26;++W,I<<=1);if(W>0)for(v.iushrn(W);W-- >0;)(C.isOdd()||x.isOdd())&&(C.iadd(_),x.isub(L)),C.iushrn(1),x.iushrn(1);for(var z=0,q=1;!(R.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(R.iushrn(z);z-- >0;)(P.isOdd()||M.isOdd())&&(P.iadd(_),M.isub(L)),P.iushrn(1),M.iushrn(1);v.cmp(R)>=0?(v.isub(R),C.isub(P),x.isub(M)):(R.isub(v),P.isub(C),M.isub(x))}return{a:P,b:M,gcd:R.iushln(O)}},s.prototype._invmp=function(d){n(d.negative===0),n(!d.isZero());var v=this,R=d.clone();v.negative!==0?v=v.umod(d):v=v.clone();for(var C=new s(1),x=new s(0),P=R.clone();v.cmpn(1)>0&&R.cmpn(1)>0;){for(var M=0,O=1;!(v.words[0]&O)&&M<26;++M,O<<=1);if(M>0)for(v.iushrn(M);M-- >0;)C.isOdd()&&C.iadd(P),C.iushrn(1);for(var _=0,L=1;!(R.words[0]&L)&&_<26;++_,L<<=1);if(_>0)for(R.iushrn(_);_-- >0;)x.isOdd()&&x.iadd(P),x.iushrn(1);v.cmp(R)>=0?(v.isub(R),C.isub(x)):(R.isub(v),x.isub(C))}var W;return v.cmpn(1)===0?W=C:W=x,W.cmpn(0)<0&&W.iadd(d),W},s.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var v=this.clone(),R=d.clone();v.negative=0,R.negative=0;for(var C=0;v.isEven()&&R.isEven();C++)v.iushrn(1),R.iushrn(1);do{for(;v.isEven();)v.iushrn(1);for(;R.isEven();)R.iushrn(1);var x=v.cmp(R);if(x<0){var P=v;v=R,R=P}else if(x===0||R.cmpn(1)===0)break;v.isub(R)}while(!0);return R.iushln(C)},s.prototype.invm=function(d){return this.egcd(d).a.umod(d)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(d){return this.words[0]&d},s.prototype.bincn=function(d){n(typeof d=="number");var v=d%26,R=(d-v)/26,C=1<<v;if(this.length<=R)return this._expand(R+1),this.words[R]|=C,this;for(var x=C,P=R;x!==0&&P<this.length;P++){var M=this.words[P]|0;M+=x,x=M>>>26,M&=67108863,this.words[P]=M}return x!==0&&(this.words[P]=x,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(d){var v=d<0;if(this.negative!==0&&!v)return-1;if(this.negative===0&&v)return 1;this._strip();var R;if(this.length>1)R=1;else{v&&(d=-d),n(d<=67108863,"Number is too big");var C=this.words[0]|0;R=C===d?0:C<d?-1:1}return this.negative!==0?-R|0:R},s.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var v=this.ucmp(d);return this.negative!==0?-v|0:v},s.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var v=0,R=this.length-1;R>=0;R--){var C=this.words[R]|0,x=d.words[R]|0;if(C!==x){C<x?v=-1:C>x&&(v=1);break}}return v},s.prototype.gtn=function(d){return this.cmpn(d)===1},s.prototype.gt=function(d){return this.cmp(d)===1},s.prototype.gten=function(d){return this.cmpn(d)>=0},s.prototype.gte=function(d){return this.cmp(d)>=0},s.prototype.ltn=function(d){return this.cmpn(d)===-1},s.prototype.lt=function(d){return this.cmp(d)===-1},s.prototype.lten=function(d){return this.cmpn(d)<=0},s.prototype.lte=function(d){return this.cmp(d)<=0},s.prototype.eqn=function(d){return this.cmpn(d)===0},s.prototype.eq=function(d){return this.cmp(d)===0},s.red=function(d){return new U(d)},s.prototype.toRed=function(d){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(d){return this.red=d,this},s.prototype.forceRed=function(d){return n(!this.red,"Already a number in reduction context"),this._forceRed(d)},s.prototype.redAdd=function(d){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},s.prototype.redIAdd=function(d){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},s.prototype.redSub=function(d){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},s.prototype.redISub=function(d){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},s.prototype.redShl=function(d){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},s.prototype.redMul=function(d){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},s.prototype.redIMul=function(d){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(d){return n(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var D={k256:null,p224:null,p192:null,p25519:null};function B(m,d){this.name=m,this.p=new s(d,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var d=new s(null);return d.words=new Array(Math.ceil(this.n/13)),d},B.prototype.ireduce=function(d){var v=d,R;do this.split(v,this.tmp),v=this.imulK(v),v=v.iadd(this.tmp),R=v.bitLength();while(R>this.n);var C=R<this.n?-1:v.ucmp(this.p);return C===0?(v.words[0]=0,v.length=1):C>0?v.isub(this.p):v.strip!==void 0?v.strip():v._strip(),v},B.prototype.split=function(d,v){d.iushrn(this.n,0,v)},B.prototype.imulK=function(d){return d.imul(this.k)};function j(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(j,B),j.prototype.split=function(d,v){for(var R=4194303,C=Math.min(d.length,9),x=0;x<C;x++)v.words[x]=d.words[x];if(v.length=C,d.length<=9){d.words[0]=0,d.length=1;return}var P=d.words[9];for(v.words[v.length++]=P&R,x=10;x<d.length;x++){var M=d.words[x]|0;d.words[x-10]=(M&R)<<4|P>>>22,P=M}P>>>=22,d.words[x-10]=P,P===0&&d.length>10?d.length-=10:d.length-=9},j.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var v=0,R=0;R<d.length;R++){var C=d.words[R]|0;v+=C*977,d.words[R]=v&67108863,v=C*64+(v/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function N(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(N,B);function F(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(F,B);function $(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,B),$.prototype.imulK=function(d){for(var v=0,R=0;R<d.length;R++){var C=(d.words[R]|0)*19+v,x=C&67108863;C>>>=26,d.words[R]=x,v=C}return v!==0&&(d.words[d.length++]=v),d},s._prime=function(d){if(D[d])return D[d];var v;if(d==="k256")v=new j;else if(d==="p224")v=new N;else if(d==="p192")v=new F;else if(d==="p25519")v=new $;else throw new Error("Unknown prime "+d);return D[d]=v,v};function U(m){if(typeof m=="string"){var d=s._prime(m);this.m=d.p,this.prime=d}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}U.prototype._verify1=function(d){n(d.negative===0,"red works only with positives"),n(d.red,"red works only with red numbers")},U.prototype._verify2=function(d,v){n((d.negative|v.negative)===0,"red works only with positives"),n(d.red&&d.red===v.red,"red works only with red numbers")},U.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):(f(d,d.umod(this.m)._forceRed(this)),d)},U.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},U.prototype.add=function(d,v){this._verify2(d,v);var R=d.add(v);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},U.prototype.iadd=function(d,v){this._verify2(d,v);var R=d.iadd(v);return R.cmp(this.m)>=0&&R.isub(this.m),R},U.prototype.sub=function(d,v){this._verify2(d,v);var R=d.sub(v);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},U.prototype.isub=function(d,v){this._verify2(d,v);var R=d.isub(v);return R.cmpn(0)<0&&R.iadd(this.m),R},U.prototype.shl=function(d,v){return this._verify1(d),this.imod(d.ushln(v))},U.prototype.imul=function(d,v){return this._verify2(d,v),this.imod(d.imul(v))},U.prototype.mul=function(d,v){return this._verify2(d,v),this.imod(d.mul(v))},U.prototype.isqr=function(d){return this.imul(d,d.clone())},U.prototype.sqr=function(d){return this.mul(d,d)},U.prototype.sqrt=function(d){if(d.isZero())return d.clone();var v=this.m.andln(3);if(n(v%2===1),v===3){var R=this.m.add(new s(1)).iushrn(2);return this.pow(d,R)}for(var C=this.m.subn(1),x=0;!C.isZero()&&C.andln(1)===0;)x++,C.iushrn(1);n(!C.isZero());var P=new s(1).toRed(this),M=P.redNeg(),O=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,O).cmp(M)!==0;)_.redIAdd(M);for(var L=this.pow(_,C),W=this.pow(d,C.addn(1).iushrn(1)),I=this.pow(d,C),z=x;I.cmp(P)!==0;){for(var q=I,J=0;q.cmp(P)!==0;J++)q=q.redSqr();n(J<z);var Q=this.pow(L,new s(1).iushln(z-J-1));W=W.redMul(Q),L=Q.redSqr(),I=I.redMul(L),z=J}return W},U.prototype.invm=function(d){var v=d._invmp(this.m);return v.negative!==0?(v.negative=0,this.imod(v).redNeg()):this.imod(v)},U.prototype.pow=function(d,v){if(v.isZero())return new s(1).toRed(this);if(v.cmpn(1)===0)return d.clone();var R=4,C=new Array(1<<R);C[0]=new s(1).toRed(this),C[1]=d;for(var x=2;x<C.length;x++)C[x]=this.mul(C[x-1],d);var P=C[0],M=0,O=0,_=v.bitLength()%26;for(_===0&&(_=26),x=v.length-1;x>=0;x--){for(var L=v.words[x],W=_-1;W>=0;W--){var I=L>>W&1;if(P!==C[0]&&(P=this.sqr(P)),I===0&&M===0){O=0;continue}M<<=1,M|=I,O++,!(O!==R&&(x!==0||W!==0))&&(P=this.mul(P,C[M]),O=0,M=0)}_=26}return P},U.prototype.convertTo=function(d){var v=d.umod(this.m);return v===d?v.clone():v},U.prototype.convertFrom=function(d){var v=d.clone();return v.red=null,v},s.mont=function(d){return new A(d)};function A(m){U.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(A,U),A.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},A.prototype.convertFrom=function(d){var v=this.imod(d.mul(this.rinv));return v.red=null,v},A.prototype.imul=function(d,v){if(d.isZero()||v.isZero())return d.words[0]=0,d.length=1,d;var R=d.imul(v),C=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=R.isub(C).iushrn(this.shift),P=x;return x.cmp(this.m)>=0?P=x.isub(this.m):x.cmpn(0)<0&&(P=x.iadd(this.m)),P._forceRed(this)},A.prototype.mul=function(d,v){if(d.isZero()||v.isZero())return new s(0)._forceRed(this);var R=d.mul(v),C=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=R.isub(C).iushrn(this.shift),P=x;return x.cmp(this.m)>=0?P=x.isub(this.m):x.cmpn(0)<0&&(P=x.iadd(this.m)),P._forceRed(this)},A.prototype.invm=function(d){var v=this.imod(d._invmp(this.m).mul(this.r2));return v._forceRed(this)}})(t,G)})(pg);var lR=pg.exports;const be=Na(lR),fR="logger/5.7.0";let C1=!1,T1=!1;const tu={debug:1,default:2,info:2,warning:3,error:4,off:5};let P1=tu.default,tp=null;function uR(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const I1=uR();var j0;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(j0||(j0={}));var Dn;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Dn||(Dn={}));const k1="0123456789abcdef";let H=class ir{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();tu[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(P1>tu[n])&&console.log.apply(console,r)}debug(...e){this._log(ir.levels.DEBUG,e)}info(...e){this._log(ir.levels.INFO,e)}warn(...e){this._log(ir.levels.WARNING,e)}makeError(e,r,n){if(T1)return this.makeError("censored error",r,{});r||(r=ir.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const l=n[c];try{if(l instanceof Uint8Array){let f="";for(let u=0;u<l.length;u++)f+=k1[l[u]>>4],f+=k1[l[u]&15];i.push(c+"=Uint8Array(0x"+f+")")}else i.push(c+"="+JSON.stringify(l))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case Dn.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Dn.CALL_EXCEPTION:case Dn.INSUFFICIENT_FUNDS:case Dn.MISSING_NEW:case Dn.NONCE_EXPIRED:case Dn.REPLACEMENT_UNDERPRICED:case Dn.TRANSACTION_REPLACED:case Dn.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(c){a[c]=n[c]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,ir.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){I1&&this.throwError("platform missing String.prototype.normalize",ir.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:I1})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,ir.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,ir.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,ir.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,ir.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",ir.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",ir.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ir.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return tp||(tp=new ir(fR)),tp}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",ir.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),C1){if(!e)return;this.globalLogger().throwError("error censorship permanent",ir.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}T1=!!e,C1=!!r}static setLogLevel(e){const r=tu[e.toLowerCase()];if(r==null){ir.globalLogger().warn("invalid log level - "+e);return}P1=r}static from(e){return new ir(e)}};H.errors=Dn;H.levels=j0;const dR="bytes/5.7.0",zt=new H(dR);function bS(t){return!!t.toHexString}function ha(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return ha(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function mg(t){return Ke(t)&&!(t.length%2)||Ba(t)}function D1(t){return typeof t=="number"&&t==t&&t%1===0}function Ba(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!D1(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!D1(r)||r<0||r>=256)return!1}return!0}function he(t,e){if(e||(e={}),typeof t=="number"){zt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),ha(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),bS(t)&&(t=t.toHexString()),Ke(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":zt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return ha(new Uint8Array(n))}return Ba(t)?ha(new Uint8Array(t)):zt.throwArgumentError("invalid arrayify value","value",t)}function tn(t){const e=t.map(i=>he(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),ha(n)}function Ra(t){let e=he(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function hR(t,e){t=he(t),t.length>e&&zt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),ha(r)}function Ke(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const rp="0123456789abcdef";function le(t,e){if(e||(e={}),typeof t=="number"){zt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=rp[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),bS(t))return t.toHexString();if(Ke(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":zt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Ba(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=rp[(i&240)>>4]+rp[i&15]}return r}return zt.throwArgumentError("invalid hexlify value","value",t)}function co(t){if(typeof t!="string")t=le(t);else if(!Ke(t)||t.length%2)return null;return(t.length-2)/2}function Tr(t,e,r){return typeof t!="string"?t=le(t):(!Ke(t)||t.length%2)&&zt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function zr(t){let e="0x";return t.forEach(r=>{e+=le(r).substring(2)}),e}function gg(t){const e=pR(le(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function pR(t){typeof t!="string"&&(t=le(t)),Ke(t)||zt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function Nt(t,e){for(typeof t!="string"?t=le(t):Ke(t)||zt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&zt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Id(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(mg(t)){let r=he(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=le(r.slice(0,32)),e.s=le(r.slice(32,64))):r.length===65?(e.r=le(r.slice(0,32)),e.s=le(r.slice(32,64)),e.v=r[64]):zt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:zt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=le(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=hR(he(e._vs),32);e._vs=le(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&zt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=le(i);e.s==null?e.s=o:e.s!==o&&zt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?zt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&zt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Ke(e.r)?zt.throwArgumentError("signature missing or invalid r","signature",t):e.r=Nt(e.r,32),e.s==null||!Ke(e.s)?zt.throwArgumentError("signature missing or invalid s","signature",t):e.s=Nt(e.s,32);const r=he(e.s);r[0]>=128&&zt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=le(r);e._vs&&(Ke(e._vs)||zt.throwArgumentError("signature invalid _vs","signature",t),e._vs=Nt(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&zt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const SS="bignumber/5.7.0";var qu=be.BN;const Ti=new H(SS),np={},O1=9007199254740991;function mR(t){return t!=null&&(Z.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||Ke(t)||typeof t=="bigint"||Ba(t))}let N1=!1;class Z{constructor(e,r){e!==np&&Ti.throwError("cannot call constructor directly; use BigNumber.from",H.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Fr(Ie(this).fromTwos(e))}toTwos(e){return Fr(Ie(this).toTwos(e))}abs(){return this._hex[0]==="-"?Z.from(this._hex.substring(1)):this}add(e){return Fr(Ie(this).add(Ie(e)))}sub(e){return Fr(Ie(this).sub(Ie(e)))}div(e){return Z.from(e).isZero()&&ln("division-by-zero","div"),Fr(Ie(this).div(Ie(e)))}mul(e){return Fr(Ie(this).mul(Ie(e)))}mod(e){const r=Ie(e);return r.isNeg()&&ln("division-by-zero","mod"),Fr(Ie(this).umod(r))}pow(e){const r=Ie(e);return r.isNeg()&&ln("negative-power","pow"),Fr(Ie(this).pow(r))}and(e){const r=Ie(e);return(this.isNegative()||r.isNeg())&&ln("unbound-bitwise-result","and"),Fr(Ie(this).and(r))}or(e){const r=Ie(e);return(this.isNegative()||r.isNeg())&&ln("unbound-bitwise-result","or"),Fr(Ie(this).or(r))}xor(e){const r=Ie(e);return(this.isNegative()||r.isNeg())&&ln("unbound-bitwise-result","xor"),Fr(Ie(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&ln("negative-width","mask"),Fr(Ie(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&ln("negative-width","shl"),Fr(Ie(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&ln("negative-width","shr"),Fr(Ie(this).shrn(e))}eq(e){return Ie(this).eq(Ie(e))}lt(e){return Ie(this).lt(Ie(e))}lte(e){return Ie(this).lte(Ie(e))}gt(e){return Ie(this).gt(Ie(e))}gte(e){return Ie(this).gte(Ie(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Ie(this).isZero()}toNumber(){try{return Ie(this).toNumber()}catch{ln("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Ti.throwError("this platform does not support BigInt",H.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?N1||(N1=!0,Ti.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Ti.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",H.errors.UNEXPECTED_ARGUMENT,{}):Ti.throwError("BigNumber.toString does not accept parameters",H.errors.UNEXPECTED_ARGUMENT,{})),Ie(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Z)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Z(np,ul(e)):e.match(/^-?[0-9]+$/)?new Z(np,ul(new qu(e))):Ti.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&ln("underflow","BigNumber.from",e),(e>=O1||e<=-O1)&&ln("overflow","BigNumber.from",e),Z.from(String(e));const r=e;if(typeof r=="bigint")return Z.from(r.toString());if(Ba(r))return Z.from(le(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return Z.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Ke(n)||n[0]==="-"&&Ke(n.substring(1))))return Z.from(n)}return Ti.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function ul(t){if(typeof t!="string")return ul(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Ti.throwArgumentError("invalid hex","value",t),t=ul(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Fr(t){return Z.from(ul(t))}function Ie(t){const e=Z.from(t).toHexString();return e[0]==="-"?new qu("-"+e.substring(3),16):new qu(e.substring(2),16)}function ln(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Ti.throwError(t,H.errors.NUMERIC_FAULT,n)}function gR(t){return new qu(t,36).toString(16)}const Nr=new H(SS),$c={},ES=Z.from(0),xS=Z.from(-1);function RS(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),Nr.throwError(t,H.errors.NUMERIC_FAULT,i)}let zc="0";for(;zc.length<256;)zc+=zc;function vg(t){if(typeof t!="number")try{t=Z.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+zc.substring(0,t):Nr.throwArgumentError("invalid decimal size","decimals",t)}function ip(t,e){e==null&&(e=0);const r=vg(e);t=Z.from(t);const n=t.lt(ES);n&&(t=t.mul(xS));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function Zn(t,e){e==null&&(e=0);const r=vg(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Nr.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Nr.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&Nr.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&RS("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const a=Z.from(s),c=Z.from(o);let l=a.mul(r).add(c);return n&&(l=l.mul(xS)),l}class pa{constructor(e,r,n,i){e!==$c&&Nr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",H.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=vg(i),Object.freeze(this)}static from(e){if(e instanceof pa)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Nr.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&Nr.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Nr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Nr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new pa($c,r,n,i)}}class yr{constructor(e,r,n,i){e!==$c&&Nr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",H.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Nr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=Zn(this._value,this.format.decimals),n=Zn(e._value,e.format.decimals);return yr.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=Zn(this._value,this.format.decimals),n=Zn(e._value,e.format.decimals);return yr.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=Zn(this._value,this.format.decimals),n=Zn(e._value,e.format.decimals);return yr.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=Zn(this._value,this.format.decimals),n=Zn(e._value,e.format.decimals);return yr.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=yr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(M1.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=yr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(M1.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Nr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=yr.from("1"+zc.substring(0,e),this.format),i=vR.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Nr.throwArgumentError("invalid byte width","width",e);const r=Z.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Nt(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return yr.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!mR(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),yr.fromString(ip(e,r),pa.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=pa.from(r),i=Zn(e,n.decimals);!n.signed&&i.lt(ES)&&RS("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=Nt(s,n.width/8));const o=ip(i,n.decimals);return new yr($c,s,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=pa.from(r);if(he(e).length>n.width/8)throw new Error("overflow");let i=Z.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=ip(i,n.decimals);return new yr($c,s,o,n)}static from(e,r){if(typeof e=="string")return yr.fromString(e,r);if(Ba(e))return yr.fromBytes(e,r);try{return yr.fromValue(e,0,r)}catch(n){if(n.code!==H.errors.INVALID_ARGUMENT)throw n}return Nr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const M1=yr.from(1),vR=yr.from("0.5"),yR="properties/5.7.0";var wR=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ju=new H(yR);function X(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function ci(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function Qt(t){return wR(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function _R(t,e){(!t||typeof t!="object")&&Ju.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Ju.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function lr(t){const e={};for(const r in t)e[r]=t[r];return e}const bR={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function AS(t){if(t==null||bR[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!AS(n))return!1}return!0}return Ju.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function SR(t){if(AS(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>zi(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&X(e,r,zi(n))}return e}return Ju.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function zi(t){return SR(t)}class Tl{constructor(e){for(const r in e)this[r]=zi(e[r])}}const Pl="abi/5.7.0",je=new H(Pl),lo={};let L1={calldata:!0,memory:!0,storage:!0},ER={calldata:!0,memory:!0};function df(t,e){if(t==="bytes"||t==="string"){if(L1[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&ER[e])return!0;return(L1[e]||e==="payable")&&je.throwArgumentError("invalid modifier","name",e),!1}function xR(t,e){let r=t;function n(a){je.throwArgumentError(`unexpected character at position ${a}`,"param",t)}t=t.replace(/\s/g," ");function i(a){let c={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<t.length;a++){let c=t[a];switch(c){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=Vo(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),df(o.type,o.name)&&(o.name=""),o.type=Vo(o.type);let l=o;o=o.parent,o||n(a),delete l.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),df(o.type,o.name)&&(o.name=""),o.type=Vo(o.type);let f=i(o.parent);o.parent.components.push(f),delete o.parent,o=f;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Vo(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):df(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=c,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=c,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=c,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=c,delete o.state.allowArray):o.state.readArray?o.type+=c:n(a)}}return o.parent&&je.throwArgumentError("unexpected eof","param",t),delete s.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):df(o.type,o.name)&&(o.name=""),s.type=Vo(s.type),s}function ru(t,e){for(let r in e)X(t,r,e[r])}const Je=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),RR=new RegExp(/^(.*)\[([0-9]*)\]$/);class mr{constructor(e,r){e!==lo&&je.throwError("use fromString",H.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),ru(this,r);let n=this.type.match(RR);n?ru(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:mr.fromObject({type:n[1],components:this.components}),baseType:"array"}):ru(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Je.sighash),Je[e]||je.throwArgumentError("invalid format type","format",e),e===Je.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Je.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===Je.full?", ":",")+")"):r+=this.type,e!==Je.sighash&&(this.indexed===!0&&(r+=" indexed"),e===Je.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?mr.fromString(e,r):mr.fromObject(e)}static fromObject(e){return mr.isParamType(e)?e:new mr(lo,{name:e.name||null,type:Vo(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(mr.fromObject):null})}static fromString(e,r){function n(i){return mr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(xR(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function dl(t,e){return CR(t).map(r=>mr.fromString(r,e))}class Mi{constructor(e,r){e!==lo&&je.throwError("use a static from method",H.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),ru(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return Mi.isFragment(e)?e:typeof e=="string"?Mi.fromString(e):Mi.fromObject(e)}static fromObject(e){if(Mi.isFragment(e))return e;switch(e.type){case"function":return ai.fromObject(e);case"event":return Di.fromObject(e);case"constructor":return oi.fromObject(e);case"error":return hs.fromObject(e);case"fallback":case"receive":return null}return je.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Di.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?ai.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?oi.fromString(e.trim()):e.split(" ")[0]==="error"?hs.fromString(e.substring(5).trim()):je.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Di extends Mi{format(e){if(e||(e=Je.sighash),Je[e]||je.throwArgumentError("invalid format type","format",e),e===Je.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Je.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Je.full?", ":",")+") ",e!==Je.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?Di.fromString(e):Di.fromObject(e)}static fromObject(e){if(Di.isEventFragment(e))return e;e.type!=="event"&&je.throwArgumentError("invalid event object","value",e);const r={name:hl(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(mr.fromObject):[],type:"event"};return new Di(lo,r)}static fromString(e){let r=e.match(pl);r||je.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:je.warn("unknown modifier: "+i)}}),Di.fromObject({name:r[1].trim(),anonymous:n,inputs:dl(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function CS(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&je.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||je.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=Z.from(r[1]),r[0]):t}function TS(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function PS(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&je.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&je.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&je.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&je.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&je.throwArgumentError("unable to determine stateMutability","value",t),e}class oi extends Mi{format(e){if(e||(e=Je.sighash),Je[e]||je.throwArgumentError("invalid format type","format",e),e===Je.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Je.sighash&&je.throwError("cannot format a constructor for sighash",H.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===Je.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?oi.fromString(e):oi.fromObject(e)}static fromObject(e){if(oi.isConstructorFragment(e))return e;e.type!=="constructor"&&je.throwArgumentError("invalid constructor object","value",e);let r=PS(e);r.constant&&je.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(mr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Z.from(e.gas):null};return new oi(lo,n)}static fromString(e){let r={type:"constructor"};e=CS(e,r);let n=e.match(pl);return(!n||n[1].trim()!=="constructor")&&je.throwArgumentError("invalid constructor string","value",e),r.inputs=dl(n[2].trim(),!1),TS(n[3].trim(),r),oi.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class ai extends oi{format(e){if(e||(e=Je.sighash),Je[e]||je.throwArgumentError("invalid format type","format",e),e===Je.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Je.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Je.full?", ":",")+") ",e!==Je.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?ai.fromString(e):ai.fromObject(e)}static fromObject(e){if(ai.isFunctionFragment(e))return e;e.type!=="function"&&je.throwArgumentError("invalid function object","value",e);let r=PS(e);const n={type:e.type,name:hl(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(mr.fromObject):[],outputs:e.outputs?e.outputs.map(mr.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?Z.from(e.gas):null};return new ai(lo,n)}static fromString(e){let r={type:"function"};e=CS(e,r);let n=e.split(" returns ");n.length>2&&je.throwArgumentError("invalid function string","value",e);let i=n[0].match(pl);if(i||je.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&hl(r.name),r.inputs=dl(i[2],!1),TS(i[3].trim(),r),n.length>1){let s=n[1].match(pl);(s[1].trim()!=""||s[3].trim()!="")&&je.throwArgumentError("unexpected tokens","value",e),r.outputs=dl(s[2],!1)}else r.outputs=[];return ai.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function j1(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&je.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class hs extends Mi{format(e){if(e||(e=Je.sighash),Je[e]||je.throwArgumentError("invalid format type","format",e),e===Je.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Je.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Je.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?hs.fromString(e):hs.fromObject(e)}static fromObject(e){if(hs.isErrorFragment(e))return e;e.type!=="error"&&je.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:hl(e.name),inputs:e.inputs?e.inputs.map(mr.fromObject):[]};return j1(new hs(lo,r))}static fromString(e){let r={type:"error"},n=e.match(pl);return n||je.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&hl(r.name),r.inputs=dl(n[2],!1),j1(hs.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Vo(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const AR=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function hl(t){return(!t||!t.match(AR))&&je.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const pl=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function CR(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&je.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const yg=new H(Pl);function TR(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{r(o,i[s])}catch(a){e.push({path:o,error:a})}}};return r([],t),e}class Ji{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){yg.throwArgumentError(e,this.localName,r)}}class B0{constructor(e){X(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return zr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(tn(e._data))}writeBytes(e){let r=he(e);const n=r.length%this.wordSize;return n&&(r=tn([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=he(Z.from(e));return r.length>this.wordSize&&yg.throwError("value out-of-bounds",H.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=tn([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Ku{constructor(e,r,n,i){X(this,"_data",he(e)),X(this,"wordSize",r||32),X(this,"_coerceFunc",n),X(this,"allowLoose",i),this._offset=0}get data(){return le(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Ku.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:yg.throwError("data out-of-bounds",H.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Ku(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return Z.from(this.readBytes(this.wordSize))}}var IS={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=G:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),f=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],h=[1,256,65536,16777216],g=[6,1536,393216,100663296],p=[0,8,16,24],y=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],b=[224,256,384,512],S=[128,256],E=["hex","buffer","arrayBuffer","array","digest"],w={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(I){return Object.prototype.toString.call(I)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(I){return typeof I=="object"&&I.buffer&&I.buffer.constructor===ArrayBuffer});for(var T=function(I,z,q){return function(J){return new _(I,z,I).update(J)[q]()}},D=function(I,z,q){return function(J,Q){return new _(I,z,Q).update(J)[q]()}},B=function(I,z,q){return function(J,Q,ce,re){return d["cshake"+I].update(J,Q,ce,re)[q]()}},j=function(I,z,q){return function(J,Q,ce,re){return d["kmac"+I].update(J,Q,ce,re)[q]()}},N=function(I,z,q,J){for(var Q=0;Q<E.length;++Q){var ce=E[Q];I[ce]=z(q,J,ce)}return I},F=function(I,z){var q=T(I,z,"hex");return q.create=function(){return new _(I,z,I)},q.update=function(J){return q.create().update(J)},N(q,T,I,z)},$=function(I,z){var q=D(I,z,"hex");return q.create=function(J){return new _(I,z,J)},q.update=function(J,Q){return q.create(Q).update(J)},N(q,D,I,z)},U=function(I,z){var q=w[I],J=B(I,z,"hex");return J.create=function(Q,ce,re){return!ce&&!re?d["shake"+I].create(Q):new _(I,z,Q).bytepad([ce,re],q)},J.update=function(Q,ce,re,ee){return J.create(ce,re,ee).update(Q)},N(J,B,I,z)},A=function(I,z){var q=w[I],J=j(I,z,"hex");return J.create=function(Q,ce,re){return new L(I,z,ce).bytepad(["KMAC",re],q).bytepad([Q],q)},J.update=function(Q,ce,re,ee){return J.create(Q,re,ee).update(ce)},N(J,j,I,z)},m=[{name:"keccak",padding:h,bits:b,createMethod:F},{name:"sha3",padding:g,bits:b,createMethod:F},{name:"shake",padding:f,bits:S,createMethod:$},{name:"cshake",padding:u,bits:S,createMethod:U},{name:"kmac",padding:u,bits:S,createMethod:A}],d={},v=[],R=0;R<m.length;++R)for(var C=m[R],x=C.bits,P=0;P<x.length;++P){var M=C.name+"_"+x[P];if(v.push(M),d[M]=C.createMethod(x[P],C.padding),C.name!=="sha3"){var O=C.name+x[P];v.push(O),d[O]=d[M]}}function _(I,z,q){this.blocks=[],this.s=[],this.padding=z,this.outputBits=q,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(I<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=q>>5,this.extraBytes=(q&31)>>3;for(var J=0;J<50;++J)this.s[J]=0}_.prototype.update=function(I){if(this.finalized)throw new Error(r);var z,q=typeof I;if(q!=="string"){if(q==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);z=!0}for(var J=this.blocks,Q=this.byteCount,ce=I.length,re=this.blockCount,ee=0,et=this.s,ne,ye;ee<ce;){if(this.reset)for(this.reset=!1,J[0]=this.block,ne=1;ne<re+1;++ne)J[ne]=0;if(z)for(ne=this.start;ee<ce&&ne<Q;++ee)J[ne>>2]|=I[ee]<<p[ne++&3];else for(ne=this.start;ee<ce&&ne<Q;++ee)ye=I.charCodeAt(ee),ye<128?J[ne>>2]|=ye<<p[ne++&3]:ye<2048?(J[ne>>2]|=(192|ye>>6)<<p[ne++&3],J[ne>>2]|=(128|ye&63)<<p[ne++&3]):ye<55296||ye>=57344?(J[ne>>2]|=(224|ye>>12)<<p[ne++&3],J[ne>>2]|=(128|ye>>6&63)<<p[ne++&3],J[ne>>2]|=(128|ye&63)<<p[ne++&3]):(ye=65536+((ye&1023)<<10|I.charCodeAt(++ee)&1023),J[ne>>2]|=(240|ye>>18)<<p[ne++&3],J[ne>>2]|=(128|ye>>12&63)<<p[ne++&3],J[ne>>2]|=(128|ye>>6&63)<<p[ne++&3],J[ne>>2]|=(128|ye&63)<<p[ne++&3]);if(this.lastByteIndex=ne,ne>=Q){for(this.start=ne-Q,this.block=J[re],ne=0;ne<re;++ne)et[ne]^=J[ne];W(et),this.reset=!0}else this.start=ne}return this},_.prototype.encode=function(I,z){var q=I&255,J=1,Q=[q];for(I=I>>8,q=I&255;q>0;)Q.unshift(q),I=I>>8,q=I&255,++J;return z?Q.push(J):Q.unshift(J),this.update(Q),Q.length},_.prototype.encodeString=function(I){var z,q=typeof I;if(q!=="string"){if(q==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);z=!0}var J=0,Q=I.length;if(z)J=Q;else for(var ce=0;ce<I.length;++ce){var re=I.charCodeAt(ce);re<128?J+=1:re<2048?J+=2:re<55296||re>=57344?J+=3:(re=65536+((re&1023)<<10|I.charCodeAt(++ce)&1023),J+=4)}return J+=this.encode(J*8),this.update(I),J},_.prototype.bytepad=function(I,z){for(var q=this.encode(z),J=0;J<I.length;++J)q+=this.encodeString(I[J]);var Q=z-q%z,ce=[];return ce.length=Q,this.update(ce),this},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var I=this.blocks,z=this.lastByteIndex,q=this.blockCount,J=this.s;if(I[z>>2]|=this.padding[z&3],this.lastByteIndex===this.byteCount)for(I[0]=I[q],z=1;z<q+1;++z)I[z]=0;for(I[q-1]|=2147483648,z=0;z<q;++z)J[z]^=I[z];W(J)}},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var I=this.blockCount,z=this.s,q=this.outputBlocks,J=this.extraBytes,Q=0,ce=0,re="",ee;ce<q;){for(Q=0;Q<I&&ce<q;++Q,++ce)ee=z[Q],re+=l[ee>>4&15]+l[ee&15]+l[ee>>12&15]+l[ee>>8&15]+l[ee>>20&15]+l[ee>>16&15]+l[ee>>28&15]+l[ee>>24&15];ce%I===0&&(W(z),Q=0)}return J&&(ee=z[Q],re+=l[ee>>4&15]+l[ee&15],J>1&&(re+=l[ee>>12&15]+l[ee>>8&15]),J>2&&(re+=l[ee>>20&15]+l[ee>>16&15])),re},_.prototype.arrayBuffer=function(){this.finalize();var I=this.blockCount,z=this.s,q=this.outputBlocks,J=this.extraBytes,Q=0,ce=0,re=this.outputBits>>3,ee;J?ee=new ArrayBuffer(q+1<<2):ee=new ArrayBuffer(re);for(var et=new Uint32Array(ee);ce<q;){for(Q=0;Q<I&&ce<q;++Q,++ce)et[ce]=z[Q];ce%I===0&&W(z)}return J&&(et[Q]=z[Q],ee=ee.slice(0,re)),ee},_.prototype.buffer=_.prototype.arrayBuffer,_.prototype.digest=_.prototype.array=function(){this.finalize();for(var I=this.blockCount,z=this.s,q=this.outputBlocks,J=this.extraBytes,Q=0,ce=0,re=[],ee,et;ce<q;){for(Q=0;Q<I&&ce<q;++Q,++ce)ee=ce<<2,et=z[Q],re[ee]=et&255,re[ee+1]=et>>8&255,re[ee+2]=et>>16&255,re[ee+3]=et>>24&255;ce%I===0&&W(z)}return J&&(ee=ce<<2,et=z[Q],re[ee]=et&255,J>1&&(re[ee+1]=et>>8&255),J>2&&(re[ee+2]=et>>16&255)),re};function L(I,z,q){_.call(this,I,z,q)}L.prototype=new _,L.prototype.finalize=function(){return this.encode(this.outputBits,!0),_.prototype.finalize.call(this)};var W=function(I){var z,q,J,Q,ce,re,ee,et,ne,ye,Rn,We,tt,Ri,nt,it,rr,He,Qe,_e,ue,se,Be,Fe,Te,Re,ie,Pe,An,st,ft,Fs,ut,dt,Us,ht,pt,$s,mt,gt,zs,vt,yt,Vs,wt,_t,Hs,bt,St,Gs,Et,xt,qs,Rt,At,Js,Ct,Tt,Wi,Yi,Qi,Xi,Zi;for(J=0;J<48;J+=2)Q=I[0]^I[10]^I[20]^I[30]^I[40],ce=I[1]^I[11]^I[21]^I[31]^I[41],re=I[2]^I[12]^I[22]^I[32]^I[42],ee=I[3]^I[13]^I[23]^I[33]^I[43],et=I[4]^I[14]^I[24]^I[34]^I[44],ne=I[5]^I[15]^I[25]^I[35]^I[45],ye=I[6]^I[16]^I[26]^I[36]^I[46],Rn=I[7]^I[17]^I[27]^I[37]^I[47],We=I[8]^I[18]^I[28]^I[38]^I[48],tt=I[9]^I[19]^I[29]^I[39]^I[49],z=We^(re<<1|ee>>>31),q=tt^(ee<<1|re>>>31),I[0]^=z,I[1]^=q,I[10]^=z,I[11]^=q,I[20]^=z,I[21]^=q,I[30]^=z,I[31]^=q,I[40]^=z,I[41]^=q,z=Q^(et<<1|ne>>>31),q=ce^(ne<<1|et>>>31),I[2]^=z,I[3]^=q,I[12]^=z,I[13]^=q,I[22]^=z,I[23]^=q,I[32]^=z,I[33]^=q,I[42]^=z,I[43]^=q,z=re^(ye<<1|Rn>>>31),q=ee^(Rn<<1|ye>>>31),I[4]^=z,I[5]^=q,I[14]^=z,I[15]^=q,I[24]^=z,I[25]^=q,I[34]^=z,I[35]^=q,I[44]^=z,I[45]^=q,z=et^(We<<1|tt>>>31),q=ne^(tt<<1|We>>>31),I[6]^=z,I[7]^=q,I[16]^=z,I[17]^=q,I[26]^=z,I[27]^=q,I[36]^=z,I[37]^=q,I[46]^=z,I[47]^=q,z=ye^(Q<<1|ce>>>31),q=Rn^(ce<<1|Q>>>31),I[8]^=z,I[9]^=q,I[18]^=z,I[19]^=q,I[28]^=z,I[29]^=q,I[38]^=z,I[39]^=q,I[48]^=z,I[49]^=q,Ri=I[0],nt=I[1],_t=I[11]<<4|I[10]>>>28,Hs=I[10]<<4|I[11]>>>28,Pe=I[20]<<3|I[21]>>>29,An=I[21]<<3|I[20]>>>29,Yi=I[31]<<9|I[30]>>>23,Qi=I[30]<<9|I[31]>>>23,vt=I[40]<<18|I[41]>>>14,yt=I[41]<<18|I[40]>>>14,dt=I[2]<<1|I[3]>>>31,Us=I[3]<<1|I[2]>>>31,it=I[13]<<12|I[12]>>>20,rr=I[12]<<12|I[13]>>>20,bt=I[22]<<10|I[23]>>>22,St=I[23]<<10|I[22]>>>22,st=I[33]<<13|I[32]>>>19,ft=I[32]<<13|I[33]>>>19,Xi=I[42]<<2|I[43]>>>30,Zi=I[43]<<2|I[42]>>>30,Rt=I[5]<<30|I[4]>>>2,At=I[4]<<30|I[5]>>>2,ht=I[14]<<6|I[15]>>>26,pt=I[15]<<6|I[14]>>>26,He=I[25]<<11|I[24]>>>21,Qe=I[24]<<11|I[25]>>>21,Gs=I[34]<<15|I[35]>>>17,Et=I[35]<<15|I[34]>>>17,Fs=I[45]<<29|I[44]>>>3,ut=I[44]<<29|I[45]>>>3,Fe=I[6]<<28|I[7]>>>4,Te=I[7]<<28|I[6]>>>4,Js=I[17]<<23|I[16]>>>9,Ct=I[16]<<23|I[17]>>>9,$s=I[26]<<25|I[27]>>>7,mt=I[27]<<25|I[26]>>>7,_e=I[36]<<21|I[37]>>>11,ue=I[37]<<21|I[36]>>>11,xt=I[47]<<24|I[46]>>>8,qs=I[46]<<24|I[47]>>>8,Vs=I[8]<<27|I[9]>>>5,wt=I[9]<<27|I[8]>>>5,Re=I[18]<<20|I[19]>>>12,ie=I[19]<<20|I[18]>>>12,Tt=I[29]<<7|I[28]>>>25,Wi=I[28]<<7|I[29]>>>25,gt=I[38]<<8|I[39]>>>24,zs=I[39]<<8|I[38]>>>24,se=I[48]<<14|I[49]>>>18,Be=I[49]<<14|I[48]>>>18,I[0]=Ri^~it&He,I[1]=nt^~rr&Qe,I[10]=Fe^~Re&Pe,I[11]=Te^~ie&An,I[20]=dt^~ht&$s,I[21]=Us^~pt&mt,I[30]=Vs^~_t&bt,I[31]=wt^~Hs&St,I[40]=Rt^~Js&Tt,I[41]=At^~Ct&Wi,I[2]=it^~He&_e,I[3]=rr^~Qe&ue,I[12]=Re^~Pe&st,I[13]=ie^~An&ft,I[22]=ht^~$s&gt,I[23]=pt^~mt&zs,I[32]=_t^~bt&Gs,I[33]=Hs^~St&Et,I[42]=Js^~Tt&Yi,I[43]=Ct^~Wi&Qi,I[4]=He^~_e&se,I[5]=Qe^~ue&Be,I[14]=Pe^~st&Fs,I[15]=An^~ft&ut,I[24]=$s^~gt&vt,I[25]=mt^~zs&yt,I[34]=bt^~Gs&xt,I[35]=St^~Et&qs,I[44]=Tt^~Yi&Xi,I[45]=Wi^~Qi&Zi,I[6]=_e^~se&Ri,I[7]=ue^~Be&nt,I[16]=st^~Fs&Fe,I[17]=ft^~ut&Te,I[26]=gt^~vt&dt,I[27]=zs^~yt&Us,I[36]=Gs^~xt&Vs,I[37]=Et^~qs&wt,I[46]=Yi^~Xi&Rt,I[47]=Qi^~Zi&At,I[8]=se^~Ri&it,I[9]=Be^~nt&rr,I[18]=Fs^~Fe&Re,I[19]=ut^~Te&ie,I[28]=vt^~dt&ht,I[29]=yt^~Us&pt,I[38]=xt^~Vs&_t,I[39]=qs^~wt&Hs,I[48]=Xi^~Rt&Js,I[49]=Zi^~At&Ct,I[0]^=y[J],I[1]^=y[J+1]};if(a)t.exports=d;else for(R=0;R<v.length;++R)i[v[R]]=d[v[R]]})()})(IS);var PR=IS.exports;const IR=Na(PR);function ar(t){return"0x"+IR.keccak_256(he(t))}const kR="rlp/5.7.0",ni=new H(kR);function B1(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function F1(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function kS(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(kS(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=B1(n.length);return i.unshift(247+i.length),i.concat(n)}mg(t)||ni.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(he(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=B1(e.length);return r.unshift(183+r.length),r.concat(e)}function kd(t){return le(kS(t))}function U1(t,e,r,n){const i=[];for(;r<e+1+n;){const s=DS(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&ni.throwError("child data too short",H.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function DS(t,e){if(t.length===0&&ni.throwError("data too short",H.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&ni.throwError("data short segment too short",H.errors.BUFFER_OVERRUN,{});const n=F1(t,e+1,r);return e+1+r+n>t.length&&ni.throwError("data long segment too short",H.errors.BUFFER_OVERRUN,{}),U1(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&ni.throwError("data array too short",H.errors.BUFFER_OVERRUN,{}),U1(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&ni.throwError("data array too short",H.errors.BUFFER_OVERRUN,{});const n=F1(t,e+1,r);e+1+r+n>t.length&&ni.throwError("data array too short",H.errors.BUFFER_OVERRUN,{});const i=le(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&ni.throwError("data too short",H.errors.BUFFER_OVERRUN,{});const n=le(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:le(t[e])}}function wg(t){const e=he(t),r=DS(e,0);return r.consumed!==e.length&&ni.throwArgumentError("invalid rlp data","data",t),r.result}const DR="address/5.7.0",ia=new H(DR);function $1(t){Ke(t,20)||ia.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=he(ar(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const OR=9007199254740991;function NR(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const _g={};for(let t=0;t<10;t++)_g[String(t)]=String(t);for(let t=0;t<26;t++)_g[String.fromCharCode(65+t)]=String(10+t);const z1=Math.floor(NR(OR));function MR(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>_g[n]).join("");for(;e.length>=z1;){let n=e.substring(0,z1);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Er(t){let e=null;if(typeof t!="string"&&ia.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=$1(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&ia.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==MR(t)&&ia.throwArgumentError("bad icap checksum","address",t),e=gR(t.substring(4));e.length<40;)e="0"+e;e=$1("0x"+e)}else ia.throwArgumentError("invalid address","address",t);return e}function OS(t){let e=null;try{e=Er(t.from)}catch{ia.throwArgumentError("missing from address","transaction",t)}const r=Ra(he(Z.from(t.nonce).toHexString()));return Er(Tr(ar(kd([e,r])),12))}class LR extends Ji{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Er(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Er(Nt(e.readValue().toHexString(),20))}}class jR extends Ji{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const sa=new H(Pl);function NS(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(l=>{const f=l.localName;return f||sa.throwError("cannot encode object for signature with missing names",H.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:r}),c[f]&&sa.throwError("cannot encode object for signature with duplicate names",H.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:r}),c[f]=!0,r[f]})}else sa.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&sa.throwArgumentError("types/value length mismatch","tuple",r);let i=new B0(t.wordSize),s=new B0(t.wordSize),o=[];e.forEach((c,l)=>{let f=n[l];if(c.dynamic){let u=s.length;c.encode(s,f);let h=i.writeUpdatableValue();o.push(g=>{h(g+u)})}else c.encode(i,f)}),o.forEach(c=>{c(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function MS(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readValue(),c=n.subReader(a.toNumber());try{o=s.decode(c)}catch(l){if(l.code===H.errors.BUFFER_OVERRUN)throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(a.code===H.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&r.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),r[a]!=null))return;const c=r[o];c instanceof Error?Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw c}}):r[a]=c});for(let s=0;s<r.length;s++){const o=r[s];o instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class BR extends Ji{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),sa.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return NS(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&sa.throwError("insufficient data length",H.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new jR(this.coder));return e.coerce(this.name,MS(e,n))}}class FR extends Ji{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class LS extends Ji{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=he(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class UR extends LS{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,le(super.decode(e)))}}class $R extends Ji{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=he(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,le(e.readBytes(this.size)))}}class zR extends Ji{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const VR="0x0000000000000000000000000000000000000000",HR=Z.from(-1),jS=Z.from(0),GR=Z.from(1),qR=Z.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),JR="0x0000000000000000000000000000000000000000000000000000000000000000";class KR extends Ji{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=Z.from(r),i=qR.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(GR).mul(HR)))&&this._throwError("value out-of-bounds",r)}else(n.lt(jS)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const WR="strings/5.7.0",BS=new H(WR);var ml;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(ml||(ml={}));var Xr;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Xr||(Xr={}));function YR(t,e,r,n,i){return BS.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function FS(t,e,r,n,i){if(t===Xr.BAD_PREFIX||t===Xr.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===Xr.OVERRUN?r.length-e-1:0}function QR(t,e,r,n,i){return t===Xr.OVERLONG?(n.push(i),0):(n.push(65533),FS(t,e,r))}const XR=Object.freeze({error:YR,ignore:FS,replace:QR});function US(t,e){e==null&&(e=XR.error),t=he(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(!(i>>7)){r.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(Xr.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(Xr.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(Xr.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let l=t[n];if((l&192)!=128){n+=e(Xr.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|l&63,n++}if(a!==null){if(a>1114111){n+=e(Xr.OUT_OF_RANGE,n-1-s,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(Xr.UTF16_SURROGATE,n-1-s,t,r,a);continue}if(a<=o){n+=e(Xr.OVERLONG,n-1-s,t,r,a);continue}r.push(a)}}return r}function gi(t,e=ml.current){e!=ml.current&&(BS.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return he(r)}function ZR(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Il(t,e){return ZR(US(t,e))}function eA(t,e=ml.current){return US(gi(t,e))}class tA extends LS{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,gi(r))}decode(e){return Il(super.decode(e))}}class hf extends Ji{constructor(e,r){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return NS(e,this.coders,r)}decode(e){return e.coerce(this.name,MS(e,this.coders))}}const pf=new H(Pl),rA=new RegExp(/^bytes([0-9]*)$/),nA=new RegExp(/^(u?int)([0-9]*)$/);class iA{constructor(e){X(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new LR(e.name);case"bool":return new FR(e.name);case"string":return new tA(e.name);case"bytes":return new UR(e.name);case"array":return new BR(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new hf((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new zR(e.name)}let r=e.type.match(nA);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&pf.throwArgumentError("invalid "+r[1]+" bit length","param",e),new KR(n/8,r[1]==="int",e.name)}if(r=e.type.match(rA),r){let n=parseInt(r[1]);return(n===0||n>32)&&pf.throwArgumentError("invalid bytes length","param",e),new $R(n,e.name)}return pf.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Ku(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new B0(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(mr.from(i)));return new hf(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&pf.throwError("types/values length mismatch",H.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(mr.from(o))),i=new hf(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(o=>this._getCoder(mr.from(o)));return new hf(i,"_").decode(this._getReader(he(r),n))}}const sA=new iA;function oa(t){return ar(gi(t))}const $S="hash/5.7.0";function zS(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return he(e)}function VS(t){t=he(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function HS(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):r.push(a)})};return i(t,e),r}function oA(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function aA(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let D=1;D<n;D++)s.push(i+=r());let o=r(),a=e;e+=o;let c=0,l=0;function f(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const u=31,h=Math.pow(2,u),g=h>>>1,p=g>>1,y=h-1;let b=0;for(let D=0;D<u;D++)b=b<<1|f();let S=[],E=0,w=h;for(;;){let D=Math.floor(((b-E+1)*i-1)/w),B=0,j=n;for(;j-B>1;){let $=B+j>>>1;D<s[$]?j=$:B=$}if(B==0)break;S.push(B);let N=E+Math.floor(w*s[B]/i),F=E+Math.floor(w*s[B+1]/i)-1;for(;!((N^F)&g);)b=b<<1&y|f(),N=N<<1&y,F=F<<1&y|1;for(;N&~F&p;)b=b&g|b<<1&y>>>1|f(),N=N<<1^g,F=(F^g)<<1|g|1;E=N,w=1+F-N}let T=n-4;return S.map(D=>{switch(D-T){case 3:return T+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return T+256+(t[a++]<<8|t[a++]);case 1:return T+t[a++];default:return D-1}})}function cA(t){let e=0;return()=>t[e++]}function lA(t){return cA(aA(t))}function fA(t){return t&1?~t>>1:t>>1}function uA(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function V1(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function dA(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=fA(e());return r}function Wu(t,e){let r=V1(t(),t),n=t(),i=V1(n,t),s=uA(n,t);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)r.push(i[o]+a);return e?r.map(o=>e[o]):r}function hA(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(mA(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(gA(r,t))}return oA(HS(e))}function pA(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function GS(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)dA(t,r).forEach((s,o)=>n[o].push(s));return n}function mA(t,e){let r=1+e(),n=e(),i=pA(e),s=GS(i.length,1+t,e);return HS(s.map((o,a)=>{const c=o[0],l=o.slice(1);return Array(i[a]).fill(void 0).map((f,u)=>{let h=u*n;return[c+u*r,l.map(g=>g+h)]})}))}function gA(t,e){let r=1+e();return GS(r,1+t,e).map(i=>[i[0],i.slice(1)])}function vA(t){let e=Wu(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let l=Wu(t,e);if(l.length==0)break;n.push({set:new Set(l),node:r()})}n.sort((l,f)=>f.set.size-l.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,c=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:c}}}function yA(){return lA(zS("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Dd=yA(),wA=new Set(Wu(Dd)),_A=new Set(Wu(Dd)),bA=hA(Dd),SA=vA(Dd),H1=45,G1=95;function qS(t){return eA(t)}function EA(t){return t.filter(e=>e!=65039)}function JS(t){for(let e of t.split(".")){let r=qS(e);try{for(let n=r.lastIndexOf(G1)-1;n>=0;n--)if(r[n]!==G1)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===H1&&r[3]===H1)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function xA(t){return JS(RA(t,EA))}function RA(t,e){let r=qS(t).reverse(),n=[];for(;r.length;){let i=CA(r);if(i){n.push(...e(i));continue}let s=r.pop();if(wA.has(s)){n.push(s);continue}if(_A.has(s))continue;let o=bA[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return JS(AA(String.fromCodePoint(...n)))}function AA(t){return t.normalize("NFC")}function CA(t,e){var r;let n=SA,i,s,o=[],a=t.length;for(e&&(e.length=0);a;){let c=t[--a];if(n=(r=n.branches.find(l=>l.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=c;else if(n.check&&c===s)break;o.push(c),n.fe0f&&(o.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(a).reverse()),t.length=a)}return i}const TA=new H($S),KS=new Uint8Array(32);KS.fill(0);function q1(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function WS(t){const e=gi(xA(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(q1(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(q1(e.slice(n))),r}function nu(t){typeof t!="string"&&TA.throwArgumentError("invalid ENS name; not a string","name",t);let e=KS;const r=WS(t);for(;r.length;)e=ar(tn([e,ar(r.pop())]));return le(e)}function PA(t){return le(tn(WS(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}var IA=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const jt=new H($S),YS=new Uint8Array(32);YS.fill(0);const kA=Z.from(-1),QS=Z.from(0),XS=Z.from(1),DA=Z.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function OA(t){const e=he(t),r=e.length%32;return r?zr([e,YS.slice(r)]):le(e)}const NA=Nt(XS.toHexString(),32),MA=Nt(QS.toHexString(),32),J1={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},sp=["name","version","chainId","verifyingContract","salt"];function K1(t){return function(e){return typeof e!="string"&&jt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const LA={name:K1("name"),version:K1("version"),chainId:function(t){try{return Z.from(t).toString()}catch{}return jt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Er(t).toLowerCase()}catch{}return jt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=he(t);if(e.length!==32)throw new Error("bad length");return le(e)}catch{}return jt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function op(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&jt.throwArgumentError("invalid numeric width","type",t);const i=DA.mask(r?n-1:n),s=r?i.add(XS).mul(kA):QS;return function(o){const a=Z.from(o);return(a.lt(s)||a.gt(i))&&jt.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),Nt(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&jt.throwArgumentError("invalid bytes width","type",t),function(n){return he(n).length!==r&&jt.throwArgumentError(`invalid length for ${t}`,"value",n),OA(n)}}}switch(t){case"address":return function(e){return Nt(Er(e),32)};case"bool":return function(e){return e?NA:MA};case"bytes":return function(e){return ar(e)};case"string":return function(e){return oa(e)}}return null}function W1(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Yr{constructor(e){X(this,"types",Object.freeze(zi(e))),X(this,"_encoderCache",{}),X(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],i[a]={}});for(const a in e){const c={};e[a].forEach(l=>{c[l.name]&&jt.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),c[l.name]=!0;const f=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];f===a&&jt.throwArgumentError(`circular type reference to ${JSON.stringify(f)}`,"types",e),!op(f)&&(n[f]||jt.throwArgumentError(`unknown type ${JSON.stringify(f)}`,"types",e),n[f].push(a),r[a][f]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?jt.throwArgumentError("missing primary type","types",e):s.length>1&&jt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),X(this,"primaryType",s[0]);function o(a,c){c[a]&&jt.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(r[a]).forEach(l=>{n[l]&&(o(l,c),Object.keys(c).forEach(f=>{i[f][l]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in i){const c=Object.keys(i[a]);c.sort(),this._types[a]=W1(a,e[a])+c.map(l=>W1(l,e[l])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=op(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),o=parseInt(r[3]);return a=>{o>=0&&a.length!==o&&jt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(s);return this._types[i]&&(c=c.map(ar)),ar(zr(c))}}const n=this.types[e];if(n){const i=oa(this._types[e]);return s=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(s[a]);return this._types[c]?ar(l):l});return o.unshift(i),zr(o)}}return jt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||jt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return ar(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(op(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&r.length!==a&&jt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(o,c,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{}):jt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Yr(e)}static getPrimaryType(e){return Yr.from(e).primaryType}static hashStruct(e,r,n){return Yr.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=J1[n];i||jt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>sp.indexOf(n.name)-sp.indexOf(i.name)),Yr.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return zr(["0x1901",Yr.hashDomain(e),Yr.from(r).hash(n)])}static hash(e,r,n){return ar(Yr.encode(e,r,n))}static resolveNames(e,r,n,i){return IA(this,void 0,void 0,function*(){e=lr(e);const s={};e.verifyingContract&&!Ke(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Yr.from(r);o.visit(n,(a,c)=>(a==="address"&&!Ke(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){Yr.hashDomain(e);const i={},s=[];sp.forEach(c=>{const l=e[c];l!=null&&(i[c]=LA[c](l),s.push({name:c,type:J1[c]}))});const o=Yr.from(r),a=lr(r);return a.EIP712Domain?jt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return le(he(l));if(c.match(/^u?int/))return Z.from(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return typeof l!="string"&&jt.throwArgumentError("invalid string","value",l),l}return jt.throwArgumentError("unsupported type","type",c)})}}}const Mt=new H(Pl);class jA extends Tl{}class BA extends Tl{}class FA extends Tl{}class F0 extends Tl{static isIndexed(e){return!!(e&&e._isIndexed)}}const UA={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Y1(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class Q1{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,X(this,"fragments",r.map(n=>Mi.from(n)).filter(n=>n!=null)),X(this,"_abiCoder",ci(new.target,"getAbiCoder")()),X(this,"functions",{}),X(this,"errors",{}),X(this,"events",{}),X(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Mt.warn("duplicate definition - constructor");return}X(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Mt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||X(this,"deploy",oi.from({payable:!1,type:"constructor"})),X(this,"_isInterface",!0)}format(e){e||(e=Je.full),e===Je.sighash&&Mt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===Je.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return sA}static getAddress(e){return Er(e)}static getSighash(e){return Tr(oa(e.format()),0,4)}static getEventTopic(e){return oa(e.format())}getFunction(e){if(Ke(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Mt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Mt.throwArgumentError("no matching function","name",n):i.length>1&&Mt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[ai.fromString(e).format()];return r||Mt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Ke(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Mt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Mt.throwArgumentError("no matching event","name",n):i.length>1&&Mt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[Di.fromString(e).format()];return r||Mt.throwArgumentError("no matching event","signature",e),r}getError(e){if(Ke(e)){const n=ci(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Mt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Mt.throwArgumentError("no matching error","name",n):i.length>1&&Mt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[ai.fromString(e).format()];return r||Mt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return ci(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),ci(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=he(r);return le(n.slice(0,4))!==this.getSighash(e)&&Mt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",le(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),le(tn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=he(r);return le(n.slice(0,4))!==this.getSighash(e)&&Mt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",le(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),le(tn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=he(r),i=null,s="",o=null,a=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const l=le(n.slice(0,4)),f=UA[l];if(f)o=this._abiCoder.decode(f.inputs,n.slice(4)),a=f.name,c=f.signature,f.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const u=this.getError(l);o=this._abiCoder.decode(u.inputs,n.slice(4)),a=u.name,c=u.format()}catch{}break}}return Mt.throwError("call revert exception"+s,H.errors.CALL_EXCEPTION,{method:e.format(),data:le(r),errorArgs:o,errorName:a,errorSignature:c,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),le(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Mt.throwError("too many arguments for "+e.format(),H.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?oa(o):s.type==="bytes"?ar(le(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=Z.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Nt(le(o),32));for(r.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Mt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?Mt.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Mt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(oa(c));else if(o.type==="bytes")n.push(ar(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let h=this.getEventTopic(e);(!Ke(n[0],32)||n[0].toLowerCase()!==h)&&Mt.throwError("fragment/topic mismatch",H.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:h,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(mr.fromObject({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});let a=n!=null?this._abiCoder.decode(i,tn(n)):null,c=this._abiCoder.decode(s,r,!0),l=[],f=0,u=0;e.inputs.forEach((h,g)=>{if(h.indexed)if(a==null)l[g]=new F0({_isIndexed:!0,hash:null});else if(o[g])l[g]=new F0({_isIndexed:!0,hash:a[u++]});else try{l[g]=a[u++]}catch(p){l[g]=p}else try{l[g]=c[f++]}catch(p){l[g]=p}if(h.name&&l[h.name]==null){const p=l[g];p instanceof Error?Object.defineProperty(l,h.name,{enumerable:!0,get:()=>{throw Y1(`property ${JSON.stringify(h.name)}`,p)}}):l[h.name]=p}});for(let h=0;h<l.length;h++){const g=l[h];g instanceof Error&&Object.defineProperty(l,h,{enumerable:!0,get:()=>{throw Y1(`index ${h}`,g)}})}return Object.freeze(l)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new BA({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:Z.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new jA({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=le(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new FA({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const $A="abstract-provider/5.7.0";var zA=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const VA=new H($A);class HA extends Tl{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Od{constructor(){VA.checkAbstract(new.target,Od),X(this,"_isProvider",!0)}getFeeData(){return zA(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield Qt({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=Z.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const GA="abstract-signer/5.7.0";var Tn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const un=new H(GA),qA=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],JA=[H.errors.INSUFFICIENT_FUNDS,H.errors.NONCE_EXPIRED,H.errors.REPLACEMENT_UNDERPRICED];class kl{constructor(){un.checkAbstract(new.target,kl),X(this,"_isSigner",!0)}getBalance(e){return Tn(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Tn(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Tn(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield Qt(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Tn(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Qt(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Tn(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Tn(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Tn(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Tn(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Tn(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)qA.indexOf(n)===-1&&un.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=lr(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&un.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Tn(this,void 0,void 0,function*(){const r=yield Qt(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Tn(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&un.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?un.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&un.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&un.throwError("network does not support EIP-1559",H.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):un.throwError("failed to get consistent fee data",H.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(JA.indexOf(i.code)>=0)throw i;return un.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",H.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&un.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Qt(r)})}_checkProvider(e){this.provider||un.throwError("missing provider",H.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class bg extends kl{constructor(e,r){super(),X(this,"address",e),X(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{un.throwError(e,H.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new bg(this.address,e)}}var ZS={},Oe={},Dl=eE;function eE(t,e){if(!t)throw new Error(e||"Assertion failed")}eE.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var U0={exports:{}};typeof Object.create=="function"?U0.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:U0.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var KA=U0.exports,WA=Dl,YA=KA;Oe.inherits=YA;function QA(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function XA(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):QA(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Oe.toArray=XA;function ZA(t){for(var e="",r=0;r<t.length;r++)e+=rE(t[r].toString(16));return e}Oe.toHex=ZA;function tE(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Oe.htonl=tE;function eC(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=tE(i)),r+=nE(i.toString(16))}return r}Oe.toHex32=eC;function rE(t){return t.length===1?"0"+t:t}Oe.zero2=rE;function nE(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Oe.zero8=nE;function tC(t,e,r,n){var i=r-e;WA(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Oe.join32=tC;function rC(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Oe.split32=rC;function nC(t,e){return t>>>e|t<<32-e}Oe.rotr32=nC;function iC(t,e){return t<<e|t>>>32-e}Oe.rotl32=iC;function sC(t,e){return t+e>>>0}Oe.sum32=sC;function oC(t,e,r){return t+e+r>>>0}Oe.sum32_3=oC;function aC(t,e,r,n){return t+e+r+n>>>0}Oe.sum32_4=aC;function cC(t,e,r,n,i){return t+e+r+n+i>>>0}Oe.sum32_5=cC;function lC(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}Oe.sum64=lC;function fC(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Oe.sum64_hi=fC;function uC(t,e,r,n){var i=e+n;return i>>>0}Oe.sum64_lo=uC;function dC(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var f=t+r+i+o+c;return f>>>0}Oe.sum64_4_hi=dC;function hC(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}Oe.sum64_4_lo=hC;function pC(t,e,r,n,i,s,o,a,c,l){var f=0,u=e;u=u+n>>>0,f+=u<e?1:0,u=u+s>>>0,f+=u<s?1:0,u=u+a>>>0,f+=u<a?1:0,u=u+l>>>0,f+=u<l?1:0;var h=t+r+i+o+c+f;return h>>>0}Oe.sum64_5_hi=pC;function mC(t,e,r,n,i,s,o,a,c,l){var f=e+n+s+a+l;return f>>>0}Oe.sum64_5_lo=mC;function gC(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Oe.rotr64_hi=gC;function vC(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Oe.rotr64_lo=vC;function yC(t,e,r){return t>>>r}Oe.shr64_hi=yC;function wC(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Oe.shr64_lo=wC;var Fa={},X1=Oe,_C=Dl;function Nd(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Fa.BlockHash=Nd;Nd.prototype.update=function(e,r){if(e=X1.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=X1.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Nd.prototype.digest=function(e){return this.update(this._pad()),_C(this.pending===null),this._digest(e)};Nd.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Ua={},bi={},bC=Oe,di=bC.rotr32;function SC(t,e,r,n){if(t===0)return iE(e,r,n);if(t===1||t===3)return oE(e,r,n);if(t===2)return sE(e,r,n)}bi.ft_1=SC;function iE(t,e,r){return t&e^~t&r}bi.ch32=iE;function sE(t,e,r){return t&e^t&r^e&r}bi.maj32=sE;function oE(t,e,r){return t^e^r}bi.p32=oE;function EC(t){return di(t,2)^di(t,13)^di(t,22)}bi.s0_256=EC;function xC(t){return di(t,6)^di(t,11)^di(t,25)}bi.s1_256=xC;function RC(t){return di(t,7)^di(t,18)^t>>>3}bi.g0_256=RC;function AC(t){return di(t,17)^di(t,19)^t>>>10}bi.g1_256=AC;var Aa=Oe,CC=Fa,TC=bi,ap=Aa.rotl32,ac=Aa.sum32,PC=Aa.sum32_5,IC=TC.ft_1,aE=CC.BlockHash,kC=[1518500249,1859775393,2400959708,3395469782];function vi(){if(!(this instanceof vi))return new vi;aE.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Aa.inherits(vi,aE);var DC=vi;vi.blockSize=512;vi.outSize=160;vi.hmacStrength=80;vi.padLength=64;vi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=ap(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),u=PC(ap(s,5),IC(f,o,a,c),l,n[i],kC[f]);l=c,c=a,a=ap(o,30),o=s,s=u}this.h[0]=ac(this.h[0],s),this.h[1]=ac(this.h[1],o),this.h[2]=ac(this.h[2],a),this.h[3]=ac(this.h[3],c),this.h[4]=ac(this.h[4],l)};vi.prototype._digest=function(e){return e==="hex"?Aa.toHex32(this.h,"big"):Aa.split32(this.h,"big")};var Ca=Oe,OC=Fa,$a=bi,NC=Dl,Pn=Ca.sum32,MC=Ca.sum32_4,LC=Ca.sum32_5,jC=$a.ch32,BC=$a.maj32,FC=$a.s0_256,UC=$a.s1_256,$C=$a.g0_256,zC=$a.g1_256,cE=OC.BlockHash,VC=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yi(){if(!(this instanceof yi))return new yi;cE.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=VC,this.W=new Array(64)}Ca.inherits(yi,cE);var lE=yi;yi.blockSize=512;yi.outSize=256;yi.hmacStrength=192;yi.padLength=64;yi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=MC(zC(n[i-2]),n[i-7],$C(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],f=this.h[5],u=this.h[6],h=this.h[7];for(NC(this.k.length===n.length),i=0;i<n.length;i++){var g=LC(h,UC(l),jC(l,f,u),this.k[i],n[i]),p=Pn(FC(s),BC(s,o,a));h=u,u=f,f=l,l=Pn(c,g),c=a,a=o,o=s,s=Pn(g,p)}this.h[0]=Pn(this.h[0],s),this.h[1]=Pn(this.h[1],o),this.h[2]=Pn(this.h[2],a),this.h[3]=Pn(this.h[3],c),this.h[4]=Pn(this.h[4],l),this.h[5]=Pn(this.h[5],f),this.h[6]=Pn(this.h[6],u),this.h[7]=Pn(this.h[7],h)};yi.prototype._digest=function(e){return e==="hex"?Ca.toHex32(this.h,"big"):Ca.split32(this.h,"big")};var $0=Oe,fE=lE;function Vi(){if(!(this instanceof Vi))return new Vi;fE.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}$0.inherits(Vi,fE);var HC=Vi;Vi.blockSize=512;Vi.outSize=224;Vi.hmacStrength=192;Vi.padLength=64;Vi.prototype._digest=function(e){return e==="hex"?$0.toHex32(this.h.slice(0,7),"big"):$0.split32(this.h.slice(0,7),"big")};var Kr=Oe,GC=Fa,qC=Dl,hi=Kr.rotr64_hi,pi=Kr.rotr64_lo,uE=Kr.shr64_hi,dE=Kr.shr64_lo,ts=Kr.sum64,cp=Kr.sum64_hi,lp=Kr.sum64_lo,JC=Kr.sum64_4_hi,KC=Kr.sum64_4_lo,WC=Kr.sum64_5_hi,YC=Kr.sum64_5_lo,hE=GC.BlockHash,QC=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function $n(){if(!(this instanceof $n))return new $n;hE.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=QC,this.W=new Array(160)}Kr.inherits($n,hE);var pE=$n;$n.blockSize=1024;$n.outSize=512;$n.hmacStrength=192;$n.padLength=128;$n.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=cT(n[i-4],n[i-3]),o=lT(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=oT(n[i-30],n[i-29]),f=aT(n[i-30],n[i-29]),u=n[i-32],h=n[i-31];n[i]=JC(s,o,a,c,l,f,u,h),n[i+1]=KC(s,o,a,c,l,f,u,h)}};$n.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],f=this.h[6],u=this.h[7],h=this.h[8],g=this.h[9],p=this.h[10],y=this.h[11],b=this.h[12],S=this.h[13],E=this.h[14],w=this.h[15];qC(this.k.length===n.length);for(var T=0;T<n.length;T+=2){var D=E,B=w,j=iT(h,g),N=sT(h,g),F=XC(h,g,p,y,b),$=ZC(h,g,p,y,b,S),U=this.k[T],A=this.k[T+1],m=n[T],d=n[T+1],v=WC(D,B,j,N,F,$,U,A,m,d),R=YC(D,B,j,N,F,$,U,A,m,d);D=rT(i,s),B=nT(i,s),j=eT(i,s,o,a,c),N=tT(i,s,o,a,c,l);var C=cp(D,B,j,N),x=lp(D,B,j,N);E=b,w=S,b=p,S=y,p=h,y=g,h=cp(f,u,v,R),g=lp(u,u,v,R),f=c,u=l,c=o,l=a,o=i,a=s,i=cp(v,R,C,x),s=lp(v,R,C,x)}ts(this.h,0,i,s),ts(this.h,2,o,a),ts(this.h,4,c,l),ts(this.h,6,f,u),ts(this.h,8,h,g),ts(this.h,10,p,y),ts(this.h,12,b,S),ts(this.h,14,E,w)};$n.prototype._digest=function(e){return e==="hex"?Kr.toHex32(this.h,"big"):Kr.split32(this.h,"big")};function XC(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function ZC(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function eT(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function tT(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function rT(t,e){var r=hi(t,e,28),n=hi(e,t,2),i=hi(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function nT(t,e){var r=pi(t,e,28),n=pi(e,t,2),i=pi(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function iT(t,e){var r=hi(t,e,14),n=hi(t,e,18),i=hi(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function sT(t,e){var r=pi(t,e,14),n=pi(t,e,18),i=pi(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function oT(t,e){var r=hi(t,e,1),n=hi(t,e,8),i=uE(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function aT(t,e){var r=pi(t,e,1),n=pi(t,e,8),i=dE(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function cT(t,e){var r=hi(t,e,19),n=hi(e,t,29),i=uE(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function lT(t,e){var r=pi(t,e,19),n=pi(e,t,29),i=dE(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var z0=Oe,mE=pE;function Hi(){if(!(this instanceof Hi))return new Hi;mE.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}z0.inherits(Hi,mE);var fT=Hi;Hi.blockSize=1024;Hi.outSize=384;Hi.hmacStrength=192;Hi.padLength=128;Hi.prototype._digest=function(e){return e==="hex"?z0.toHex32(this.h.slice(0,12),"big"):z0.split32(this.h.slice(0,12),"big")};Ua.sha1=DC;Ua.sha224=HC;Ua.sha256=lE;Ua.sha384=fT;Ua.sha512=pE;var gE={},fo=Oe,uT=Fa,mf=fo.rotl32,Z1=fo.sum32,cc=fo.sum32_3,ey=fo.sum32_4,vE=uT.BlockHash;function wi(){if(!(this instanceof wi))return new wi;vE.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}fo.inherits(wi,vE);gE.ripemd160=wi;wi.blockSize=512;wi.outSize=160;wi.hmacStrength=192;wi.padLength=64;wi.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,f=s,u=o,h=a,g=0;g<80;g++){var p=Z1(mf(ey(n,ty(g,i,s,o),e[pT[g]+r],dT(g)),gT[g]),a);n=a,a=o,o=mf(s,10),s=i,i=p,p=Z1(mf(ey(c,ty(79-g,l,f,u),e[mT[g]+r],hT(g)),vT[g]),h),c=h,h=u,u=mf(f,10),f=l,l=p}p=cc(this.h[1],s,u),this.h[1]=cc(this.h[2],o,h),this.h[2]=cc(this.h[3],a,c),this.h[3]=cc(this.h[4],n,l),this.h[4]=cc(this.h[0],i,f),this.h[0]=p};wi.prototype._digest=function(e){return e==="hex"?fo.toHex32(this.h,"little"):fo.split32(this.h,"little")};function ty(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function dT(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function hT(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var pT=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],mT=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],gT=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],vT=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],yT=Oe,wT=Dl;function Ta(t,e,r){if(!(this instanceof Ta))return new Ta(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(yT.toArray(e,r))}var _T=Ta;Ta.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),wT(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};Ta.prototype.update=function(e,r){return this.inner.update(e,r),this};Ta.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Oe,e.common=Fa,e.sha=Ua,e.ripemd=gE,e.hmac=_T,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(ZS);const ti=Na(ZS);function za(t,e,r){return r={path:e,exports:{},require:function(n,i){return bT(n,i??r.path)}},t(r,r.exports),r.exports}function bT(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Sg=yE;function yE(t,e){if(!t)throw new Error(e||"Assertion failed")}yE.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var jn=za(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)c[l]=o[l]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)c.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var f=o.charCodeAt(l),u=f>>8,h=f&255;u?c.push(u,h):c.push(h)}return c}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",c=0;c<o.length;c++)a+=i(o[c].toString(16));return a}r.toHex=s,r.encode=function(a,c){return c==="hex"?s(a):a}}),an=za(function(t,e){var r=e;r.assert=Sg,r.toArray=jn.toArray,r.zero2=jn.zero2,r.toHex=jn.toHex,r.encode=jn.encode;function n(c,l,f){var u=new Array(Math.max(c.bitLength(),f)+1);u.fill(0);for(var h=1<<l+1,g=c.clone(),p=0;p<u.length;p++){var y,b=g.andln(h-1);g.isOdd()?(b>(h>>1)-1?y=(h>>1)-b:y=b,g.isubn(y)):y=0,u[p]=y,g.iushrn(1)}return u}r.getNAF=n;function i(c,l){var f=[[],[]];c=c.clone(),l=l.clone();for(var u=0,h=0,g;c.cmpn(-u)>0||l.cmpn(-h)>0;){var p=c.andln(3)+u&3,y=l.andln(3)+h&3;p===3&&(p=-1),y===3&&(y=-1);var b;p&1?(g=c.andln(7)+u&7,(g===3||g===5)&&y===2?b=-p:b=p):b=0,f[0].push(b);var S;y&1?(g=l.andln(7)+h&7,(g===3||g===5)&&p===2?S=-y:S=y):S=0,f[1].push(S),2*u===b+1&&(u=1-u),2*h===S+1&&(h=1-h),c.iushrn(1),l.iushrn(1)}return f}r.getJSF=i;function s(c,l,f){var u="_"+l;c.prototype[l]=function(){return this[u]!==void 0?this[u]:this[u]=f.call(this)}}r.cachedProperty=s;function o(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=o;function a(c){return new be(c,"hex","le")}r.intFromLE=a}),Yu=an.getNAF,ST=an.getJSF,Qu=an.assert;function js(t,e){this.type=t,this.p=new be(e.p,16),this.red=e.prime?be.red(e.prime):be.mont(this.p),this.zero=new be(0).toRed(this.red),this.one=new be(1).toRed(this.red),this.two=new be(2).toRed(this.red),this.n=e.n&&new be(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var vo=js;js.prototype.point=function(){throw new Error("Not implemented")};js.prototype.validate=function(){throw new Error("Not implemented")};js.prototype._fixedNafMul=function(e,r){Qu(e.precomputed);var n=e._getDoubles(),i=Yu(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var f=this.jpoint(null,null,null),u=this.jpoint(null,null,null),h=s;h>0;h--){for(a=0;a<o.length;a++)c=o[a],c===h?u=u.mixedAdd(n.points[a]):c===-h&&(u=u.mixedAdd(n.points[a].neg()));f=f.add(u)}return f.toP()};js.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Yu(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var f=o[c];Qu(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};js.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,f,u,h;for(f=0;f<i;f++){h=r[f];var g=h._getNAFPoints(e);o[f]=g.wnd,a[f]=g.points}for(f=i-1;f>=1;f-=2){var p=f-1,y=f;if(o[p]!==1||o[y]!==1){c[p]=Yu(n[p],o[p],this._bitLength),c[y]=Yu(n[y],o[y],this._bitLength),l=Math.max(c[p].length,l),l=Math.max(c[y].length,l);continue}var b=[r[p],null,null,r[y]];r[p].y.cmp(r[y].y)===0?(b[1]=r[p].add(r[y]),b[2]=r[p].toJ().mixedAdd(r[y].neg())):r[p].y.cmp(r[y].y.redNeg())===0?(b[1]=r[p].toJ().mixedAdd(r[y]),b[2]=r[p].add(r[y].neg())):(b[1]=r[p].toJ().mixedAdd(r[y]),b[2]=r[p].toJ().mixedAdd(r[y].neg()));var S=[-3,-1,-5,-7,0,7,5,1,3],E=ST(n[p],n[y]);for(l=Math.max(E[0].length,l),c[p]=new Array(l),c[y]=new Array(l),u=0;u<l;u++){var w=E[0][u]|0,T=E[1][u]|0;c[p][u]=S[(w+1)*3+(T+1)],c[y][u]=0,a[p]=b}}var D=this.jpoint(null,null,null),B=this._wnafT4;for(f=l;f>=0;f--){for(var j=0;f>=0;){var N=!0;for(u=0;u<i;u++)B[u]=c[u][f]|0,B[u]!==0&&(N=!1);if(!N)break;j++,f--}if(f>=0&&j++,D=D.dblp(j),f<0)break;for(u=0;u<i;u++){var F=B[u];F!==0&&(F>0?h=a[u][F-1>>1]:F<0&&(h=a[u][-F-1>>1].neg()),h.type==="affine"?D=D.mixedAdd(h):D=D.add(h))}}for(f=0;f<i;f++)a[f]=null;return s?D:D.toP()};function Sn(t,e){this.curve=t,this.type=e,this.precomputed=null}js.BasePoint=Sn;Sn.prototype.eq=function(){throw new Error("Not implemented")};Sn.prototype.validate=function(){return this.curve.validate(this)};js.prototype.decodePoint=function(e,r){e=an.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Qu(e[e.length-1]%2===0):e[0]===7&&Qu(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Sn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Sn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Sn.prototype.encode=function(e,r){return an.encode(this._encode(r),e)};Sn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Sn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Sn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Sn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Sn.prototype._getBeta=function(){return null};Sn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Eg=za(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),ET=an.assert;function En(t){vo.call(this,"short",t),this.a=new be(t.a,16).toRed(this.red),this.b=new be(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Eg(En,vo);var xT=En;En.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new be(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new be(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],ET(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new be(a.a,16),b:new be(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};En.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:be.mont(e),n=new be(2).toRed(r).redInvm(),i=n.redNeg(),s=new be(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};En.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new be(1),o=new be(0),a=new be(0),c=new be(1),l,f,u,h,g,p,y,b=0,S,E;n.cmpn(0)!==0;){var w=i.div(n);S=i.sub(w.mul(n)),E=a.sub(w.mul(s));var T=c.sub(w.mul(o));if(!u&&S.cmp(r)<0)l=y.neg(),f=s,u=S.neg(),h=E;else if(u&&++b===2)break;y=S,i=n,n=S,a=s,s=E,c=o,o=T}g=S.neg(),p=E;var D=u.sqr().add(h.sqr()),B=g.sqr().add(p.sqr());return B.cmp(D)>=0&&(g=l,p=f),u.negative&&(u=u.neg(),h=h.neg()),g.negative&&(g=g.neg(),p=p.neg()),[{a:u,b:h},{a:g,b:p}]};En.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),f=o.mul(i.b),u=e.sub(a).sub(c),h=l.add(f).neg();return{k1:u,k2:h}};En.prototype.pointFromX=function(e,r){e=new be(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};En.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};En.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),u=0;u<o*2;u++)i[u]=null,s[u]=null;return f};function vr(t,e,r,n){vo.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new be(e,16),this.y=new be(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Eg(vr,vo.BasePoint);En.prototype.point=function(e,r,n){return new vr(this,e,r,n)};En.prototype.pointFromJSON=function(e,r){return vr.fromJSON(this,e,r)};vr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};vr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};vr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};vr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};vr.prototype.isInfinity=function(){return this.inf};vr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};vr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};vr.prototype.getX=function(){return this.x.fromRed()};vr.prototype.getY=function(){return this.y.fromRed()};vr.prototype.mul=function(e){return e=new be(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};vr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};vr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};vr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};vr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};vr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function xr(t,e,r,n){vo.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new be(0)):(this.x=new be(e,16),this.y=new be(r,16),this.z=new be(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Eg(xr,vo.BasePoint);En.prototype.jpoint=function(e,r,n){return new xr(this,e,r,n)};xr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};xr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};xr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),u=f.redMul(c),h=i.redMul(f),g=l.redSqr().redIAdd(u).redISub(h).redISub(h),p=l.redMul(h.redISub(g)).redISub(o.redMul(u)),y=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(g,p,y)};xr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),f=l.redMul(a),u=n.redMul(l),h=c.redSqr().redIAdd(f).redISub(u).redISub(u),g=c.redMul(u.redISub(h)).redISub(s.redMul(f)),p=this.z.redMul(a);return this.curve.jpoint(h,g,p)};xr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var u=o.redSqr(),h=f.redSqr(),g=h.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(l)),y=o.redMul(h),b=p.redSqr().redISub(y.redAdd(y)),S=y.redISub(b),E=p.redMul(S);E=E.redIAdd(E).redISub(g);var w=f.redMul(c);r+1<e&&(l=l.redMul(g)),o=b,c=w,f=E}return this.curve.jpoint(o,f.redMul(s),c)};xr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};xr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=l,r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),h=this.y.redSqr(),g=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(u).redISub(g);p=p.redIAdd(p);var y=u.redAdd(u).redIAdd(u),b=y.redSqr(),S=g.redIAdd(g);S=S.redIAdd(S),S=S.redIAdd(S),e=b.redISub(p).redISub(p),r=y.redMul(p.redISub(e)).redISub(S),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};xr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),h=this.y.redSqr(),g=this.x.redMul(h),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var y=g.redIAdd(g);y=y.redIAdd(y);var b=y.redAdd(y);e=p.redSqr().redISub(b),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(u);var S=h.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S),r=p.redMul(y.redISub(e)).redISub(S)}return this.curve.jpoint(e,r,n)};xr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var f=l.redMul(a),u=c.redSqr().redISub(f.redAdd(f)),h=f.redISub(u),g=a.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var p=c.redMul(h).redISub(g),y=n.redAdd(n).redMul(i);return this.curve.jpoint(u,p,y)};xr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),u=r.redMul(f);u=u.redIAdd(u),u=u.redIAdd(u);var h=this.x.redMul(c).redISub(u);h=h.redIAdd(h),h=h.redIAdd(h);var g=this.y.redMul(f.redMul(l.redISub(f)).redISub(a.redMul(c)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var p=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(h,g,p)};xr.prototype.mul=function(e,r){return e=new be(e,r),this.curve._wnafMul(this,e)};xr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};xr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};xr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};xr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var iu=za(function(t,e){var r=e;r.base=vo,r.short=xT,r.mont=null,r.edwards=null}),su=za(function(t,e){var r=e,n=an.assert;function i(a){a.type==="short"?this.curve=new iu.short(a):a.type==="edwards"?this.curve=new iu.edwards(a):this.curve=new iu.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ti.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ti.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ti.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ti.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ti.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ti.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ti.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ti.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Os(t){if(!(this instanceof Os))return new Os(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=jn.toArray(t.entropy,t.entropyEnc||"hex"),r=jn.toArray(t.nonce,t.nonceEnc||"hex"),n=jn.toArray(t.pers,t.persEnc||"hex");Sg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var wE=Os;Os.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Os.prototype._hmac=function(){return new ti.hmac(this.hash,this.K)};Os.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Os.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=jn.toArray(e,r),n=jn.toArray(n,i),Sg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Os.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=jn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,jn.encode(o,r)};var V0=an.assert;function kr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var xg=kr;kr.fromPublic=function(e,r,n){return r instanceof kr?r:new kr(e,{pub:r,pubEnc:n})};kr.fromPrivate=function(e,r,n){return r instanceof kr?r:new kr(e,{priv:r,privEnc:n})};kr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};kr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};kr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};kr.prototype._importPrivate=function(e,r){this.priv=new be(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};kr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?V0(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&V0(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};kr.prototype.derive=function(e){return e.validate()||V0(e.validate(),"public point not validated"),e.mul(this.priv).getX()};kr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};kr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};kr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var RT=an.assert;function Md(t,e){if(t instanceof Md)return t;this._importDER(t,e)||(RT(t.r&&t.s,"Signature without r or s"),this.r=new be(t.r,16),this.s=new be(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Ld=Md;function AT(){this.place=0}function fp(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function ry(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Md.prototype._importDER=function(e,r){e=an.toArray(e,r);var n=new AT;if(e[n.place++]!==48)return!1;var i=fp(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=fp(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=fp(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new be(o),this.s=new be(c),this.recoveryParam=null,!0};function up(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Md.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=ry(r),n=ry(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];up(i,r.length),i=i.concat(r),i.push(2),up(i,n.length);var s=i.concat(n),o=[48];return up(o,s.length),o=o.concat(s),an.encode(o,e)};var CT=function(){throw new Error("unsupported")},_E=an.assert;function bn(t){if(!(this instanceof bn))return new bn(t);typeof t=="string"&&(_E(Object.prototype.hasOwnProperty.call(su,t),"Unknown curve "+t),t=su[t]),t instanceof su.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var TT=bn;bn.prototype.keyPair=function(e){return new xg(this,e)};bn.prototype.keyFromPrivate=function(e,r){return xg.fromPrivate(this,e,r)};bn.prototype.keyFromPublic=function(e,r){return xg.fromPublic(this,e,r)};bn.prototype.genKeyPair=function(e){e||(e={});for(var r=new wE({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||CT(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new be(2));;){var s=new be(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};bn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};bn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new be(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new wE({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new be(1)),f=0;;f++){var u=i.k?i.k(f):new be(c.generate(this.n.byteLength()));if(u=this._truncateToN(u,!0),!(u.cmpn(1)<=0||u.cmp(l)>=0)){var h=this.g.mul(u);if(!h.isInfinity()){var g=h.getX(),p=g.umod(this.n);if(p.cmpn(0)!==0){var y=u.invm(this.n).mul(p.mul(r.getPrivate()).iadd(e));if(y=y.umod(this.n),y.cmpn(0)!==0){var b=(h.getY().isOdd()?1:0)|(g.cmp(p)!==0?2:0);return i.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),b^=1),new Ld({r:p,s:y,recoveryParam:b})}}}}}};bn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new be(e,16)),n=this.keyFromPublic(n,i),r=new Ld(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};bn.prototype.recoverPubKey=function(t,e,r,n){_E((3&r)===r,"The recovery param is more than two bits"),e=new Ld(e,n);var i=this.n,s=new be(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(i),u=i.sub(s).mul(f).umod(i),h=a.mul(f).umod(i);return this.g.mulAdd(u,o,h)};bn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Ld(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var PT=za(function(t,e){var r=e;r.version="6.5.4",r.utils=an,r.rand=function(){throw new Error("unsupported")},r.curve=iu,r.curves=su,r.ec=TT,r.eddsa=null}),IT=PT.ec;const kT="signing-key/5.7.0",H0=new H(kT);let dp=null;function ii(){return dp||(dp=new IT("secp256k1")),dp}class DT{constructor(e){X(this,"curve","secp256k1"),X(this,"privateKey",le(e)),co(this.privateKey)!==32&&H0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=ii().keyFromPrivate(he(this.privateKey));X(this,"publicKey","0x"+r.getPublic(!1,"hex")),X(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),X(this,"_isSigningKey",!0)}_addPoint(e){const r=ii().keyFromPublic(he(this.publicKey)),n=ii().keyFromPublic(he(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=ii().keyFromPrivate(he(this.privateKey)),n=he(e);n.length!==32&&H0.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Id({recoveryParam:i.recoveryParam,r:Nt("0x"+i.r.toString(16),32),s:Nt("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=ii().keyFromPrivate(he(this.privateKey)),n=ii().keyFromPublic(he(bE(e)));return Nt("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function OT(t,e){const r=Id(e),n={r:he(r.r),s:he(r.s)};return"0x"+ii().recoverPubKey(he(t),n,r.recoveryParam).encode("hex",!1)}function bE(t,e){const r=he(t);if(r.length===32){const n=new DT(r);return e?"0x"+ii().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?le(r):"0x"+ii().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+ii().keyFromPublic(r).getPublic(!0,"hex"):le(r)}return H0.throwArgumentError("invalid public or private key","key","[REDACTED]")}const NT="transactions/5.7.0",Ki=new H(NT);var ny;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(ny||(ny={}));function Rg(t){return t==="0x"?null:Er(t)}function Ir(t){return t==="0x"?jS:Z.from(t)}function MT(t){const e=bE(t);return Er(Tr(ar(Tr(e,1)),12))}function SE(t,e){return MT(OT(he(t),e))}function Zr(t,e){const r=Ra(Z.from(t).toHexString());return r.length>32&&Ki.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function hp(t,e){return{address:Er(t),storageKeys:(e||[]).map((r,n)=>(co(r)!==32&&Ki.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Va(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Ki.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),hp(r[0],r[1])):hp(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return hp(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function EE(t){return Va(t).map(e=>[e.address,e.storageKeys])}function LT(t,e){if(t.gasPrice!=null){const n=Z.from(t.gasPrice),i=Z.from(t.maxFeePerGas||0);n.eq(i)||Ki.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[Zr(t.chainId||0,"chainId"),Zr(t.nonce||0,"nonce"),Zr(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Zr(t.maxFeePerGas||0,"maxFeePerGas"),Zr(t.gasLimit||0,"gasLimit"),t.to!=null?Er(t.to):"0x",Zr(t.value||0,"value"),t.data||"0x",EE(t.accessList||[])];if(e){const n=Id(e);r.push(Zr(n.recoveryParam,"recoveryParam")),r.push(Ra(n.r)),r.push(Ra(n.s))}return zr(["0x02",kd(r)])}function jT(t,e){const r=[Zr(t.chainId||0,"chainId"),Zr(t.nonce||0,"nonce"),Zr(t.gasPrice||0,"gasPrice"),Zr(t.gasLimit||0,"gasLimit"),t.to!=null?Er(t.to):"0x",Zr(t.value||0,"value"),t.data||"0x",EE(t.accessList||[])];if(e){const n=Id(e);r.push(Zr(n.recoveryParam,"recoveryParam")),r.push(Ra(n.r)),r.push(Ra(n.s))}return zr(["0x01",kd(r)])}function xE(t,e,r){try{const n=Ir(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Ki.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Nt(e[1],32),t.s=Nt(e[2],32);try{const n=ar(r(t));t.from=SE(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function BT(t){const e=wg(t.slice(1));e.length!==9&&e.length!==12&&Ki.throwArgumentError("invalid component count for transaction type: 2","payload",le(t));const r=Ir(e[2]),n=Ir(e[3]),i={type:2,chainId:Ir(e[0]).toNumber(),nonce:Ir(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Ir(e[4]),to:Rg(e[5]),value:Ir(e[6]),data:e[7],accessList:Va(e[8])};return e.length===9||(i.hash=ar(t),xE(i,e.slice(9),LT)),i}function FT(t){const e=wg(t.slice(1));e.length!==8&&e.length!==11&&Ki.throwArgumentError("invalid component count for transaction type: 1","payload",le(t));const r={type:1,chainId:Ir(e[0]).toNumber(),nonce:Ir(e[1]).toNumber(),gasPrice:Ir(e[2]),gasLimit:Ir(e[3]),to:Rg(e[4]),value:Ir(e[5]),data:e[6],accessList:Va(e[7])};return e.length===8||(r.hash=ar(t),xE(r,e.slice(8),jT)),r}function UT(t){const e=wg(t);e.length!==9&&e.length!==6&&Ki.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:Ir(e[0]).toNumber(),gasPrice:Ir(e[1]),gasLimit:Ir(e[2]),to:Rg(e[3]),value:Ir(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=Z.from(e[6]).toNumber()}catch{return r}if(r.r=Nt(e[7],32),r.s=Nt(e[8],32),Z.from(r.r).isZero()&&Z.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(le(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=ar(kd(i));try{r.from=SE(s,{r:le(r.r),s:le(r.s),recoveryParam:n})}catch{}r.hash=ar(t)}return r.type=null,r}function $T(t){const e=he(t);if(e[0]>127)return UT(e);switch(e[0]){case 1:return FT(e);case 2:return BT(e)}return Ki.throwError(`unsupported transaction type: ${e[0]}`,H.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const zT="contracts/5.7.0";var uo=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Gt=new H(zT);function Xu(t,e){return uo(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&Gt.throwArgumentError("invalid address or ENS name","name",r);try{return Er(r)}catch{}t||Gt.throwError("a provider or signer is needed to resolve ENS names",H.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&Gt.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function ou(t,e,r){return uo(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>ou(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield Xu(t,e):r.type==="tuple"?yield ou(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>ou(t,n,r.arrayChildren))):Promise.reject(Gt.makeError("invalid value for array",H.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function jd(t,e,r){return uo(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=lr(r.pop())),Gt.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=Qt({override:Xu(t.signer,n.from),signer:t.signer.getAddress()}).then(l=>uo(this,void 0,void 0,function*(){return Er(l.signer)!==l.override&&Gt.throwError("Contract with a Signer cannot override from",H.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),l.override})):n.from=t.signer.getAddress():n.from&&(n.from=Xu(t.provider,n.from));const i=yield Qt({args:ou(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:Qt(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=Z.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Z.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Z.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Z.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Z.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=Va(a.accessList)),o.gasLimit==null&&e.gas!=null){let l=21e3;const f=he(s);for(let u=0;u<f.length;u++)l+=4,f[u]&&(l+=64);o.gasLimit=Z.from(e.gas).add(l)}if(a.value){const l=Z.from(a.value);!l.isZero()&&!e.payable&&Gt.throwError("non-payable method cannot override value",H.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=l}a.customData&&(o.customData=lr(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(l=>n[l]!=null);return c.length&&Gt.throwError(`cannot override ${c.map(l=>JSON.stringify(l)).join(",")}`,H.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),o})}function VT(t,e){return function(...r){return jd(t,e,r)}}function HT(t,e){const r=t.signer||t.provider;return function(...n){return uo(this,void 0,void 0,function*(){r||Gt.throwError("estimate require a provider or signer",H.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield jd(t,e,n);return yield r.estimateGas(i)})}}function GT(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let o=zi(s),a=null;try{a=t.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(c,l)=>t.interface.decodeEventLog(a.eventFragment,c,l),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(i.blockHash),o.getTransaction=()=>t.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function RE(t,e,r){const n=t.signer||t.provider;return function(...i){return uo(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=lr(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}t.deployTransaction!=null&&(yield t._deployed(s));const o=yield jd(t,e,i),a=yield n.call(o,s);try{let c=t.interface.decodeFunctionResult(e,a);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===H.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=i,c.transaction=o),c}})}}function qT(t,e){return function(...r){return uo(this,void 0,void 0,function*(){t.signer||Gt.throwError("sending a transaction requires a signer",H.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield jd(t,e,r),i=yield t.signer.sendTransaction(n);return GT(t,i),i})}}function iy(t,e,r){return e.constant?RE(t,e,r):qT(t,e)}function AE(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class gl{constructor(e,r){X(this,"tag",e),X(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class JT extends gl{constructor(){super("error",null)}}class sy extends gl{constructor(e,r,n,i){const s={address:e};let o=r.getEventTopic(n);i?(o!==i[0]&&Gt.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(AE(s),s),X(this,"address",e),X(this,"interface",r),X(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=TR(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class oy extends gl{constructor(e,r){super("*",{address:e}),X(this,"address",e),X(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class KT{constructor(e,r,n){X(this,"interface",ci(new.target,"getInterface")(r)),n==null?(X(this,"provider",null),X(this,"signer",null)):kl.isSigner(n)?(X(this,"provider",n.provider||null),X(this,"signer",n)):Od.isProvider(n)?(X(this,"provider",n),X(this,"signer",null)):Gt.throwArgumentError("invalid signer or provider","signerOrProvider",n),X(this,"callStatic",{}),X(this,"estimateGas",{}),X(this,"functions",{}),X(this,"populateTransaction",{}),X(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const c=this.interface.events[a];X(this.filters,a,(...l)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,l)})),o[c.name]||(o[c.name]=[]),o[c.name].push(a)}),Object.keys(o).forEach(a=>{const c=o[a];c.length===1?X(this.filters,a,this.filters[c[0]]):Gt.warn(`Duplicate definition of ${a} (${c.join(", ")})`)})}if(X(this,"_runningEvents",{}),X(this,"_wrappedEmits",{}),e==null&&Gt.throwArgumentError("invalid contract address or ENS name","addressOrName",e),X(this,"address",e),this.provider)X(this,"resolvedAddress",Xu(this.provider,e));else try{X(this,"resolvedAddress",Promise.resolve(Er(e)))}catch{Gt.throwError("provider is required to use ENS name as contract address",H.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Gt.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const c=a.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(o)}this[o]==null&&X(this,o,iy(this,a,!0)),this.functions[o]==null&&X(this.functions,o,iy(this,a,!1)),this.callStatic[o]==null&&X(this.callStatic,o,RE(this,a,!0)),this.populateTransaction[o]==null&&X(this.populateTransaction,o,VT(this,a)),this.estimateGas[o]==null&&X(this.estimateGas,o,HT(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const c=a[0];try{this[o]==null&&X(this,o,this[c])}catch{}this.functions[o]==null&&X(this.functions,o,this.functions[c]),this.callStatic[o]==null&&X(this.callStatic,o,this.callStatic[c]),this.populateTransaction[o]==null&&X(this.populateTransaction,o,this.populateTransaction[c]),this.estimateGas[o]==null&&X(this.estimateGas,o,this.estimateGas[c])})}static getContractAddress(e){return OS(e)}static getInterface(e){return Q1.isInterface(e)?e:new Q1(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&Gt.throwError("contract not deployed",H.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Gt.throwError("sending a transactions require a signer",H.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=lr(e||{});return["from","to"].forEach(function(n){r[n]!=null&&Gt.throwError("cannot override "+n,H.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new bg(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&X(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return F0.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new JT);if(e==="event")return this._normalizeRunningEvent(new gl("event",null));if(e==="*")return this._normalizeRunningEvent(new oy(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new sy(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new sy(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new gl(AE(r),r))}return this._normalizeRunningEvent(new oy(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=zi(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||Gt.throwError("events require a provider or a signer with a provider",H.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,r);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=lr(i.filter);return typeof r=="string"&&Ke(r,32)?(n!=null&&Gt.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class Ag extends KT{}class CE{constructor(e){X(this,"alphabet",e),X(this,"base",e.length),X(this,"_alphabetMap",{}),X(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=he(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let o=r[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<r.length;++o)s+=r[o]*this.base,r[o]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return he(new Uint8Array(r.reverse()))}}new CE("abcdefghijklmnopqrstuvwxyz234567");const G0=new CE("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function ay(t){return"0x"+ti.sha256().update(he(t)).digest("hex")}const WT="networks/5.7.1",cy=new H(WT);function YT(t){return t&&typeof t.renetwork=="function"}function ki(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return ki(r)},e}function Zu(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return Zu(t,n)},r}const ly={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ki("homestead")},fy={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ki("ropsten")},uy={chainId:63,name:"classicMordor",_defaultProvider:Zu("https://www.ethercluster.com/mordor","classicMordor")},gf={unspecified:{chainId:0,name:"unspecified"},homestead:ly,mainnet:ly,morden:{chainId:2,name:"morden"},ropsten:fy,testnet:fy,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ki("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ki("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ki("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ki("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Zu("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:uy,classicTestnet:uy,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Zu("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ki("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ki("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function QT(t){if(t==null)return null;if(typeof t=="number"){for(const n in gf){const i=gf[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=gf[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=gf[t.name];if(!e)return typeof t.chainId!="number"&&cy.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&cy.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(YT(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const XT="web/5.7.1";var ZT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};function eP(t,e){return ZT(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:he(new Uint8Array(i))}})}var tP=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const In=new H(XT);function dy(t){return new Promise(e=>{setTimeout(e,t)})}function rs(t,e){if(t==null)return null;if(typeof t=="string")return t;if(mg(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Il(t)}catch{}return le(t)}return t}function rP(t){return gi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function nP(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;In.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;In.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof t=="object"?!!t.errorPassThrough:!1,a={};let c=null;const l={method:"GET"};let f=!1,u=2*60*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&In.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(u=t.timeout),t.headers)for(const S in t.headers)a[S.toLowerCase()]={key:S,value:String(t.headers[S])},["if-none-match","if-modified-since"].indexOf(S.toLowerCase())>=0&&(f=!0);if(l.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&In.throwError("basic authentication requires a secure https url",H.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const S=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+VS(gi(S))}}t.skipFetchSetup!=null&&(l.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(l.fetchOptions=lr(t.fetchOptions))}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),g=c?c.match(h):null;if(g)try{const S={statusCode:200,statusMessage:"OK",headers:{"content-type":g[1]||"text/plain"},body:g[2]?zS(g[3]):rP(g[3])};let E=S.body;return r&&(E=r(S.body,S)),Promise.resolve(E)}catch(S){In.throwError("processing response error",H.errors.SERVER_ERROR,{body:rs(g[1],g[2]),error:S,requestBody:null,requestMethod:"GET",url:c})}e&&(l.method="POST",l.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const p={};Object.keys(a).forEach(S=>{const E=a[S];p[E.key]=E.value}),l.headers=p;const y=function(){let S=null;return{promise:new Promise(function(T,D){u&&(S=setTimeout(()=>{S!=null&&(S=null,D(In.makeError("timeout",H.errors.TIMEOUT,{requestBody:rs(l.body,p["content-type"]),requestMethod:l.method,timeout:u,url:c})))},u))}),cancel:function(){S!=null&&(clearTimeout(S),S=null)}}}(),b=function(){return tP(this,void 0,void 0,function*(){for(let S=0;S<n;S++){let E=null;try{if(E=yield eP(c,l),S<n){if(E.statusCode===301||E.statusCode===302){const T=E.headers.location||"";if(l.method==="GET"&&T.match(/^https:/)){c=E.headers.location;continue}}else if(E.statusCode===429){let T=!0;if(i&&(T=yield i(S,c)),T){let D=0;const B=E.headers["retry-after"];typeof B=="string"&&B.match(/^[1-9][0-9]*$/)?D=parseInt(B)*1e3:D=s*parseInt(String(Math.random()*Math.pow(2,S))),yield dy(D);continue}}}}catch(T){E=T.response,E==null&&(y.cancel(),In.throwError("missing response",H.errors.SERVER_ERROR,{requestBody:rs(l.body,p["content-type"]),requestMethod:l.method,serverError:T,url:c}))}let w=E.body;if(f&&E.statusCode===304?w=null:!o&&(E.statusCode<200||E.statusCode>=300)&&(y.cancel(),In.throwError("bad response",H.errors.SERVER_ERROR,{status:E.statusCode,headers:E.headers,body:rs(w,E.headers?E.headers["content-type"]:null),requestBody:rs(l.body,p["content-type"]),requestMethod:l.method,url:c})),r)try{const T=yield r(w,E);return y.cancel(),T}catch(T){if(T.throttleRetry&&S<n){let D=!0;if(i&&(D=yield i(S,c)),D){const B=s*parseInt(String(Math.random()*Math.pow(2,S)));yield dy(B);continue}}y.cancel(),In.throwError("processing response error",H.errors.SERVER_ERROR,{body:rs(w,E.headers?E.headers["content-type"]:null),error:T,requestBody:rs(l.body,p["content-type"]),requestMethod:l.method,url:c})}return y.cancel(),w}return In.throwError("failed response",H.errors.SERVER_ERROR,{requestBody:rs(l.body,p["content-type"]),requestMethod:l.method,url:c})})}();return Promise.race([y.promise,b])}function Cg(t,e,r){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(Il(s))}catch(c){In.throwError("invalid JSON",H.errors.SERVER_ERROR,{body:s,error:c})}return r&&(a=r(a,o)),a},i=null;if(e!=null){i=gi(e);const s=typeof t=="string"?{url:t}:lr(t);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=lr(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return nP(t,i,n)}function Rc(t,e){return e||(e={}),e=lr(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function l(){return t().then(function(f){if(f!==void 0)o()&&r(f);else if(e.oncePoll)e.oncePoll.once("poll",l);else if(e.onceBlock)e.onceBlock.once("block",l);else if(!s){if(c++,c>a){o()&&n(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(l,u)}return null},function(f){o()&&n(f)})}l()})}var ed="qpzry9x8gf2tvdw0s3jn54khce6mua7l",q0={};for(var vf=0;vf<ed.length;vf++){var pp=ed.charAt(vf);if(q0[pp]!==void 0)throw new TypeError(pp+" is ambiguous");q0[pp]=vf}function ma(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function TE(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=ma(e)^n>>5}for(e=ma(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=ma(e)^i&31}return e}function iP(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=TE(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");n=ma(n)^o,i+=ed.charAt(o)}for(s=0;s<6;++s)n=ma(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=ed.charAt(a)}return i}function PE(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var a=TE(s);if(typeof a=="string")return a;for(var c=[],l=0;l<o.length;++l){var f=o.charAt(l),u=q0[f];if(u===void 0)return"Unknown character "+f;a=ma(a)^u,!(l+6>=o.length)&&c.push(u)}return a!==1?"Invalid checksum for "+t:{prefix:s,words:c}}function sP(){var t=PE.apply(null,arguments);if(typeof t=="object")return t}function oP(t){var e=PE.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Bd(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],c=0;c<t.length;++c)for(i=i<<e|t[c],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function aP(t){var e=Bd(t,8,5,!0);if(Array.isArray(e))return e}function cP(t){var e=Bd(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function lP(t){var e=Bd(t,5,8,!1);if(Array.isArray(e))return e}function fP(t){var e=Bd(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var uP={decodeUnsafe:sP,decode:oP,encode:iP,toWordsUnsafe:aP,toWords:cP,fromWordsUnsafe:lP,fromWords:fP};const hy=Na(uP),Fd="providers/5.7.2",lc=new H(Fd);class ae{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),l=this.type.bind(this),f=u=>this.data(u,!0);return e.transaction={hash:o,type:l,accessList:ae.allowNull(this.accessList.bind(this),null),blockHash:ae.allowNull(o,null),blockNumber:ae.allowNull(c,null),transactionIndex:ae.allowNull(c,null),confirmations:ae.allowNull(c,null),from:r,gasPrice:ae.allowNull(n),maxPriorityFeePerGas:ae.allowNull(n),maxFeePerGas:ae.allowNull(n),gasLimit:n,to:ae.allowNull(r,null),value:n,nonce:c,data:s,r:ae.allowNull(this.uint256),s:ae.allowNull(this.uint256),v:ae.allowNull(c),creates:ae.allowNull(r,null),raw:ae.allowNull(s)},e.transactionRequest={from:ae.allowNull(r),nonce:ae.allowNull(c),gasLimit:ae.allowNull(n),gasPrice:ae.allowNull(n),maxPriorityFeePerGas:ae.allowNull(n),maxFeePerGas:ae.allowNull(n),to:ae.allowNull(r),value:ae.allowNull(n),data:ae.allowNull(f),type:ae.allowNull(c),accessList:ae.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:r,topics:ae.arrayOf(o),data:s,logIndex:c,blockHash:o},e.receipt={to:ae.allowNull(this.address,null),from:ae.allowNull(this.address,null),contractAddress:ae.allowNull(r,null),transactionIndex:c,root:ae.allowNull(a),gasUsed:n,logsBloom:ae.allowNull(s),blockHash:o,transactionHash:o,logs:ae.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:ae.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:ae.allowNull(n),status:ae.allowNull(c),type:l},e.block={hash:ae.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:ae.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:ae.allowNull(r),extraData:s,transactions:ae.allowNull(ae.arrayOf(o)),baseFeePerGas:ae.allowNull(n)},e.blockWithTransactions=lr(e.block),e.blockWithTransactions.transactions=ae.allowNull(ae.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ae.allowNull(i,void 0),toBlock:ae.allowNull(i,void 0),blockHash:ae.allowNull(o,void 0),address:ae.allowNull(r,void 0),topics:ae.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ae.allowNull(c),blockHash:ae.allowNull(o),transactionIndex:c,removed:ae.allowNull(this.boolean.bind(this)),address:r,data:ae.allowFalsish(s,"0x"),topics:ae.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return Va(e||[])}number(e){return e==="0x"?0:Z.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Z.from(e).toNumber()}bigNumber(e){return Z.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),Ke(e))?e.toLowerCase():lc.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Er(e)}callAddress(e){if(!Ke(e,32))return null;const r=Er(Tr(e,12));return r===VR?null:r}contractAddress(e){return OS(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Ke(e))return gg(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return co(n)!==32?lc.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=Z.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!Ke(e))throw new Error("invalid uint256");return Nt(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=ae.check(r,e);return i._difficulty=n==null?null:Z.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ae.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Z.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=ae.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Ke(n)&&(n=Z.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),Ke(n)&&(n=Z.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return $T(e)}receiptLog(e){return ae.check(this.formats.receiptLog,e)}receipt(e){const r=ae.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=Z.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&lc.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):lc.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&lc.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return ae.check(this.formats.filter,e)}filterLog(e){return ae.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}var we=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ae=new H(Fd),dP=10;function py(t){return t==null?"null":(co(t)!==32&&Ae.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function my(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[py(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return py(e)}).join("&")}function hP(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function So(t){if(typeof t=="string"){if(t=t.toLowerCase(),co(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+my(t);if(HA.isForkEvent(t))throw Ae.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+my(t.topics||[])}throw new Error("invalid event - "+t)}function fc(){return new Date().getTime()}function gy(t){return new Promise(e=>{setTimeout(e,t)})}const pP=["block","network","pending","poll"];let mP=class{constructor(e,r,n){X(this,"tag",e),X(this,"listener",r),X(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=hP(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||pP.indexOf(this.tag)>=0}};const gP={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function mp(t){return Nt(Z.from(t).toHexString(),32)}function vy(t){return G0.encode(tn([t,Tr(ay(ay(t)),0,4)]))}const IE=new RegExp("^(ipfs)://(.*)$","i"),yy=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),IE,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function au(t,e){try{return Il(vl(t,e))}catch{}return null}function vl(t,e){if(t==="0x")return null;const r=Z.from(Tr(t,e,e+32)).toNumber(),n=Z.from(Tr(t,r,r+32)).toNumber();return Tr(t,r+32,r+32+n)}function gp(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Ae.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function wy(t){const e=he(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function vP(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function kE(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=he(t[n]);e[n]=wy(r),e.push(wy(i.length)),e.push(vP(i)),r+=32+Math.ceil(i.length/32)*32}return zr(e)}class _y{constructor(e,r,n,i){X(this,"provider",e),X(this,"name",n),X(this,"address",e.formatter.address(r)),X(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Z.from(e).eq(1)).catch(e=>{if(e.code===H.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return we(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:zr([e,nu(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=zr(["0x9061b923",kE([PA(this.name),n.data])]));try{let s=yield this.provider.call(n);return he(s).length%32===4&&Ae.throwError("resolver threw error",H.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=vl(s,0)),s}catch(s){if(s.code===H.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return we(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?vl(n,0):null})}_getAddress(e,r){const n=gP[String(e)];if(n==null&&Ae.throwError(`unsupported coin type: ${e}`,H.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=he(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return vy(tn([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return vy(tn([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=hy.toWords(i.slice(2));return a.unshift(o),hy.encode(n.prefix,a)}}return null}getAddress(e){return we(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===JR?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===H.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",mp(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&Ae.throwError("invalid or unsupported coin data",H.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return we(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<yy.length;n++){const i=r.match(yy[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:gp(r)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const a=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const l=yield this.provider.formatter.address(c[0]),f=Nt(Z.from(c[1]).toHexString(),32);if(s==="erc721"){const y=this.provider.formatter.callAddress(yield this.provider.call({to:l,data:zr(["0x6352211e",f])}));if(a!==y)return null;e.push({type:"owner",content:y})}else if(s==="erc1155"){const y=Z.from(yield this.provider.call({to:l,data:zr(["0x00fdd58e",Nt(a,32),f])}));if(y.isZero())return null;e.push({type:"balance",content:y.toString()})}const u={to:this.provider.formatter.address(c[0]),data:zr([o,f])};let h=au(yield this.provider.call(u),0);if(h==null)return null;e.push({type:"metadata-url-base",content:h}),s==="erc1155"&&(h=h.replace("{id}",f.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=gp(h)),e.push({type:"metadata-url",content:h});const g=yield Cg(h);if(!g)return null;e.push({type:"metadata",content:JSON.stringify(g)});let p=g.image;if(typeof p!="string")return null;if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(IE)==null)return null;e.push({type:"url-ipfs",content:p}),p=gp(p)}return e.push({type:"url",content:p}),{linkage:e,url:p}}}}}catch{}return null})}getContentHash(){return we(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+G0.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+G0.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+VS("0x"+s[1]).replace(/[=+\/]/g,c=>o[c])}return Ae.throwError("invalid or unsupported content hash data",H.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return we(this,void 0,void 0,function*(){let r=gi(e);r=tn([mp(64),mp(r.length),r]),r.length%32!==0&&(r=tn([r,Nt("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",le(r));return n==null||n==="0x"?null:Il(n)})}}let vp=null,yP=1;class wP extends Od{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),X(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=ci(new.target,"getNetwork")(e);r?(X(this,"_network",r),this.emit("network",r,null)):Ae.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return we(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Ae.throwError("no network detected",H.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:X(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Rc(()=>this._ready().then(e=>e,e=>{if(!(e.code===H.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return vp==null&&(vp=new ae),vp}static getNetwork(e){return QT(e??"homestead")}ccipReadFetch(e,r,n){return we(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",i).replace("{data}",s),f=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),u=yield Cg({url:l,errorPassThrough:!0},f,(g,p)=>(g.status=p.statusCode,g));if(u.data)return u.data;const h=u.message||"unknown error";if(u.status>=400&&u.status<500)return Ae.throwError(`response not found during CCIP fetch: ${h}`,H.errors.SERVER_ERROR,{url:c,errorMessage:h});o.push(h)}return Ae.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,H.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return we(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(fc()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=fc(),n=Qt({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=fc();return i=Z.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return we(this,void 0,void 0,function*(){const e=yP++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Ae.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Ae.makeError("network block skew detected",H.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});r.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(l=>{l.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=l.blockNumber),this._emitted["b:"+l.blockHash]=l.blockNumber,this._emitted["t:"+l.transactionHash]=l.blockNumber,this.emit(s,l)})}).catch(c=>{this.emit("error",c),i._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return we(this,void 0,void 0,function*(){return Ae.throwError("provider does not support network detection",H.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return we(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield gy(0),this._network;const n=Ae.makeError("underlying network changed",H.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=fc();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=fc(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return we(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return we(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((o,a)=>{const c=[];let l=!1;const f=function(){return l?!0:(l=!0,c.forEach(h=>{h()}),!1)},u=h=>{h.confirmations<r||f()||o(h)};if(this.on(e,u),c.push(()=>{this.removeListener(e,u)}),i){let h=i.startBlock,g=null;const p=y=>we(this,void 0,void 0,function*(){l||(yield gy(1e3),this.getTransactionCount(i.from).then(b=>we(this,void 0,void 0,function*(){if(!l){if(b<=i.nonce)h=y;else{{const S=yield this.getTransaction(e);if(S&&S.blockNumber!=null)return}for(g==null&&(g=h-3,g<i.startBlock&&(g=i.startBlock));g<=y;){if(l)return;const S=yield this.getBlockWithTransactions(g);for(let E=0;E<S.transactions.length;E++){const w=S.transactions[E];if(w.hash===e)return;if(w.from===i.from&&w.nonce===i.nonce){if(l)return;const T=yield this.waitForTransaction(w.hash,r);if(f())return;let D="replaced";w.data===i.data&&w.to===i.to&&w.value.eq(i.value)?D="repriced":w.data==="0x"&&w.from===w.to&&w.value.isZero()&&(D="cancelled"),a(Ae.makeError("transaction was replaced",H.errors.TRANSACTION_REPLACED,{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:this._wrapTransaction(w),hash:e,receipt:T}));return}}g++}}l||this.once("block",p)}}),b=>{l||this.once("block",p)}))});if(l)return;this.once("block",p),c.push(()=>{this.removeListener("block",p)})}if(typeof n=="number"&&n>0){const h=setTimeout(()=>{f()||a(Ae.makeError("timeout exceeded",H.errors.TIMEOUT,{timeout:n}))},n);h.unref&&h.unref(),c.push(()=>{clearTimeout(h)})}})})}getBlockNumber(){return we(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return we(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Z.from(e)}catch(r){return Ae.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return we(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Qt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return Z.from(i)}catch(s){return Ae.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return we(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Qt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return Z.from(i).toNumber()}catch(s){return Ae.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return we(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Qt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return le(i)}catch(s){return Ae.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return we(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Qt({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>gg(o))}),s=yield this.perform("getStorageAt",i);try{return le(s)}catch(o){return Ae.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&co(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&Ae.throwError("Transaction hash mismatch from Provider.sendTransaction.",H.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,o)=>we(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,s,o,a);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&Ae.throwError("transaction failed",H.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return we(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>le(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return we(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?Z.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?le(s):null))}),this.formatter.transactionRequest(yield Qt(n))})}_getFilter(e){return we(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Qt(r))})}_call(e,r,n){return we(this,void 0,void 0,function*(){n>=dP&&Ae.throwError("CCIP read exceeded maximum redirections",H.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&co(s)%32===4)try{const o=Tr(s,4),a=Tr(o,0,32);Z.from(a).eq(i)||Ae.throwError("CCIP Read sender did not match",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],l=Z.from(Tr(o,32,64)).toNumber(),f=Z.from(Tr(o,l,l+32)).toNumber(),u=Tr(o,l+32);for(let S=0;S<f;S++){const E=au(u,S*32);E==null&&Ae.throwError("CCIP Read contained corrupt URL string",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(E)}const h=vl(o,64);Z.from(Tr(o,100,128)).isZero()||Ae.throwError("CCIP Read callback selector included junk",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const g=Tr(o,96,100),p=vl(o,128),y=yield this.ccipReadFetch(e,h,c);y==null&&Ae.throwError("CCIP Read disabled or provided no URLs",H.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const b={to:i,data:zr([g,kE([y,p])])};return this._call(b,r,n+1)}catch(o){if(o.code===H.errors.SERVER_ERROR)throw o}try{return le(s)}catch(o){return Ae.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:o})}})}call(e,r){return we(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Qt({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return we(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Qt({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return Z.from(n)}catch(i){return Ae.throwError("bad result from backend",H.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return we(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Ae.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&Ae.throwError("ENS name not configured",H.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return we(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(Ke(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Ke(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{Ae.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Rc(()=>we(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let c=0;c<s.transactions.length;c++){const l=s.transactions[c];if(l.blockNumber==null)l.confirmations=0;else if(l.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let f=o-l.blockNumber+1;f<=0&&(f=1),l.confirmations=f}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return we(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Rc(()=>we(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return we(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Rc(()=>we(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return we(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Qt({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),ae.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return we(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return we(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Ae.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return we(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new _y(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return we(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||Ae.throwError("network does not support ENS",H.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+nu(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return we(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Ke(e))throw n}typeof e!="string"&&Ae.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return we(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=au(yield this.call({to:n,data:"0x691f3431"+nu(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return we(this,void 0,void 0,function*(){let r=null;if(Ke(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;r=new _y(this,o,s);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==H.errors.CALL_EXCEPTION)throw a}try{const a=au(yield this.call({to:o,data:"0x691f3431"+nu(s).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==H.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return Ae.throwError(e+" not implemented",H.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new mP(So(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=So(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=So(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=So(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=So(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=r||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=So(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var Pi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(u){o(u)}}function c(f){try{l(n.throw(f))}catch(u){o(u)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Xt=new H(Fd),_P=["call","estimateGas"];function Vc(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=Ke(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=Vc(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return Vc(JSON.parse(t),e)}catch{}return null}function DE(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=Vc(e,!0);if(s)return s.data;Xt.throwError("missing revert data in call exception; Transaction reverted without a reason string",H.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=Vc(e.body,!1);s==null&&(s=Vc(e,!1)),s&&Xt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",H.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===H.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Xt.throwError("insufficient funds for intrinsic transaction cost",H.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&Xt.throwError("nonce has already been used",H.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Xt.throwError("replacement fee too low",H.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&Xt.throwError("legacy pre-eip-155 transactions not supported",H.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),_P.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Xt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",H.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function by(t){return new Promise(function(e){setTimeout(e,t)})}function bP(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function uc(t){return t&&t.toLowerCase()}const J0={};class OE extends kl{constructor(e,r,n){if(super(),e!==J0)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");X(this,"provider",r),n==null&&(n=0),typeof n=="string"?(X(this,"_address",this.provider.formatter.address(n)),X(this,"_index",null)):typeof n=="number"?(X(this,"_index",n),X(this,"_address",null)):Xt.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Xt.throwError("cannot alter JSON-RPC Signer connection",H.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new SP(J0,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Xt.throwError("unknown account #"+this._index,H.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=lr(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=lr(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Pi(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&Xt.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),Qt({tx:Qt(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&Xt.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Xt.throwError("user rejected transaction",H.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),DE("sendTransaction",o,s)))})}signTransaction(e){return Xt.throwError("signing transactions is unsupported",H.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Pi(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield Rc(()=>Pi(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return Pi(this,void 0,void 0,function*(){const r=typeof e=="string"?gi(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[le(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Xt.throwError("user rejected signing",H.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return Pi(this,void 0,void 0,function*(){const r=typeof e=="string"?gi(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),le(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Xt.throwError("user rejected signing",H.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return Pi(this,void 0,void 0,function*(){const i=yield Yr.resolveNames(e,r,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Yr.getPayload(i.domain,r,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Xt.throwError("user rejected signing",H.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),o}})}unlock(e){return Pi(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class SP extends OE{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const EP={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class xP extends wP{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=ci(this.constructor,"defaultUrl")()),typeof e=="string"?X(this,"connection",Object.freeze({url:e})):X(this,"connection",Object.freeze(lr(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Pi(this,void 0,void 0,function*(){yield by(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=ci(this.constructor,"getNetwork");try{return r(Z.from(e).toNumber())}catch(n){return Xt.throwError("could not detect network",H.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Xt.throwError("could not detect network",H.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new OE(J0,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:zi(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=Cg(this.connection,JSON.stringify(n),bP).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[uc(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[uc(r.address),r.blockTag]];case"getCode":return["eth_getCode",[uc(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[uc(r.address),Nt(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[ci(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[ci(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=uc(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return Pi(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&Z.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=lr(r),r.transaction=lr(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&Xt.throwError(e+" not implemented",H.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return DE(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return by(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=lr(EP);if(r)for(const s in r)r[s]&&(n[s]=!0);_R(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=gg(Z.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=le(e[s]))}),e.accessList&&(i.accessList=Va(e.accessList)),i}}const Sy=new H(Fd);let RP=1;function Ey(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:RP++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:r,request:zi(s),provider:this}),e(s,(c,l)=>{if(c)return this.emit("debug",{action:"response",fetcher:r,error:c,request:s,provider:this}),a(c);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:l,provider:this}),l.error){const f=new Error(l.error.message);return f.code=l.error.code,f.data=l.error.data,a(f)}o(l.result)})})}}function AP(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:zi(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class Tg extends xP{constructor(e,r){e==null&&Sy.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=AP(e)):e.sendAsync?i=Ey(e,e.sendAsync.bind(e)):e.send?i=Ey(e,e.send.bind(e)):Sy.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),X(this,"jsonRpcFetchFunc",i),X(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const CP="units/5.7.0",TP=new H(CP),PP=["wei","kwei","mwei","gwei","szabo","finney","ether"];function IP(t,e){if(typeof t!="string"&&TP.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=PP.indexOf(e);r!==-1&&(e=3*r)}return Zn(t,e??18)}function kP(t){return IP(t,18)}function NE(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=NE(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function ys(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=NE(t))&&(n&&(n+=" "),n+=e);return n}const Hc=t=>typeof t=="number"&&!isNaN(t),ho=t=>typeof t=="string",Hr=t=>typeof t=="function",cu=t=>ho(t)||Hr(t)?t:null,yp=t=>V.isValidElement(t)||ho(t)||Hr(t)||Hc(t);function DP(t,e,r){r===void 0&&(r=300);const{scrollHeight:n,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=n+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,r)})})}function Ud(t){let{enter:e,exit:r,appendPosition:n=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:c,preventExitTransition:l,done:f,nodeRef:u,isIn:h}=o;const g=n?`${e}--${c}`:e,p=n?`${r}--${c}`:r,y=V.useRef(0);return V.useLayoutEffect(()=>{const b=u.current,S=g.split(" "),E=w=>{w.target===u.current&&(b.dispatchEvent(new Event("d")),b.removeEventListener("animationend",E),b.removeEventListener("animationcancel",E),y.current===0&&w.type!=="animationcancel"&&b.classList.remove(...S))};b.classList.add(...S),b.addEventListener("animationend",E),b.addEventListener("animationcancel",E)},[]),V.useEffect(()=>{const b=u.current,S=()=>{b.removeEventListener("animationend",S),i?DP(b,f,s):f()};h||(l?S():(y.current=1,b.className+=` ${p}`,b.addEventListener("animationend",S)))},[h]),Ce.createElement(Ce.Fragment,null,a)}}function xy(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const dn={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const r=this.list.get(t).filter(n=>n!==e);return this.list.set(t,r),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const r=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(r)})}},yf=t=>{let{theme:e,type:r,...n}=t;return Ce.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...n})},wp={info:function(t){return Ce.createElement(yf,{...t},Ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Ce.createElement(yf,{...t},Ce.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Ce.createElement(yf,{...t},Ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Ce.createElement(yf,{...t},Ce.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ce.createElement("div",{className:"Toastify__spinner"})}};function OP(t){const[,e]=V.useReducer(g=>g+1,0),[r,n]=V.useState([]),i=V.useRef(null),s=V.useRef(new Map).current,o=g=>r.indexOf(g)!==-1,a=V.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:g=>s.get(g)}).current;function c(g){let{containerId:p}=g;const{limit:y}=a.props;!y||p&&a.containerId!==p||(a.count-=a.queue.length,a.queue=[])}function l(g){n(p=>g==null?[]:p.filter(y=>y!==g))}function f(){const{toastContent:g,toastProps:p,staleId:y}=a.queue.shift();h(g,p,y)}function u(g,p){let{delay:y,staleId:b,...S}=p;if(!yp(g)||function(A){return!i.current||a.props.enableMultiContainer&&A.containerId!==a.props.containerId||s.has(A.toastId)&&A.updateId==null}(S))return;const{toastId:E,updateId:w,data:T}=S,{props:D}=a,B=()=>l(E),j=w==null;j&&a.count++;const N={...D,style:D.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(S).filter(A=>{let[m,d]=A;return d!=null})),toastId:E,updateId:w,data:T,closeToast:B,isIn:!1,className:cu(S.className||D.toastClassName),bodyClassName:cu(S.bodyClassName||D.bodyClassName),progressClassName:cu(S.progressClassName||D.progressClassName),autoClose:!S.isLoading&&(F=S.autoClose,$=D.autoClose,F===!1||Hc(F)&&F>0?F:$),deleteToast(){const A=xy(s.get(E),"removed");s.delete(E),dn.emit(4,A);const m=a.queue.length;if(a.count=E==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),m>0){const d=E==null?a.props.limit:1;if(m===1||d===1)a.displayedToast++,f();else{const v=d>m?m:d;a.displayedToast=v;for(let R=0;R<v;R++)f()}}else e()}};var F,$;N.iconOut=function(A){let{theme:m,type:d,isLoading:v,icon:R}=A,C=null;const x={theme:m,type:d};return R===!1||(Hr(R)?C=R(x):V.isValidElement(R)?C=V.cloneElement(R,x):ho(R)||Hc(R)?C=R:v?C=wp.spinner():(P=>P in wp)(d)&&(C=wp[d](x))),C}(N),Hr(S.onOpen)&&(N.onOpen=S.onOpen),Hr(S.onClose)&&(N.onClose=S.onClose),N.closeButton=D.closeButton,S.closeButton===!1||yp(S.closeButton)?N.closeButton=S.closeButton:S.closeButton===!0&&(N.closeButton=!yp(D.closeButton)||D.closeButton);let U=g;V.isValidElement(g)&&!ho(g.type)?U=V.cloneElement(g,{closeToast:B,toastProps:N,data:T}):Hr(g)&&(U=g({closeToast:B,toastProps:N,data:T})),D.limit&&D.limit>0&&a.count>D.limit&&j?a.queue.push({toastContent:U,toastProps:N,staleId:b}):Hc(y)?setTimeout(()=>{h(U,N,b)},y):h(U,N,b)}function h(g,p,y){const{toastId:b}=p;y&&s.delete(y);const S={content:g,props:p};s.set(b,S),n(E=>[...E,b].filter(w=>w!==y)),dn.emit(4,xy(S,S.props.updateId==null?"added":"updated"))}return V.useEffect(()=>(a.containerId=t.containerId,dn.cancelEmit(3).on(0,u).on(1,g=>i.current&&l(g)).on(5,c).emit(2,a),()=>{s.clear(),dn.emit(3,a)}),[]),V.useEffect(()=>{a.props=t,a.isToastActive=o,a.displayedToast=r.length}),{getToastToRender:function(g){const p=new Map,y=Array.from(s.values());return t.newestOnTop&&y.reverse(),y.forEach(b=>{const{position:S}=b.props;p.has(S)||p.set(S,[]),p.get(S).push(b)}),Array.from(p,b=>g(b[0],b[1]))},containerRef:i,isToastActive:o}}function Ry(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function Ay(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function NP(t){const[e,r]=V.useState(!1),[n,i]=V.useState(!1),s=V.useRef(null),o=V.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=V.useRef(t),{autoClose:c,pauseOnHover:l,closeToast:f,onClick:u,closeOnClick:h}=t;function g(T){if(t.draggable){T.nativeEvent.type==="touchstart"&&T.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",S),document.addEventListener("mouseup",E),document.addEventListener("touchmove",S),document.addEventListener("touchend",E);const D=s.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=D.getBoundingClientRect(),D.style.transition="",o.x=Ry(T.nativeEvent),o.y=Ay(T.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=D.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=D.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function p(T){if(o.boundingRect){const{top:D,bottom:B,left:j,right:N}=o.boundingRect;T.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=j&&o.x<=N&&o.y>=D&&o.y<=B?b():y()}}function y(){r(!0)}function b(){r(!1)}function S(T){const D=s.current;o.canDrag&&D&&(o.didMove=!0,e&&b(),o.x=Ry(T),o.y=Ay(T),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),D.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,D.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function E(){document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",E);const T=s.current;if(o.canDrag&&o.didMove&&T){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),void t.closeToast();T.style.transition="transform 0.2s, opacity 0.2s",T.style.transform=`translate${t.draggableDirection}(0)`,T.style.opacity="1"}}V.useEffect(()=>{a.current=t}),V.useEffect(()=>(s.current&&s.current.addEventListener("d",y,{once:!0}),Hr(t.onOpen)&&t.onOpen(V.isValidElement(t.children)&&t.children.props),()=>{const T=a.current;Hr(T.onClose)&&T.onClose(V.isValidElement(T.children)&&T.children.props)}),[]),V.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||b(),window.addEventListener("focus",y),window.addEventListener("blur",b)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",y),window.removeEventListener("blur",b))}),[t.pauseOnFocusLoss]);const w={onMouseDown:g,onTouchStart:g,onMouseUp:p,onTouchEnd:p};return c&&l&&(w.onMouseEnter=b,w.onMouseLeave=y),h&&(w.onClick=T=>{u&&u(T),o.canCloseOnClick&&f()}),{playToast:y,pauseToast:b,isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:w}}function ME(t){let{closeToast:e,theme:r,ariaLabel:n="close"}=t;return Ce.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":n},Ce.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ce.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function MP(t){let{delay:e,isRunning:r,closeToast:n,type:i="default",hide:s,className:o,style:a,controlledProgress:c,progress:l,rtl:f,isIn:u,theme:h}=t;const g=s||c&&l===0,p={...a,animationDuration:`${e}ms`,animationPlayState:r?"running":"paused",opacity:g?0:1};c&&(p.transform=`scaleX(${l})`);const y=ys("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":f}),b=Hr(o)?o({rtl:f,type:i,defaultClassName:y}):ys(y,o);return Ce.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:b,style:p,[c&&l>=1?"onTransitionEnd":"onAnimationEnd"]:c&&l<1?null:()=>{u&&n()}})}const LP=t=>{const{isRunning:e,preventExitTransition:r,toastRef:n,eventHandlers:i}=NP(t),{closeButton:s,children:o,autoClose:a,onClick:c,type:l,hideProgressBar:f,closeToast:u,transition:h,position:g,className:p,style:y,bodyClassName:b,bodyStyle:S,progressClassName:E,progressStyle:w,updateId:T,role:D,progress:B,rtl:j,toastId:N,deleteToast:F,isIn:$,isLoading:U,iconOut:A,closeOnClick:m,theme:d}=t,v=ys("Toastify__toast",`Toastify__toast-theme--${d}`,`Toastify__toast--${l}`,{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":m}),R=Hr(p)?p({rtl:j,position:g,type:l,defaultClassName:v}):ys(v,p),C=!!B||!a,x={closeToast:u,type:l,theme:d};let P=null;return s===!1||(P=Hr(s)?s(x):V.isValidElement(s)?V.cloneElement(s,x):ME(x)),Ce.createElement(h,{isIn:$,done:F,position:g,preventExitTransition:r,nodeRef:n},Ce.createElement("div",{id:N,onClick:c,className:R,...i,style:y,ref:n},Ce.createElement("div",{...$&&{role:D},className:Hr(b)?b({type:l}):ys("Toastify__toast-body",b),style:S},A!=null&&Ce.createElement("div",{className:ys("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!U})},A),Ce.createElement("div",null,o)),P,Ce.createElement(MP,{...T&&!C?{key:`pb-${T}`}:{},rtl:j,theme:d,delay:a,isRunning:e,isIn:$,closeToast:u,hide:f,type:l,style:w,className:E,controlledProgress:C,progress:B||0})))},$d=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},jP=Ud($d("bounce",!0));Ud($d("slide",!0));Ud($d("zoom"));Ud($d("flip"));const K0=V.forwardRef((t,e)=>{const{getToastToRender:r,containerRef:n,isToastActive:i}=OP(t),{className:s,style:o,rtl:a,containerId:c}=t;function l(f){const u=ys("Toastify__toast-container",`Toastify__toast-container--${f}`,{"Toastify__toast-container--rtl":a});return Hr(s)?s({position:f,rtl:a,defaultClassName:u}):ys(u,cu(s))}return V.useEffect(()=>{e&&(e.current=n.current)},[]),Ce.createElement("div",{ref:n,className:"Toastify",id:c},r((f,u)=>{const h=u.length?{...o}:{...o,pointerEvents:"none"};return Ce.createElement("div",{className:l(f),style:h,key:`container-${f}`},u.map((g,p)=>{let{content:y,props:b}=g;return Ce.createElement(LP,{...b,isIn:i(b.toastId),style:{...b.style,"--nth":p+1,"--len":u.length},key:`toast-${b.key}`},y)}))}))});K0.displayName="ToastContainer",K0.defaultProps={position:"top-right",transition:jP,autoClose:5e3,closeButton:ME,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let _p,Qs=new Map,Ac=[],BP=1;function LE(){return""+BP++}function FP(t){return t&&(ho(t.toastId)||Hc(t.toastId))?t.toastId:LE()}function Gc(t,e){return Qs.size>0?dn.emit(0,t,e):Ac.push({content:t,options:e}),e.toastId}function td(t,e){return{...e,type:e&&e.type||t,toastId:FP(e)}}function wf(t){return(e,r)=>Gc(e,td(t,r))}function ct(t,e){return Gc(t,td("default",e))}ct.loading=(t,e)=>Gc(t,td("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),ct.promise=function(t,e,r){let n,{pending:i,error:s,success:o}=e;i&&(n=ho(i)?ct.loading(i,r):ct.loading(i.render,{...r,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(f,u,h)=>{if(u==null)return void ct.dismiss(n);const g={type:f,...a,...r,data:h},p=ho(u)?{render:u}:u;return n?ct.update(n,{...g,...p}):ct(p.render,{...g,...p}),h},l=Hr(t)?t():t;return l.then(f=>c("success",o,f)).catch(f=>c("error",s,f)),l},ct.success=wf("success"),ct.info=wf("info"),ct.error=wf("error"),ct.warning=wf("warning"),ct.warn=ct.warning,ct.dark=(t,e)=>Gc(t,td("default",{theme:"dark",...e})),ct.dismiss=t=>{Qs.size>0?dn.emit(1,t):Ac=Ac.filter(e=>t!=null&&e.options.toastId!==t)},ct.clearWaitingQueue=function(t){return t===void 0&&(t={}),dn.emit(5,t)},ct.isActive=t=>{let e=!1;return Qs.forEach(r=>{r.isToastActive&&r.isToastActive(t)&&(e=!0)}),e},ct.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const r=function(n,i){let{containerId:s}=i;const o=Qs.get(s||_p);return o&&o.getToast(n)}(t,e);if(r){const{props:n,content:i}=r,s={delay:100,...n,...e,toastId:e.toastId||t,updateId:LE()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Gc(o,s)}},0)},ct.done=t=>{ct.update(t,{progress:1})},ct.onChange=t=>(dn.on(4,t),()=>{dn.off(4,t)}),ct.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},ct.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},dn.on(2,t=>{_p=t.containerId||t,Qs.set(_p,t),Ac.forEach(e=>{dn.emit(0,e.content,e.options)}),Ac=[]}).on(3,t=>{Qs.delete(t.containerId||t),Qs.size===0&&dn.off(0).off(1).off(5)});const UP="hh-sol-artifact-1",$P="coffeekachakkar",zP="contracts/Coffee.sol",VP=[{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"string",name:"url",type:"string"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"allow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"coffeeName",type:"string"},{internalType:"string",name:"coffeeMessage",type:"string"}],name:"buyCoffee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"disallow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"accessList",outputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bool",name:"access",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"display",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMemos",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"message",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"address",name:"from",type:"address"}],internalType:"struct coffeekachakkar.Memo[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"shareAccess",outputs:[{components:[{internalType:"address",name:"user",type:"address"},{internalType:"bool",name:"access",type:"bool"}],internalType:"struct coffeekachakkar.Access[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"}],HP="608060405234801561000f575f80fd5b503360015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550611e0f8061005d5f395ff3fe60806040526004361061007a575f3560e01c8063a9ed9cb81161004d578063a9ed9cb814610129578063bc8bef8114610151578063eb39113f1461017b578063ff9913e8146101b75761007a565b8063204206e11461007e57806336d6da551461009a57806370c2b419146100c2578063865c5172146100ff575b5f80fd5b61009860048036038101906100939190611289565b6101df565b005b3480156100a5575f80fd5b506100c060048036038101906100bb91906113b6565b610364565b005b3480156100cd575f80fd5b506100e860048036038101906100e39190611446565b6103df565b6040516100f69291906114ad565b60405180910390f35b34801561010a575f80fd5b50610113610440565b604051610120919061168e565b60405180910390f35b348015610134575f80fd5b5061014f600480360381019061014a91906116ae565b610619565b005b34801561015c575f80fd5b50610165610917565b60405161017291906117bd565b60405180910390f35b348015610186575f80fd5b506101a1600480360381019061019c91906116ae565b610a18565b6040516101ae9190611898565b60405180910390f35b3480156101c2575f80fd5b506101dd60048036038101906101d891906116ae565b610c23565b005b5f3411610221576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161021890611912565b60405180910390fd5b60015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3490811502906040515f60405180830381858888f19350505050158015610285573d5f803e3d5ffd5b505f60405180608001604052808481526020018381526020014281526020013373ffffffffffffffffffffffffffffffffffffffff16815250908060018154018082558091505060019003905f5260205f2090600402015f909190919091505f820151815f0190816102f79190611b2a565b50602082015181600101908161030d9190611b2a565b50604082015181600201556060820151816003015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050505050565b60025f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20828290918060018154018082558091505060019003905f5260205f20015f9091929091929091929091925091826103d9929190611c03565b50505050565b6004602052815f5260405f2081815481106103f8575f80fd5b905f5260205f20015f9150915050805f015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690805f0160149054906101000a900460ff16905082565b60605f805480602002602001604051908101604052809291908181526020015f905b82821015610610578382905f5260205f2090600402016040518060800160405290815f820180546104929061195d565b80601f01602080910402602001604051908101604052809291908181526020018280546104be9061195d565b80156105095780601f106104e057610100808354040283529160200191610509565b820191905f5260205f20905b8154815290600101906020018083116104ec57829003601f168201915b505050505081526020016001820180546105229061195d565b80601f016020809104026020016040519081016040528092919081815260200182805461054e9061195d565b80156105995780601f1061057057610100808354040283529160200191610599565b820191905f5260205f20905b81548152906001019060200180831161057c57829003601f168201915b5050505050815260200160028201548152602001600382015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152505081526020019060010190610462565b50505050905090565b5f60035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055505f5b60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2080549050811015610822578173ffffffffffffffffffffffffffffffffffffffff1660045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20828154811061075857610757611cd0565b5b905f5260205f20015f015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff160361080f575f60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2082815481106107ed576107ec611cd0565b5b905f5260205f20015f0160146101000a81548160ff0219169083151502179055505b808061081a90611d2a565b9150506106aa565b5060045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060405180604001604052808373ffffffffffffffffffffffffffffffffffffffff1681526020015f1515815250908060018154018082558091505060019003905f5260205f20015f909190919091505f820151815f015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151815f0160146101000a81548160ff021916908315150217905550505050565b606060045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20805480602002602001604051908101604052809291908181526020015f905b82821015610a0f578382905f5260205f20016040518060400160405290815f82015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020015f820160149054906101000a900460ff16151515158152505081526020019060010190610975565b50505050905090565b60603373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161480610ad5575060035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff165b610b14576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b0b90611dbb565b60405180910390fd5b60025f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20805480602002602001604051908101604052809291908181526020015f905b82821015610c18578382905f5260205f20018054610b8d9061195d565b80601f0160208091040260200160405190810160405280929190818152602001828054610bb99061195d565b8015610c045780601f10610bdb57610100808354040283529160200191610c04565b820191905f5260205f20905b815481529060010190602001808311610be757829003601f168201915b505050505081526020019060010190610b70565b505050509050919050565b600160035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055506001151560055f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16151503610ec4575f5b60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2080549050811015610ebe578173ffffffffffffffffffffffffffffffffffffffff1660045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208281548110610df357610df2611cd0565b5b905f5260205f20015f015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1603610eab57600160045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208281548110610e8957610e88611cd0565b5b905f5260205f20015f0160146101000a81548160ff0219169083151502179055505b8080610eb690611d2a565b915050610d45565b50611047565b60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060405180604001604052808373ffffffffffffffffffffffffffffffffffffffff16815260200160011515815250908060018154018082558091505060019003905f5260205f20015f909190919091505f820151815f015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151815f0160146101000a81548160ff0219169083151502179055505050600160055f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055505b60045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060405180604001604052808373ffffffffffffffffffffffffffffffffffffffff16815260200160011515815250908060018154018082558091505060019003905f5260205f20015f909190919091505f820151815f015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151815f0160146101000a81548160ff021916908315150217905550505050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61119b82611155565b810181811067ffffffffffffffff821117156111ba576111b9611165565b5b80604052505050565b5f6111cc61113c565b90506111d88282611192565b919050565b5f67ffffffffffffffff8211156111f7576111f6611165565b5b61120082611155565b9050602081019050919050565b828183375f83830152505050565b5f61122d611228846111dd565b6111c3565b90508281526020810184848401111561124957611248611151565b5b61125484828561120d565b509392505050565b5f82601f8301126112705761126f61114d565b5b813561128084826020860161121b565b91505092915050565b5f806040838503121561129f5761129e611145565b5b5f83013567ffffffffffffffff8111156112bc576112bb611149565b5b6112c88582860161125c565b925050602083013567ffffffffffffffff8111156112e9576112e8611149565b5b6112f58582860161125c565b9150509250929050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f611328826112ff565b9050919050565b6113388161131e565b8114611342575f80fd5b50565b5f813590506113538161132f565b92915050565b5f80fd5b5f80fd5b5f8083601f8401126113765761137561114d565b5b8235905067ffffffffffffffff81111561139357611392611359565b5b6020830191508360018202830111156113af576113ae61135d565b5b9250929050565b5f805f604084860312156113cd576113cc611145565b5b5f6113da86828701611345565b935050602084013567ffffffffffffffff8111156113fb576113fa611149565b5b61140786828701611361565b92509250509250925092565b5f819050919050565b61142581611413565b811461142f575f80fd5b50565b5f813590506114408161141c565b92915050565b5f806040838503121561145c5761145b611145565b5b5f61146985828601611345565b925050602061147a85828601611432565b9150509250929050565b61148d8161131e565b82525050565b5f8115159050919050565b6114a781611493565b82525050565b5f6040820190506114c05f830185611484565b6114cd602083018461149e565b9392505050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f81519050919050565b5f82825260208201905092915050565b5f5b83811015611534578082015181840152602081019050611519565b5f8484015250505050565b5f611549826114fd565b6115538185611507565b9350611563818560208601611517565b61156c81611155565b840191505092915050565b61158081611413565b82525050565b61158f8161131e565b82525050565b5f608083015f8301518482035f8601526115af828261153f565b915050602083015184820360208601526115c9828261153f565b91505060408301516115de6040860182611577565b5060608301516115f16060860182611586565b508091505092915050565b5f6116078383611595565b905092915050565b5f602082019050919050565b5f611625826114d4565b61162f81856114de565b935083602082028501611641856114ee565b805f5b8581101561167c578484038952815161165d85826115fc565b94506116688361160f565b925060208a01995050600181019050611644565b50829750879550505050505092915050565b5f6020820190508181035f8301526116a6818461161b565b905092915050565b5f602082840312156116c3576116c2611145565b5b5f6116d084828501611345565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b61170b81611493565b82525050565b604082015f8201516117255f850182611586565b5060208201516117386020850182611702565b50505050565b5f6117498383611711565b60408301905092915050565b5f602082019050919050565b5f61176b826116d9565b61177581856116e3565b9350611780836116f3565b805f5b838110156117b0578151611797888261173e565b97506117a283611755565b925050600181019050611783565b5085935050505092915050565b5f6020820190508181035f8301526117d58184611761565b905092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f611811838361153f565b905092915050565b5f602082019050919050565b5f61182f826117dd565b61183981856117e7565b93508360208202850161184b856117f7565b805f5b8581101561188657848403895281516118678582611806565b945061187283611819565b925060208a0199505060018101905061184e565b50829750879550505050505092915050565b5f6020820190508181035f8301526118b08184611825565b905092915050565b5f82825260208201905092915050565b7f506c656173652070617920746865206465736972656420616d6f756e740000005f82015250565b5f6118fc601d836118b8565b9150611907826118c8565b602082019050919050565b5f6020820190508181035f830152611929816118f0565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061197457607f821691505b60208210810361198757611986611930565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026119e97fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826119ae565b6119f386836119ae565b95508019841693508086168417925050509392505050565b5f819050919050565b5f611a2e611a29611a2484611413565b611a0b565b611413565b9050919050565b5f819050919050565b611a4783611a14565b611a5b611a5382611a35565b8484546119ba565b825550505050565b5f90565b611a6f611a63565b611a7a818484611a3e565b505050565b5b81811015611a9d57611a925f82611a67565b600181019050611a80565b5050565b601f821115611ae257611ab38161198d565b611abc8461199f565b81016020851015611acb578190505b611adf611ad78561199f565b830182611a7f565b50505b505050565b5f82821c905092915050565b5f611b025f1984600802611ae7565b1980831691505092915050565b5f611b1a8383611af3565b9150826002028217905092915050565b611b33826114fd565b67ffffffffffffffff811115611b4c57611b4b611165565b5b611b56825461195d565b611b61828285611aa1565b5f60209050601f831160018114611b92575f8415611b80578287015190505b611b8a8582611b0f565b865550611bf1565b601f198416611ba08661198d565b5f5b82811015611bc757848901518255600182019150602085019450602081019050611ba2565b86831015611be45784890151611be0601f891682611af3565b8355505b6001600288020188555050505b505050505050565b5f82905092915050565b611c0d8383611bf9565b67ffffffffffffffff811115611c2657611c25611165565b5b611c30825461195d565b611c3b828285611aa1565b5f601f831160018114611c68575f8415611c56578287013590505b611c608582611b0f565b865550611cc7565b601f198416611c768661198d565b5f5b82811015611c9d57848901358255600182019150602085019450602081019050611c78565b86831015611cba5784890135611cb6601f891682611af3565b8355505b6001600288020188555050505b50505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f611d3482611413565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611d6657611d65611cfd565b5b600182019050919050565b7f596f7520646f6e742068617665206163636573730000000000000000000000005f82015250565b5f611da56014836118b8565b9150611db082611d71565b602082019050919050565b5f6020820190508181035f830152611dd281611d99565b905091905056fea2646970667358221220dddaab6b212bd2200e7932728a9f644cf5fd8a16d22af516f35fd8732a4b771264736f6c63430008150033",GP="0x6080604052600436106100295760003560e01c8063204206e11461002e578063865c51721461004a575b600080fd5b61004860048036038101906100439190610543565b610075565b005b34801561005657600080fd5b5061005f610206565b60405161006c91906107c0565b60405180910390f35b600034116100b8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100af9061083f565b60405180910390fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015610120573d6000803e3d6000fd5b50600060405180608001604052808481526020018381526020014281526020013373ffffffffffffffffffffffffffffffffffffffff16815250908060018154018082558091505060019003906000526020600020906004020160009091909190915060008201518160000190816101989190610a6b565b5060208201518160010190816101ae9190610a6b565b506040820151816002015560608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050505050565b60606000805480602002602001604051908101604052809291908181526020016000905b828210156103e0578382906000526020600020906004020160405180608001604052908160008201805461025d9061088e565b80601f01602080910402602001604051908101604052809291908181526020018280546102899061088e565b80156102d65780601f106102ab576101008083540402835291602001916102d6565b820191906000526020600020905b8154815290600101906020018083116102b957829003601f168201915b505050505081526020016001820180546102ef9061088e565b80601f016020809104026020016040519081016040528092919081815260200182805461031b9061088e565b80156103685780601f1061033d57610100808354040283529160200191610368565b820191906000526020600020905b81548152906001019060200180831161034b57829003601f168201915b50505050508152602001600282015481526020016003820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815250508152602001906001019061022a565b50505050905090565b6000604051905090565b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61045082610407565b810181811067ffffffffffffffff8211171561046f5761046e610418565b5b80604052505050565b60006104826103e9565b905061048e8282610447565b919050565b600067ffffffffffffffff8211156104ae576104ad610418565b5b6104b782610407565b9050602081019050919050565b82818337600083830152505050565b60006104e66104e184610493565b610478565b90508281526020810184848401111561050257610501610402565b5b61050d8482856104c4565b509392505050565b600082601f83011261052a576105296103fd565b5b813561053a8482602086016104d3565b91505092915050565b6000806040838503121561055a576105596103f3565b5b600083013567ffffffffffffffff811115610578576105776103f8565b5b61058485828601610515565b925050602083013567ffffffffffffffff8111156105a5576105a46103f8565b5b6105b185828601610515565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610621578082015181840152602081019050610606565b60008484015250505050565b6000610638826105e7565b61064281856105f2565b9350610652818560208601610603565b61065b81610407565b840191505092915050565b6000819050919050565b61067981610666565b82525050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006106aa8261067f565b9050919050565b6106ba8161069f565b82525050565b600060808301600083015184820360008601526106dd828261062d565b915050602083015184820360208601526106f7828261062d565b915050604083015161070c6040860182610670565b50606083015161071f60608601826106b1565b508091505092915050565b600061073683836106c0565b905092915050565b6000602082019050919050565b6000610756826105bb565b61076081856105c6565b935083602082028501610772856105d7565b8060005b858110156107ae578484038952815161078f858261072a565b945061079a8361073e565b925060208a01995050600181019050610776565b50829750879550505050505092915050565b600060208201905081810360008301526107da818461074b565b905092915050565b600082825260208201905092915050565b7f506c656173652070617920746865206465736972656420616d6f756e74000000600082015250565b6000610829601d836107e2565b9150610834826107f3565b602082019050919050565b600060208201905081810360008301526108588161081c565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806108a657607f821691505b6020821081036108b9576108b861085f565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026109217fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826108e4565b61092b86836108e4565b95508019841693508086168417925050509392505050565b6000819050919050565b600061096861096361095e84610666565b610943565b610666565b9050919050565b6000819050919050565b6109828361094d565b61099661098e8261096f565b8484546108f1565b825550505050565b600090565b6109ab61099e565b6109b6818484610979565b505050565b5b818110156109da576109cf6000826109a3565b6001810190506109bc565b5050565b601f821115610a1f576109f0816108bf565b6109f9846108d4565b81016020851015610a08578190505b610a1c610a14856108d4565b8301826109bb565b50505b505050565b600082821c905092915050565b6000610a4260001984600802610a24565b1980831691505092915050565b6000610a5b8383610a31565b9150826002028217905092915050565b610a74826105e7565b67ffffffffffffffff811115610a8d57610a8c610418565b5b610a97825461088e565b610aa28282856109de565b600060209050601f831160018114610ad55760008415610ac3578287015190505b610acd8582610a4f565b865550610b35565b601f198416610ae3866108bf565b60005b82811015610b0b57848901518255600182019150602085019450602081019050610ae6565b86831015610b285784890151610b24601f891682610a31565b8355505b6001600288020188555050505b50505050505056fea2646970667358221220c159094ba7a789bcd582bfcfb34b3f049c8d5597726448015a8f98ca5304349464736f6c63430008130033",qP={},JP={},Pg={_format:UP,contractName:$P,sourceName:zP,abi:VP,bytecode:HP,deployedBytecode:GP,linkReferences:qP,deployedLinkReferences:JP},jE=({account:t,setAccount:e})=>{const[r,n]=V.useState({provider:null,signer:null,contract:null}),[i,s]=V.useState(!1);V.useEffect(()=>{(async()=>{try{const{ethereum:l}=window;let f;if(l){const u=await l.request({method:"eth_requestAccounts"});window.ethereum.on("accountsChanged",()=>{window.location.reload()});const h=u[0];e(h),s(!0),f=new Tg(window.ethereum);const g=f.getSigner(),p="0x7d8C6208909BD7cfDaDd7a185A9DC9B66Eaf9ff5",y=Pg.abi,b=new Ag(p,y,g);n({provider:f,signer:g,contract:b})}else alert("Please install MetaMask to use this app.")}catch(l){alert(l.message)}})()},[]);const o=async()=>{try{const{ethereum:c}=window;if(c){const l=await c.request({method:"eth_requestAccounts"});c.on("accountsChanged",()=>{window.location.reload()});const f=l[0];e(f)}else alert("Please install MetaMask to use this app.")}catch(c){alert(c.message)}},a=()=>{ct.success(`Connected Account: ${t} `,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})};return k.jsx("div",{className:"App",children:k.jsx("header",{className:"App-header",children:i?k.jsxs(k.Fragment,{children:[" ",k.jsx("button",{onClick:a,children:"Connected to Metamask"}),k.jsx(K0,{className:"mt-14"})]}):k.jsx("button",{onClick:o,children:"Connect Wallet"})})})};function KP(){return k.jsx("div",{children:k.jsxs("section",{id:"banner",children:[k.jsx("h4",{children:"Ab Apna Chakker Chalau"}),k.jsx("h2",{children:"Seek a coffee mate, spark delightful conversations"}),k.jsx("button",{children:"Explore More"})]})})}/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yl.apply(this,arguments)}var ws;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ws||(ws={}));const Cy="popstate";function WP(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return W0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:rd(i)}return QP(e,r,null,t)}function tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ig(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YP(){return Math.random().toString(36).substr(2,8)}function Ty(t,e){return{usr:t.state,key:t.key,idx:e}}function W0(t,e,r,n){return r===void 0&&(r=null),yl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ha(e):e,{state:r,key:e&&e.key||n||YP()})}function rd(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ha(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function QP(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=ws.Pop,c=null,l=f();l==null&&(l=0,o.replaceState(yl({},o.state,{idx:l}),""));function f(){return(o.state||{idx:null}).idx}function u(){a=ws.Pop;let b=f(),S=b==null?null:b-l;l=b,c&&c({action:a,location:y.location,delta:S})}function h(b,S){a=ws.Push;let E=W0(y.location,b,S);r&&r(E,b),l=f()+1;let w=Ty(E,l),T=y.createHref(E);try{o.pushState(w,"",T)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(T)}s&&c&&c({action:a,location:y.location,delta:1})}function g(b,S){a=ws.Replace;let E=W0(y.location,b,S);r&&r(E,b),l=f();let w=Ty(E,l),T=y.createHref(E);o.replaceState(w,"",T),s&&c&&c({action:a,location:y.location,delta:0})}function p(b){let S=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof b=="string"?b:rd(b);return tr(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let y={get action(){return a},get location(){return t(i,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Cy,u),c=b,()=>{i.removeEventListener(Cy,u),c=null}},createHref(b){return e(i,b)},createURL:p,encodeLocation(b){let S=p(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:h,replace:g,go(b){return o.go(b)}};return y}var Py;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Py||(Py={}));function XP(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?Ha(e):e,i=kg(n.pathname||"/",r);if(i==null)return null;let s=BE(t);ZP(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=c8(s[a],u8(i));return o}function BE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(tr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let l=Ts([n,c.relativePath]),f=r.concat(c);s.children&&s.children.length>0&&(tr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),BE(s.children,e,f,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:o8(l,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of FE(s.path))i(s,o,c)}),e}function FE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=FE(n.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function ZP(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:a8(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const e8=/^:\w+$/,t8=3,r8=2,n8=1,i8=10,s8=-2,Iy=t=>t==="*";function o8(t,e){let r=t.split("/"),n=r.length;return r.some(Iy)&&(n+=s8),e&&(n+=r8),r.filter(i=>!Iy(i)).reduce((i,s)=>i+(e8.test(s)?t8:s===""?n8:i8),n)}function a8(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function c8(t,e){let{routesMeta:r}=t,n={},i="/",s=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,l=i==="/"?e:e.slice(i.length)||"/",f=l8({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},l);if(!f)return null;Object.assign(n,f.params);let u=a.route;s.push({params:n,pathname:Ts([i,f.pathname]),pathnameBase:m8(Ts([i,f.pathnameBase])),route:u}),f.pathnameBase!=="/"&&(i=Ts([i,f.pathnameBase]))}return s}function l8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=f8(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((l,f,u)=>{if(f==="*"){let h=a[u]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return l[f]=d8(a[u]||"",f),l},{}),pathname:s,pathnameBase:o,pattern:t}}function f8(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ig(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(n.push(a),"/([^\\/]+)"));return t.endsWith("*")?(n.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function u8(t){try{return decodeURI(t)}catch(e){return Ig(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function d8(t,e){try{return decodeURIComponent(t)}catch(r){return Ig(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),t}}function kg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function h8(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Ha(t):t;return{pathname:r?r.startsWith("/")?r:p8(r,e):e,search:g8(n),hash:v8(i)}}function p8(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function bp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UE(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function $E(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Ha(t):(i=yl({},t),tr(!i.pathname||!i.pathname.includes("?"),bp("?","pathname","search",i)),tr(!i.pathname||!i.pathname.includes("#"),bp("#","pathname","hash",i)),tr(!i.search||!i.search.includes("#"),bp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(n||o==null)a=r;else{let u=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;i.pathname=h.join("/")}a=u>=0?e[u]:"/"}let c=h8(i,a),l=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(l||f)&&(c.pathname+="/"),c}const Ts=t=>t.join("/").replace(/\/\/+/g,"/"),m8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),g8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function y8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zE=["post","put","patch","delete"];new Set(zE);const w8=["get",...zE];new Set(w8);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nd(){return nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nd.apply(this,arguments)}const Dg=V.createContext(null),_8=V.createContext(null),Ga=V.createContext(null),zd=V.createContext(null),Bs=V.createContext({outlet:null,matches:[],isDataRoute:!1}),VE=V.createContext(null);function b8(t,e){let{relative:r}=e===void 0?{}:e;Ol()||tr(!1);let{basename:n,navigator:i}=V.useContext(Ga),{hash:s,pathname:o,search:a}=GE(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Ts([n,o])),i.createHref({pathname:c,search:a,hash:s})}function Ol(){return V.useContext(zd)!=null}function Vd(){return Ol()||tr(!1),V.useContext(zd).location}function HE(t){V.useContext(Ga).static||V.useLayoutEffect(t)}function S8(){let{isDataRoute:t}=V.useContext(Bs);return t?L8():E8()}function E8(){Ol()||tr(!1);let t=V.useContext(Dg),{basename:e,navigator:r}=V.useContext(Ga),{matches:n}=V.useContext(Bs),{pathname:i}=Vd(),s=JSON.stringify(UE(n).map(c=>c.pathnameBase)),o=V.useRef(!1);return HE(()=>{o.current=!0}),V.useCallback(function(c,l){if(l===void 0&&(l={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let f=$E(c,JSON.parse(s),i,l.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ts([e,f.pathname])),(l.replace?r.replace:r.push)(f,l.state,l)},[e,r,s,i,t])}function x8(){let{matches:t}=V.useContext(Bs),e=t[t.length-1];return e?e.params:{}}function GE(t,e){let{relative:r}=e===void 0?{}:e,{matches:n}=V.useContext(Bs),{pathname:i}=Vd(),s=JSON.stringify(UE(n).map(o=>o.pathnameBase));return V.useMemo(()=>$E(t,JSON.parse(s),i,r==="path"),[t,s,i,r])}function R8(t,e){return A8(t,e)}function A8(t,e,r){Ol()||tr(!1);let{navigator:n}=V.useContext(Ga),{matches:i}=V.useContext(Bs),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let c=Vd(),l;if(e){var f;let y=typeof e=="string"?Ha(e):e;a==="/"||(f=y.pathname)!=null&&f.startsWith(a)||tr(!1),l=y}else l=c;let u=l.pathname||"/",h=a==="/"?u:u.slice(a.length)||"/",g=XP(t,{pathname:h}),p=k8(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Ts([a,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:Ts([a,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r);return e&&p?V.createElement(zd.Provider,{value:{location:nd({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:ws.Pop}},p):p}function C8(){let t=M8(),e=y8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),r?V.createElement("pre",{style:i},r):null,s)}const T8=V.createElement(C8,null);class P8 extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error?V.createElement(Bs.Provider,{value:this.props.routeContext},V.createElement(VE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I8(t){let{routeContext:e,match:r,children:n}=t,i=V.useContext(Dg);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),V.createElement(Bs.Provider,{value:e},n)}function k8(t,e,r){var n;if(e===void 0&&(e=[]),r===void 0&&(r=null),t==null){var i;if((i=r)!=null&&i.errors)t=r.matches;else return null}let s=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let a=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id]));a>=0||tr(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,c,l)=>{let f=c.route.id?o==null?void 0:o[c.route.id]:null,u=null;r&&(u=c.route.errorElement||T8);let h=e.concat(s.slice(0,l+1)),g=()=>{let p;return f?p=u:c.route.Component?p=V.createElement(c.route.Component,null):c.route.element?p=c.route.element:p=a,V.createElement(I8,{match:c,routeContext:{outlet:a,matches:h,isDataRoute:r!=null},children:p})};return r&&(c.route.ErrorBoundary||c.route.errorElement||l===0)?V.createElement(P8,{location:r.location,revalidation:r.revalidation,component:u,error:f,children:g(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):g()},null)}var qE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qE||{}),id=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(id||{});function D8(t){let e=V.useContext(Dg);return e||tr(!1),e}function O8(t){let e=V.useContext(_8);return e||tr(!1),e}function N8(t){let e=V.useContext(Bs);return e||tr(!1),e}function JE(t){let e=N8(),r=e.matches[e.matches.length-1];return r.route.id||tr(!1),r.route.id}function M8(){var t;let e=V.useContext(VE),r=O8(id.UseRouteError),n=JE(id.UseRouteError);return e||((t=r.errors)==null?void 0:t[n])}function L8(){let{router:t}=D8(qE.UseNavigateStable),e=JE(id.UseNavigateStable),r=V.useRef(!1);return HE(()=>{r.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,nd({fromRouteId:e},s)))},[t,e])}function Wr(t){tr(!1)}function j8(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ws.Pop,navigator:s,static:o=!1}=t;Ol()&&tr(!1);let a=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof n=="string"&&(n=Ha(n));let{pathname:l="/",search:f="",hash:u="",state:h=null,key:g="default"}=n,p=V.useMemo(()=>{let y=kg(l,a);return y==null?null:{location:{pathname:y,search:f,hash:u,state:h,key:g},navigationType:i}},[a,l,f,u,h,g,i]);return p==null?null:V.createElement(Ga.Provider,{value:c},V.createElement(zd.Provider,{children:r,value:p}))}function B8(t){let{children:e,location:r}=t;return R8(Y0(e),r)}new Promise(()=>{});function Y0(t,e){e===void 0&&(e=[]);let r=[];return V.Children.forEach(t,(n,i)=>{if(!V.isValidElement(n))return;let s=[...e,i];if(n.type===V.Fragment){r.push.apply(r,Y0(n.props.children,s));return}n.type!==Wr&&tr(!1),!n.props.index||!n.props.children||tr(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Y0(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q0.apply(this,arguments)}function F8(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function U8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $8(t,e){return t.button===0&&(!e||e==="_self")&&!U8(t)}const z8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],V8="startTransition",ky=W2[V8];function H8(t){let{basename:e,children:r,future:n,window:i}=t,s=V.useRef();s.current==null&&(s.current=WP({window:i,v5Compat:!0}));let o=s.current,[a,c]=V.useState({action:o.action,location:o.location}),{v7_startTransition:l}=n||{},f=V.useCallback(u=>{l&&ky?ky(()=>c(u)):c(u)},[c,l]);return V.useLayoutEffect(()=>o.listen(f),[o,f]),V.createElement(j8,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o})}const G8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ur=V.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:f}=e,u=F8(e,z8),{basename:h}=V.useContext(Ga),g,p=!1;if(typeof l=="string"&&q8.test(l)&&(g=l,G8))try{let E=new URL(window.location.href),w=l.startsWith("//")?new URL(E.protocol+l):new URL(l),T=kg(w.pathname,h);w.origin===E.origin&&T!=null?l=T+w.search+w.hash:p=!0}catch{}let y=b8(l,{relative:i}),b=J8(l,{replace:o,state:a,target:c,preventScrollReset:f,relative:i});function S(E){n&&n(E),E.defaultPrevented||b(E)}return V.createElement("a",Q0({},u,{href:g||y,onClick:p||s?n:S,ref:r,target:c}))});var Dy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Dy||(Dy={}));var Oy;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Oy||(Oy={}));function J8(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=S8(),c=Vd(),l=GE(t,{relative:o});return V.useCallback(f=>{if($8(f,r)){f.preventDefault();let u=n!==void 0?n:rd(c)===rd(l);a(t,{replace:u,state:i,preventScrollReset:s,relative:o})}},[c,a,l,n,i,r,t,s,o])}const K8=[{name:"Espresso",price:260,rating:4.5,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.sjkwtF6Q1tmhvrwu9VK8XwHaHa&pid=Api&P=0&h=180",description:"A strong and bold coffee shot."},{name:"Cappuccino",price:290,rating:4.7,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.3thd4i6u3PRBaSZjOuE-uQHaFJ&pid=Api&P=0&h=180",description:"Rich espresso with frothy milk and a dusting of cocoa."},{name:"Latte",price:275,rating:4.6,imgSrc:"https://tse1.mm.bing.net/th?id=OIP.qjGgQhM3k_O8UYE3rOarKAHaE7&pid=Api&P=0&h=180",description:"Smooth espresso with steamed milk."}],W8=()=>{const t=e=>{const r=Math.floor(e),n=e-r>=.5,i=5-r-(n?1:0),s=[];for(let o=0;o<r;o++)s.push(k.jsx("ion-icon",{name:"star"},o));n&&s.push(k.jsx("ion-icon",{name:"star-half"},"half"));for(let o=0;o<i;o++)s.push(k.jsx("ion-icon",{name:"star-outline"},`empty-${o}`));return s};return k.jsxs(k.Fragment,{children:[k.jsx("h2",{id:"feature",children:"Featured Products"}),k.jsx("div",{className:"product1",children:K8.map((e,r)=>k.jsx(Ur,{to:"/product",children:k.jsxs("div",{className:"pro",children:[k.jsx("img",{src:e.imgSrc,alt:e.name}),k.jsxs("div",{className:"des",children:[k.jsx("h5",{children:e.name}),k.jsx("p",{children:e.description}),k.jsx("div",{className:"star",children:t(e.rating)}),k.jsxs("h4",{children:["",e.price]}),k.jsx("button",{children:k.jsx("a",{href:"#",children:k.jsx("ion-icon",{name:"cart"})})})]})]})},r))})]})};function Y8(){return k.jsx(k.Fragment,{children:k.jsx("div",{className:"hero",children:k.jsxs("div",{className:"hero_text",children:[k.jsx("br",{}),k.jsx("h1",{className:"super",children:"Coffee Talks and Heartfelt Walks"}),k.jsx("h1",{className:"on",children:"Connect, Love"}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("button",{className:"shop",children:k.jsx("a",{href:"/product",children:"Grab Your Coffee"})})]})})})}const Q8=()=>{let[t,e]=V.useState(!1),[r,n]=V.useState(!1);const i=()=>{window.scrollY>0?n(!0):n(!1)};return V.useEffect(()=>(window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}),[]),k.jsx("div",{className:`w-full fixed top-0 left-0 bg-white transition-all duration-300 ${r?"shadow-md":""}`,style:{zIndex:1e3},id:"nav1",children:k.jsxs("div",{className:"md:flex items-center justify-between py-4 md:px-10 px-7",children:[k.jsxs("div",{className:`font-bold text-2xl cursor-pointer flex items-center font-[Poppins] \r
          text-green-600`,children:[k.jsx("span",{className:"text-white-3xl text-indigo-600 mr-1 pt-2 "}),"Koffee Ka Chakkar"]}),k.jsx("div",{onClick:()=>e(!t),className:"text-3xl block absolute right-8 top-6 cursor-pointer md:hidden bg-#ECE4CF",children:k.jsx("ion-icon",{name:t?"close":"menu"})}),k.jsxs("ul",{className:`md:flex md:items-center md:pb-0 pb-12 absolute md:static text-white md:z-auto z-[-1] left-0 w-full md:w-auto md:pl-0 pl-9 transition-all duration-500 ease-in ${t?"top-20 ":"top-[-490px]"}`,children:[k.jsx("li",{className:"md:ml-8 text-green md:my-0 my-7",id:"nav",children:k.jsx(Ur,{to:"/",children:"HOME"})}),k.jsx("li",{className:"md:ml-8 text-green md:my-0 my-7",id:"nav",children:k.jsx(Ur,{to:"/product",children:"COFFEE"})}),k.jsx("li",{className:"md:ml-8 text-green md:my-0 my-7",id:"nav",children:k.jsx(Ur,{to:"/form",children:"REGISTER"})}),k.jsx("li",{className:"md:ml-8 text-green md:my-0 my-7",id:"nav",children:k.jsx(Ur,{to:"/wallet",children:"WALLET"})}),k.jsx("li",{className:"md:ml-8 text-green md:my-0 my-7",id:"nav",children:k.jsx(Ur,{to:"/chat",children:"CHAT"})}),k.jsx("li",{className:"md:ml-8 text-green md:my-0 my-7",id:"nav",children:k.jsx(Ur,{to:"/chatvideo",children:"VIDEOCHAT"})}),k.jsx("li",{className:"md:ml-8 text-green md:my-0 my-7",id:"nav",children:k.jsx(Ur,{to:"/ipfsphotoshare",children:"MEMORIES"})})]})]})})},X8=[{name:"Espresso",price:260,rating:4.5,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.sjkwtF6Q1tmhvrwu9VK8XwHaHa&pid=Api&P=0&h=180",description:"A strong and bold coffee shot."},{name:"Cappuccino",price:290,rating:4.7,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.3thd4i6u3PRBaSZjOuE-uQHaFJ&pid=Api&P=0&h=180",description:"Rich espresso with frothy milk and a dusting of cocoa."},{name:"Latte",price:275,rating:4.6,imgSrc:"https://tse1.mm.bing.net/th?id=OIP.qjGgQhM3k_O8UYE3rOarKAHaE7&pid=Api&P=0&h=180",description:"Smooth espresso with steamed milk."},{name:"Mocha",price:330,rating:4.8,imgSrc:"https://tse3.mm.bing.net/th?id=OIP.k6HrjsWU1C995rHH4dQVmAHaF1&pid=Api&P=0&h=180",description:"A delightful blend of espresso, chocolate, and steamed milk."},{name:"Americano",price:260,rating:4.4,imgSrc:"https://tse1.mm.bing.net/th?id=OIP.jbkyjcieSo2YG_eT0q8OLQHaHa&pid=Api&P=0&h=180",description:"A strong espresso diluted with hot water."},{name:"Flat White",price:305,rating:4.6,imgSrc:"https://tse2.mm.bing.net/th?id=OIP.VgIyWmhAJnNUfu7GhWaIJgHaEi&pid=Api&P=0&h=180",description:"Smooth espresso with velvety steamed milk."},{name:"Macchiato",price:260,rating:4.5,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.u4wG0sdTyR69TF11EG86tQHaE8&pid=Api&P=0&h=180",description:"Espresso with a dollop of frothy milk."},{name:"Iced Coffee",price:290,rating:4.7,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.2m86YwVZYHm4kb2zXVO19AHaKy&pid=Api&P=0&h=180",description:"Chilled coffee served over ice."},{name:"Cold Brew",price:330,rating:4.8,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.ENuX66asmzR4K6R5Z3N5cgHaE8&pid=Api&P=0&h=180",description:"Smooth and refreshing coffee brewed with cold water."},{name:"Turkish Coffee",price:260,rating:4.3,imgSrc:"https://tse2.mm.bing.net/th?id=OIP.laA1GCSvvqV__rqWyFsBywHaE8&pid=Api&P=0&h=180",description:"Strong coffee brewed with finely ground beans and spices."},{name:"Irish Coffee",price:380,rating:4.9,imgSrc:"https://tse4.mm.bing.net/th?id=OIP.iHyfJ_rVqKLrTFvJndlwwQHaLX&pid=Api&P=0&h=180",description:"Whiskey-spiked coffee topped with cream."},{name:"Caramel Macchiato",price:305,rating:4.6,imgSrc:"https://tse1.mm.bing.net/th?id=OIP.UqStL2k2kTImA9BfibYnLgAAAA&pid=Api&P=0&h=180",description:"Espresso with vanilla, caramel, and steamed milk."},{name:"Hazelnut Latte",price:290,rating:4.5,imgSrc:"https://tse3.mm.bing.net/th?id=OIP.b54GrCjdYAWgBtHGnRGHOAHaE7&pid=Api&P=0&h=180",description:"Latte infused with rich hazelnut flavor."},{name:"Vanilla Latte",price:290,rating:4.6,imgSrc:"https://tse3.mm.bing.net/th?id=OIP.oryzdfwKjpWRwZzyOPT8cgHaE8&pid=Api&P=0&h=180",description:"Latte with smooth vanilla essence."},{name:"Pumpkin Spice Latte",price:330,rating:4.7,imgSrc:"https://tse1.mm.bing.net/th?id=OIP.Aeu8IcORzo68K-mZf20VAgHaEL&pid=Api&P=0&h=180",description:"Autumn-inspired latte with pumpkin and warm spices."}],Z8=()=>{const t=e=>{const r=Math.floor(e),n=e-r>=.5,i=5-r-(n?1:0),s=[];for(let o=0;o<r;o++)s.push(k.jsx("ion-icon",{name:"star"},o));n&&s.push(k.jsx("ion-icon",{name:"star-half"},"half"));for(let o=0;o<i;o++)s.push(k.jsx("ion-icon",{name:"star-outline"},`empty-${o}`));return s};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"catalog"}),k.jsx("div",{className:"product1",children:X8.map((e,r)=>k.jsx(Ur,{to:"/wallet",children:k.jsxs("div",{className:"pro",children:[k.jsx("img",{src:e.imgSrc,alt:e.name}),k.jsxs("div",{className:"des",children:[k.jsx("h5",{children:e.name}),k.jsx("p",{children:e.description}),k.jsx("div",{className:"star",children:t(e.rating)}),k.jsxs("h4",{children:["",e.price]}),k.jsx("button",{children:k.jsx("a",{href:"#",children:k.jsx("ion-icon",{name:"cart"})})})]})]})},r))})]})};const KE=({state:t,paid:e,setPaid:r})=>{const n=async i=>{i.preventDefault();const{contract:s}=t,o=document.querySelector("#name").value,a=document.querySelector("#message").value;console.log(o,a,s);const c={value:kP("0.002")};await(await s.buyCoffee(o,a,c)).wait(),console.log("Transaction is done"),ct.success("Transaction is Successfull "),r(!0)};return k.jsx("div",{className:"buy-buy-container ",children:k.jsxs("div",{className:"buy-container",children:[" ",k.jsxs("form",{className:"buy-form",onSubmit:n,children:[" ",k.jsx("label",{children:"Name of beloved"}),k.jsx("input",{type:"text",className:"inputbuy",id:"name",placeholder:"Enter your name"}),k.jsx("label",{children:"Message"}),k.jsx("input",{type:"text",className:"inputbuy",id:"message",placeholder:"Enter a love message"}),k.jsxs("p",{children:["Hey lover, your bill is $3.69.",k.jsx("br",{})," Thanks a bunch!"]}),k.jsx("button",{type:"submit",children:"PAY"})]})]})})};const eI=({state:t})=>{const[e,r]=V.useState([]),{contract:n}=t;V.useEffect(()=>{n&&(async()=>{const o=await n.getMemos();r(o)})()},[n]);const i=s=>{const o=new Date(s*1e3),a=String(o.getDate()).padStart(2,"0"),c=String(o.getMonth()+1).padStart(2,"0"),l=o.getFullYear(),f=o.getHours(),u=String(o.getMinutes()).padStart(2,"0"),h=f>=12?"PM":"AM",g=String(f%12||12).padStart(2,"0");return`${a}/${c}/${l} ${g}:${u} ${h}`};return k.jsxs("div",{className:"memo-container",children:[" ",k.jsx("h2",{className:"all-transactions",children:"Love Transactions"}),k.jsxs("table",{className:"memo-table",children:[" ",k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{children:"Name"}),k.jsx("th",{children:"Message"}),k.jsx("th",{children:"Timestamp"}),k.jsx("th",{children:"From"})]})}),k.jsx("tbody",{children:e.map(s=>k.jsxs("tr",{children:[k.jsx("td",{children:s.name}),k.jsx("td",{children:s.message}),k.jsx("td",{children:i(s.timestamp)}),k.jsx("td",{children:s.from})]},s.timestamp))})]})]})},tI=({account:t,setAccount:e,paid:r,setPaid:n})=>{const[i,s]=V.useState({provider:null,signer:null,contract:null});return V.useEffect(()=>{(async()=>{const a="0x97b5e9162C94d9E0448fAc1DE2084084675fc5A4",c=Pg.abi;try{const{ethereum:l}=window;if(l){const g=await l.request({method:"eth_requestAccounts"})}const f=new Tg(l),u=f.getSigner(),h=new Ag(a,c,u);s({provider:f,signer:u,contract:h}),n(!0)}catch(l){console.log(l)}})()},[]),console.log(i),k.jsxs("div",{className:"App mt-10",children:[k.jsx(jE,{account:t,setAccount:e}),k.jsx(KE,{state:i}),k.jsx(eI,{state:i})]})};function WE(t,e){return function(){return t.apply(e,arguments)}}const{toString:rI}=Object.prototype,{getPrototypeOf:Og}=Object,Hd=(t=>e=>{const r=rI.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Si=t=>(t=t.toLowerCase(),e=>Hd(e)===t),Gd=t=>e=>typeof e===t,{isArray:qa}=Array,wl=Gd("undefined");function nI(t){return t!==null&&!wl(t)&&t.constructor!==null&&!wl(t.constructor)&&yn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const YE=Si("ArrayBuffer");function iI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&YE(t.buffer),e}const sI=Gd("string"),yn=Gd("function"),QE=Gd("number"),qd=t=>t!==null&&typeof t=="object",oI=t=>t===!0||t===!1,lu=t=>{if(Hd(t)!=="object")return!1;const e=Og(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},aI=Si("Date"),cI=Si("File"),lI=Si("Blob"),fI=Si("FileList"),uI=t=>qd(t)&&yn(t.pipe),dI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||yn(t.append)&&((e=Hd(t))==="formdata"||e==="object"&&yn(t.toString)&&t.toString()==="[object FormData]"))},hI=Si("URLSearchParams"),pI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nl(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),qa(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function XE(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const ZE=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),e5=t=>!wl(t)&&t!==ZE;function X0(){const{caseless:t}=e5(this)&&this||{},e={},r=(n,i)=>{const s=t&&XE(e,i)||i;lu(e[s])&&lu(n)?e[s]=X0(e[s],n):lu(n)?e[s]=X0({},n):qa(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Nl(arguments[n],r);return e}const mI=(t,e,r,{allOwnKeys:n}={})=>(Nl(e,(i,s)=>{r&&yn(i)?t[s]=WE(i,r):t[s]=i},{allOwnKeys:n}),t),gI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vI=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},yI=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&Og(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},wI=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},_I=t=>{if(!t)return null;if(qa(t))return t;let e=t.length;if(!QE(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},bI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Og(Uint8Array)),SI=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},EI=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},xI=Si("HTMLFormElement"),RI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Ny=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),AI=Si("RegExp"),t5=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Nl(r,(i,s)=>{e(i,s,t)!==!1&&(n[s]=i)}),Object.defineProperties(t,n)},CI=t=>{t5(t,(e,r)=>{if(yn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(yn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},TI=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return qa(t)?n(t):n(String(t).split(e)),r},PI=()=>{},II=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Sp="abcdefghijklmnopqrstuvwxyz",My="0123456789",r5={DIGIT:My,ALPHA:Sp,ALPHA_DIGIT:Sp+Sp.toUpperCase()+My},kI=(t=16,e=r5.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function DI(t){return!!(t&&yn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const OI=t=>{const e=new Array(10),r=(n,i)=>{if(qd(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=qa(n)?[]:{};return Nl(n,(o,a)=>{const c=r(o,i+1);!wl(c)&&(s[a]=c)}),e[i]=void 0,s}}return n};return r(t,0)},NI=Si("AsyncFunction"),MI=t=>t&&(qd(t)||yn(t))&&yn(t.then)&&yn(t.catch),K={isArray:qa,isArrayBuffer:YE,isBuffer:nI,isFormData:dI,isArrayBufferView:iI,isString:sI,isNumber:QE,isBoolean:oI,isObject:qd,isPlainObject:lu,isUndefined:wl,isDate:aI,isFile:cI,isBlob:lI,isRegExp:AI,isFunction:yn,isStream:uI,isURLSearchParams:hI,isTypedArray:bI,isFileList:fI,forEach:Nl,merge:X0,extend:mI,trim:pI,stripBOM:gI,inherits:vI,toFlatObject:yI,kindOf:Hd,kindOfTest:Si,endsWith:wI,toArray:_I,forEachEntry:SI,matchAll:EI,isHTMLForm:xI,hasOwnProperty:Ny,hasOwnProp:Ny,reduceDescriptors:t5,freezeMethods:CI,toObjectSet:TI,toCamelCase:RI,noop:PI,toFiniteNumber:II,findKey:XE,global:ZE,isContextDefined:e5,ALPHABET:r5,generateString:kI,isSpecCompliantForm:DI,toJSONObject:OI,isAsyncFn:NI,isThenable:MI};function ze(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}K.inherits(ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const n5=ze.prototype,i5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{i5[t]={value:t}});Object.defineProperties(ze,i5);Object.defineProperty(n5,"isAxiosError",{value:!0});ze.from=(t,e,r,n,i,s)=>{const o=Object.create(n5);return K.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ze.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const LI=null;function Z0(t){return K.isPlainObject(t)||K.isArray(t)}function s5(t){return K.endsWith(t,"[]")?t.slice(0,-2):t}function Ly(t,e,r){return t?t.concat(e).map(function(i,s){return i=s5(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function jI(t){return K.isArray(t)&&!t.some(Z0)}const BI=K.toFlatObject(K,{},null,function(e){return/^is[A-Z]/.test(e)});function Jd(t,e,r){if(!K.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=K.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!K.isUndefined(b[y])});const n=r.metaTokens,i=r.visitor||f,s=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(e);if(!K.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(K.isDate(p))return p.toISOString();if(!c&&K.isBlob(p))throw new ze("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(p)||K.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function f(p,y,b){let S=p;if(p&&!b&&typeof p=="object"){if(K.endsWith(y,"{}"))y=n?y:y.slice(0,-2),p=JSON.stringify(p);else if(K.isArray(p)&&jI(p)||(K.isFileList(p)||K.endsWith(y,"[]"))&&(S=K.toArray(p)))return y=s5(y),S.forEach(function(w,T){!(K.isUndefined(w)||w===null)&&e.append(o===!0?Ly([y],T,s):o===null?y:y+"[]",l(w))}),!1}return Z0(p)?!0:(e.append(Ly(b,y,s),l(p)),!1)}const u=[],h=Object.assign(BI,{defaultVisitor:f,convertValue:l,isVisitable:Z0});function g(p,y){if(!K.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));u.push(p),K.forEach(p,function(S,E){(!(K.isUndefined(S)||S===null)&&i.call(e,S,K.isString(E)?E.trim():E,y,h))===!0&&g(S,y?y.concat(E):[E])}),u.pop()}}if(!K.isObject(t))throw new TypeError("data must be an object");return g(t),e}function jy(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Ng(t,e){this._pairs=[],t&&Jd(t,this,e)}const o5=Ng.prototype;o5.append=function(e,r){this._pairs.push([e,r])};o5.toString=function(e){const r=e?function(n){return e.call(this,n,jy)}:jy;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function FI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function a5(t,e,r){if(!e)return t;const n=r&&r.encode||FI,i=r&&r.serialize;let s;if(i?s=i(e,r):s=K.isURLSearchParams(e)?e.toString():new Ng(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class UI{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){K.forEach(this.handlers,function(n){n!==null&&e(n)})}}const By=UI,c5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$I=typeof URLSearchParams<"u"?URLSearchParams:Ng,zI=typeof FormData<"u"?FormData:null,VI=typeof Blob<"u"?Blob:null,HI=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),GI=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),li={isBrowser:!0,classes:{URLSearchParams:$I,FormData:zI,Blob:VI},isStandardBrowserEnv:HI,isStandardBrowserWebWorkerEnv:GI,protocols:["http","https","file","blob","url","data"]};function qI(t,e){return Jd(t,new li.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return li.isNode&&K.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function JI(t){return K.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function KI(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function l5(t){function e(r,n,i,s){let o=r[s++];const a=Number.isFinite(+o),c=s>=r.length;return o=!o&&K.isArray(i)?i.length:o,c?(K.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!K.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&K.isArray(i[o])&&(i[o]=KI(i[o])),!a)}if(K.isFormData(t)&&K.isFunction(t.entries)){const r={};return K.forEachEntry(t,(n,i)=>{e(JI(n),i,r,0)}),r}return null}const WI={"Content-Type":void 0};function YI(t,e,r){if(K.isString(t))try{return(e||JSON.parse)(t),K.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Kd={transitional:c5,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=K.isObject(e);if(s&&K.isHTMLForm(e)&&(e=new FormData(e)),K.isFormData(e))return i&&i?JSON.stringify(l5(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qI(e,this.formSerializer).toString();if((a=K.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Jd(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),YI(e)):e}],transformResponse:[function(e){const r=this.transitional||Kd.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&K.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ze.from(a,ze.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:li.classes.FormData,Blob:li.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};K.forEach(["delete","get","head"],function(e){Kd.headers[e]={}});K.forEach(["post","put","patch"],function(e){Kd.headers[e]=K.merge(WI)});const Mg=Kd,QI=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),XI=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&QI[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},Fy=Symbol("internals");function dc(t){return t&&String(t).trim().toLowerCase()}function fu(t){return t===!1||t==null?t:K.isArray(t)?t.map(fu):String(t)}function ZI(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const e3=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ep(t,e,r,n,i){if(K.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!K.isString(e)){if(K.isString(n))return e.indexOf(n)!==-1;if(K.isRegExp(n))return n.test(e)}}function t3(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function r3(t,e){const r=K.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}class Wd{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,c,l){const f=dc(c);if(!f)throw new Error("header name must be a non-empty string");const u=K.findKey(i,f);(!u||i[u]===void 0||l===!0||l===void 0&&i[u]!==!1)&&(i[u||c]=fu(a))}const o=(a,c)=>K.forEach(a,(l,f)=>s(l,f,c));return K.isPlainObject(e)||e instanceof this.constructor?o(e,r):K.isString(e)&&(e=e.trim())&&!e3(e)?o(XI(e),r):e!=null&&s(r,e,n),this}get(e,r){if(e=dc(e),e){const n=K.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return ZI(i);if(K.isFunction(r))return r.call(this,i,n);if(K.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=dc(e),e){const n=K.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Ep(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=dc(o),o){const a=K.findKey(n,o);a&&(!r||Ep(n,n[a],a,r))&&(delete n[a],i=!0)}}return K.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||Ep(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return K.forEach(this,(i,s)=>{const o=K.findKey(n,s);if(o){r[o]=fu(i),delete r[s];return}const a=e?t3(s):String(s).trim();a!==s&&delete r[s],r[a]=fu(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return K.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&K.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Fy]=this[Fy]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=dc(o);n[a]||(r3(i,o),n[a]=!0)}return K.isArray(e)?e.forEach(s):s(e),this}}Wd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.freezeMethods(Wd.prototype);K.freezeMethods(Wd);const ji=Wd;function xp(t,e){const r=this||Mg,n=e||r,i=ji.from(n.headers);let s=n.data;return K.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function f5(t){return!!(t&&t.__CANCEL__)}function Ml(t,e,r){ze.call(this,t??"canceled",ze.ERR_CANCELED,e,r),this.name="CanceledError"}K.inherits(Ml,ze,{__CANCEL__:!0});function n3(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ze("Request failed with status code "+r.status,[ze.ERR_BAD_REQUEST,ze.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const i3=li.isStandardBrowserEnv?function(){return{write:function(r,n,i,s,o,a){const c=[];c.push(r+"="+encodeURIComponent(n)),K.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),K.isString(s)&&c.push("path="+s),K.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function s3(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function o3(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function u5(t,e){return t&&!s3(e)?o3(t,e):e}const a3=li.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){const a=K.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function c3(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function l3(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),f=n[s];o||(o=l),r[i]=c,n[i]=l;let u=s,h=0;for(;u!==i;)h+=r[u++],u=u%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-o<e)return;const g=f&&l-f;return g?Math.round(h*1e3/g):void 0}}function Uy(t,e){let r=0;const n=l3(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-r,c=n(a),l=s<=o;r=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-s)/c:void 0,event:i};f[e?"download":"upload"]=!0,t(f)}}const f3=typeof XMLHttpRequest<"u",u3=f3&&function(t){return new Promise(function(r,n){let i=t.data;const s=ji.from(t.headers).normalize(),o=t.responseType;let a;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}K.isFormData(i)&&(li.isStandardBrowserEnv||li.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+p))}const f=u5(t.baseURL,t.url);l.open(t.method.toUpperCase(),a5(f,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function u(){if(!l)return;const g=ji.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:g,config:t,request:l};n3(function(S){r(S),c()},function(S){n(S),c()},y),l=null}if("onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(u)},l.onabort=function(){l&&(n(new ze("Request aborted",ze.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new ze("Network Error",ze.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let p=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||c5;t.timeoutErrorMessage&&(p=t.timeoutErrorMessage),n(new ze(p,y.clarifyTimeoutError?ze.ETIMEDOUT:ze.ECONNABORTED,t,l)),l=null},li.isStandardBrowserEnv){const g=(t.withCredentials||a3(f))&&t.xsrfCookieName&&i3.read(t.xsrfCookieName);g&&s.set(t.xsrfHeaderName,g)}i===void 0&&s.setContentType(null),"setRequestHeader"in l&&K.forEach(s.toJSON(),function(p,y){l.setRequestHeader(y,p)}),K.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),o&&o!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",Uy(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Uy(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=g=>{l&&(n(!g||g.type?new Ml(null,t,l):g),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const h=c3(f);if(h&&li.protocols.indexOf(h)===-1){n(new ze("Unsupported protocol "+h+":",ze.ERR_BAD_REQUEST,t));return}l.send(i||null)})},uu={http:LI,xhr:u3};K.forEach(uu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const d3={getAdapter:t=>{t=K.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let i=0;i<e&&(r=t[i],!(n=K.isString(r)?uu[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new ze(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(K.hasOwnProp(uu,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!K.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:uu};function Rp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ml(null,t)}function $y(t){return Rp(t),t.headers=ji.from(t.headers),t.data=xp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),d3.getAdapter(t.adapter||Mg.adapter)(t).then(function(n){return Rp(t),n.data=xp.call(t,t.transformResponse,n),n.headers=ji.from(n.headers),n},function(n){return f5(n)||(Rp(t),n&&n.response&&(n.response.data=xp.call(t,t.transformResponse,n.response),n.response.headers=ji.from(n.response.headers))),Promise.reject(n)})}const zy=t=>t instanceof ji?t.toJSON():t;function Pa(t,e){e=e||{};const r={};function n(l,f,u){return K.isPlainObject(l)&&K.isPlainObject(f)?K.merge.call({caseless:u},l,f):K.isPlainObject(f)?K.merge({},f):K.isArray(f)?f.slice():f}function i(l,f,u){if(K.isUndefined(f)){if(!K.isUndefined(l))return n(void 0,l,u)}else return n(l,f,u)}function s(l,f){if(!K.isUndefined(f))return n(void 0,f)}function o(l,f){if(K.isUndefined(f)){if(!K.isUndefined(l))return n(void 0,l)}else return n(void 0,f)}function a(l,f,u){if(u in e)return n(l,f);if(u in t)return n(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,f)=>i(zy(l),zy(f),!0)};return K.forEach(Object.keys(Object.assign({},t,e)),function(f){const u=c[f]||i,h=u(t[f],e[f],f);K.isUndefined(h)&&u!==a||(r[f]=h)}),r}const d5="1.4.0",Lg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Lg[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Vy={};Lg.transitional=function(e,r,n){function i(s,o){return"[Axios v"+d5+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new ze(i(o," has been removed"+(r?" in "+r:"")),ze.ERR_DEPRECATED);return r&&!Vy[o]&&(Vy[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function h3(t,e,r){if(typeof t!="object")throw new ze("options must be an object",ze.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new ze("option "+s+" must be "+c,ze.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ze("Unknown option "+s,ze.ERR_BAD_OPTION)}}const em={assertOptions:h3,validators:Lg},ns=em.validators;class sd{constructor(e){this.defaults=e,this.interceptors={request:new By,response:new By}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Pa(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&em.assertOptions(n,{silentJSONParsing:ns.transitional(ns.boolean),forcedJSONParsing:ns.transitional(ns.boolean),clarifyTimeoutError:ns.transitional(ns.boolean)},!1),i!=null&&(K.isFunction(i)?r.paramsSerializer={serialize:i}:em.assertOptions(i,{encode:ns.function,serialize:ns.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o;o=s&&K.merge(s.common,s[r.method]),o&&K.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),r.headers=ji.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let f,u=0,h;if(!c){const p=[$y.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),h=p.length,f=Promise.resolve(r);u<h;)f=f.then(p[u++],p[u++]);return f}h=a.length;let g=r;for(u=0;u<h;){const p=a[u++],y=a[u++];try{g=p(g)}catch(b){y.call(this,b);break}}try{f=$y.call(this,g)}catch(p){return Promise.reject(p)}for(u=0,h=l.length;u<h;)f=f.then(l[u++],l[u++]);return f}getUri(e){e=Pa(this.defaults,e);const r=u5(e.baseURL,e.url);return a5(r,e.params,e.paramsSerializer)}}K.forEach(["delete","get","head","options"],function(e){sd.prototype[e]=function(r,n){return this.request(Pa(n||{},{method:e,url:r,data:(n||{}).data}))}});K.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Pa(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}sd.prototype[e]=r(),sd.prototype[e+"Form"]=r(!0)});const du=sd;class jg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Ml(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new jg(function(i){e=i}),cancel:e}}}const p3=jg;function m3(t){return function(r){return t.apply(null,r)}}function g3(t){return K.isObject(t)&&t.isAxiosError===!0}const tm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tm).forEach(([t,e])=>{tm[e]=t});const v3=tm;function h5(t){const e=new du(t),r=WE(du.prototype.request,e);return K.extend(r,du.prototype,e,{allOwnKeys:!0}),K.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return h5(Pa(t,i))},r}const ur=h5(Mg);ur.Axios=du;ur.CanceledError=Ml;ur.CancelToken=p3;ur.isCancel=f5;ur.VERSION=d5;ur.toFormData=Jd;ur.AxiosError=ze;ur.Cancel=ur.CanceledError;ur.all=function(e){return Promise.all(e)};ur.spread=m3;ur.isAxiosError=g3;ur.mergeConfig=Pa;ur.AxiosHeaders=ji;ur.formToJSON=t=>l5(K.isHTMLForm(t)?new FormData(t):t);ur.HttpStatusCode=v3;ur.default=ur;const Ia=ur,y3=({sex:t,setSex:e,seName:r,setSeName:n,seEmail:i,setSeEmail:s})=>{const[o,a]=V.useState({userName:"",age:"",gender:"",status:"single",email:"",cadd:"",photo:null}),[c,l]=V.useState(!1),f=g=>{const{name:p,value:y}=g.target;a({...o,[p]:y})},u=g=>{const p=g.target.files[0];a({...o,photo:p})},h=async g=>{g.preventDefault(),e(g.target[2].value),n(g.target[0].value),s(g.target[4].value);try{let y;try{const E=new FormData;E.append("file",o.photo),y=`https://gateway.pinata.cloud/ipfs/${(await Ia({method:"post",url:"https://api.pinata.cloud/pinning/pinFileToIPFS",data:E,headers:{pinata_api_key:"f6209c7522c5f1ba012d",pinata_secret_api_key:"05b5cea650867bd644a64809b1ee8777d4094f5c4dd4e2b828376fcaec43c33f","Content-Type":"multipart/form-data"}})).data.IpfsHash}`}catch{console.log("Error in ipfs")}console.log(y);const b={userName:o.userName,age:o.age,gender:o.gender,status:o.status,email:o.email,cadd:o.cadd,photo:y};var p=JSON.parse(localStorage.getItem("myData"));console.log(p);const S=await Ia.post("//form",b);S.error&&console.log(S.error),res.status===201?(l(!0),alert("Data sent successfully..."),ct.success("Registered Successfully")):(l(!0),console.log("Server response indicates an error"))}catch{console.log("error in sending data to backend")}};return k.jsxs(k.Fragment,{children:[k.jsx("h1",{children:"Already Registered"}),k.jsx(Ur,{to:"/login",children:k.jsx("button",{children:"Login"})}),k.jsx("div",{className:"form-form-container",children:k.jsxs("div",{className:"form-container",children:[k.jsx("h2",{children:"Complete Your Coffee Mate Profile"}),k.jsxs("form",{onSubmit:h,children:[k.jsx("label",{htmlFor:"userName",children:"User Name"}),k.jsx("input",{type:"text",id:"userName",name:"userName",value:o.userName,onChange:f,required:!0}),k.jsx("label",{htmlFor:"age",children:"Age"}),k.jsx("input",{type:"number",id:"age",name:"age",value:o.age,onChange:f,required:!0}),k.jsx("label",{htmlFor:"gender",children:"Gender"}),k.jsxs("select",{id:"gender",name:"gender",value:o.gender,onChange:f,required:!0,children:[k.jsx("option",{value:"",children:"Select Gender"}),k.jsx("option",{value:"male",children:"Male"}),k.jsx("option",{value:"female",children:"Female"})]}),k.jsx("label",{htmlFor:"status",children:"Status"}),k.jsxs("select",{id:"status",name:"status",value:o.status,onChange:f,required:!0,children:[k.jsx("option",{value:"single",children:"Single"}),k.jsx("option",{value:"couple",children:"Couple"})]}),k.jsx("label",{htmlFor:"email",children:"Email"}),k.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:f,required:!0}),k.jsx("label",{htmlFor:"cadd",children:"Contract Address"}),k.jsx("input",{type:"text",id:"cadd",name:"cadd",value:o.cadd,onChange:f,required:!0}),k.jsx("label",{htmlFor:"photo",children:"Upload Photo"}),k.jsx("input",{type:"file",id:"photo",name:"photo",accept:".jpg, .jpeg, .png",onChange:u}),k.jsx("br",{}),k.jsx("button",{type:"submit",className:"ml-3",onClick:()=>l(!0),children:"Submit"})]}),c&&k.jsx(Ur,{to:"/opposite",children:k.jsx("button",{className:"ml-3 mg-1",children:"Browse"})}),k.jsx(Ur,{to:"/opposite",children:"View"})]})})]})},w3=()=>{const t=[{href:"javascript:void()",name:"About"},{href:"javascript:void()",name:"Blog"},{href:"javascript:void()",name:""},{href:"javascript:void()",name:"Team"},{href:"javascript:void()",name:"Careers"},{href:"javascript:void()",name:"Support"}];return k.jsxs("footer",{className:"text-gray-500 bg-white px-4 py-5 md:py-7 mx-auto md:px-0",id:"footer",style:{width:"100%"},children:[k.jsx("div",{className:"max-w-lg sm:mx-auto sm:text-center",children:k.jsx("p",{className:"leading-relaxed mt-2 text-[15px]",children:"Discover your perfect coffee companion through our unique matchmaking experience. Sip, connect, and create memorable moments together."})}),k.jsx("ul",{className:"items-center justify-center mt-8 space-y-5 sm:flex sm:space-x-4 sm:space-y-0",children:t.map((e,r)=>k.jsx("li",{className:"hover:text-gray-800",children:k.jsx("a",{href:e.href,children:e.name})},r))}),k.jsxs("div",{className:"mt-8 items-center justify-between sm:flex",children:[k.jsx("div",{className:"mt-4 sm:mt-0",children:" 2022 Coffee ka Chakkar All rights reserved."}),k.jsx("div",{className:"mt-6 sm:mt-0",children:k.jsx("ul",{className:"flex items-center space-x-4"})})]}),k.jsx("style",{jsx:!0,children:`
        .svg-icon path,
        .svg-icon polygon,
        .svg-icon rect {
          fill: currentColor;
        }
      `})]})};function _3(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bg={exports:{}};Bg.exports;(function(t){(function(){function e(n,i){return i?_3(n):n.slice?e[s(n)]:function(o,a){n(o={exports:{}}),e[s(a)]=o.exports};function s(o){return o.split("/").slice(-1).toString().replace(".js","")}}var r=t;e(function(n){String.random=function(s,o){var a="";for(s=s||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";s-- >0;)a+=o.charAt(Math.floor(Math.random()*o.length));return a},String.match=function(s,o){var a,c;return typeof s!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},a=o["="]||o["*"]||o[">"]||o["<"],s===a?!0:c!==o["="]?!1:(a=o["*"]||o[">"],s.slice(0,(a||"").length)===a?!0:c!==o["*"]?!1:c!==o[">"]&&c!==o["<"]?s>=o[">"]&&s<=o["<"]:c!==o[">"]&&s>=o[">"]||c!==o["<"]&&s<=o["<"]))},String.hash=function(s,o){if(typeof s=="string"){if(o=o||0,!s.length)return o;for(var a=0,c=s.length,l;a<c;++a)l=s.charCodeAt(a),o=(o<<5)-o+l,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(s){return s?s instanceof Object&&s.constructor===Object||Object.prototype.toString.call(s).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(s,o){for(var a in s)if(i.call(s,a)&&(!o||o.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(s){var o=[];for(var a in s)i.call(s,a)&&o.push(a);return o},function(){var s,o=setTimeout,a=0,c=0,l=typeof setImmediate!=""+s&&setImmediate||function(u,h){return typeof MessageChannel==""+s?o:((u=new MessageChannel).port1.onmessage=function(g){g.data==""&&h()},function(g){h=g,u.port2.postMessage("")})}(),f=o.check=o.check||typeof performance!=""+s&&performance||{now:function(){return+new Date}};o.hold=o.hold||9,o.poll=o.poll||function(u){if(o.hold>=f.now()-a&&c++<3333){u();return}l(function(){a=f.now(),u()},c=0)}}(),function(){var s=setTimeout,o=s.turn=s.turn||function(h){a.push(h)==1&&c(u)},a=o.s=[],c=s.poll,l=0,f,u=function(){(f=a[l++])&&f(),(l==a.length||l==99)&&(a=o.s=a.slice(l),l=0),a.length&&c(u)}}(),function(){var s,o=setTimeout,a=o.turn;(o.each=o.each||function(c,l,f,u){u=u||9,function h(g,p,y){if(p=(g=(c||[]).splice(0,u)).length){for(var b=0;b<p&&s===(y=l(g[b]));b++);if(s===y){a(h);return}}f&&f(y)}()})()}()})(e,"./shim"),e(function(n){n.exports=function i(f,o,a){if(!f)return{to:i};var c,l=typeof o=="function",f=(this.tag||(this.tag={}))[f]||l&&(this.tag[f]={tag:f,to:i._={next:function(h){var g;(g=this.to)&&g.next(h)}}});if(l){var u={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:f,on:this,as:a};return(u.back=f.last||f).to=u,f.last=u}return(f=f.to)&&c!==o&&f.next(o),f}})(e,"./onto"),e(function(n){n.exports=function(i){return i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"&&i!=1/0&&i!=-1/0&&i===i||!!i&&typeof i["#"]=="string"&&Object.keys(i).length===1&&i["#"]}})(e,"./valid"),e(function(n){e("./shim");function i(){var f=+new Date;return c<f?(o=0,c=f+i.drift):c=f+(o+=1)/a+i.drift}i.drift=0;var s=-1/0,o=0,a=999,c=s,l;i.is=function(f,u,h){var g=u&&f&&f._&&f._[">"]||h;if(g)return typeof(g=g[u])=="number"?g:s},i.ify=function(f,u,h,g,p){(f=f||{})._=f._||{},p&&(f._["#"]=p);var y=f._[">"]||(f._[">"]={});return l!==u&&u!=="_"&&(typeof h=="number"&&(y[u]=h),l!==g&&(f[u]=g)),f},n.exports=i})(e,"./state"),e(function(n){e("./shim");function i(s){var o={s:{}},a=o.s;s=s||{max:999,age:1e3*9},o.check=function(l){return a[l]?c(l):!1};var c=o.track=function(l){var f=a[l]||(a[l]={});return f.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,s.age+9)),c.ed&&c.ed(l),f};return o.drop=function(l){o.to=null,o.now=+new Date;var f=Object.keys(a);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(f,function(u){var h=a[u];h&&(l||s.age)>o.now-h.was||delete a[u]},0,99)},o}n.exports=i})(e,"./dup"),e(function(n){e("./onto"),n.exports=function(o,a){if(this.on){var c=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var f=o["#"]||o,l=(this.tag||"")[f];return l?(a&&(l=this.on(f,a),clearTimeout(l.err),l.err=setTimeout(function(){l.off()},c)),!0):void 0}var f=a&&a["#"]||i(9);if(!o)return f;var u=this.on(f,o,a);return u.err=u.err||setTimeout(function(){u.off(),u.next({err:"Error: No ACK yet.",lack:!0})},c),f}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(n){function i(p){return p instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:p}):new i(p)}i.is=function(p){return p instanceof i||p&&p._&&p===p._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},e("./shim"),i.valid=e("./valid"),i.state=e("./state"),i.on=e("./onto"),i.dup=e("./dup"),i.ask=e("./ask"),function(){i.create=function(m){m.root=m.root||m,m.graph=m.graph||{},m.on=m.on||i.on,m.ask=m.ask||i.ask,m.dup=m.dup||i.dup();var d=m.$.opt(m.opt);return m.once||(m.on("in",p,m),m.on("out",p,m),m.on("put",S,m),i.on("create",m),m.on("create",m)),m.once=1,d};function p(m){if(m){if(m.out===p){this.to.next(m);return}var d=this,v=d.as,R=v.at||v,C=R.$,x=R.dup,P,M=m.DBG;if((P=m["#"])||(P=m["#"]=o(9)),!x.check(P)){if(x.track(P),P=m._,m._=typeof P=="function"?P:function(){},m.$&&m.$===(m.$._||"").$||(m.$=C),m["@"]&&!m.put&&w(m),!R.ask(m["@"],m))if(M&&(M.u=+new Date),m.put){y(m);return}else m.get&&i.on.get(m,C);M&&(M.uc=+new Date),d.to.next(m),M&&(M.ua=+new Date),!(m.nts||m.NTS)&&(m.out=p,R.on("out",m),M&&(M.ue=+new Date))}}}function y(m){if(m){var d=m._||"",v=d.root=((d.$=m.$||"")._||"").root;if(m["@"]&&d.faith&&!d.miss){m.out=p,v.on("out",m);return}d.latch=v.hatch,d.match=v.hatch=[];var R=m.put,C=d.DBG=m.DBG,x=+new Date;if(U=U||x,!(R["#"]&&R["."])){C&&(C.p=x),d["#"]=m["#"],d.msg=m,d.all=0,d.stun=1;var P=Object.keys(R);console.STAT&&console.STAT(x,((C||d).pk=+new Date)-x,"put sort");var M=0,O,_,L,W,I,z,q;(function J(Q){if(O!=M){if(O=M,!(L=P[M])){console.STAT&&console.STAT(x,((C||d).pd=+new Date)-x,"put"),E(d);return}(W=R[L])?(q=W._)?L!==q["#"]?z=D+B(L)+"soul not same.":(I=q[">"])||(z=D+B(L)+"no state."):z=D+B(L)+"no meta.":z=D+B(L)+"no node.",_=Object.keys(W||{})}if(z){m.err=d.err=z,E(d);return}var ce=0,re;for(Q=Q||0;Q++<9&&(re=_[ce++]);)if(re!=="_"){var ee=W[re],et=I[re];if(u===et){z=D+B(re)+"on"+B(L)+"no state.";break}if(!c(ee)){z=D+B(re)+"on"+B(L)+"bad "+typeof ee+B(ee);break}b(ee,re,L,et,m),++$}if((_=_.slice(ce)).length){a(J);return}++M,_=null,J(Q)})()}}}i.on.put=y;function b(m,d,v,R,C){var x=C._||"",P=x.root,M=P.graph,O,_=M[v]||h,L=l(_,d,1),W=_[d],I=x.DBG;(O=console.STAT)&&(!M[v]||!W)&&(O.has=(O.has||0)+1);var z=F();if(R>z){setTimeout(function(){b(m,d,v,R,C)},(O=R-z)>N?N:O),console.STAT&&console.STAT((I||x).Hf=+new Date,O,"future");return}if(!(R<L)&&!(!x.faith&&R===L&&(m===W||j(m)<=j(W))&&!x.miss)){x.stun++;var q=C["#"]+x.all++,J={toString:function(){return q},_:x};J.toJSON=J.toString,P.dup.track(J)["#"]=C["#"],I&&(I.ph=I.ph||+new Date),P.on("put",{"#":J,"@":C["@"],put:{"#":v,".":d,":":m,">":R},ok:C.ok,_:x})}}function S(m){var d;(d=(m._||"").DBG)&&(d.pa=+new Date,d.pm=d.pm||+new Date);var v=this,R=v.as,C=R.graph,x=m._,P=m.put,M=P["#"],O=P["."],_=P[":"],L=P[">"];m["#"];var W;(W=x.msg)&&(W=W.put)&&(W=W[M])&&f(W,O,L,_,M),C[M]=f(C[M],O,L,_,M),(W=(R.next||"")[M])&&W.on("in",m),E(x),v.to.next(m)}function E(m,d){var v;if(!m.stop&&!(!m.err&&0<--m.stun)&&(m.stop=1,!!(v=m.root))){var R=m.match;R.end=1,R===v.hatch&&(!(R=m.latch)||R.end?delete v.hatch:v.hatch=R),m.hatch&&m.hatch(),setTimeout.each(m.match,function(C){C&&C()}),!(!(d=m.msg)||m.err||d.err)&&(d.out=p,m.root.on("out",d),A())}}function w(m){var d=m["@"]||"",v;if(!(v=d._)){var R=(R=m.$)&&(R=R._)&&(R=R.root)&&(R=R.dup);if(!(R=R.check(d)))return;m["@"]=R["#"]||m["@"];return}v.acks=(v.acks||0)+1,(v.err=m.err)&&(m["@"]=v["#"],E(v)),v.ok=m.ok||v.ok,!v.stop&&!v.crack&&(v.crack=v.match&&v.match.push(function(){T(v)})),T(v)}function T(m){!m||!m.root||m.stun||m.acks!==m.all||m.root.on("in",{"@":m["#"],err:m.err,ok:m.err?u:m.ok||{"":1}})}var D="Error: Invalid graph!",B=function(m){return" '"+(""+m).slice(0,9)+"...' "},j=JSON.stringify,N=2147483647,F=i.state,$=0,U,A=function(){$>999&&$/-(U-(U=+new Date))>1&&(i.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),A=function(){$=0})}}(),function(){i.on.get=function(y,b){var S=b._,E=y.get,w=E["#"],T=S.graph[w],D=E["."],B=S.next||(S.next={}),j=B[w],N=y._||{},F=N.DBG=y.DBG;if(F&&(F.g=+new Date),!T)return S.on("get",y);if(D){if((typeof D!="string"||u===T[D])&&!((j||"").next||"")[D]){S.on("get",y);return}T=f({},D,l(T,D),T[D],w)}T&&p(y,T),S.on("get",y)};function p(y,b){var S=+new Date,E=y._||{},w=E.DBG=y.DBG,T=y["#"],D=o(9),B=Object.keys(b||"").sort(),j=((b||"")._||"")["#"];B.length;var N=y.$._.root,F=b===N.graph[j];console.STAT&&console.STAT(S,((w||E).gk=+new Date)-S,"got keys"),b&&function $(){S=+new Date;for(var U=0,A,m={},d;U<9&&(A=B[U++]);)f(m,A,l(b,A),b[A],j);B=B.slice(U),(d={})[j]=m,m=d;var v;F&&(v=function(){},v.ram=v.faith=!0),d=B.length,console.STAT&&console.STAT(S,-(S-(S=+new Date)),"got copied some"),w&&(w.ga=+new Date),N.on("in",{"@":T,"#":D,put:m,"%":d?D=o(9):u,$:N.$,_:v,DBG:w,FOO:1}),console.STAT&&console.STAT(S,+new Date-S,"got in"),d&&setTimeout.turn($)}(),b||N.on("in",{"@":y["#"]})}i.on.get.ack=p}(),function(){i.chain.opt=function(p){p=p||{};var y=this,b=y._,S=p.peers||p;return Object.plain(p)||(p={}),Object.plain(b.opt)||(b.opt=p),typeof S=="string"&&(S=[S]),Object.plain(b.opt.peers)||(b.opt.peers={}),S instanceof Array&&(p.peers={},S.forEach(function(E){var w={};w.id=w.url=E,p.peers[E]=b.opt.peers[E]=b.opt.peers[E]||w})),s(p,function E(w){var T=this[w];if(this&&this.hasOwnProperty(w)||typeof T=="string"||Object.empty(T)){this[w]=T;return}T&&T.constructor!==Object&&!(T instanceof Array)||s(T,E)}),b.opt.from=p,i.on("opt",b),b.opt.uuid=b.opt.uuid||function(w){return i.state().toString(36).replace(".","")+String.random(w||12)},y}}();var s=function(p,y){Object.keys(p).forEach(y,p)},o=String.random,a=setTimeout.turn,c=i.valid,l=i.state.is,f=i.state.ify,u,h={},g;i.log=function(){return!i.log.off&&g.log.apply(g,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(p,y,b){return(b=i.log.once)[p]=b[p]||0,b[p]++||i.log(y)},typeof window<"u"&&((window.GUN=window.Gun=i).window=window);try{typeof r<"u"&&(r.exports=i)}catch{}n.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(g=console).only=function(p,y){return g.only.i&&p===g.only.i&&g.only.i++&&(g.log.apply(g,arguments)||y)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(n){var i=e("./root");i.chain.back=function(a,c){var l;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var f=this,u=f._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var h=0,g=a.length,l=u;for(h;h<g;h++)l=(l||s)[a[h]];return o!==l?c?f:l:(l=u.back)?l.$.back(a,c):void 0}if(typeof a=="function"){for(var p,l={back:u};(l=l.back)&&o===(p=a(l,c)););return p}return typeof a=="number"?(u.back||u).$.back(a-1):this};var s={},o})(e,"./back"),e(function(n){var i=e("./root");i.chain.chain=function(E){var w=this,T=w._,D=new(E||w).constructor(w),B=D._,j;return B.root=j=T.root,B.id=++j.once,B.back=w._,B.on=i.on,B.on("in",i.on.in,B),B.on("out",i.on.out,B),D};function s(E){var w,T=this.as,D=T.back,B=T.root,j;if(E.$||(E.$=T.$),this.to.next(E),T.err){T.on("in",{put:T.put=u,$:T.$});return}if(w=E.get){if(B.pass&&(B.pass[T.id]=T),T.lex&&Object.keys(T.lex).forEach(function(N){j[N]=T.lex[N]},j=E.get=E.get||{}),w["#"]||T.soul){if(w["#"]=w["#"]||T.soul,E["#"]||(E["#"]=h(9)),D=B.$.get(w["#"])._,w=w["."]){if(p(D.put,w)&&(j=D.ask&&D.ask[w],(D.ask||(D.ask={}))[w]=D.$.get(w)._,D.on("in",{get:w,put:{"#":D.soul,".":w,":":D.put[w],">":b(B.graph[D.soul],w)}}),j))return}else{if(j=D.ask&&D.ask[""],(D.ask||(D.ask={}))[""]=D,u!==D.put&&(D.on("in",D),j))return;E.$=D.$}return B.ask(l,E),B.on("in",E)}if(w["."])return T.get?(E={get:{".":T.get},$:T.$},(D.ask||(D.ask={}))[T.get]=E.$._,D.on("out",E)):(E={get:T.lex?E.get:{},$:T.$},D.on("out",E));if((T.ask||(T.ask={}))[""]=T,T.get)return w["."]=T.get,(D.ask||(D.ask={}))[T.get]=E.$._,D.on("out",E)}return D.on("out",E)}i.on.out=s;function o(E,w){w=w||this.as;var T=w.root,D=E.$||(E.$=w.$),B=(D||"")._||f,j=E.put||"",N=j["#"],F=j["."],$=u!==j["="]?j["="]:j[":"],U=j[">"]||-1/0,A;if(u!==E.put&&(u===j["#"]||u===j["."]||u===j[":"]&&u===j["="]||u===j[">"])){if(!g(j)){if(!(N=((j||"")._||"")["#"])){console.log("chain not yet supported for",j,"...",E,w);return}return D=w.root.$.get(N),setTimeout.each(Object.keys(j).sort(),function(m){m=="_"||u===(U=b(j,m))||w.on("in",{$:D,put:{"#":N,".":m,"=":j[m],">":U},VIA:E})})}w.on("in",{$:B.back.$,put:{"#":N=B.back.soul,".":F=B.has||B.get,"=":j,">":b(B.back.put,F)},via:E});return}(E.seen||"")[w.id]||((E.seen||(E.seen=function(){}))[w.id]=w,w!==B&&(Object.keys(E).forEach(function(m){j[m]=E[m]},j={}),j.get=w.get||j.get,!w.soul&&!w.has?j.$$$=j.$$$||w.$:B.soul&&(j.$=w.$,j.$$=j.$$||B.$),E=j),c(E,w),(w.soul||E.$$)&&U>=b(T.graph[N],F)&&((j=T.$.get(N)._).put=S(j.put,F,U,$,N)),!B.soul&&U>=b(T.graph[N],F)&&(A=(T.$.get(N)._.next||"")[F])&&(A.put=$,typeof(j=g($))=="string"&&(A.put=T.$.get(j)._.put||$)),this.to&&this.to.next(E),w.any&&setTimeout.each(Object.keys(w.any),function(m){(m=w.any[m])&&m(E)},0,99),w.echo&&setTimeout.each(Object.keys(w.echo),function(m){(m=w.echo[m])&&m.on("in",E)},0,99),((E.$$||"")._||B).soul&&(A=w.next)&&(A=A[F])&&(j={},Object.keys(E).forEach(function(m){j[m]=E[m]}),j.$=(E.$$||E.$).get(j.get=F),delete j.$$,delete j.$$$,A.on("in",j)),a(E,w))}i.on.in=o;function a(E,w){if(w=w||this.as||E.$._,!(E.$$&&this!==i.on)&&!(!E.put||w.soul)){var T=E.put||"",D=T["="]||T[":"],F,B=w.root,j=B.$.get(T["#"]).get(T["."])._;if(typeof(D=g(D))!="string"){this===i.on&&((j.echo||(j.echo={}))[w.id]=w);return}if(!((j.echo||(j.echo={}))[w.id]&&!(B.pass||"")[w.id])){if(F=B.pass){if(F[D+w.id])return;F[D+w.id]=1}(j.echo||(j.echo={}))[w.id]=w,w.has&&(w.link=D);var N=B.$.get(j.link=D)._;(N.echo||(N.echo={}))[j.id]=j;var F=w.ask||"";(F[""]||w.lex)&&N.on("out",{get:{"#":D}}),setTimeout.each(Object.keys(F),function($,U){!$||!(U=F[$])||U.on("out",{get:{"#":D,".":$}})},0,99)}}}i.on.link=a;function c(E,w){var T=E.put||"",D=u!==T["="]?T["="]:T[":"],B=w.root,j,N;if(u===D){if(w.soul&&u!==w.put||(N=(E.$$||E.$||"")._||"",E["@"]&&(u!==N.put||u!==w.put)))return;(j=w.link||E.linked)&&delete(B.$.get(j)._.echo||"")[w.id],w.has&&(w.link=null),w.put=u,setTimeout.each(Object.keys(w.next||""),function(F,$){($=w.next[F])&&(j&&delete(B.$.get(j).get(F)._.echo||"")[$.id],$.on("in",{get:F,put:u,$:$.$}))},0,99);return}w.soul||E.$$||(j=g(D),N=E.$._||"",!((j===N.link||w.has&&!N.link)&&!((B.pass||"")[w.id]&&typeof j!="string"))&&(delete(N.echo||"")[w.id],c({get:w.get,put:u,$:E.$,linked:E.linked=E.linked||N.link},w)))}i.on.unlink=c;function l(E,w){var T=this.as,D=T.$._;D.root;var B=T.get||"",j=(E.put||"")[B["#"]]||"";if(!E.put||typeof B["."]=="string"&&u===j[B["."]]){if(u!==D.put||!D.soul&&!D.has)return;D.ack=(D.ack||0)+1,D.on("in",{get:D.get,put:D.put=u,$:D.$,"@":E["@"]});return}(E._||{}).miss=1,i.on.put(E)}var f={},u,h=String.random,g=i.valid,p=function(E,w){return E&&Object.prototype.hasOwnProperty.call(E,w)},y=i.state,b=y.is,S=y.ify})(e,"./chain"),e(function(n){var i=e("./root");i.chain.get=function(u,h,g){var p,y;if(typeof u=="string"){if(u.length==0)return(p=this.chain())._.err={err:i.log("0 length key!",u)},h&&h.call(p,p._.err),p;var b=this,S=b._,E=S.next||c;(p=E[u])||(p=u&&s(u,b)),p=p&&p.$}else if(typeof u=="function"){let F=function($,U,A){if(!F.stun&&!((x=T.pass)&&!x[D])){var m=$.$._,d=($.$$||"")._,v=(d||m).put,R=!m.has&&!m.soul,C={},x;if((R||f===v)&&(v=f===((x=$.put)||"")["="]?f===(x||"")[":"]?x:x[":"]:x["="]),typeof(x=i.valid(v))=="string"&&(v=f===(x=T.$.get(x)._.put)?w.not?f:v:x),!(w.not&&f===v)){if(f===w.stun){if((x=T.stun)&&x.on&&(S.$.back(function(P){if(x.on(""+P.id,C={}),(C.run||0)<F.id)return C}),!C.run&&x.on(""+m.id,C={}),!C.run&&d&&x.on(""+d.id,C={}),F.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=x.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[D]=function(){F($,U,1)};return}if(f===v&&(A=0),(x=T.hatch)&&!x.end&&f===w.hatch&&!A){if(B[m.$._.id])return;B[m.$._.id]=1,x.push(function(){F($,U,1)});return}B={}}if(T.pass){if(T.pass[D+m.id])return;T.pass[D+m.id]=1}if(w.on){w.ok.call(m.$,v,m.get,$,U||F);return}if(w.v2020){w.ok($,U||F);return}Object.keys($).forEach(function(P){x[P]=$[P]},x={}),$=x,$.put=v,w.ok.call(w.as,$,U||F)}}};var j=F;if(h===!0)return o(this,u,h,g),this;p=this;var S=p._,w=h||{},T=S.root,D;w.at=S,w.ok=u;var B={};return F.at=S,(S.any||(S.any={}))[D=String.random(7)]=F,F.off=function(){F.stun=1,S.any&&delete S.any[D]},F.rid=a,F.id=w.run||++T.once,y=T.pass,(T.pass={})[D]=1,w.out=w.out||{get:{}},S.on("out",w.out),T.pass=y,p}else{if(typeof u=="number")return this.get(""+u,h,g);if(typeof(y=l(u))=="string")return this.get(y,h,g);(y=this.get.next)&&(p=y(this,u))}return p?(h&&typeof h=="function"&&p.get(h,g),p):((p=this.chain())._.err={err:i.log("Invalid get request!",u)},h&&h.call(p,p._.err),p)};function s(u,h){var g=h._,p=g.next,y=h.chain(),b=y._;return p||(p=g.next={}),p[b.get=u]=b,h===g.root.$?b.soul=u:(g.soul||g.has)&&(b.has=u),b}function o(u,h,g,p){var y=u._,b=0,S;return(S=y.soul||y.link)?h(S,p,y):y.jam?y.jam.push([h,p]):(y.jam=[[h,p]],u.get(function(w,T){if(!(f===w.put&&!y.root.opt.super&&(S=Object.keys(y.root.opt.peers).length)&&++b<=S)){T.rid(w);var D=(D=w.$)&&D._||{},B=0,j;for(S=y.jam,delete y.jam;j=S[B++];){var N=j[0];j=j[1],N&&N(D.link||D.soul||i.valid(w.put)||((w.put||{})._||{})["#"],j,w,T)}}},{out:{get:{".":!0}}}),u)}function a(u){var h=this.at||this.on;if(!u||h.soul||h.has)return this.off();if(u=(u=(u=u.$||u)._||u).id){h.map;var g;if((g=this.seen||(this.seen={}))[u])return!0;g[u]=!0}}var c={},l=i.valid,f})(e,"./get"),e(function(n){var i=e("./root");i.chain.put=function(p,y,b){var S=this,E=S._,w=E.root;b=b||{},b.root=E.root,b.run||(b.run=w.once),s(b,E.id),b.ack=b.ack||y,b.via=b.via||S,b.data=b.data||p,b.soul||(b.soul=E.soul||typeof y=="string"&&y);var T=b.state=b.state||i.state();return typeof p=="function"?(p(function(D){b.data=D,S.put(l,l,b)}),S):b.soul?(b.$=w.$.get(b.soul),b.todo=[{it:b.data,ref:b.$}],b.turn=b.turn||u,b.ran=b.ran||o,function D(){var B=b.todo,j=B.pop(),N=j.it;j.ref&&j.ref._.id;var F,$,U,A,m;if(s(b,j.ref),(A=j.todo)&&($=A.pop(),N=N[$],A.length&&B.push(j)),$&&(B.path||(B.path=[])).push($),!(F=h(N))&&!(m=i.is(N))){if(!Object.plain(N)){o.err(b,"Invalid data: "+c(N)+" at "+(b.via.back(function(x){x.get&&A.push(x.get)},A=[])||A.join("."))+"."+(B.path||[]).join("."));return}for(var d=b.seen||(b.seen=[]),v=d.length;v--;)if(N===(A=d[v]).it){F=N=A.link;break}}if($&&F)j.node=g(j.node,$,T,N);else{let x=function(P,M){var O=U.link["#"];M&&(M.off(),M.rid(P));var _=O||P.soul||(A=(P.$$||P.$)._||"").soul||A.link||((A=A.put||"")._||"")["#"]||A["#"]||((A=P.put||"")&&P.$$?A["#"]:(A["="]||A[":"]||"")["#"]);if(!O&&s(b,P.$),!_&&!j.link["#"]){(j.wait||(j.wait=[])).push(function(){x(P,M)});return}_||(_=[],(P.$$||P.$).back(function(L){if(A=L.soul||L.link)return _.push(A);_.push(L.get)}),_=_.reverse().join("/")),U.link["#"]=_,!m&&(((b.graph||(b.graph={}))[_]=U.node||(U.node={_:{}}))._["#"]=_),delete b.wait[R],U.wait&&setTimeout.each(U.wait,function(L){L&&L()}),b.ran(b)};var C=x;if(!b.seen){o.err(b,"Data at root of graph must be a node (an object).");return}b.seen.push(U={it:N,link:{},todo:m?[]:Object.keys(N).sort().reverse(),path:(B.path||[]).slice(),up:j}),j.node=g(j.node,$,T,U.link),!m&&U.todo.length&&B.push(U);var R=b.seen.length;(b.wait||(b.wait={}))[R]="",A=(U.ref=m?N:$?j.ref.get($):j.ref)._,(A=N&&(N._||"")["#"]||A.soul||A.link)?x({soul:A}):U.ref.get(x,{run:b.run,v2020:1,out:{get:{".":" "}}})}if(!B.length)return b.ran(b);b.turn(D)}(),S):(a(b),S)};function s(p,y){if(y){y=(y._||"").id||y;var b=p.root.stun||(p.root.stun={on:i.on}),S={},E;p.stun||(p.stun=b.on("stun",function(){})),(E=b.on(""+y))&&E.the.last.next(S),!(S.run>=p.run)&&b.on(""+y,function(w){if(p.stun.end){this.off(),this.to.next(w);return}w.run=w.run||p.run,w.stun=w.stun||p.stun})}}function o(p){if(p.err){o.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var y=p.$.back(-1)._,b=y.root,S=y.ask(function(D){b.on("ack",D),D.err&&!D.lack&&i.log(D),++E>(p.acks||0)&&this.off(),p.ack&&p.ack(D,this)},p.opt),E=0,w=p.stun,T;(T=function(){w&&(o.end(w,b),setTimeout.each(Object.keys(w=w.add||""),function(D){(D=w[D])&&D()}))}).hatch=T,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":S,_:T})}}o.end=function(p,y){p.end=f,p.the.to===p&&p===p.the.last&&delete y.stun,p.off()},o.err=function(p,y){(p.ack||f).call(p,p.out={err:p.err=i.log(y)}),p.ran(p)};function a(p){var y=p.via._,b;p.via=p.via.back(function(S){if(S.soul||!S.get)return S.$;b=p.data,(p.data={})[S.get]=b}),(!p.via||!p.via._.soul)&&(p.via=y.root.$.get(((p.data||"")._||"")["#"]||y.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function c(p,y){return p&&(y=p.constructor)&&y.name||typeof p}var l,f=function(){},u=setTimeout.turn,h=i.valid,g=i.state.ify})(e,"./put"),e(function(n){var i=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),n.exports=i})(e,"./index"),e(function(n){var i=e("./index");i.chain.on=function(a,c,l,f){var u=this,h=u._;h.root;var g;if(typeof a=="string")return c?(g=h.on(a,c,l||h,f),l&&l.$&&(l.subs||(l.subs=[])).push(g),u):h.on(a);var p=c;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,u.get(a,p),u},i.chain.once=function(a,c){if(c=c||{},!a)return s(this);var l=this,f=l._,u=f.root;f.put;var h=String.random(7),g;return l.get(function(p,y,b,S){var E=this,w=E._,T=w.one||(w.one={});if(S.stun||T[h]==="")return;if((g=i.valid(p))===!0){D();return}if(typeof g=="string")return;clearTimeout((f.one||"")[h]),clearTimeout(T[h]),T[h]=setTimeout(D,c.wait||99);function D(B){if(!w.has&&!w.soul&&(w={put:p,get:y}),o===(g=w.put)&&(g=((b.$$||"")._||"").put),typeof i.valid(g)=="string"&&(g=u.$.get(g)._.put,g===o&&!B)){T[h]=setTimeout(function(){D(1)},c.wait||99);return}S.stun||T[h]!==""&&(T[h]="",(f.soul||f.has)&&S.off(),a.call(E,g,w.get),clearTimeout(T[h]))}},{on:1}),l};function s(a,c,l){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(l=a.chain())._.nix=a.once(function(f,u){l._.on("in",this._)}),l._.lex=a._.lex,l}i.chain.off=function(){var a=this,c=a._,l,f=c.back;if(f)return c.ack=0,(l=f.next)&&l[c.get]&&delete l[c.get],(l=f.any)&&(delete f.any,f.any={}),(l=f.ask)&&delete l[c.get],(l=f.put)&&delete l[c.get],(l=c.soul)&&delete f.root.graph[l],(l=c.map)&&Object.keys(l).forEach(function(u,h){h=l[u],h.link&&f.root.$.get(h.link).off()}),(l=c.next)&&Object.keys(l).forEach(function(u,h){h=l[u],h.$.off()}),c.on("off",{}),a};var o})(e,"./on"),e(function(n){var i=e("./index"),s=i.chain.get.next;i.chain.get.next=function(l,f){var u;return Object.plain(f)?(u=((u=f["#"])||"")["="]||u)?l.get(u):((u=l.chain()._).lex=f,l.on("in",function(h){String.match(h.get||(h.put||"")["."],f["."]||f["#"]||f)&&u.on("in",h),this.to.next(h)}),u.$):(s||a)(l,f)},i.chain.map=function(l,f,u){var h=this,g=h._,p,y;return Object.plain(l)&&(p=l["."]?l:{".":l},l=c),l?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),y=h.chain(),h.map().on(function(b,S,E,w){var T=(l||a).call(this,b,S,E,w);if(c!==T){if(b===T)return y._.on("in",E);if(i.is(T))return y._.on("in",T._);var D={};Object.keys(E.put).forEach(function(B){D[B]=E.put[B]},D),D["="]=T,y._.on("in",{get:S,put:D})}}),y):((y=g.each)||((g.each=y=h.chain())._.lex=p||y._.lex||g.lex,y._.nix=h.back("nix"),h.on("in",o,y._)),y)};function o(l){this.to.next(l);var f=this.as,u=l.$,h=u._,g=l.put,p;!h.soul&&!l.$$||(p=f.lex)&&!String.match(l.get||(g||"")["."],p["."]||p["#"]||p)||i.on.link(l,f)}var a=function(){},c})(e,"./map"),e(function(n){var i=e("./index");i.chain.set=function(s,o,a){var c=this,l=c.back(-1),f,u;return o=o||function(){},a=a||{},a.item=a.item||s,(f=((s||"")._||"")["#"])&&((s={})["#"]=f),typeof(u=i.valid(s))=="string"?c.get(f=u).put(s,o,a):i.is(s)?(c.put(function(h){s.get(function(g,p,y){if(!g)return o.call(c,{err:i.log('Only a node can be linked! Not "'+y.put+'"!')});(u={})[g]={"#":g},h(u)},!0)}),s):(Object.plain(s)&&(s=l.get(f=c.back("opt.uuid")()).put(s)),c.get(f||l.back("opt.uuid")(7)).put(s,o,a))}})(e,"./set"),e(function(n){e("./shim");var i=function(){},s=JSON.parseAsync||function(l,f,u){var h,g=+new Date;try{f(h,JSON.parse(l,u),o.sucks(+new Date-g))}catch(p){f(p)}},o=JSON.stringifyAsync||function(l,f,u,h){var g,p=+new Date;try{f(g,JSON.stringify(l,u,h),o.sucks(+new Date-p))}catch(y){f(y)}};o.sucks=function(l){l>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),o.sucks=i)};function a(l){var f=function(){},u=l.opt||{};u.log=u.log||console.log,u.gap=u.gap||u.wait||0,u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.pack=u.pack||u.max*.01*.01,u.puff=u.puff||9;var h=setTimeout.turn||setTimeout,g=l.dup,p=g.check,y=g.track,b=f.hear=function(w,T){if(w){if(u.max<=w.length)return f.say({dam:"!",err:"Message too big!"},T);f===this&&(b.d+=w.length||0,++b.c);var D=T.SH=+new Date,B=w[0],j;if(B==="["){s(w,function(N,F){if(N||!F)return f.say({dam:"!",err:"DAM JSON parse error."},T);console.STAT&&console.STAT(+new Date,F.length,"# on hear batch");var $=u.puff;(function U(){for(var A=+new Date,m=0,d;m<$&&(d=F[m++]);)f.hear(d,T);F=F.slice(m),console.STAT&&console.STAT(A,+new Date-A,"hear loop"),S(T),F.length&&h(U,0)})()}),w="";return}if(B==="{"||(w["#"]||Object.plain(w))&&(j=w)){if(j)return b.one(j,T,D);s(w,function(N,F){if(N||!F)return f.say({dam:"!",err:"DAM JSON parse error."},T);b.one(F,T,D)});return}}};b.one=function(w,T,U){var B,j,N,F,$;if(w.DBG&&(w.DBG=$={DBG:w.DBG}),$&&($.h=U),$&&($.hp=+new Date),(B=w["#"])||(B=w["#"]=String.random(9)),!(N=p(B))&&(j=w["##"],!(j&&(N=w["@"]||w.get&&B)&&g.check(F=N+j)))){if((w._=function(){}).via=f.leap=T,(N=w["><"])&&typeof N=="string"&&N.slice(0,99).split(",").forEach(function(A){this[A]=1},w._.yo={}),N=w.dam){(N=f.hear[N])&&N(w,T,l),y(B);return}(N=w.ok)&&(w._.near=N["/"]);var U=+new Date;$&&($.is=U),T.SI=B,y.ed=function(A){B===A&&(y.ed=0,(A=g.s[B])&&(A.via=T,w.get&&(A.it=w)))},l.on("in",f.last=w),$&&($.hd=+new Date),console.STAT&&console.STAT(U,+new Date-U,w.get?"msg get":w.put?"msg put":"msg"),y(B),F&&y(F),f.leap=f.last=null}},b.c=b.d=0,function(){var w=0,T;f.hash=function(j,N){var F,$,U,A=+new Date;o(j.put,function m(d,v){var R=($||($=U=v||"")).slice(0,32768);if(F=String.hash(R,F),$=$.slice(32768),$){h(m,0);return}console.STAT&&console.STAT(A,+new Date-A,"say json+hash"),j._.$put=U,j["##"]=F,f.say(j,N),delete j._.$put},D)};function D(j,N){var F;return N instanceof Object?(Object.keys(N).sort().forEach(B,{to:F={},on:N}),F):N}function B(j){this.to[j]=this.on[j]}f.say=function(j,N){var F;if((F=this)&&(F=F.to)&&F.next&&F.next(j),!j)return!1;var $,U,A,m=j["@"],d=j._||(j._=function(){}),v=j.DBG,R=+new Date;if(d.y=d.y||R,N||v&&(v.y=R),($=j["#"])||($=j["#"]=String.random(9)),!T&&y($),!(U=j["##"])&&c!==j.put&&!d.via&&m){f.hash(j,N);return}if(!N&&m&&(N=(F=g.s[m])&&(F.via||(F=F.it)&&(F=F._)&&F.via)||(F=f.last)&&m===F["#"]&&f.leap),!N&&m)return g.s[m]?void 0:(console.STAT&&console.STAT(+new Date,++w,"total no peer to ack to"),!1);if(m&&!j.put&&!U&&((g.s[m]||"").it||"")["##"])return!1;if(!N&&f.way)return f.way(j);if(v&&(v.yh=+new Date),!(A=d.raw)){f.raw(j,N);return}if(v&&(v.yr=+new Date),!N||!N.id){if(!Object.plain(N||u.peers))return!1;var R=+new Date;u.puff;var C=u.peers,x=Object.keys(N||u.peers||{});console.STAT&&console.STAT(R,+new Date-R,"peer keys"),function O(){var _=+new Date;T=1;var L=d.raw;d.raw=A;for(var W=0,I;W<9&&(I=(x||"")[W++]);)(I=C[I]||(N||"")[I])&&f.say(j,I);d.raw=L,T=0,x=x.slice(W),console.STAT&&console.STAT(_,+new Date-_,"say loop"),x.length&&(h(O,0),m&&y(m))}();return}if(!N.wire&&f.wire&&f.wire(N),$!==N.last){if(N.last=$,N===d.via||(F=d.yo)&&(F[N.url]||F[N.pid]||F[N.id]))return!1;if(console.STAT&&console.STAT(R,((v||d).yp=+new Date)-(d.y||R),"say prep"),!T&&m&&y(m),N.batch){if(N.tail=(F=N.tail||0)+A.length,N.tail<=u.pack){N.batch+=(F?",":"")+A;return}S(N)}N.batch="[";var P=+new Date;setTimeout(function(){console.STAT&&console.STAT(P,+new Date-P,"0ms TO"),S(N)},u.gap),E(A,N),console.STAT&&m===N.SI&&console.STAT(R,+new Date-N.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(j,N){if(!j)return"";var F=j._||{},$,U;if(U=F.raw)return U;if(typeof j=="string")return j;var A=j["##"],m=j["@"];if(A&&m){if(!F.via&&p(m+A))return!1;if(U=(g.s[m]||"").it){if(A===U["##"])return!1;U["##"]||(U["##"]=A)}}if(!j.dam&&!j["@"]){var d=0,v=[];U=u.peers;for(var R in U){var C=U[R];if(v.push(C.url||C.pid||C.id),++d>6)break}d>1&&(j["><"]=v.join())}if(j.put&&(U=j.ok)&&(j.ok={"@":(U["@"]||1)-1,"/":U["/"]==j._.near?f.near:U["/"]}),$=F.$put){U={},Object.keys(j).forEach(function(P){U[P]=j[P]}),U.put=":])([:",o(U,function(P,M){if(!P){var O=+new Date;U=M.indexOf('"put":":])([:"'),x(c,M=M.slice(0,U+6)+$+M.slice(U+14)),console.STAT&&console.STAT(O,+new Date-O,"say slice")}});return}o(j,x);function x(P,M){P||(F.raw=M,f.say(j,N))}}}();function S(w){var T=w.batch,D=typeof T=="string";if(D&&(T+="]"),w.batch=w.tail=null,!!T&&!(D?3>T.length:!T.length)){if(!D)try{T=T.length===1?T[0]:JSON.stringify(T)}catch(B){return u.log("DAM JSON stringify error",B)}T&&E(T,w)}}function E(w,T){try{var D=T.wire;T.say?T.say(w):D.send&&D.send(w),f.say.d+=w.length||0,++f.say.c}catch{(T.queue=T.queue||[]).push(w)}}return f.near=0,f.hi=function(w){var T=w.wire,D;if(!T){f.wire(w.length&&{url:w,id:w}||w);return}w.id?u.peers[w.url||w.id]=w:(D=w.id=w.id||w.url||String.random(9),f.say({dam:"?",pid:l.opt.pid},u.peers[D]=w),delete g.s[w.last]),w.met||(f.near++,w.met=+new Date,l.on("hi",w)),D=w.queue,w.queue=[],setTimeout.each(D||[],function(B){E(B,w)},0,9)},f.bye=function(w){w.met&&--f.near,delete w.met,l.on("bye",w);var T=+new Date;T=T-(w.met||T),f.bye.time=((f.bye.time||T)+T)/2},f.hear["!"]=function(w,T){u.log("Error:",w.err)},f.hear["?"]=function(w,T){w.pid&&(T.pid||(T.pid=w.pid),w["@"])||(f.say({dam:"?",pid:u.pid,"@":w["#"]},T),delete g.s[T.last])},f.hear.mob=function(w,T){if(w.peers){var D=Object.keys(w.peers),B=D[Math.random()*D.length>>0];B&&(f.bye(T),f.hi(B))}},l.on("create",function(w){w.opt.pid=w.opt.pid||String.random(9),this.to.next(w),w.on("out",f.say)}),l.on("bye",function(w,T){w=u.peers[w.id||w]||w,this.to.next(w),w.bye?w.bye():(T=w.wire)&&T.close&&T.close(),delete u.peers[w.id],w.wire=null}),l.on("bye",function(w,T){this.to.next(w),(T=console.STAT)&&(T.peers=f.near),(T=w.url)&&setTimeout(function(){},u.lack||9e3)}),l.on("hi",function(w,T){if(this.to.next(w),(T=console.STAT)&&(T.peers=f.near),!u.super){var D=Object.keys(l.next||"");D.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(D,function(B){var j=l.next[B];if(u.super||(j.ask||"")[""]){f.say({get:{"#":B}},w);return}setTimeout.each(Object.keys(j.ask||""),function(N){N&&f.say({"##":String.hash((l.graph[B]||"")[N]),get:{"#":B,".":N}},w)})})}}),f}var c;try{n.exports=a}catch{}})(e,"./mesh"),e(function(n){var i=e("./index");i.Mesh=e("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var a=o.opt;if(a.WebSocket===!1)return;var c=i.window||{},l=a.WebSocket||c.WebSocket||c.webkitWebSocket||c.mozWebSocket;if(!l)return;a.WebSocket=l;var f=a.mesh=a.mesh||i.Mesh(o);f.wire||a.wire,f.wire=a.wire=u;function u(y){try{if(!y||!y.url)return S&&S(y);var b=y.url.replace(/^http/,"ws"),S=y.wire=new a.WebSocket(b);return S.onclose=function(){g(y),a.mesh.bye(y)},S.onerror=function(E){g(y)},S.onopen=function(){a.mesh.hi(y)},S.onmessage=function(E){E&&a.mesh.hear(E.data||E,y)},S}catch{a.mesh.bye(y)}}setTimeout(function(){!a.super&&o.on("out",{dam:"hi"})},1);var h=2*999;function g(y){clearTimeout(y.defer),a.peers[y.url]&&(p&&y.retry<=0||(y.retry=(y.retry||a.retry+1||60)-(-y.tried+(y.tried=+new Date)<h*4?1:0),y.defer=setTimeout(function b(){if(p&&p.hidden)return setTimeout(b,h);u(y)},h)))}var p=""+s!=typeof document&&document});var s})(e,"./websocket"),e(function(n){if(!(typeof Gun>"u")){var i=function(){},s;try{s=(Gun.window||i).localStorage}catch{}s||(Gun.log("Warning: No localStorage exists to persist data to!"),s={setItem:function(a,c){this[a]=c},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var o=JSON.stringifyAsync||function(a,c,l,f){var u;try{c(u,JSON.stringify(a,l,f))}catch(h){c(h)}};Gun.on("create",function a(c){this.to.next(c);var l=c.opt;c.graph;var f=[],u,h,g,p;if(l.localStorage===!1)return;l.prefix=l.file||"gun/";try{u=a[l.prefix]=a[l.prefix]||JSON.parse(g=s.getItem(l.prefix))||{}}catch{u=a[l.prefix]={}}g=(g||"").length,c.on("get",function(b){this.to.next(b);var S=b.get,E,w,T,D;!S||!(E=S["#"])||(w=u[E]||D,w&&(T=S["."])&&!Object.plain(T)&&(w=Gun.state.ify({},T,Gun.state.is(w,T),w[T],E)),Gun.on.get.ack(b,w))}),c.on("put",function(b){this.to.next(b);var S=b.put,E=S["#"],w=S["."],T=b["#"],D=b.ok||"";if(u[E]=Gun.state.ify(u[E],w,S[">"],S[":"],E),p&&g>4999880){c.on("in",{"@":T,err:"localStorage max!"});return}!b["@"]&&(!b._.via||Math.random()<D["@"]/D["/"])&&f.push(T),!h&&(h=setTimeout(y,9+g/333))});function y(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(y,99);return}var b=f;clearTimeout(h),h=!1,f=[],o(u,function(S,E){try{!S&&s.setItem(l.prefix,E)}catch(w){S=p=w||"localStorage failure"}S&&(Gun.log(S+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),c.on("localStorage:error",{err:S,get:l.prefix,put:u})),g=E.length,setTimeout.each(b,function(w){c.on("in",{"@":w,err:S,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var U;if(""+U!=typeof Gun){var e=function(A){console.warn("Warning! Deprecated internal utility will break in next version:",A)},r=Gun;r.fn=r.fn||{is:function(A){return e("fn"),!!A&&typeof A=="function"}},r.bi=r.bi||{is:function(A){return e("bi"),A instanceof Boolean||typeof A=="boolean"}},r.num=r.num||{is:function(A){return e("num"),!n(A)&&(A-parseFloat(A)+1>=0||A===1/0||A===-1/0)}},r.text=r.text||{is:function(A){return e("text"),typeof A=="string"}},r.text.ify=r.text.ify||function(A){return e("text.ify"),r.text.is(A)?A:typeof JSON<"u"?JSON.stringify(A):A&&A.toString?A.toString():A},r.text.random=r.text.random||function(A,m){e("text.random");var d="";for(A=A||24,m=m||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";A>0;)d+=m.charAt(Math.floor(Math.random()*m.length)),A--;return d},r.text.match=r.text.match||function(A,m){var d,v;return e("text.match"),typeof A!="string"?!1:(typeof m=="string"&&(m={"=":m}),m=m||{},d=m["="]||m["*"]||m[">"]||m["<"],A===d?!0:v!==m["="]?!1:(d=m["*"]||m[">"]||m["<"],A.slice(0,(d||"").length)===d?!0:v!==m["*"]?!1:v!==m[">"]&&v!==m["<"]?A>=m[">"]&&A<=m["<"]:v!==m[">"]&&A>=m[">"]||v!==m["<"]&&A<=m["<"]))},r.text.hash=r.text.hash||function(A,m){if(e("text.hash"),typeof A=="string"){if(m=m||0,!A.length)return m;for(var d=0,v=A.length,R;d<v;++d)R=A.charCodeAt(d),m=(m<<5)-m+R,m|=0;return m}},r.list=r.list||{is:function(A){return e("list"),A instanceof Array}},r.list.slit=r.list.slit||Array.prototype.slice,r.list.sort=r.list.sort||function(A){return e("list.sort"),function(m,d){return!m||!d?0:(m=m[A],d=d[A],m<d?-1:m>d?1:0)}},r.list.map=r.list.map||function(A,m,d){return e("list.map"),F(A,m,d)},r.list.index=1,r.obj=r.boj||{is:function(A){return e("obj"),A?A instanceof Object&&A.constructor===Object||Object.prototype.toString.call(A).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},r.obj.put=r.obj.put||function(A,m,d){return e("obj.put"),(A||{})[m]=d,A},r.obj.has=r.obj.has||function(A,m){return e("obj.has"),A&&Object.prototype.hasOwnProperty.call(A,m)},r.obj.del=r.obj.del||function(A,m){if(e("obj.del"),!!A)return A[m]=null,delete A[m],A},r.obj.as=r.obj.as||function(A,m,d,v){return e("obj.as"),A[m]=A[m]||(v===d?{}:d)},r.obj.ify=r.obj.ify||function(A){if(e("obj.ify"),T(A))return A;try{A=JSON.parse(A)}catch{A={}}return A},function(){var A;function m(d,v){B(this,v)&&A!==this[v]||(this[v]=d)}r.obj.to=r.obj.to||function(d,v){return e("obj.to"),v=v||{},F(d,m,v),v}}(),r.obj.copy=r.obj.copy||function(A){return e("obj.copy"),A&&JSON.parse(JSON.stringify(A))},function(){function A(m,d){var v=this.n,R;if(!(v&&(d===v||T(v)&&B(v,d)))&&R!==d)return!0}r.obj.empty=r.obj.empty||function(m,d){return e("obj.empty"),m?!F(m,A,{n:d}):!0}}(),function(){function A(v,R){if(arguments.length===2){A.r=A.r||{},A.r[v]=R;return}A.r=A.r||[],A.r.push(v)}var m=Object.keys,d;Object.keys=Object.keys||function(v){return d(v,function(R,C,x){x(C)})},r.obj.map=d=r.obj.map||function(v,R,C){e("obj.map");var x,P=0,M,O,_,L,W=typeof R=="function";if(A.r=x,m&&T(v)&&(_=m(v),L=!0),C=C||{},n(v)||_)for(M=(_||v).length;P<M;P++){var I=P+r.list.index;if(W){if(O=L?R.call(C,v[_[P]],_[P],A):R.call(C,v[P],I,A),O!==x)return O}else if(R===v[L?_[P]:P])return _?_[P]:I}else for(P in v)if(W){if(B(v,P)&&(O=C?R.call(C,v[P],P,A):R(v[P],P,A),O!==x))return O}else if(R===v[P])return P;return W?A.r:r.list.index?0:-1}}(),r.time=r.time||{},r.time.is=r.time.is||function(A){return e("time"),A?A instanceof Date:+new Date().getTime()};var E=r.fn.is,n=r.list.is,w=r.obj,T=w.is,B=w.has,F=w.map,i={};i.is=function(A){return e("val.is"),A===U?!1:A===null?!0:A===1/0?!1:a(A)||o(A)||p(A)?!0:i.link.is(A)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(m){if(e("val.link.is"),m&&m[s]&&!m._&&T(m)){var d={};if(F(m,A,d),d.id)return d.id}return!1};function A(m,d){var v=this;if(v.id)return v.id=!1;if(d==s&&a(m))v.id=m;else return v.id=!1}}(),i.link.ify=function(A){return e("val.link.ify"),N({},s,A)},r.obj.has._=".";var s=i.link._,U,o=r.bi.is,p=r.num.is,a=r.text.is,w=r.obj,T=w.is,N=w.put,F=w.map;r.val=r.val||i;var c={_:"_"};c.soul=function(A,m){return e("node.soul"),A&&A._&&A._[m||u]},c.soul.ify=function(A,m){return e("node.soul.ify"),m=typeof m=="string"?{soul:m}:m||{},A=A||{},A._=A._||{},A._[u]=m.soul||A._[u]||f(),A},c.soul._=i.link._,function(){c.is=function(m,d,v){e("node.is");var R;return T(m)&&(R=c.soul(m))?!F(m,A,{as:v,cb:d,s:R,n:m}):!1};function A(m,d){if(d!==c._){if(!i.is(m))return!0;this.cb&&this.cb.call(this.as,m,d,this.n,this.s)}}}(),function(){c.ify=function(m,d,v){return e("node.ify"),d?typeof d=="string"?d={soul:d}:typeof d=="function"&&(d={map:d}):d={},d.map&&(d.node=d.map.call(v,m,U,d.node||{})),(d.node=c.soul.ify(d.node||{},d))&&F(m,A,{o:d,as:v}),d.node};function A(m,d){var v=this.o,R,C;if(v.map){R=v.map.call(this.as,m,""+d,v.node),C===R?D(v.node,d):v.node&&(v.node[d]=R);return}i.is(m)&&(v.node[d]=m)}}();var w=r.obj,T=w.is,D=w.del,F=w.map,l=r.text,f=l.random,u=c.soul._,U;r.node=r.node||c;var h=r.state;h.lex=function(){return e("state.lex"),h().toString(36).replace(".","")},h.to=function(A,m,d){e("state.to");var v=(A||{})[m];return T(v)&&(v=$(v)),h.ify(d,m,h.is(A,m),v,c.soul(A))},function(){h.map=function(m,d,v){e("state.map");var R,C=T(C=m||d)?C:null;return m=E(m=m||d)?m:null,C&&!m?(d=p(d)?d:h(),C[b]=C[b]||{},F(C,A,{o:C,s:d}),C):(v=v||T(d)?d:R,d=p(d)?d:h(),function(x,P,M,O){if(!m)return A.call({o:M,s:d},x,P),x;m.call(v||this||{},x,P,M,O),!(B(M,P)&&R===M[P])&&A.call({o:M,s:d},x,P)})};function A(m,d){b!==d&&h.ify(this.o,d,this.s)}}();var w=r.obj;w.as;var B=w.has,T=w.is,F=w.map,$=w.copy,g=r.num,p=g.is,y=r.fn,E=y.is,b=c._,U,S={};(function(){S.is=function(d,v,R,C){return e("graph.is"),!d||!T(d)||j(d)?!1:!F(d,A,{cb:v,fn:R,as:C})};function A(d,v){if(!d||v!==c.soul(d)||!c.is(d,this.fn,this.as))return!0;this.cb&&(m.n=d,m.as=this.as,this.cb.call(m.as,d,v,m))}function m(d){d&&c.is(m.n,d,m.as)}})(),function(){S.ify=function(C,x,P){e("graph.ify");var M={path:[],obj:C};return x?typeof x=="string"?x={soul:x}:typeof x=="function"&&(x.map=x):x={},typeof P=="string"&&(x.soul=x.soul||P,P=U),x.soul&&(M.link=i.link.ify(x.soul)),x.shell=(P||{}).shell,x.graph=x.graph||{},x.seen=x.seen||[],x.as=x.as||P,A(x,M),x.root=M.node,x.graph};function A(C,x){var P;return(P=R(C,x))?P:(x.env=C,x.soul=d,c.ify(x.obj,m,x)&&(x.link=x.link||i.link.ify(c.soul(x.node)),x.obj!==C.shell&&(C.graph[i.link.is(x.link)]=x.node)),x)}function m(C,x,P){var M=this,O=M.env,_,L;if(c._===x&&B(C,i.link._))return P._;if(_=v(C,x,P,M,O)){if(x||(M.node=M.node||P||{},B(C,c._)&&c.soul(C)&&(M.node._=$(C._)),M.node=c.soul.ify(M.node,i.link.is(M.link)),M.link=M.link||i.link.ify(c.soul(M.node))),(L=O.map)&&(L.call(O.as||{},C,x,P,M),B(P,x))){if(C=P[x],U===C){D(P,x);return}if(!(_=v(C,x,P,M,O)))return}if(!x)return M.node;if(_===!0)return C;if(L=A(O,{obj:C,path:M.path.concat(x)}),!!L.node)return L.link}}function d(C){var x=this,P=i.link.is(x.link),M=x.env.graph;x.link=x.link||i.link.ify(C),x.link[i.link._]=C,x.node&&x.node[c._]&&(x.node[c._][i.link._]=C),B(M,P)&&(M[C]=M[P],D(M,P))}function v(C,x,P,M,O){var _;if(i.is(C))return!0;if(T(C))return 1;if(_=O.invalid)return C=_.call(O.as||{},C,x,P),v(C,x,P,M,O);O.err="Invalid value at '"+M.path.concat(x).join(".")+"'!",r.list.is(C)&&(O.err+=" Use `.set(item)` instead of an Array.")}function R(C,x){for(var P=C.seen,M=P.length,O;M--;)if(O=P[M],x.obj===O.obj)return O;P.push(x)}}(),S.node=function(A){e("graph.node");var m=c.soul(A);if(m)return N({},m,A)},function(){S.to=function(m,d,v){if(e("graph.to"),!!m){var R={};return v=v||{seen:{}},F(m[d],A,{obj:R,graph:m,opt:v}),R}};function A(m,d){var v,R;if(c._===d){if(j(m,i.link._))return;this.obj[d]=$(m);return}if(!(v=i.link.is(m))){this.obj[d]=m;return}if(R=this.opt.seen[v]){this.obj[d]=R;return}this.obj[d]=this.opt.seen[v]=S.to(this.graph,v,this.opt)}}();var E=r.fn.is,w=r.obj,T=w.is,D=w.del,B=w.has,j=w.empty,N=w.put,F=w.map,$=w.copy,U;r.graph=r.graph||S}}()})(Bg);var b3=Bg.exports,S3=b3;const E3=Na(S3);const Hy=E3({peers:["https://localhost:3030/gun"]}),x3={messages:[]};function R3(t,e){return e.type==="ADD_MESSAGE"?{messages:[e.message,...t.messages]}:t}const A3=({account:t})=>{const[e,r]=V.useState({name:"",message:""}),[n,i]=V.useReducer(R3,x3);V.useEffect(()=>{const c=Hy.get("messages").map().on(l=>{i({type:"ADD_MESSAGE",message:{name:l.name,message:l.message,createdAt:l.createdAt}})});return()=>{c.off()}},[]);const s=a=>{r({...e,[a.target.name]:a.target.value})},o=V.useCallback(()=>{Hy.get("messages").set({name:e.name,message:e.message,createdAt:Date.now()}),r({name:"",message:""})},[e]);return k.jsx(k.Fragment,{children:k.jsxs("div",{className:"container",children:[k.jsx("div",{className:"dil"}),k.jsx("h1",{children:"Decentralized Chat App using Gun js"}),k.jsxs("h1",{children:["Connected Account is ",t]}),k.jsxs("div",{className:"input-container",children:[k.jsx("input",{className:"input-field",onChange:s,placeholder:"Name",name:"name",value:e.name}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("input",{className:"input-field",onChange:s,placeholder:"Message",name:"message",value:e.message}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("button",{className:"send-button",onClick:o,children:"Send Message"})]}),k.jsx("div",{className:"message-container",children:n.messages.map(a=>k.jsx("div",{className:"message",children:k.jsxs("div",{className:"message-content",children:[k.jsxs("h3",{className:"message-sender",children:[a.name," Address: ",t]}),k.jsx("p",{className:"message-text",children:a.message}),k.jsx("p",{className:"message-time",children:new Date(a.createdAt).toLocaleString()})]})},a.createdAt))})]})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var te=function(){return te=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},te.apply(this,arguments)};function Fg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Le(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qe(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function It(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var ot;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(ot||(ot={}));var ka;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(ka||(ka={}));var rm=ot.Start,Ug=ot.Stop,Ll=ot.Raise,Yd=ot.Send,p5=ot.Cancel,C3=ot.NullEvent,$g=ot.Assign;ot.After;ot.DoneState;var m5=ot.Log,T3=ot.Init,nm=ot.Invoke;ot.ErrorExecution;var Gy=ot.ErrorPlatform,P3=ot.ErrorCustom,g5=ot.Update,I3=ot.Choose,k3=ot.Pure,v5=".",qy={},im="xstate.guard",D3="",_f;function zg(t,e,r){r===void 0&&(r=v5);var n=qc(t,r),i=qc(e,r);return Ze(i)?Ze(n)?i===n:!1:Ze(n)?n in i:Object.keys(n).every(function(s){return s in i?zg(n[s],i[s]):!1})}function y5(t){try{return Ze(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function sm(t,e){try{return Ja(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function O3(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function qc(t,e){if(O3(t))return t.value;if(Ja(t))return od(t);if(typeof t!="string")return t;var r=sm(t,e);return od(r)}function od(t){if(t.length===1)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function Cc(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;i++){var s=n[i];r[s]=e(t[s],s,t,i)}return r}function Jy(t,e,r){var n,i,s={};try{for(var o=Le(Object.keys(t)),a=o.next();!a.done;a=o.next()){var c=a.value,l=t[c];r(l)&&(s[c]=e(l,c,t))}}catch(f){n={error:f}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}var N3=function(t){return function(e){var r,n,i=e;try{for(var s=Le(t),o=s.next();!o.done;o=s.next()){var a=o.value;i=i[a]}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}};function M3(t,e){return function(r){var n,i,s=r;try{for(var o=Le(t),a=o.next();!a.done;a=o.next()){var c=a.value;s=s[e][c]}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}}function hu(t){if(!t)return[[]];if(Ze(t))return[[t]];var e=Lt(Object.keys(t).map(function(r){var n=t[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:hu(t[r]).map(function(i){return[r].concat(i)})}));return e}function Lt(t){var e;return(e=[]).concat.apply(e,It([],qe(t),!1))}function w5(t){return Ja(t)?t:[t]}function On(t){return t===void 0?[]:w5(t)}function ad(t,e,r){var n,i;if(Ye(t))return t(e,r.data);var s={};try{for(var o=Le(Object.keys(t)),a=o.next();!a.done;a=o.next()){var c=a.value,l=t[c];Ye(l)?s[c]=l(e,r.data):s[c]=l}}catch(f){n={error:f}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function L3(t){return/^(done|error)\./.test(t)}function Ky(t){return!!(t instanceof Promise||t!==null&&(Ye(t)||typeof t=="object")&&Ye(t.then))}function j3(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function B3(t,e){var r,n,i=qe([[],[]],2),s=i[0],o=i[1];try{for(var a=Le(t),c=a.next();!c.done;c=a.next()){var l=c.value;e(l)?s.push(l):o.push(l)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return[s,o]}function _5(t,e){return Cc(t.states,function(r,n){if(r){var i=(Ze(e)?void 0:e[n])||(r?r.current:void 0);if(i)return{current:i,states:_5(r,i)}}})}function F3(t,e){return{current:e,states:_5(t,e)}}function Wy(t,e,r,n){var i=t&&r.reduce(function(s,o){var a,c,l=o.assignment,f={state:n,action:o,_event:e},u={};if(Ye(l))u=l(s,e.data,f);else try{for(var h=Le(Object.keys(l)),g=h.next();!g.done;g=h.next()){var p=g.value,y=l[p];u[p]=Ye(y)?y(s,e.data,f):y}}catch(b){a={error:b}}finally{try{g&&!g.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}return Object.assign({},s,u)},t);return i}var U3=function(){};function Ja(t){return Array.isArray(t)}function Ye(t){return typeof t=="function"}function Ze(t){return typeof t=="string"}function b5(t,e){if(t)return Ze(t)?{type:im,name:t,predicate:e?e[t]:void 0}:Ye(t)?{type:im,name:t.name,predicate:t}:t}function $3(t){try{return"subscribe"in t&&Ye(t.subscribe)}catch{return!1}}var ps=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();_f={},_f[ps]=function(){return this},_f[Symbol.observable]=function(){return this};function Da(t){return!!t&&"__xstatenode"in t}function z3(t){return!!t&&typeof t.send=="function"}function Qd(t,e){return Ze(t)||typeof t=="number"?te({type:t},e):t}function _r(t,e){if(!Ze(t)&&"$$type"in t&&t.$$type==="scxml")return t;var r=Qd(t);return te({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function Eo(t,e){var r=w5(e).map(function(n){return typeof n>"u"||typeof n=="string"||Da(n)?{target:n,event:t}:te(te({},n),{event:t})});return r}function V3(t){if(!(t===void 0||t===D3))return On(t)}function S5(t,e,r,n,i){var s=t.options.guards,o={state:i,cond:e,_event:n};if(e.type===im)return((s==null?void 0:s[e.name])||e.predicate)(r,n.data,o);var a=s==null?void 0:s[e.type];if(!a)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return a(r,n.data,o)}function E5(t){return typeof t=="string"?{type:t}:t}function pu(t,e,r){var n=function(){},i=typeof t=="object",s=i?t:null;return{next:((i?t.next:t)||n).bind(s),error:((i?t.error:e)||n).bind(s),complete:((i?t.complete:r)||n).bind(s)}}function bf(t,e){return"".concat(t,":invocation[").concat(e,"]")}function om(t){return(t.type===Ll||t.type===Yd&&t.to===ka.Internal)&&typeof t.delay!="number"}var ga=_r({type:T3});function am(t,e){return e&&e[t]||void 0}function _l(t,e){var r;if(Ze(t)||typeof t=="number"){var n=am(t,e);Ye(n)?r={type:t,exec:n}:n?r=n:r={type:t,exec:void 0}}else if(Ye(t))r={type:t.name||t.toString(),exec:t};else{var n=am(t.type,e);if(Ye(n))r=te(te({},t),{exec:n});else if(n){var i=n.type||t.type;r=te(te(te({},n),t),{type:i})}else r=t}return r}var ms=function(t,e){if(!t)return[];var r=Ja(t)?t:[t];return r.map(function(n){return _l(n,e)})};function Vg(t){var e=_l(t);return te(te({id:Ze(t)?t:e.id},e),{type:e.type})}function x5(t,e){return{type:Ll,event:typeof t=="function"?t:Qd(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function H3(t,e,r,n){var i={_event:r},s=_r(Ye(t.event)?t.event(e,r.data,i):t.event),o;if(Ze(t.delay)){var a=n&&n[t.delay];o=Ye(a)?a(e,r.data,i):a}else o=Ye(t.delay)?t.delay(e,r.data,i):t.delay;return te(te({},t),{type:Ll,_event:s,delay:o})}function G3(t,e){return{to:e?e.to:void 0,type:Yd,event:Ye(t)?t:Qd(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:Ye(t)?t.name:y5(t)}}function q3(t,e,r,n){var i={_event:r},s=_r(Ye(t.event)?t.event(e,r.data,i):t.event),o;if(Ze(t.delay)){var a=n&&n[t.delay];o=Ye(a)?a(e,r.data,i):a}else o=Ye(t.delay)?t.delay(e,r.data,i):t.delay;var c=Ye(t.to)?t.to(e,r.data,i):t.to;return te(te({},t),{to:c,_event:s,event:s.data,delay:o})}var J3=function(t,e,r){return te(te({},t),{value:Ze(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},K3=function(t){return{type:p5,sendId:t}};function W3(t){var e=Vg(t);return{type:ot.Start,activity:e,exec:void 0}}function Y3(t){var e=Ye(t)?t:Vg(t);return{type:ot.Stop,activity:e,exec:void 0}}function Q3(t,e,r){var n=Ye(t.activity)?t.activity(e,r.data):t.activity,i=typeof n=="string"?{id:n}:n,s={type:ot.Stop,activity:i};return s}var X3=function(t){return{type:$g,assignment:t}};function Z3(t,e){var r=e?"#".concat(e):"";return"".concat(ot.After,"(").concat(t,")").concat(r)}function Sf(t,e){var r="".concat(ot.DoneState,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function mu(t,e){var r="".concat(ot.DoneInvoke,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Tc(t,e){var r="".concat(ot.ErrorPlatform,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}var e4=function(t){var e,r,n=[];try{for(var i=Le(t),s=i.next();!s.done;s=i.next())for(var o=s.value,a=0;a<o.actions.length;){if(o.actions[a].type===$g){n.push(o.actions[a]),o.actions.splice(a,1);continue}a++}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n};function cd(t,e,r,n,i,s,o){o===void 0&&(o=!1);var a=o?[]:e4(i),c=a.length?Wy(r,n,a,e):r,l=o?[r]:void 0,f=[];function u(p,y){var b;switch(y.type){case Ll:{var S=H3(y,c,n,t.options.delays);return s&&typeof S.delay=="number"&&s(S,c,n),S}case Yd:var E=q3(y,c,n,t.options.delays);return s&&E.to!==ka.Internal&&(p==="entry"?f.push(E):s(E,c,n)),E;case m5:{var w=J3(y,c,n);return s==null||s(w,c,n),w}case I3:{var T=y,D=(b=T.conds.find(function(R){var C=b5(R.cond,t.options.guards);return!C||S5(t,C,c,n,s?void 0:e)}))===null||b===void 0?void 0:b.actions;if(!D)return[];var B=qe(cd(t,e,c,n,[{type:p,actions:ms(On(D),t.options.actions)}],s,o),2),j=B[0],N=B[1];return c=N,l==null||l.push(c),j}case k3:{var D=y.get(c,n.data);if(!D)return[];var F=qe(cd(t,e,c,n,[{type:p,actions:ms(On(D),t.options.actions)}],s,o),2),$=F[0],U=F[1];return c=U,l==null||l.push(c),$}case Ug:{var w=Q3(y,c,n);return s==null||s(w,r,n),w}case $g:{c=Wy(c,n,[y],s?void 0:e),l==null||l.push(c);break}default:var A=_l(y,t.options.actions),m=A.exec;if(s)s(A,c,n);else if(m&&l){var d=l.length-1,v=te(te({},A),{exec:function(R){for(var C=[],x=1;x<arguments.length;x++)C[x-1]=arguments[x];m.apply(void 0,It([l[d]],qe(C),!1))}});A=v}return A}}function h(p){var y,b,S=[];try{for(var E=Le(p.actions),w=E.next();!w.done;w=E.next()){var T=w.value,D=u(p.type,T);D&&(S=S.concat(D))}}catch(B){y={error:B}}finally{try{w&&!w.done&&(b=E.return)&&b.call(E)}finally{if(y)throw y.error}}return f.forEach(function(B){s(B,c,n)}),f.length=0,S}var g=Lt(i.map(h));return[g,c]}var Yy=[],Ho=function(t,e){Yy.push(t);var r=e(t);return Yy.pop(),r};function R5(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[ps]=function(){return this},e}function t4(t,e,r,n){var i,s=E5(t.src),o=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[s.type],a=t.data?ad(t.data,r,n):void 0,c=o?A5(o,t.id,a):R5(t.id);return c.meta=t,c}function A5(t,e,r){var n=R5(e);if(n.deferred=!0,Da(t)){var i=n.state=Ho(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return i}}return n}function r4(t){try{return typeof t.send=="function"}catch{return!1}}function n4(t){return r4(t)&&"id"in t}function i4(t){var e;return te((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[ps]=function(){return this},e),t)}var ld=function(t){return t.type==="atomic"||t.type==="final"};function C5(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function bl(t){return C5(t).filter(function(e){return e.type!=="history"})}function T5(t){var e=[t];return ld(t)?e:e.concat(Lt(bl(t).map(T5)))}function Pc(t,e){var r,n,i,s,o,a,c,l,f=new Set(t),u=cm(f),h=new Set(e);try{for(var g=Le(h),p=g.next();!p.done;p=g.next())for(var y=p.value,b=y.parent;b&&!h.has(b);)h.add(b),b=b.parent}catch(F){r={error:F}}finally{try{p&&!p.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}var S=cm(h);try{for(var E=Le(h),w=E.next();!w.done;w=E.next()){var y=w.value;if(y.type==="compound"&&(!S.get(y)||!S.get(y).length))u.get(y)?u.get(y).forEach(function($){return h.add($)}):y.initialStateNodes.forEach(function($){return h.add($)});else if(y.type==="parallel")try{for(var T=(o=void 0,Le(bl(y))),D=T.next();!D.done;D=T.next()){var B=D.value;h.has(B)||(h.add(B),u.get(B)?u.get(B).forEach(function($){return h.add($)}):B.initialStateNodes.forEach(function($){return h.add($)}))}}catch($){o={error:$}}finally{try{D&&!D.done&&(a=T.return)&&a.call(T)}finally{if(o)throw o.error}}}}catch(F){i={error:F}}finally{try{w&&!w.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}try{for(var j=Le(h),N=j.next();!N.done;N=j.next())for(var y=N.value,b=y.parent;b&&!h.has(b);)h.add(b),b=b.parent}catch(F){c={error:F}}finally{try{N&&!N.done&&(l=j.return)&&l.call(j)}finally{if(c)throw c.error}}return h}function P5(t,e){var r=e.get(t);if(!r)return{};if(t.type==="compound"){var n=r[0];if(n){if(ld(n))return n.key}else return{}}var i={};return r.forEach(function(s){i[s.key]=P5(s,e)}),i}function cm(t){var e,r,n=new Map;try{for(var i=Le(t),s=i.next();!s.done;s=i.next()){var o=s.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(a){e={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function s4(t,e){var r=Pc([t],e);return P5(t,cm(r))}function Ic(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set?t.has(e):!1}function o4(t){return It([],qe(new Set(Lt(It([],qe(t.map(function(e){return e.ownEvents})),!1)))),!1)}function gu(t,e){return e.type==="compound"?bl(e).some(function(r){return r.type==="final"&&Ic(t,r)}):e.type==="parallel"?bl(e).every(function(r){return gu(t,r)}):!1}function a4(t){return t===void 0&&(t=[]),t.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function Qy(t){return new Set(Lt(t.map(function(e){return e.tags})))}function I5(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Ze(t)||Ze(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(i){return I5(t[i],e[i])})}function c4(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function l4(t,e){var r=t.exec,n=te(te({},t),{exec:r!==void 0?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return n}var ri=function(){function t(e){var r=this,n;this.actions=[],this.activities=qy,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||qy,this.meta=a4(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return o4(r.configuration)}})}return t.from=function(e,r){if(e instanceof t)return e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var n=ga;return new t({value:e,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=ga;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),Ze(e))return[e];var i=Object.keys(e);return i.concat.apply(i,It([],qe(i.map(function(s){return n.toStrings(e[s],r).map(function(o){return s+r+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var n=Fg(e,["configuration","transitions","tags","machine"]);return te(te({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return zg(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r;U3(!!this.machine);var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),f4={deferEvents:!1},Xy=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=te(te({},f4),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},t}(),Ap=new Map,u4=0,hc={bookId:function(){return"x:".concat(u4++)},register:function(t,e){return Ap.set(t,e),t},get:function(t){return Ap.get(t)},free:function(t){Ap.delete(t)}};function Hg(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function d4(){var t=Hg();if(t&&"__xstate__"in t)return t.__xstate__}function h4(t){if(Hg()){var e=d4();e&&e.register(t)}}function p4(t,e){e===void 0&&(e={});var r=t.initialState,n=new Set,i=[],s=!1,o=function(){if(!s){for(s=!0;i.length>0;){var l=i.shift();r=t.transition(r,l,c),n.forEach(function(f){return f.next(r)})}s=!1}},a=i4({id:e.id,send:function(l){i.push(l),o()},getSnapshot:function(){return r},subscribe:function(l,f,u){var h=pu(l,f,u);return n.add(h),h.next(r),{unsubscribe:function(){n.delete(h)}}}}),c={parent:e.parent,self:a,id:e.id||"anonymous",observers:n};return r=t.start?t.start(c):r,a}var m4={sync:!1,autoForward:!1},hr;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(hr||(hr={}));var g4=function(){function t(e,r){r===void 0&&(r=t.defaultOptions);var n=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=hr.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(f,u){if(Ja(f))return n.batch(f),n.state;var h=_r(Qd(f,u));if(n.status===hr.Stopped)return n.state;if(n.status!==hr.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(h.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(h.data)));return n.scheduler.schedule(function(){n.forward(h);var g=n._nextState(h);n.update(g,h)}),n._state},this.sendTo=function(f,u,h){var g=n.parent&&(u===ka.Parent||n.parent.id===u),p=g?n.parent:Ze(u)?u===ka.Internal?n:n.children.get(u)||hc.get(u):z3(u)?u:void 0;if(!p){if(!g)throw new Error("Unable to send event to child '".concat(u,"' from service '").concat(n.id,"'."));return}if("machine"in p){if(n.status!==hr.Stopped||n.parent!==p||n.state.done){var y=te(te({},f),{name:f.name===P3?"".concat(Tc(n.id)):f.name,origin:n.sessionId});!h&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,y]):p.send(y)}}else!h&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,f.data]):p.send(f.data)},this._exec=function(f,u,h,g){g===void 0&&(g=n.machine.options.actions);var p=f.exec||am(f.type,g),y=Ye(p)?p:p?p.exec:f.exec;if(y)try{return y(u,h.data,n.machine.config.predictableActionArguments?{action:f,_event:h}:{action:f,state:n.state,_event:h})}catch(d){throw n.parent&&n.parent.send({type:"xstate.error",data:d}),d}switch(f.type){case Ll:{var b=f;n.defer(b);break}case Yd:var S=f;if(typeof S.delay=="number"){n.defer(S);return}else S.to?n.sendTo(S._event,S.to,h===ga):n.send(S._event);break;case p5:n.cancel(f.sendId);break;case rm:{if(n.status!==hr.Running)return;var E=f.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[E.id||E.type])break;if(E.type===ot.Invoke){var w=E5(E.src),T=n.machine.options.services?n.machine.options.services[w.type]:void 0,D=E.id,B=E.data,j="autoForward"in E?E.autoForward:!!E.forward;if(!T)return;var N=B?ad(B,u,h):void 0;if(typeof T=="string")return;var F=Ye(T)?T(u,h.data,{data:N,src:w,meta:E.meta}):T;if(!F)return;var $=void 0;Da(F)&&(F=N?F.withContext(N):F,$={autoForward:j}),n.spawn(F,D,$)}else n.spawnActivity(E);break}case Ug:{n.stopChild(f.activity.id);break}case m5:var U=f,A=U.label,m=U.value;A?n.logger(A,m):n.logger(m);break}};var i=te(te({},t.defaultOptions),r),s=i.clock,o=i.logger,a=i.parent,c=i.id,l=c!==void 0?c:e.id;this.id=l,this.logger=o,this.clock=s,this.parent=a,this.options=i,this.scheduler=new Xy({deferEvents:this.options.deferEvents}),this.sessionId=hc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Ho(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,r){var n,i;try{for(var s=Le(e.actions),o=s.next();!o.done;o=s.next()){var a=o.value;this.exec(a,e,r)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.update=function(e,r){var n,i,s,o,a,c,l,f,u=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||r===ga)&&this.options.execute)this.execute(this.state);else for(var h=void 0;h=this._outgoingQueue.shift();)h[0].send(h[1]);if(this.children.forEach(function(F){u.state.children[F.id]=F}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var g=Le(this.eventListeners),p=g.next();!p.done;p=g.next()){var y=p.value;y(e.event)}}catch(F){n={error:F}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}try{for(var b=Le(this.listeners),S=b.next();!S.done;S=b.next()){var y=S.value;y(e,e.event)}}catch(F){s={error:F}}finally{try{S&&!S.done&&(o=b.return)&&o.call(b)}finally{if(s)throw s.error}}try{for(var E=Le(this.contextListeners),w=E.next();!w.done;w=E.next()){var T=w.value;T(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(F){a={error:F}}finally{try{w&&!w.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}if(this.state.done){var D=e.configuration.find(function(F){return F.type==="final"&&F.parent===u.machine}),B=D&&D.doneData?ad(D.doneData,e.context,r):void 0;this._doneEvent=mu(this.id,B);try{for(var j=Le(this.doneListeners),N=j.next();!N.done;N=j.next()){var y=N.value;y(this._doneEvent)}}catch(F){l={error:F}}finally{try{N&&!N.done&&(f=j.return)&&f.call(j)}finally{if(l)throw l.error}}this._stop(),this._stopChildren(),hc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===hr.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,r,n){var i=this,s=pu(e,r,n);this.listeners.add(s.next),this.status!==hr.NotStarted&&s.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),s.complete()};return this.status===hr.Stopped?s.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(s.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===hr.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var r=this;if(this.status===hr.Running)return this;this.machine._init(),hc.register(this.sessionId,this),this.initialized=!0,this.status=hr.Running;var n=e===void 0?this.initialState:Ho(this,function(){return c4(e)?r.machine.resolveState(e):r.machine.resolveState(ri.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,ga)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){Ye(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,r,n,i,s,o,a,c,l,f;try{for(var u=Le(this.listeners),h=u.next();!h.done;h=u.next()){var g=h.value;this.listeners.delete(g)}}catch(j){e={error:j}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}try{for(var p=Le(this.stopListeners),y=p.next();!y.done;y=p.next()){var g=y.value;g(),this.stopListeners.delete(g)}}catch(j){n={error:j}}finally{try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}try{for(var b=Le(this.contextListeners),S=b.next();!S.done;S=b.next()){var g=S.value;this.contextListeners.delete(g)}}catch(j){s={error:j}}finally{try{S&&!S.done&&(o=b.return)&&o.call(b)}finally{if(s)throw s.error}}try{for(var E=Le(this.doneListeners),w=E.next();!w.done;w=E.next()){var g=w.value;this.doneListeners.delete(g)}}catch(j){a={error:j}}finally{try{w&&!w.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}if(!this.initialized)return this;this.initialized=!1,this.status=hr.Stopped,this._initialState=void 0;try{for(var T=Le(Object.keys(this.delayedEventsMap)),D=T.next();!D.done;D=T.next()){var B=D.value;this.clock.clearTimeout(this.delayedEventsMap[B])}}catch(j){l={error:j}}finally{try{D&&!D.done&&(f=T.return)&&f.call(T)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new Xy({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n=_r({type:"xstate.stop"}),i=Ho(e,function(){var s=Lt(It([],qe(e.state.configuration),!1).sort(function(f,u){return u.order-f.order}).map(function(f){return ms(f.onExit,e.machine.options.actions)})),o=qe(cd(e.machine,e.state,e.state.context,n,[{type:"exit",actions:s}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),a=o[0],c=o[1],l=new ri({value:e.state.value,context:c,_event:n,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:a.filter(function(f){return!om(f)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return l.changed=!0,l});e.update(i,n),e._stopChildren(),hc.free(e.sessionId)}),this},t.prototype.batch=function(e){var r=this;if(!(this.status===hr.NotStarted&&this.options.deferEvents)){if(this.status!==hr.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,s,o=r.state,a=!1,c=[],l=function(g){var p=_r(g);r.forward(p),o=Ho(r,function(){return r.machine.transition(o,p,void 0,n||void 0)}),c.push.apply(c,It([],qe(r.machine.config.predictableActionArguments?o.actions:o.actions.map(function(y){return l4(y,o)})),!1)),a=a||!!o.changed};try{for(var f=Le(e),u=f.next();!u.done;u=f.next()){var h=u.value;l(h)}}catch(g){i={error:g}}finally{try{u&&!u.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}o.changed=a,o.actions=c,r.update(o,_r(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,r){var n=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var i=_r(e);if(i.name.indexOf(Gy)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(Gy)===0}))throw i.data.data;var s=Ho(this,function(){return n.machine.transition(n.state,i,void 0,r||void 0)});return s},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var r,n;try{for(var i=Le(this.forwardTo),s=i.next();!s.done;s=i.next()){var o=s.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(e)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.defer=function(e){var r=this,n=this.clock.setTimeout(function(){"to"in e&&e.to?r.sendTo(e._event,e.to,!0):r.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=n)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,r,n){n===void 0&&(n=this.machine.options.actions),this._exec(e,r.context,r._event,n)},t.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),(r=this.state)===null||r===void 0||delete r.children[e]},t.prototype.stopChild=function(e){var r=this.children.get(e);r&&(this.removeChild(e),Ye(r.stop)&&r.stop())},t.prototype.spawn=function(e,r,n){if(this.status!==hr.Running)return A5(e,r);if(Ky(e))return this.spawnPromise(Promise.resolve(e),r);if(Ye(e))return this.spawnCallback(e,r);if(n4(e))return this.spawnActor(e,r);if($3(e))return this.spawnObservable(e,r);if(Da(e))return this.spawnMachine(e,te(te({},n),{id:r}));if(j3(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;r===void 0&&(r={});var i=new t(e,te(te({},this.options),{parent:this,id:r.id||e.id})),s=te(te({},m4),r);s.sync&&i.onTransition(function(a){n.send(g5,{state:a,id:i.id})});var o=i;return this.children.set(i.id,o),s.autoForward&&this.forwardTo.add(i.id),i.onDone(function(a){n.removeChild(i.id),n.send(_r(a,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,r){var n=p4(e,{id:r,parent:this});return this.children.set(r,n),n},t.prototype.spawnPromise=function(e,r){var n,i=this,s=!1,o;e.then(function(c){s||(o=c,i.removeChild(r),i.send(_r(mu(r,c),{origin:r})))},function(c){if(!s){i.removeChild(r);var l=Tc(r,c);try{i.send(_r(l,{origin:r}))}catch{i.devTools&&i.devTools.send(l,i.state),i.machine.strict&&i.stop()}}});var a=(n={id:r,send:function(){},subscribe:function(c,l,f){var u=pu(c,l,f),h=!1;return e.then(function(g){h||(u.next(g),!h&&u.complete())},function(g){h||u.error(g)}),{unsubscribe:function(){return h=!0}}},stop:function(){s=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[ps]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnCallback=function(e,r){var n,i=this,s=!1,o=new Set,a=new Set,c,l=function(h){c=h,a.forEach(function(g){return g(h)}),!s&&i.send(_r(h,{origin:r}))},f;try{f=e(l,function(h){o.add(h)})}catch(h){this.send(Tc(r,h))}if(Ky(f))return this.spawnPromise(f,r);var u=(n={id:r,send:function(h){return o.forEach(function(g){return g(h)})},subscribe:function(h){var g=pu(h);return a.add(g.next),{unsubscribe:function(){a.delete(g.next)}}},stop:function(){s=!0,Ye(f)&&f()},toJSON:function(){return{id:r}},getSnapshot:function(){return c}},n[ps]=function(){return this},n);return this.children.set(r,u),u},t.prototype.spawnObservable=function(e,r){var n,i=this,s,o=e.subscribe(function(c){s=c,i.send(_r(c,{origin:r}))},function(c){i.removeChild(r),i.send(_r(Tc(r,c),{origin:r}))},function(){i.removeChild(r),i.send(_r(mu(r),{origin:r}))}),a=(n={id:r,send:function(){},subscribe:function(c,l,f){return e.subscribe(c,l,f)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:r}}},n[ps]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},t.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(r){var n=r(this.state.context,e);this.spawnEffect(e.id,n)}},t.prototype.spawnEffect=function(e,r){var n;this.children.set(e,(n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},n[ps]=function(){return this},n))},t.prototype.attachDev=function(){var e=Hg();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(te(te({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:te({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}h4(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[ps]=function(){return this},t.prototype.getSnapshot=function(){return this.status===hr.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Gg,t}();function Gg(t,e){var r=new g4(t,e);return r}function v4(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Ef(t){return te(te({type:nm},t),{toJSON:function(){t.onDone,t.onError;var e=Fg(t,["onDone","onError"]);return te(te({},e),{type:nm,src:v4(t.src)})}})}var xf="",lm="#",Cp="*",xo={},Ro=function(t){return t[0]===lm},y4=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},w4=function(){function t(e,r,n,i){n===void 0&&(n="context"in e?e.context:void 0);var s=this,o;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(y4(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:v5),this.id=this.config.id||It([this.machine.key],qe(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Cc(this.config.states,function(l,f){var u,h=new t(l,{},void 0,{parent:s,key:f});return Object.assign(s.idMap,te((u={},u[h.id]=h,u),h.idMap)),h}):xo;var a=0;function c(l){var f,u;l.order=a++;try{for(var h=Le(C5(l)),g=h.next();!g.done;g=h.next()){var p=g.value;c(p)}}catch(y){f={error:y}}finally{try{g&&!g.done&&(u=h.return)&&u.call(h)}finally{if(f)throw f.error}}}c(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(l){var f=l.event;return f===xf}):xf in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=On(this.config.entry||this.config.onEntry).map(function(l){return _l(l)}),this.onExit=On(this.config.exit||this.config.onExit).map(function(l){return _l(l)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=On(this.config.invoke).map(function(l,f){var u,h;if(Da(l)){var g=bf(s.id,f);return s.machine.options.services=te((u={},u[g]=l,u),s.machine.options.services),Ef({src:g,id:g})}else if(Ze(l.src)){var g=l.id||bf(s.id,f);return Ef(te(te({},l),{id:g,src:l.src}))}else if(Da(l.src)||Ye(l.src)){var g=l.id||bf(s.id,f);return s.machine.options.services=te((h={},h[g]=l.src,h),s.machine.options.services),Ef(te(te({id:g},l),{src:g}))}else{var p=l.src;return Ef(te(te({id:bf(s.id,f)},l),{src:p}))}}),this.activities=On(this.config.activities).concat(this.invoke).map(function(l){return Vg(l)}),this.transition=this.transition.bind(this),this.tags=On(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||T5(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,i=n.actions,s=n.activities,o=n.guards,a=n.services,c=n.delays;return new t(this.config,{actions:te(te({},i),e.actions),activities:te(te({},s),e.activities),guards:te(te({},o),e.guards),services:te(te({},a),e.services),delays:te(te({},c),e.delays)},r??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return Ye(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Cc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===xf,n=this.transitions.filter(function(i){var s=i.eventType===e;return r?s:s||i.eventType===Cp});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(s,o){var a=Ye(s)?"".concat(e.id,":delay[").concat(o,"]"):s,c=Z3(a,e.id);return e.onEntry.push(G3(c,{delay:s})),e.onExit.push(K3(c)),c},i=Ja(r)?r.map(function(s,o){var a=n(s.delay,o);return te(te({},s),{event:a})}):Lt(Object.keys(r).map(function(s,o){var a=r[s],c=Ze(a)?{target:a}:a,l=isNaN(+s)?s:+s,f=n(l,o);return On(c).map(function(u){return te(te({},u),{event:f,delay:l})})}));return i.map(function(s){var o=s.delay;return te(te({},e.formatTransition(s)),{delay:o})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var i=e instanceof ri?e.value:qc(e,this.delimiter);if(Ze(i)){var s=this.getStateNode(i).initial;return s!==void 0?this.getStateNodes((r={},r[i]=s,r)):[this,this.states[i]]}var o=Object.keys(i),a=[this];return a.push.apply(a,It([],qe(Lt(o.map(function(c){return n.getStateNode(c).getStateNodes(i[c])}))),!1)),a},t.prototype.handles=function(e){var r=y5(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof ri?e:ri.create(e),n=Array.from(Pc([],this.getStateNodes(r.value)));return new ri(te(te({},r),{value:this.resolve(r.value),configuration:n,done:gu(n,this),tags:Qy(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var i=this.getStateNode(e),s=i.next(r,n);return!s||!s.transitions.length?this.next(r,n):s},t.prototype.transitionCompoundNode=function(e,r,n){var i=Object.keys(e),s=this.getStateNode(i[0]),o=s._transition(e[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},t.prototype.transitionParallelNode=function(e,r,n){var i,s,o={};try{for(var a=Le(Object.keys(e)),c=a.next();!c.done;c=a.next()){var l=c.value,f=e[l];if(f){var u=this.getStateNode(l),h=u._transition(f,r,n);h&&(o[l]=h)}}}catch(S){i={error:S}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}var g=Object.keys(o).map(function(S){return o[S]}),p=Lt(g.map(function(S){return S.transitions})),y=g.some(function(S){return S.transitions.length>0});if(!y)return this.next(r,n);var b=Lt(Object.keys(o).map(function(S){return o[S].configuration}));return{transitions:p,exitSet:Lt(g.map(function(S){return S.exitSet})),configuration:b,source:r,actions:Lt(Object.keys(o).map(function(S){return o[S].actions}))}},t.prototype._transition=function(e,r,n){return Ze(e)?this.transitionLeafNode(e,r,n):Object.keys(e).length===1?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,_r(r))},t.prototype.next=function(e,r){var n,i,s=this,o=r.name,a=[],c=[],l;try{for(var f=Le(this.getCandidates(o)),u=f.next();!u.done;u=f.next()){var h=u.value,g=h.cond,p=h.in,y=e.context,b=p?Ze(p)&&Ro(p)?e.matches(qc(this.getStateNodeById(p).path,this.delimiter)):zg(qc(p,this.delimiter),N3(this.path.slice(0,-2))(e.value)):!0,S=!1;try{S=!g||S5(this.machine,g,y,r,e)}catch(T){throw new Error("Unable to evaluate guard '".concat(g.name||g.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(T.message))}if(S&&b){h.target!==void 0&&(c=h.target),a.push.apply(a,It([],qe(h.actions),!1)),l=h;break}}}catch(T){n={error:T}}finally{try{u&&!u.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}if(l){if(!c.length)return{transitions:[l],exitSet:[],configuration:e.value?[this]:[],source:e,actions:a};var E=Lt(c.map(function(T){return s.getRelativeStateNodes(T,e.historyValue)})),w=!!l.internal;return{transitions:[l],exitSet:w?[]:Lt(c.map(function(T){return s.getPotentiallyReenteringNodes(T)})),configuration:E,source:e,actions:a}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var r=[],n=this,i=e;n&&n!==i;)r.push(n),n=n.parent;return n!==i?[]:(r.push(i),r)},t.prototype.getActions=function(e,r,n,i,s,o,a){var c,l,f,u,h=this,g=o?Pc([],this.getStateNodes(o.value)):[],p=new Set;try{for(var y=Le(Array.from(e).sort(function(U,A){return U.order-A.order})),b=y.next();!b.done;b=y.next()){var S=b.value;(!Ic(g,S)||Ic(n.exitSet,S)||S.parent&&p.has(S.parent))&&p.add(S)}}catch(U){c={error:U}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}try{for(var E=Le(g),w=E.next();!w.done;w=E.next()){var S=w.value;(!Ic(e,S)||Ic(n.exitSet,S.parent))&&n.exitSet.push(S)}}catch(U){f={error:U}}finally{try{w&&!w.done&&(u=E.return)&&u.call(E)}finally{if(f)throw f.error}}n.exitSet.sort(function(U,A){return A.order-U.order});var T=Array.from(p).sort(function(U,A){return U.order-A.order}),D=new Set(n.exitSet),B=Lt(T.map(function(U){var A=[];if(U.type!=="final")return A;var m=U.parent;if(!m.parent)return A;A.push(Sf(U.id,U.doneData),Sf(m.id,U.doneData?ad(U.doneData,i,s):void 0));var d=m.parent;return d.type==="parallel"&&bl(d).every(function(v){return gu(n.configuration,v)})&&A.push(Sf(d.id)),A})),j=T.map(function(U){var A=U.onEntry,m=U.activities.map(function(d){return W3(d)});return{type:"entry",actions:ms(a?It(It([],qe(A),!1),qe(m),!1):It(It([],qe(m),!1),qe(A),!1),h.machine.options.actions)}}).concat({type:"state_done",actions:B.map(function(U){return x5(U)})}),N=Array.from(D).map(function(U){return{type:"exit",actions:ms(It(It([],qe(U.onExit),!1),qe(U.activities.map(function(A){return Y3(A)})),!1),h.machine.options.actions)}}),F=N.concat({type:"transition",actions:ms(n.actions,this.machine.options.actions)}).concat(j);if(r){var $=ms(Lt(It([],qe(e),!1).sort(function(U,A){return A.order-U.order}).map(function(U){return U.onExit})),this.machine.options.actions).filter(function(U){return!om(U)});return F.concat({type:"stop",actions:$})}return F},t.prototype.transition=function(e,r,n,i){e===void 0&&(e=this.initialState);var s=_r(r),o;if(e instanceof ri)o=n===void 0?e:this.resolveState(ri.from(e,n));else{var a=Ze(e)?this.resolve(od(this.getResolvedPath(e))):this.resolve(e),c=n??this.machine.context;o=this.resolveState(ri.from(a,c))}if(this.strict&&!this.events.includes(s.name)&&!L3(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var l=this._transition(o.value,o,s)||{transitions:[],configuration:[],exitSet:[],source:o,actions:[]},f=Pc([],this.getStateNodes(o.value)),u=l.configuration.length?Pc(f,l.configuration):f;return l.configuration=It([],qe(u),!1),this.resolveTransition(l,o,o.context,i,s)},t.prototype.resolveRaisedTransition=function(e,r,n,i){var s,o=e.actions;return e=this.transition(e,r,void 0,i),e._event=n,e.event=n.data,(s=e.actions).unshift.apply(s,It([],qe(o),!1)),e},t.prototype.resolveTransition=function(e,r,n,i,s){var o,a,c,l,f=this;s===void 0&&(s=ga);var u=e.configuration,h=!r||e.transitions.length>0,g=h?e.configuration:r?r.configuration:[],p=gu(g,this),y=h?s4(this.machine,u):void 0,b=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,S=this.getActions(new Set(g),p,e,n,s,r,i),E=r?te({},r.activities):{};try{for(var w=Le(S),T=w.next();!T.done;T=w.next()){var D=T.value;try{for(var B=(c=void 0,Le(D.actions)),j=B.next();!j.done;j=B.next()){var N=j.value;N.type===rm?E[N.activity.id||N.activity.type]=N:N.type===Ug&&(E[N.activity.id||N.activity.type]=!1)}}catch(W){c={error:W}}finally{try{j&&!j.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}}}catch(W){o={error:W}}finally{try{T&&!T.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}var F=qe(cd(this,r,n,s,S,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),$=F[0],U=F[1],A=qe(B3($,om),2),m=A[0],d=A[1],v=$.filter(function(W){var I;return W.type===rm&&((I=W.activity)===null||I===void 0?void 0:I.type)===nm}),R=v.reduce(function(W,I){return W[I.activity.id]=t4(I.activity,f.machine,U,s),W},r?te({},r.children):{}),C=new ri({value:y||r.value,context:U,_event:s,_sessionid:r?r._sessionid:null,historyValue:y?b?F3(b,y):void 0:r?r.historyValue:void 0,history:!y||e.source?r:void 0,actions:y?d:[],activities:y?E:r?r.activities:{},events:[],configuration:g,transitions:e.transitions,children:R,done:p,tags:Qy(g),machine:this}),x=n!==U;C.changed=s.name===g5||x;var P=C.history;P&&delete P.history;var M=!p&&(this._transient||u.some(function(W){return W._transient}));if(!h&&(!M||s.name===xf))return C;var O=C;if(!p)for(M&&(O=this.resolveRaisedTransition(O,{type:C3},s,i));m.length;){var _=m.shift();O=this.resolveRaisedTransition(O,_._event,s,i)}var L=O.changed||(P?!!O.actions.length||x||typeof P.value!=typeof O.value||!I5(O.value,P.value):void 0);return O.changed=L,O.history=P,O},t.prototype.getStateNode=function(e){if(Ro(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=Ro(e)?e.slice(lm.length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Ro(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=sm(e,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||xo;switch(this.type){case"parallel":return Cc(this.initialStateValue,function(s,o){return s?n.getStateNode(o).resolve(e[o]||s):xo});case"compound":if(Ze(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(r={},r[e]=i.initialStateValue,r):e}return Object.keys(e).length?Cc(e,function(s,o){return s?n.getStateNode(o).resolve(s):xo}):this.initialStateValue||{};default:return e||xo}},t.prototype.getResolvedPath=function(e){if(Ro(e)){var r=this.machine.idMap[e.slice(lm.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return sm(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=Jy(this.states,function(n){return n.initialStateValue||xo},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=ld(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;Ze(r.target)?e=Ro(r.target)?od(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(ld(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var r=hu(this.initialStateValue);return Lt(r.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=qe(e),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var s=this.getStateNode(n);if(s.type==="history")return s.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Jy(this.states,function(r,n){if(!e)return r.historyValue();var i=Ze(e)?void 0:e[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?Lt(hu(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var s=M3(n.path,"states")(e).current;return Ze(s)?[n.getStateNode(s)]:Lt(hu(s).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=Lt(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,i;if(this.__cache.events)return this.__cache.events;var s=this.states,o=new Set(this.ownEvents);if(s)try{for(var a=Le(Object.keys(s)),c=a.next();!c.done;c=a.next()){var l=c.value,f=s[l];if(f.states)try{for(var u=(n=void 0,Le(f.events)),h=u.next();!h.done;h=u.next()){var g=h.value;o.add("".concat(g))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(n){if(!Ze(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var s=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(s);return o}catch(a){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(a.message))}else return r.getStateNodeByPath(s)})},t.prototype.formatTransition=function(e){var r=this,n=V3(e.target),i="internal"in e?e.internal:n?n.some(function(c){return Ze(c)&&c[0]===r.delimiter}):!0,s=this.machine.options.guards,o=this.resolveTarget(n),a=te(te({},e),{actions:ms(On(e.actions)),cond:b5(e.cond,s),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return te(te({},a),{target:a.target?a.target.map(function(c){return"#".concat(c.id)}):void 0,source:"#".concat(r.id)})}});return a},t.prototype.formatTransitions=function(){var e,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var s=this.config.on,o=Cp,a=s[o],c=a===void 0?[]:a,l=Fg(s,[typeof o=="symbol"?o:o+""]);i=Lt(Object.keys(l).map(function(E){var w=Eo(E,l[E]);return w}).concat(Eo(Cp,c)))}var f=this.config.always?Eo("",this.config.always):[],u=this.config.onDone?Eo(String(Sf(this.id)),this.config.onDone):[],h=Lt(this.invoke.map(function(E){var w=[];return E.onDone&&w.push.apply(w,It([],qe(Eo(String(mu(E.id)),E.onDone)),!1)),E.onError&&w.push.apply(w,It([],qe(Eo(String(Tc(E.id)),E.onError)),!1)),w})),g=this.after,p=Lt(It(It(It(It([],qe(u),!1),qe(h),!1),qe(i),!1),qe(f),!1).map(function(E){return On(E).map(function(w){return n.formatTransition(w)})}));try{for(var y=Le(g),b=y.next();!b.done;b=y.next()){var S=b.value;p.push(S)}}catch(E){e={error:E}}finally{try{b&&!b.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}return p},t}();function _4(t,e){return new w4(t,e)}var $t=X3,Zy=x5,k5={},fm={exports:{}},Tp,ew;function b4(){if(ew)return Tp;ew=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;Tp=function(f,u){u=u||{};var h=typeof f;if(h==="string"&&f.length>0)return o(f);if(h==="number"&&isFinite(f))return u.long?c(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function o(f){if(f=String(f),!(f.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(u){var h=parseFloat(u[1]),g=(u[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(f){var u=Math.abs(f);return u>=n?Math.round(f/n)+"d":u>=r?Math.round(f/r)+"h":u>=e?Math.round(f/e)+"m":u>=t?Math.round(f/t)+"s":f+"ms"}function c(f){var u=Math.abs(f);return u>=n?l(f,u,n,"day"):u>=r?l(f,u,r,"hour"):u>=e?l(f,u,e,"minute"):u>=t?l(f,u,t,"second"):f+" ms"}function l(f,u,h,g){var p=u>=h*1.5;return Math.round(f/h)+" "+g+(p?"s":"")}return Tp}function S4(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=b4(),r.destroy=l,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let u=0;for(let h=0;h<f.length;h++)u=(u<<5)-u+f.charCodeAt(h),u|=0;return r.colors[Math.abs(u)%r.colors.length]}r.selectColor=e;function r(f){let u,h=null,g,p;function y(...b){if(!y.enabled)return;const S=y,E=Number(new Date),w=E-(u||E);S.diff=w,S.prev=u,S.curr=E,u=E,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let T=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(B,j)=>{if(B==="%%")return"%";T++;const N=r.formatters[j];if(typeof N=="function"){const F=b[T];B=N.call(S,F),b.splice(T,1),T--}return B}),r.formatArgs.call(S,b),(S.log||r.log).apply(S,b)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,p=r.enabled(f)),p),set:b=>{h=b}}),typeof r.init=="function"&&r.init(y),y}function n(f,u){const h=r(this.namespace+(typeof u>"u"?":":u)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let u;const h=(typeof f=="string"?f:"").split(/[\s,]+/),g=h.length;for(u=0;u<g;u++)h[u]&&(f=h[u].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){const f=[...r.names.map(a),...r.skips.map(a).map(u=>"-"+u)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let u,h;for(u=0,h=r.skips.length;u<h;u++)if(r.skips[u].test(f))return!1;for(u=0,h=r.names.length;u<h;u++)if(r.names[u].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var E4=S4;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let f=0,u=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(f++,h==="%c"&&(u=f))}),c.splice(u,0,l)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=E4(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(fm,fm.exports);var Xd=fm.exports,po={},um={exports:{}};(function(t,e){(function(r,n){var i="1.0.35",s="",o="?",a="function",c="undefined",l="object",f="string",u="major",h="model",g="name",p="type",y="vendor",b="version",S="architecture",E="console",w="mobile",T="tablet",D="smarttv",B="wearable",j="embedded",N=350,F="Amazon",$="Apple",U="ASUS",A="BlackBerry",m="Browser",d="Chrome",v="Edge",R="Firefox",C="Google",x="Huawei",P="LG",M="Microsoft",O="Motorola",_="Opera",L="Samsung",W="Sharp",I="Sony",z="Xiaomi",q="Zebra",J="Facebook",Q="Chromium OS",ce="Mac OS",re=function(_e,ue){var se={};for(var Be in _e)ue[Be]&&ue[Be].length%2===0?se[Be]=ue[Be].concat(_e[Be]):se[Be]=_e[Be];return se},ee=function(_e){for(var ue={},se=0;se<_e.length;se++)ue[_e[se].toUpperCase()]=_e[se];return ue},et=function(_e,ue){return typeof _e===f?ne(ue).indexOf(ne(_e))!==-1:!1},ne=function(_e){return _e.toLowerCase()},ye=function(_e){return typeof _e===f?_e.replace(/[^\d\.]/g,s).split(".")[0]:n},Rn=function(_e,ue){if(typeof _e===f)return _e=_e.replace(/^\s\s*/,s),typeof ue===c?_e:_e.substring(0,N)},We=function(_e,ue){for(var se=0,Be,Fe,Te,Re,ie,Pe;se<ue.length&&!ie;){var An=ue[se],st=ue[se+1];for(Be=Fe=0;Be<An.length&&!ie&&An[Be];)if(ie=An[Be++].exec(_e),ie)for(Te=0;Te<st.length;Te++)Pe=ie[++Fe],Re=st[Te],typeof Re===l&&Re.length>0?Re.length===2?typeof Re[1]==a?this[Re[0]]=Re[1].call(this,Pe):this[Re[0]]=Re[1]:Re.length===3?typeof Re[1]===a&&!(Re[1].exec&&Re[1].test)?this[Re[0]]=Pe?Re[1].call(this,Pe,Re[2]):n:this[Re[0]]=Pe?Pe.replace(Re[1],Re[2]):n:Re.length===4&&(this[Re[0]]=Pe?Re[3].call(this,Pe.replace(Re[1],Re[2])):n):this[Re]=Pe||n;se+=2}},tt=function(_e,ue){for(var se in ue)if(typeof ue[se]===l&&ue[se].length>0){for(var Be=0;Be<ue[se].length;Be++)if(et(ue[se][Be],_e))return se===o?n:se}else if(et(ue[se],_e))return se===o?n:se;return _e},Ri={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},nt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},it={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,b],[/opios[\/ ]+([\w\.]+)/i],[b,[g,_+" Mini"]],[/\bopr\/([\w\.]+)/i],[b,[g,_]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,b],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[g,"UC"+m]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[b,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[b,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[b,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+m],b],[/\bfocus\/([\w\.]+)/i],[b,[g,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[g,_+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[g,_+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[g,"MIUI "+m]],[/fxios\/([-\w\.]+)/i],[b,[g,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+m]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+m],b],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,b],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,J],b],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[b,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[g,d+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,d+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[g,"Android "+m]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[b,tt,Ri]],[/(webkit|khtml)\/([\w\.]+)/i],[g,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[g,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[g,b],[/(cobalt)\/([\w\.]+)/i],[g,[b,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,ne]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,s,ne]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,ne]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[y,L],[p,T]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[y,L],[p,w]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[y,$],[p,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[y,$],[p,T]],[/(macintosh);/i],[h,[y,$]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[y,W],[p,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[y,x],[p,T]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[y,x],[p,w]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[y,z],[p,w]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[y,z],[p,T]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[y,"OPPO"],[p,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[y,"Vivo"],[p,w]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[y,"Realme"],[p,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[y,O],[p,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[y,O],[p,T]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[y,P],[p,T]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[y,P],[p,w]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[y,"Lenovo"],[p,T]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[y,"Nokia"],[p,w]],[/(pixel c)\b/i],[h,[y,C],[p,T]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[y,C],[p,w]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[y,I],[p,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[y,I],[p,T]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[y,"OnePlus"],[p,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[y,F],[p,T]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[y,F],[p,w]],[/(playbook);[-\w\),; ]+(rim)/i],[h,y,[p,T]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[y,A],[p,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[y,U],[p,T]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[y,U],[p,w]],[/(nexus 9)/i],[h,[y,"HTC"],[p,T]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[h,/_/g," "],[p,w]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[y,"Acer"],[p,T]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[y,"Meizu"],[p,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,h,[p,w]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,h,[p,T]],[/(surface duo)/i],[h,[y,M],[p,T]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[y,"Fairphone"],[p,w]],[/(u304aa)/i],[h,[y,"AT&T"],[p,w]],[/\bsie-(\w*)/i],[h,[y,"Siemens"],[p,w]],[/\b(rct\w+) b/i],[h,[y,"RCA"],[p,T]],[/\b(venue[\d ]{2,7}) b/i],[h,[y,"Dell"],[p,T]],[/\b(q(?:mv|ta)\w+) b/i],[h,[y,"Verizon"],[p,T]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[y,"Barnes & Noble"],[p,T]],[/\b(tm\d{3}\w+) b/i],[h,[y,"NuVision"],[p,T]],[/\b(k88) b/i],[h,[y,"ZTE"],[p,T]],[/\b(nx\d{3}j) b/i],[h,[y,"ZTE"],[p,w]],[/\b(gen\d{3}) b.+49h/i],[h,[y,"Swiss"],[p,w]],[/\b(zur\d{3}) b/i],[h,[y,"Swiss"],[p,T]],[/\b((zeki)?tb.*\b) b/i],[h,[y,"Zeki"],[p,T]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],h,[p,T]],[/\b(ns-?\w{0,9}) b/i],[h,[y,"Insignia"],[p,T]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[y,"NextBook"],[p,T]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],h,[p,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],h,[p,w]],[/\b(ph-1) /i],[h,[y,"Essential"],[p,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[y,"Envizen"],[p,T]],[/\b(trio[-\w\. ]+) b/i],[h,[y,"MachSpeed"],[p,T]],[/\btu_(1491) b/i],[h,[y,"Rotor"],[p,T]],[/(shield[\w ]+) b/i],[h,[y,"Nvidia"],[p,T]],[/(sprint) (\w+)/i],[y,h,[p,w]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[y,M],[p,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[y,q],[p,T]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[y,q],[p,w]],[/smart-tv.+(samsung)/i],[y,[p,D]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[y,L],[p,D]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,P],[p,D]],[/(apple) ?tv/i],[y,[h,$+" TV"],[p,D]],[/crkey/i],[[h,d+"cast"],[y,C],[p,D]],[/droid.+aft(\w)( bui|\))/i],[h,[y,F],[p,D]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[y,W],[p,D]],[/(bravia[\w ]+)( bui|\))/i],[h,[y,I],[p,D]],[/(mitv-\w{5}) bui/i],[h,[y,z],[p,D]],[/Hbbtv.*(technisat) (.*);/i],[y,h,[p,D]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,Rn],[h,Rn],[p,D]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,D]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,h,[p,E]],[/droid.+; (shield) bui/i],[h,[y,"Nvidia"],[p,E]],[/(playstation [345portablevi]+)/i],[h,[y,I],[p,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[y,M],[p,E]],[/((pebble))app/i],[y,h,[p,B]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[y,$],[p,B]],[/droid.+; (glass) \d/i],[h,[y,C],[p,B]],[/droid.+; (wt63?0{2,3})\)/i],[h,[y,q],[p,B]],[/(quest( 2| pro)?)/i],[h,[y,J],[p,B]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[p,j]],[/(aeobc)\b/i],[h,[y,F],[p,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[p,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[p,T]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,T]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,w]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[g,v+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,b],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[b,tt,nt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[b,tt,nt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,ce],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,b],[/\(bb(10);/i],[b,[g,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[g,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[b,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[b,[g,d+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,Q],b],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,b],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,b]]},rr=function(_e,ue){if(typeof _e===l&&(ue=_e,_e=n),!(this instanceof rr))return new rr(_e,ue).getResult();var se=typeof r!==c&&r.navigator?r.navigator:n,Be=_e||(se&&se.userAgent?se.userAgent:s),Fe=se&&se.userAgentData?se.userAgentData:n,Te=ue?re(it,ue):it,Re=se&&se.userAgent==Be;return this.getBrowser=function(){var ie={};return ie[g]=n,ie[b]=n,We.call(ie,Be,Te.browser),ie[u]=ye(ie[b]),Re&&se&&se.brave&&typeof se.brave.isBrave==a&&(ie[g]="Brave"),ie},this.getCPU=function(){var ie={};return ie[S]=n,We.call(ie,Be,Te.cpu),ie},this.getDevice=function(){var ie={};return ie[y]=n,ie[h]=n,ie[p]=n,We.call(ie,Be,Te.device),Re&&!ie[p]&&Fe&&Fe.mobile&&(ie[p]=w),Re&&ie[h]=="Macintosh"&&se&&typeof se.standalone!==c&&se.maxTouchPoints&&se.maxTouchPoints>2&&(ie[h]="iPad",ie[p]=T),ie},this.getEngine=function(){var ie={};return ie[g]=n,ie[b]=n,We.call(ie,Be,Te.engine),ie},this.getOS=function(){var ie={};return ie[g]=n,ie[b]=n,We.call(ie,Be,Te.os),Re&&!ie[g]&&Fe&&Fe.platform!="Unknown"&&(ie[g]=Fe.platform.replace(/chrome os/i,Q).replace(/macos/i,ce)),ie},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Be},this.setUA=function(ie){return Be=typeof ie===f&&ie.length>N?Rn(ie,N):ie,this},this.setUA(Be),this};rr.VERSION=i,rr.BROWSER=ee([g,b,u]),rr.CPU=ee([S]),rr.DEVICE=ee([h,y,p,E,w,D,T,B,j]),rr.ENGINE=rr.OS=ee([g,b]),t.exports&&(e=t.exports=rr),e.UAParser=rr;var He=typeof r!==c&&(r.jQuery||r.Zepto);if(He&&!He.ua){var Qe=new rr;He.ua=Qe.getResult(),He.ua.get=function(){return Qe.getUA()},He.ua.set=function(_e){Qe.setUA(_e);var ue=Qe.getResult();for(var se in ue)He.ua[se]=ue[se]}}})(typeof window=="object"?window:G)})(um,um.exports);var x4=um.exports,Ht={},R4=G&&G.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.Logger=void 0;const Ao=R4(Xd),Co="mediasoup-client";let A4=class{constructor(e){e?(this._debug=(0,Ao.default)(`${Co}:${e}`),this._warn=(0,Ao.default)(`${Co}:WARN:${e}`),this._error=(0,Ao.default)(`${Co}:ERROR:${e}`)):(this._debug=(0,Ao.default)(Co),this._warn=(0,Ao.default)(`${Co}:WARN`),this._error=(0,Ao.default)(`${Co}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};Ht.Logger=A4;var Ei={},qg={exports:{}},va=typeof Reflect=="object"?Reflect:null,tw=va&&typeof va.apply=="function"?va.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},vu;va&&typeof va.ownKeys=="function"?vu=va.ownKeys:Object.getOwnPropertySymbols?vu=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:vu=function(e){return Object.getOwnPropertyNames(e)};function C4(t){console&&console.warn&&console.warn(t)}var D5=Number.isNaN||function(e){return e!==e};function at(){at.init.call(this)}qg.exports=at;qg.exports.once=k4;at.EventEmitter=at;at.prototype._events=void 0;at.prototype._eventsCount=0;at.prototype._maxListeners=void 0;var rw=10;function Zd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(at,"defaultMaxListeners",{enumerable:!0,get:function(){return rw},set:function(t){if(typeof t!="number"||t<0||D5(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");rw=t}});at.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};at.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||D5(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function O5(t){return t._maxListeners===void 0?at.defaultMaxListeners:t._maxListeners}at.prototype.getMaxListeners=function(){return O5(this)};at.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")tw(c,this,r);else for(var l=c.length,f=B5(c,l),n=0;n<l;++n)tw(f[n],this,r);return!0};function N5(t,e,r,n){var i,s,o;if(Zd(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=O5(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,C4(a)}return t}at.prototype.addListener=function(e,r){return N5(this,e,r,!1)};at.prototype.on=at.prototype.addListener;at.prototype.prependListener=function(e,r){return N5(this,e,r,!0)};function T4(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M5(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=T4.bind(n);return i.listener=r,n.wrapFn=i,i}at.prototype.once=function(e,r){return Zd(r),this.on(e,M5(this,e,r)),this};at.prototype.prependOnceListener=function(e,r){return Zd(r),this.prependListener(e,M5(this,e,r)),this};at.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Zd(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():P4(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};at.prototype.off=at.prototype.removeListener;at.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function L5(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?I4(i):B5(i,i.length)}at.prototype.listeners=function(e){return L5(this,e,!0)};at.prototype.rawListeners=function(e){return L5(this,e,!1)};at.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):j5.call(t,e)};at.prototype.listenerCount=j5;function j5(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}at.prototype.eventNames=function(){return this._eventsCount>0?vu(this._events):[]};function B5(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function P4(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function I4(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function k4(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}F5(t,e,s,{once:!0}),e!=="error"&&D4(t,i,{once:!0})})}function D4(t,e,r){typeof t.on=="function"&&F5(t,"error",e,r)}function F5(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var O4=qg.exports;Object.defineProperty(Ei,"__esModule",{value:!0});Ei.EnhancedEventEmitter=void 0;const N4=O4,M4=Ht,L4=new M4.Logger("EnhancedEventEmitter");class j4 extends N4.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...r){return super.emit(e,...r)}safeEmit(e,...r){const n=super.listenerCount(e);try{return super.emit(e,...r)}catch(i){return L4.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,i),!!n}}on(e,r){return super.on(e,r),this}off(e,r){return super.off(e,r),this}addListener(e,r){return super.on(e,r),this}prependListener(e,r){return super.prependListener(e,r),this}once(e,r){return super.once(e,r),this}prependOnceListener(e,r){return super.prependOnceListener(e,r),this}removeListener(e,r){return super.off(e,r),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}}Ei.EnhancedEventEmitter=j4;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.InvalidStateError=dr.UnsupportedError=void 0;class Jg extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Jg):this.stack=new Error(e).stack}}dr.UnsupportedError=Jg;class Kg extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Kg):this.stack=new Error(e).stack}}dr.InvalidStateError=Kg;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.generateRandomNumber=Jt.clone=void 0;function B4(t,e){return typeof t>"u"?e:JSON.parse(JSON.stringify(t))}Jt.clone=B4;function F4(){return Math.round(Math.random()*1e7)}Jt.generateRandomNumber=F4;var fe={},U5={};(function(t){const e=Xd("h264-profile-level-id");e.log=console.info.bind(console);const r=1,n=2,i=3,s=4,o=5;t.ProfileConstrainedBaseline=r,t.ProfileBaseline=n,t.ProfileMain=i,t.ProfileConstrainedHigh=s,t.ProfileHigh=o;const a=0,c=10,l=11,f=12,u=13,h=20,g=21,p=22,y=30,b=31,S=32,E=40,w=41,T=42,D=50,B=51,j=52;t.Level1_b=a,t.Level1=c,t.Level1_1=l,t.Level1_2=f,t.Level1_3=u,t.Level2=h,t.Level2_1=g,t.Level2_2=p,t.Level3=y,t.Level3_1=b,t.Level3_2=S,t.Level4=E,t.Level4_1=w,t.Level4_2=T,t.Level5=D,t.Level5_1=B,t.Level5_2=j;class N{constructor(P,M){this.profile=P,this.level=M}}t.ProfileLevelId=N;const F=new N(r,b),$=16;class U{constructor(P){this._mask=~d("x",P),this._maskedValue=d("1",P)}isMatch(P){return this._maskedValue===(P&this._mask)}}class A{constructor(P,M,O){this.profile_idc=P,this.profile_iop=M,this.profile=O}}const m=[new A(66,new U("x1xx0000"),r),new A(77,new U("1xxx0000"),r),new A(88,new U("11xx0000"),r),new A(66,new U("x0xx0000"),n),new A(88,new U("10xx0000"),n),new A(77,new U("0x0x0000"),i),new A(100,new U("00000000"),o),new A(100,new U("00001100"),s)];t.parseProfileLevelId=function(x){if(typeof x!="string"||x.length!==6)return null;const P=parseInt(x,16);if(P===0)return null;const M=P&255,O=P>>8&255,_=P>>16&255;let L;switch(M){case l:{L=O&$?a:l;break}case c:case f:case u:case h:case g:case p:case y:case b:case S:case E:case w:case T:case D:case B:case j:{L=M;break}default:return e("parseProfileLevelId() | unrecognized level_idc:%s",M),null}for(const W of m)if(_===W.profile_idc&&W.profile_iop.isMatch(O))return new N(W.profile,L);return e("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(x){if(x.level==a)switch(x.profile){case r:return"42f00b";case n:return"42100b";case i:return"4d100b";default:return e("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",x.profile),null}let P;switch(x.profile){case r:{P="42e0";break}case n:{P="4200";break}case i:{P="4d00";break}case s:{P="640c";break}case o:{P="6400";break}default:return e("profileLevelIdToString() | unrecognized profile:%s",x.profile),null}let M=x.level.toString(16);return M.length===1&&(M=`0${M}`),`${P}${M}`},t.parseSdpProfileLevelId=function(x={}){const P=x["profile-level-id"];return P?t.parseProfileLevelId(P):F},t.isSameProfile=function(x={},P={}){const M=t.parseSdpProfileLevelId(x),O=t.parseSdpProfileLevelId(P);return!!(M&&O&&M.profile===O.profile)},t.generateProfileLevelIdForAnswer=function(x={},P={}){if(!x["profile-level-id"]&&!P["profile-level-id"])return e("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const M=t.parseSdpProfileLevelId(x),O=t.parseSdpProfileLevelId(P);if(!M)throw new TypeError("invalid local_profile_level_id");if(!O)throw new TypeError("invalid remote_profile_level_id");if(M.profile!==O.profile)throw new TypeError("H264 Profile mismatch");const _=C(x)&&C(P),L=M.level,W=O.level,I=R(L,W),z=_?L:I;return e("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",M.profile,z),t.profileLevelIdToString(new N(M.profile,z))};function d(x,P){return(P[0]===x)<<7|(P[1]===x)<<6|(P[2]===x)<<5|(P[3]===x)<<4|(P[4]===x)<<3|(P[5]===x)<<2|(P[6]===x)<<1|(P[7]===x)<<0}function v(x,P){return x===a?P!==c&&P!==a:P===a?x!==c:x<P}function R(x,P){return v(x,P)?x:P}function C(x={}){const P=x["level-asymmetry-allowed"];return P===1||P==="1"}})(U5);var U4=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$4=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$5=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&U4(e,t,r);return $4(e,t),e};Object.defineProperty(fe,"__esModule",{value:!0});fe.canReceive=fe.canSend=fe.generateProbatorRtpParameters=fe.reduceCodecs=fe.getSendingRemoteRtpParameters=fe.getSendingRtpParameters=fe.getRecvRtpCapabilities=fe.getExtendedRtpCapabilities=fe.validateSctpStreamParameters=fe.validateSctpParameters=fe.validateNumSctpStreams=fe.validateSctpCapabilities=fe.validateRtcpParameters=fe.validateRtpEncodingParameters=fe.validateRtpHeaderExtensionParameters=fe.validateRtpCodecParameters=fe.validateRtpParameters=fe.validateRtpHeaderExtension=fe.validateRtcpFeedback=fe.validateRtpCodecCapability=fe.validateRtpCapabilities=void 0;const nw=$5(U5),z4=$5(Jt),V4="probator",H4=1234,G4=127;function q4(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(t.codecs&&!Array.isArray(t.codecs))throw new TypeError("caps.codecs is not an array");t.codecs||(t.codecs=[]);for(const e of t.codecs)z5(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)V5(e)}fe.validateRtpCapabilities=q4;function z5(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const r=e.exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(t.kind=r[1].toLowerCase(),t.preferredPayloadType&&typeof t.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");t.kind==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const n of Object.keys(t.parameters)){let i=t.parameters[n];if(i===void 0&&(t.parameters[n]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError(`invalid codec parameter [key:${n}s, value:${i}]`);if(n==="apt"&&typeof i!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const n of t.rtcpFeedback)Wg(n)}fe.validateRtpCodecCapability=z5;function Wg(t){if(typeof t!="object")throw new TypeError("fb is not an object");if(!t.type||typeof t.type!="string")throw new TypeError("missing fb.type");(!t.parameter||typeof t.parameter!="string")&&(t.parameter="")}fe.validateRtcpFeedback=Wg;function V5(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(t.kind!=="audio"&&t.kind!=="video")throw new TypeError("invalid ext.kind");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.preferredId!="number")throw new TypeError("missing ext.preferredId");if(t.preferredEncrypt&&typeof t.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(t.preferredEncrypt||(t.preferredEncrypt=!1),t.direction&&typeof t.direction!="string")throw new TypeError("invalid ext.direction");t.direction||(t.direction="sendrecv")}fe.validateRtpHeaderExtension=V5;function Yg(t){if(typeof t!="object")throw new TypeError("params is not an object");if(t.mid&&typeof t.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(t.codecs))throw new TypeError("missing params.codecs");for(const e of t.codecs)H5(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("params.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)G5(e);if(t.encodings&&!Array.isArray(t.encodings))throw new TypeError("params.encodings is not an array");t.encodings||(t.encodings=[]);for(const e of t.encodings)q5(e);if(t.rtcp&&typeof t.rtcp!="object")throw new TypeError("params.rtcp is not an object");t.rtcp||(t.rtcp={}),J5(t.rtcp)}fe.validateRtpParameters=Yg;function H5(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const r=e.exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(typeof t.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");r[1].toLowerCase()==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const i of Object.keys(t.parameters)){let s=t.parameters[i];if(s===void 0&&(t.parameters[i]="",s=""),typeof s!="string"&&typeof s!="number")throw new TypeError(`invalid codec parameter [key:${i}s, value:${s}]`);if(i==="apt"&&typeof s!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const i of t.rtcpFeedback)Wg(i)}fe.validateRtpCodecParameters=H5;function G5(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.id!="number")throw new TypeError("missing ext.id");if(t.encrypt&&typeof t.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");t.encrypt||(t.encrypt=!1),(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const e of Object.keys(t.parameters)){let r=t.parameters[e];if(r===void 0&&(t.parameters[e]="",r=""),typeof r!="string"&&typeof r!="number")throw new TypeError("invalid header extension parameter")}}fe.validateRtpHeaderExtensionParameters=G5;function q5(t){if(typeof t!="object")throw new TypeError("encoding is not an object");if(t.ssrc&&typeof t.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(t.rid&&typeof t.rid!="string")throw new TypeError("invalid encoding.rid");if(t.rtx&&typeof t.rtx!="object")throw new TypeError("invalid encoding.rtx");if(t.rtx&&typeof t.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!t.dtx||typeof t.dtx!="boolean")&&(t.dtx=!1),t.scalabilityMode&&typeof t.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}fe.validateRtpEncodingParameters=q5;function J5(t){if(typeof t!="object")throw new TypeError("rtcp is not an object");if(t.cname&&typeof t.cname!="string")throw new TypeError("invalid rtcp.cname");(!t.reducedSize||typeof t.reducedSize!="boolean")&&(t.reducedSize=!0)}fe.validateRtcpParameters=J5;function J4(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(!t.numStreams||typeof t.numStreams!="object")throw new TypeError("missing caps.numStreams");K5(t.numStreams)}fe.validateSctpCapabilities=J4;function K5(t){if(typeof t!="object")throw new TypeError("numStreams is not an object");if(typeof t.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof t.MIS!="number")throw new TypeError("missing numStreams.MIS")}fe.validateNumSctpStreams=K5;function K4(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.port!="number")throw new TypeError("missing params.port");if(typeof t.OS!="number")throw new TypeError("missing params.OS");if(typeof t.MIS!="number")throw new TypeError("missing params.MIS");if(typeof t.maxMessageSize!="number")throw new TypeError("missing params.maxMessageSize")}fe.validateSctpParameters=K4;function W4(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.streamId!="number")throw new TypeError("missing params.streamId");let e=!1;if(typeof t.ordered=="boolean"?e=!0:t.ordered=!0,t.maxPacketLifeTime&&typeof t.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(t.maxRetransmits&&typeof t.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(t.maxPacketLifeTime&&t.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(e&&t.ordered&&(t.maxPacketLifeTime||t.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!e&&(t.maxPacketLifeTime||t.maxRetransmits)&&(t.ordered=!1),t.label&&typeof t.label!="string")throw new TypeError("invalid params.label");if(t.protocol&&typeof t.protocol!="string")throw new TypeError("invalid params.protocol")}fe.validateSctpStreamParameters=W4;function Y4(t,e){const r={codecs:[],headerExtensions:[]};for(const n of e.codecs||[]){if(Jc(n))continue;const i=(t.codecs||[]).find(o=>W5(o,n,{strict:!0,modify:!0}));if(!i)continue;const s={mimeType:i.mimeType,kind:i.kind,clockRate:i.clockRate,channels:i.channels,localPayloadType:i.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:n.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:i.parameters,remoteParameters:n.parameters,rtcpFeedback:sk(i,n)};r.codecs.push(s)}for(const n of r.codecs){const i=t.codecs.find(o=>Jc(o)&&o.parameters.apt===n.localPayloadType),s=e.codecs.find(o=>Jc(o)&&o.parameters.apt===n.remotePayloadType);i&&s&&(n.localRtxPayloadType=i.preferredPayloadType,n.remoteRtxPayloadType=s.preferredPayloadType)}for(const n of e.headerExtensions){const i=t.headerExtensions.find(o=>ik(o,n));if(!i)continue;const s={kind:n.kind,uri:n.uri,sendId:i.preferredId,recvId:n.preferredId,encrypt:i.preferredEncrypt,direction:"sendrecv"};switch(n.direction){case"sendrecv":s.direction="sendrecv";break;case"recvonly":s.direction="sendonly";break;case"sendonly":s.direction="recvonly";break;case"inactive":s.direction="inactive";break}r.headerExtensions.push(s)}return r}fe.getExtendedRtpCapabilities=Y4;function Q4(t){const e={codecs:[],headerExtensions:[]};for(const r of t.codecs){const n={mimeType:r.mimeType,kind:r.kind,preferredPayloadType:r.remotePayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(e.codecs.push(n),!r.remoteRtxPayloadType)continue;const i={mimeType:`${r.kind}/rtx`,kind:r.kind,preferredPayloadType:r.remoteRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.remotePayloadType},rtcpFeedback:[]};e.codecs.push(i)}for(const r of t.headerExtensions){if(r.direction!=="sendrecv"&&r.direction!=="recvonly")continue;const n={kind:r.kind,uri:r.uri,preferredId:r.recvId,preferredEncrypt:r.encrypt,direction:r.direction};e.headerExtensions.push(n)}return e}fe.getRecvRtpCapabilities=Q4;function X4(t,e){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of e.codecs){if(n.kind!==t)continue;const i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){const s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(s)}}for(const n of e.headerExtensions){if(n.kind&&n.kind!==t||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const i={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(i)}return r}fe.getSendingRtpParameters=X4;function Z4(t,e){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of e.codecs){if(n.kind!==t)continue;const i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){const s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(s)}}for(const n of e.headerExtensions){if(n.kind&&n.kind!==t||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const i={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(i)}if(r.headerExtensions.some(n=>n.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="goog-remb");else if(r.headerExtensions.some(n=>n.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="transport-cc");else for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="transport-cc"&&i.type!=="goog-remb");return r}fe.getSendingRemoteRtpParameters=Z4;function ek(t,e){const r=[];if(!e)r.push(t[0]),Jc(t[1])&&r.push(t[1]);else{for(let n=0;n<t.length;++n)if(W5(t[n],e)){r.push(t[n]),Jc(t[n+1])&&r.push(t[n+1]);break}if(r.length===0)throw new TypeError("no matching codec found")}return r}fe.reduceCodecs=ek;function tk(t){t=z4.clone(t,{}),Yg(t);const e={mid:V4,codecs:[],headerExtensions:[],encodings:[{ssrc:H4}],rtcp:{cname:"probator"}};return e.codecs.push(t.codecs[0]),e.codecs[0].payloadType=G4,e.headerExtensions=t.headerExtensions,e}fe.generateProbatorRtpParameters=tk;function rk(t,e){return e.codecs.some(r=>r.kind===t)}fe.canSend=rk;function nk(t,e){if(Yg(t),t.codecs.length===0)return!1;const r=t.codecs[0];return e.codecs.some(n=>n.remotePayloadType===r.payloadType)}fe.canReceive=nk;function Jc(t){return t?/.+\/rtx$/i.test(t.mimeType):!1}function W5(t,e,{strict:r=!1,modify:n=!1}={}){const i=t.mimeType.toLowerCase(),s=e.mimeType.toLowerCase();if(i!==s||t.clockRate!==e.clockRate||t.channels!==e.channels)return!1;switch(i){case"video/h264":{if(r){const o=t.parameters["packetization-mode"]||0,a=e.parameters["packetization-mode"]||0;if(o!==a||!nw.isSameProfile(t.parameters,e.parameters))return!1;let c;try{c=nw.generateProfileLevelIdForAnswer(t.parameters,e.parameters)}catch{return!1}n&&(c?(t.parameters["profile-level-id"]=c,e.parameters["profile-level-id"]=c):(delete t.parameters["profile-level-id"],delete e.parameters["profile-level-id"]))}break}case"video/vp9":{if(r){const o=t.parameters["profile-id"]||0,a=e.parameters["profile-id"]||0;if(o!==a)return!1}break}}return!0}function ik(t,e){return!(t.kind&&e.kind&&t.kind!==e.kind||t.uri!==e.uri)}function sk(t,e){const r=[];for(const n of t.rtcpFeedback||[]){const i=(e.rtcpFeedback||[]).find(s=>s.type===n.type&&(s.parameter===n.parameter||!s.parameter&&!n.parameter));i&&r.push(i)}return r}var jl={},Ps={},eh={},ok=G&&G.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eh,"__esModule",{value:!0});eh.Logger=void 0;const To=ok(Xd),Po="awaitqueue";class ak{constructor(e){e?(this._debug=(0,To.default)(`${Po}:${e}`),this._warn=(0,To.default)(`${Po}:WARN:${e}`),this._error=(0,To.default)(`${Po}:ERROR:${e}`)):(this._debug=(0,To.default)(Po),this._warn=(0,To.default)(`${Po}:WARN`),this._error=(0,To.default)(`${Po}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}eh.Logger=ak;Object.defineProperty(Ps,"__esModule",{value:!0});Ps.AwaitQueue=Ps.AwaitQueueRemovedTaskError=Ps.AwaitQueueStoppedError=void 0;const ck=eh,is=new ck.Logger;class th extends Error{constructor(e){super(e??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,th)}}Ps.AwaitQueueStoppedError=th;class rh extends Error{constructor(e){super(e??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,rh)}}Ps.AwaitQueueRemovedTaskError=rh;class lk{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,r){if(r=r??e.name,is.debug(`push() [name:${r}]`),typeof e!="function")throw new TypeError("given task is not a function");if(r)try{Object.defineProperty(e,"name",{value:r})}catch{}return new Promise((n,i)=>{const s={id:this.nextTaskId++,task:e,name:r,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:o=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),is.debug(`resolving task [name:${s.name}]`),n(o);const[a]=this.pendingTasks.values();a&&!a.executedAt&&this.execute(a)},reject:o=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),is.debug(`rejecting task [name:${s.name}]: %s`,String(o)),i(o),!this.stopping)){const[a]=this.pendingTasks.values();a&&!a.executedAt&&this.execute(a)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){is.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())is.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new th);this.stopping=!1}remove(e){is.debug(`remove() [taskIdx:${e}]`);const r=Array.from(this.pendingTasks.values())[e];if(!r){is.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}r.reject(new rh)}dump(){const e=Date.now();let r=0;return Array.from(this.pendingTasks.values()).map(n=>({idx:r++,task:n.task,name:n.name,enqueuedTime:n.executedAt?n.executedAt-n.enqueuedAt:e-n.enqueuedAt,executionTime:n.executedAt?e-n.executedAt:0}))}async execute(e){if(is.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const r=await e.task();e.resolve(r)}catch(r){e.reject(r)}}}Ps.AwaitQueue=lk;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let iw;var fk=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:G):t=>(iw||(iw=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.Producer=void 0;const uk=Ht,sw=Ei,Io=dr,Hn=new uk.Logger("Producer");class dk extends sw.EnhancedEventEmitter{constructor({id:e,localId:r,rtpSender:n,track:i,rtpParameters:s,stopTracks:o,disableTrackOnPause:a,zeroRtpOnPause:c,appData:l}){super(),this._closed=!1,this._observer=new sw.EnhancedEventEmitter,Hn.debug("constructor()"),this._id=e,this._localId=r,this._rtpSender=n,this._track=i,this._kind=i.kind,this._rtpParameters=s,this._paused=a?!i.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=o,this._disableTrackOnPause=a,this._zeroRtpOnPause=c,this._appData=l||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(Hn.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Hn.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new Io.InvalidStateError("closed");return new Promise((e,r)=>{this.safeEmit("@getstats",e,r)})}pause(){if(Hn.debug("pause()"),this._closed){Hn.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((e,r)=>{this.safeEmit("@pause",e,r)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(Hn.debug("resume()"),this._closed){Hn.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((e,r)=>{this.safeEmit("@resume",e,r)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:e}){if(Hn.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch{}throw new Io.InvalidStateError("closed")}else if(e&&e.readyState==="ended")throw new Io.InvalidStateError("track ended");if(e===this._track){Hn.debug("replaceTrack() | same track, ignored");return}await new Promise((r,n)=>{this.safeEmit("@replacetrack",e,r,n)}),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new Io.InvalidStateError("closed");if(this._kind!=="video")throw new Io.UnsupportedError("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise((r,n)=>{this.safeEmit("@setmaxspatiallayer",e,r,n)}).catch(()=>{}),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new Io.InvalidStateError("closed");if(typeof e!="object")throw new TypeError("invalid params");await new Promise((r,n)=>{this.safeEmit("@setrtpencodingparameters",e,r,n)})}onTrackEnded(){Hn.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}Bl.Producer=dk;var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.Consumer=void 0;const hk=Ht,ow=Ei,pk=dr,Gn=new hk.Logger("Consumer");class mk extends ow.EnhancedEventEmitter{constructor({id:e,localId:r,producerId:n,rtpReceiver:i,track:s,rtpParameters:o,appData:a}){super(),this._closed=!1,this._observer=new ow.EnhancedEventEmitter,Gn.debug("constructor()"),this._id=e,this._localId=r,this._producerId=n,this._rtpReceiver=i,this._track=s,this._rtpParameters=o,this._paused=!s.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(Gn.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Gn.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new pk.InvalidStateError("closed");return new Promise((e,r)=>{this.safeEmit("@getstats",e,r)})}pause(){if(Gn.debug("pause()"),this._closed){Gn.error("pause() | Consumer closed");return}if(this._paused){Gn.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(Gn.debug("resume()"),this._closed){Gn.error("resume() | Consumer closed");return}if(!this._paused){Gn.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){Gn.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}Fl.Consumer=mk;var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.DataProducer=void 0;const gk=Ht,aw=Ei,vk=dr,Ai=new gk.Logger("DataProducer");class yk extends aw.EnhancedEventEmitter{constructor({id:e,dataChannel:r,sctpStreamParameters:n,appData:i}){super(),this._closed=!1,this._observer=new aw.EnhancedEventEmitter,Ai.debug("constructor()"),this._id=e,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=i||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(Ai.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Ai.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(Ai.debug("send()"),this._closed)throw new vk.InvalidStateError("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Ai.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:r}=e;r||(r=new Error("unknown DataChannel error")),r.errorDetail==="sctp-failure"?Ai.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):Ai.error('DataChannel "error" event: %o',r),this.safeEmit("error",r)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Ai.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||Ai.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}Ul.DataProducer=yk;var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.DataConsumer=void 0;const wk=Ht,cw=Ei,Ks=new wk.Logger("DataConsumer");class _k extends cw.EnhancedEventEmitter{constructor({id:e,dataProducerId:r,dataChannel:n,sctpStreamParameters:i,appData:s}){super(),this._closed=!1,this._observer=new cw.EnhancedEventEmitter,Ks.debug("constructor()"),this._id=e,this._dataProducerId=r,this._dataChannel=n,this._sctpStreamParameters=i,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(Ks.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Ks.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Ks.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:r}=e;r||(r=new Error("unknown DataChannel error")),r.errorDetail==="sctp-failure"?Ks.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):Ks.error('DataChannel "error" event: %o',r),this.safeEmit("error",r)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Ks.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}$l.DataConsumer=_k;var bk=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sk=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Y5=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bk(e,t,r);return Sk(e,t),e},Ek=G&&G.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jl,"__esModule",{value:!0});jl.Transport=void 0;const xk=Ps,Pp=Ek(fk),Rk=Ht,lw=Ei,nr=dr,Ip=Y5(Jt),pc=Y5(fe),Ak=Bl,Ck=Fl,Tk=Ul,Pk=$l,Wt=new Rk.Logger("Transport");class Ik{constructor(e){this.consumerOptions=e,this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}}let kk=class extends lw.EnhancedEventEmitter{constructor({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:f,appData:u,handlerFactory:h,extendedRtpCapabilities:g,canProduceByKind:p}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new xk.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new lw.EnhancedEventEmitter,Wt.debug("constructor() [id:%s, direction:%s]",r,e),this._id=r,this._direction=e,this._extendedRtpCapabilities=g,this._canProduceByKind=p,this._maxSctpMessageSize=o?o.maxMessageSize:null,l=Ip.clone(l,{}),delete l.iceServers,delete l.iceTransportPolicy,delete l.bundlePolicy,delete l.rtcpMuxPolicy,delete l.sdpSemantics,this._handler=h(),this._handler.run({direction:e,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:f,extendedRtpCapabilities:g}),this._appData=u||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){if(!this._closed){Wt.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new nr.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(Wt.debug("restartIce()"),this._closed)throw new nr.InvalidStateError("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(Wt.debug("updateIceServers()"),this._closed)throw new nr.InvalidStateError("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:r,codecOptions:n,codec:i,stopTracks:s=!0,disableTrackOnPause:o=!0,zeroRtpOnPause:a=!1,appData:c={}}={}){if(Wt.debug("produce() [track:%o]",e),this._closed)throw new nr.InvalidStateError("closed");if(e){if(this._direction!=="send")throw new nr.UnsupportedError("not a sending Transport");if(this._canProduceByKind[e.kind]){if(e.readyState==="ended")throw new nr.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(c&&typeof c!="object")throw new TypeError("if given, appData must be an object")}else throw new nr.UnsupportedError(`cannot produce ${e.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let l;if(r&&!Array.isArray(r))throw TypeError("encodings must be an array");r&&r.length===0?l=void 0:r&&(l=r.map(g=>{const p={active:!0};return g.active===!1&&(p.active=!1),typeof g.dtx=="boolean"&&(p.dtx=g.dtx),typeof g.scalabilityMode=="string"&&(p.scalabilityMode=g.scalabilityMode),typeof g.scaleResolutionDownBy=="number"&&(p.scaleResolutionDownBy=g.scaleResolutionDownBy),typeof g.maxBitrate=="number"&&(p.maxBitrate=g.maxBitrate),typeof g.maxFramerate=="number"&&(p.maxFramerate=g.maxFramerate),typeof g.adaptivePtime=="boolean"&&(p.adaptivePtime=g.adaptivePtime),typeof g.priority=="string"&&(p.priority=g.priority),typeof g.networkPriority=="string"&&(p.networkPriority=g.networkPriority),p}));const{localId:f,rtpParameters:u,rtpSender:h}=await this._handler.send({track:e,encodings:l,codecOptions:n,codec:i});try{pc.validateRtpParameters(u);const{id:g}=await new Promise((y,b)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:u,appData:c},y,b)}),p=new Ak.Producer({id:g,localId:f,rtpSender:h,track:e,rtpParameters:u,stopTracks:s,disableTrackOnPause:o,zeroRtpOnPause:a,appData:c});return this._producers.set(p.id,p),this.handleProducer(p),this._observer.safeEmit("newproducer",p),p}catch(g){throw this._handler.stopSending(f).catch(()=>{}),g}},"transport.produce()").catch(l=>{if(s)try{e.stop()}catch{}throw l})}async consume({id:e,producerId:r,kind:n,rtpParameters:i,streamId:s,appData:o={}}){if(Wt.debug("consume()"),i=Ip.clone(i,void 0),this._closed)throw new nr.InvalidStateError("closed");if(this._direction!=="recv")throw new nr.UnsupportedError("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing producerId");if(n!=="audio"&&n!=="video")throw new TypeError(`invalid kind '${n}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object");if(!pc.canReceive(i,this._extendedRtpCapabilities))throw new nr.UnsupportedError("cannot consume this Producer");const c=new Ik({id:e,producerId:r,kind:n,rtpParameters:i,streamId:s,appData:o});return this._pendingConsumerTasks.push(c),(0,Pp.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),c.promise}async produceData({ordered:e=!0,maxPacketLifeTime:r,maxRetransmits:n,label:i="",protocol:s="",appData:o={}}={}){if(Wt.debug("produceData()"),this._closed)throw new nr.InvalidStateError("closed");if(this._direction!=="send")throw new nr.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new nr.UnsupportedError("SCTP not enabled by remote Transport");return(r||n)&&(e=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:c}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s});pc.validateSctpStreamParameters(c);const{id:l}=await new Promise((u,h)=>{this.safeEmit("producedata",{sctpStreamParameters:c,label:i,protocol:s,appData:o},u,h)}),f=new Tk.DataProducer({id:l,dataChannel:a,sctpStreamParameters:c,appData:o});return this._dataProducers.set(f.id,f),this.handleDataProducer(f),this._observer.safeEmit("newdataproducer",f),f},"transport.produceData()")}async consumeData({id:e,dataProducerId:r,sctpStreamParameters:n,label:i="",protocol:s="",appData:o={}}){if(Wt.debug("consumeData()"),n=Ip.clone(n,void 0),this._closed)throw new nr.InvalidStateError("closed");if(this._direction!=="recv")throw new nr.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof e!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new nr.UnsupportedError("SCTP not enabled by remote Transport");return pc.validateSctpStreamParameters(n),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:n,label:i,protocol:s}),c=new Pk.DataConsumer({id:e,dataProducerId:r,dataChannel:a,sctpStreamParameters:n,appData:o});return this._dataConsumers.set(c.id,c),this.handleDataConsumer(c),this._observer.safeEmit("newdataconsumer",c),c},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){Wt.debug("createPendingConsumers() | there is no Consumer to be created");return}const e=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let r;const n=[];for(const i of e){const{id:s,kind:o,rtpParameters:a,streamId:c}=i.consumerOptions;n.push({trackId:s,kind:o,rtpParameters:a,streamId:c})}try{const i=await this._handler.receive(n);for(let s=0;s<i.length;++s){const o=e[s],a=i[s],{id:c,producerId:l,kind:f,rtpParameters:u,appData:h}=o.consumerOptions,{localId:g,rtpReceiver:p,track:y}=a,b=new Ck.Consumer({id:c,localId:g,producerId:l,rtpReceiver:p,track:y,rtpParameters:u,appData:h});this._consumers.set(b.id,b),this.handleConsumer(b),!this._probatorConsumerCreated&&!r&&f==="video"&&(r=b),this._observer.safeEmit("newconsumer",b),o.resolve(b)}}catch(i){for(const s of e)s.reject(i)}if(r)try{const i=pc.generateProbatorRtpParameters(r.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:i}]),Wt.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(i){Wt.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",i)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){Wt.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const r=e.map(n=>n.localId);await this._handler.pauseReceiving(r)}catch(r){Wt.error("pausePendingConsumers() | failed to pause Consumers:",r)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){Wt.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const r=e.map(n=>n.localId);await this._handler.resumeReceiving(r)}catch(r){Wt.error("resumePendingConsumers() | failed to resume Consumers:",r)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){Wt.debug("closePendingConsumers() | there is no Consumer to be closed");return}const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map(r=>r.localId))}catch(r){Wt.error("closePendingConsumers() | failed to close Consumers:",r)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const e=this._handler;e.on("@connect",({dtlsParameters:r},n,i)=>{if(this._closed){i(new nr.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:r},n,i)}),e.on("@icegatheringstatechange",r=>{r!==this._iceGatheringState&&(Wt.debug("ICE gathering state changed to %s",r),this._iceGatheringState=r,this._closed||this.safeEmit("icegatheringstatechange",r))}),e.on("@connectionstatechange",r=>{r!==this._connectionState&&(Wt.debug("connection state changed to %s",r),this._connectionState=r,this._closed||this.safeEmit("connectionstatechange",r))})}handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(e.localId),"producer @close event").catch(r=>Wt.warn("producer.close() failed:%o",r))}),e.on("@pause",(r,n)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(e.localId),"producer @pause event").then(r).catch(n)}),e.on("@resume",(r,n)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(e.localId),"producer @resume event").then(r).catch(n)}),e.on("@replacetrack",(r,n,i)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(e.localId,r),"producer @replacetrack event").then(n).catch(i)}),e.on("@setmaxspatiallayer",(r,n,i)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(e.localId,r),"producer @setmaxspatiallayer event").then(n).catch(i)}),e.on("@setrtpencodingparameters",(r,n,i)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(e.localId,r),"producer @setrtpencodingparameters event").then(n).catch(i)}),e.on("@getstats",(r,n)=>{if(this._closed)return n(new nr.InvalidStateError("closed"));this._handler.getSenderStats(e.localId).then(r).catch(n)})}handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),!this._closed&&(this._pendingCloseConsumers.set(e.id,e),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),e.on("@pause",()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),(0,Pp.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),e.on("@resume",()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),(0,Pp.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),e.on("@getstats",(r,n)=>{if(this._closed)return n(new nr.InvalidStateError("closed"));this._handler.getReceiverStats(e.localId).then(r).catch(n)})}handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}};jl.Transport=kk;var nh={},Kt={},Q5={},X5={exports:{}},fw=X5.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(fw).forEach(function(t){var e=fw[t];e.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})});var Z5=X5.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},r=function(a,c,l,f){if(f&&!l)c[f]=e(a[1]);else for(var u=0;u<l.length;u+=1)a[u+1]!=null&&(c[l[u]]=e(a[u+1]))},n=function(a,c,l){var f=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:f&&!c[a.name]&&(c[a.name]={});var u=a.push?{}:f?c[a.name]:c;r(l.match(a.reg),u,a.names,a.name),a.push&&c[a.push].push(u)},i=Z5,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],f=c;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(u){var h=u[0],g=u.slice(2);h==="m"&&(l.push({rtp:[],fmtp:[]}),f=l[l.length-1]);for(var p=0;p<(i[h]||[]).length;p+=1){var y=i[h][p];if(y.reg.test(g))return n(y,f,g)}}),c.media=l,c};var o=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),f=0;f<l.length;f+=3)c.push({component:l[f],ip:l[f+1],port:l[f+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var f,u=!1;return l[0]!=="~"?f=e(l):(f=e(l.substring(1,l.length)),u=!0),{scid:f,paused:u}})})}})(Q5);var kp=Z5,Dk=/%[sdv%]/g,Ok=function(t){var e=1,r=arguments,n=r.length;return t.replace(Dk,function(i){if(e>=n)return i;var s=r[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},mc=function(t,e,r){var n=e.format instanceof Function?e.format(e.push?r:r[e.name]):e.format,i=[t+"="+n];if(e.names)for(var s=0;s<e.names.length;s+=1){var o=e.names[s];e.name?i.push(r[e.name][o]):i.push(r[e.names[s]])}else i.push(r[e.name]);return Ok.apply(null,i)},Nk=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Mk=["i","c","b","a"],Lk=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var r=e.outerOrder||Nk,n=e.innerOrder||Mk,i=[];return r.forEach(function(s){kp[s].forEach(function(o){o.name in t&&t[o.name]!=null?i.push(mc(s,o,t)):o.push in t&&t[o.push]!=null&&t[o.push].forEach(function(a){i.push(mc(s,o,a))})})}),t.media.forEach(function(s){i.push(mc("m",kp.m[0],s)),n.forEach(function(o){kp[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(mc(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(mc(o,a,c))})})})}),i.join(`\r
`)+`\r
`},yo=Q5,jk=Lk;Kt.write=jk;Kt.parse=yo.parse;Kt.parseParams=yo.parseParams;Kt.parseFmtpConfig=yo.parseFmtpConfig;Kt.parsePayloads=yo.parsePayloads;Kt.parseRemoteCandidates=yo.parseRemoteCandidates;Kt.parseImageAttributes=yo.parseImageAttributes;Kt.parseSimulcastStreamList=yo.parseSimulcastStreamList;var fr={},Bk=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fk=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Uk=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bk(e,t,r);return Fk(e,t),e};Object.defineProperty(fr,"__esModule",{value:!0});fr.applyCodecParameters=fr.getCname=fr.extractDtlsParameters=fr.extractRtpCapabilities=void 0;const e2=Uk(Kt);function $k({sdpObject:t}){const e=new Map,r=[];let n=!1,i=!1;for(const o of t.media){const a=o.type;switch(a){case"audio":{if(n)continue;n=!0;break}case"video":{if(i)continue;i=!0;break}default:continue}for(const c of o.rtp){const l={kind:a,mimeType:`${a}/${c.codec}`,preferredPayloadType:c.payload,clockRate:c.rate,channels:c.encoding,parameters:{},rtcpFeedback:[]};e.set(l.preferredPayloadType,l)}for(const c of o.fmtp||[]){const l=e2.parseParams(c.config),f=e.get(c.payload);f&&(l&&l.hasOwnProperty("profile-level-id")&&(l["profile-level-id"]=String(l["profile-level-id"])),f.parameters=l)}for(const c of o.rtcpFb||[]){const l={type:c.type,parameter:c.subtype};if(l.parameter||delete l.parameter,c.payload!=="*"){const f=e.get(c.payload);if(!f)continue;f.rtcpFeedback.push(l)}else for(const f of e.values())f.kind===a&&!/.+\/rtx$/i.test(f.mimeType)&&f.rtcpFeedback.push(l)}for(const c of o.ext||[]){if(c["encrypt-uri"])continue;const l={kind:a,uri:c.uri,preferredId:c.value};r.push(l)}}return{codecs:Array.from(e.values()),headerExtensions:r}}fr.extractRtpCapabilities=$k;function zk({sdpObject:t}){const e=(t.media||[]).find(s=>s.iceUfrag&&s.port!==0);if(!e)throw new Error("no active media section found");const r=e.fingerprint||t.fingerprint;let n;switch(e.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto";break}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}}fr.extractDtlsParameters=zk;function Vk({offerMediaObject:t}){const e=(t.ssrcs||[]).find(r=>r.attribute==="cname");return e?e.value:""}fr.getCname=Vk;function Hk({offerRtpParameters:t,answerMediaObject:e}){for(const r of t.codecs){const n=r.mimeType.toLowerCase();if(n!=="audio/opus"||!(e.rtp||[]).find(a=>a.payload===r.payloadType))continue;e.fmtp=e.fmtp||[];let s=e.fmtp.find(a=>a.payload===r.payloadType);s||(s={payload:r.payloadType,config:""},e.fmtp.push(s));const o=e2.parseParams(s.config);switch(n){case"audio/opus":{const a=r.parameters["sprop-stereo"];a!==void 0&&(o.stereo=a?1:0);break}}s.config="";for(const a of Object.keys(o))s.config&&(s.config+=";"),s.config+=`${a}=${o[a]}`}}fr.applyCodecParameters=Hk;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.addLegacySimulcast=zn.getRtpEncodings=void 0;function Gk({offerMediaObject:t}){const e=new Set;for(const i of t.ssrcs||[]){const s=i.id;e.add(s)}if(e.size===0)throw new Error("no a=ssrc lines found");const r=new Map;for(const i of t.ssrcGroups||[]){if(i.semantics!=="FID")continue;let[s,o]=i.ssrcs.split(/\s+/);s=Number(s),o=Number(o),e.has(s)&&(e.delete(s),e.delete(o),r.set(s,o))}for(const i of e)r.set(i,null);const n=[];for(const[i,s]of r){const o={ssrc:i};s&&(o.rtx={ssrc:s}),n.push(o)}return n}zn.getRtpEncodings=Gk;function qk({offerMediaObject:t,numStreams:e}){if(e<=1)throw new TypeError("numStreams must be greater than 1");const r=(t.ssrcs||[]).find(u=>u.attribute==="msid");if(!r)throw new Error("a=ssrc line with msid information not found");const[n,i]=r.value.split(" "),s=r.id;let o;(t.ssrcGroups||[]).some(u=>{if(u.semantics!=="FID")return!1;const h=u.ssrcs.split(/\s+/);return Number(h[0])===s?(o=Number(h[1]),!0):!1});const a=t.ssrcs.find(u=>u.attribute==="cname");if(!a)throw new Error("a=ssrc line with cname information not found");const c=a.value,l=[],f=[];for(let u=0;u<e;++u)l.push(s+u),o&&f.push(o+u);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(let u=0;u<l.length;++u){const h=l[u];t.ssrcs.push({id:h,attribute:"cname",value:c}),t.ssrcs.push({id:h,attribute:"msid",value:`${n} ${i}`})}for(let u=0;u<f.length;++u){const h=l[u],g=f[u];t.ssrcs.push({id:g,attribute:"cname",value:c}),t.ssrcs.push({id:g,attribute:"msid",value:`${n} ${i}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${h} ${g}`})}}zn.addLegacySimulcast=qk;var wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.addNackSuppportForOpus=void 0;function Jk(t){var e;for(const r of t.codecs||[])(r.mimeType.toLowerCase()==="audio/opus"||r.mimeType.toLowerCase()==="audio/multiopus")&&!((e=r.rtcpFeedback)!=null&&e.some(n=>n.type==="nack"&&!n.parameter))&&(r.rtcpFeedback||(r.rtcpFeedback=[]),r.rtcpFeedback.push({type:"nack"}))}wo.addNackSuppportForOpus=Jk;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.HandlerInterface=void 0;const Kk=Ei;class Wk extends Kk.EnhancedEventEmitter{constructor(){super()}}Br.HandlerInterface=Wk;var cn={},Is={},Yk=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qk=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),t2=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Yk(e,t,r);return Qk(e,t),e};Object.defineProperty(Is,"__esModule",{value:!0});Is.OfferMediaSection=Is.AnswerMediaSection=Is.MediaSection=void 0;const Xk=t2(Kt),uw=t2(Jt);class Qg{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:i=!1}){if(this._mediaObject={},this._planB=i,e&&this.setIceParameters(e),r){this._mediaObject.candidates=[];for(const s of r){const o={};o.component=1,o.foundation=s.foundation,o.ip=s.ip,o.port=s.port,o.priority=s.priority,o.transport=s.protocol,o.type=s.type,s.tcpType&&(o.tcptype=s.tcpType),this._mediaObject.candidates.push(o)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}n&&this.setDtlsRole(n.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}Is.MediaSection=Qg;class Zk extends Qg{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:s,planB:o=!1,offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:f,extmapAllowMixed:u=!1}){switch(super({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:o}),this._mediaObject.mid=String(a.mid),this._mediaObject.type=a.type,this._mediaObject.protocol=a.protocol,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),a.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const h of l.codecs){const g={payload:h.payloadType,codec:dm(h),rate:h.clockRate};h.channels>1&&(g.encoding=h.channels),this._mediaObject.rtp.push(g);const p=uw.clone(h.parameters,{});let y=uw.clone(h.rtcpFeedback,[]);if(f){const{opusStereo:S,opusFec:E,opusDtx:w,opusMaxPlaybackRate:T,opusMaxAverageBitrate:D,opusPtime:B,opusNack:j,videoGoogleStartBitrate:N,videoGoogleMaxBitrate:F,videoGoogleMinBitrate:$}=f,U=c.codecs.find(A=>A.payloadType===h.payloadType);switch(h.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{S!==void 0&&(U.parameters["sprop-stereo"]=S?1:0,p.stereo=S?1:0),E!==void 0&&(U.parameters.useinbandfec=E?1:0,p.useinbandfec=E?1:0),w!==void 0&&(U.parameters.usedtx=w?1:0,p.usedtx=w?1:0),T!==void 0&&(p.maxplaybackrate=T),D!==void 0&&(p.maxaveragebitrate=D),B!==void 0&&(U.parameters.ptime=B,p.ptime=B),j||(U.rtcpFeedback=U.rtcpFeedback.filter(A=>A.type!=="nack"||A.parameter),y=y.filter(A=>A.type!=="nack"||A.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{N!==void 0&&(p["x-google-start-bitrate"]=N),F!==void 0&&(p["x-google-max-bitrate"]=F),$!==void 0&&(p["x-google-min-bitrate"]=$);break}}}const b={payload:h.payloadType,config:""};for(const S of Object.keys(p))b.config&&(b.config+=";"),b.config+=`${S}=${p[S]}`;b.config&&this._mediaObject.fmtp.push(b);for(const S of y)this._mediaObject.rtcpFb.push({payload:h.payloadType,type:S.type,subtype:S.parameter})}this._mediaObject.payloads=l.codecs.map(h=>h.payloadType).join(" "),this._mediaObject.ext=[];for(const h of l.headerExtensions)(a.ext||[]).some(p=>p.uri===h.uri)&&this._mediaObject.ext.push({uri:h.uri,value:h.id});if(u&&a.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),a.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:a.simulcast.list1},this._mediaObject.rids=[];for(const h of a.rids||[])h.direction==="send"&&this._mediaObject.rids.push({id:h.id,direction:"recv"})}else if(a.simulcast_03){this._mediaObject.simulcast_03={value:a.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const h of a.rids||[])h.direction==="send"&&this._mediaObject.rids.push({id:h.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof a.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=i.port,this._mediaObject.maxMessageSize=i.maxMessageSize):a.sctpmap&&(this._mediaObject.payloads=i.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:i.port,maxMessageSize:i.maxMessageSize});break}}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){var s;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const o of e)o.rid&&(r[o.rid]=o);const n=this._mediaObject.simulcast.list1,i=Xk.parseSimulcastStreamList(n);for(const o of i)for(const a of o)a.paused=!((s=r[a.scid])!=null&&s.active);this._mediaObject.simulcast.list1=i.map(o=>o.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}Is.AnswerMediaSection=Zk;class e9 extends Qg{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:s,planB:o=!1,mid:a,kind:c,offerRtpParameters:l,streamId:f,trackId:u,oldDataChannelSpec:h=!1}){switch(super({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:o}),this._mediaObject.mid=String(a),this._mediaObject.type=c,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},i?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${f||"-"} ${u}`);for(const b of l.codecs){const S={payload:b.payloadType,codec:dm(b),rate:b.clockRate};b.channels>1&&(S.encoding=b.channels),this._mediaObject.rtp.push(S);const E={payload:b.payloadType,config:""};for(const w of Object.keys(b.parameters))E.config&&(E.config+=";"),E.config+=`${w}=${b.parameters[w]}`;E.config&&this._mediaObject.fmtp.push(E);for(const w of b.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:b.payloadType,type:w.type,subtype:w.parameter})}this._mediaObject.payloads=l.codecs.map(b=>b.payloadType).join(" "),this._mediaObject.ext=[];for(const b of l.headerExtensions)this._mediaObject.ext.push({uri:b.uri,value:b.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const g=l.encodings[0],p=g.ssrc,y=g.rtx&&g.rtx.ssrc?g.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],l.rtcp.cname&&this._mediaObject.ssrcs.push({id:p,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:p,attribute:"msid",value:`${f||"-"} ${u}`}),y&&(l.rtcp.cname&&this._mediaObject.ssrcs.push({id:y,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:y,attribute:"msid",value:`${f||"-"} ${u}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${p} ${y}`}));break}case"application":{h?(this._mediaObject.payloads=i.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:i.port,maxMessageSize:i.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=i.port,this._mediaObject.maxMessageSize=i.maxMessageSize);break}}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:r,trackId:n}){const i=e.encodings[0],s=i.ssrc,o=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0,a=this._mediaObject.payloads.split(" ");for(const c of e.codecs){if(a.includes(String(c.payloadType)))continue;const l={payload:c.payloadType,codec:dm(c),rate:c.clockRate};c.channels>1&&(l.encoding=c.channels),this._mediaObject.rtp.push(l);const f={payload:c.payloadType,config:""};for(const u of Object.keys(c.parameters))f.config&&(f.config+=";"),f.config+=`${u}=${c.parameters[u]}`;f.config&&this._mediaObject.fmtp.push(f);for(const u of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:u.type,subtype:u.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${r||"-"} ${n}`}),o&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:o,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:o,attribute:"msid",value:`${r||"-"} ${n}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${s} ${o}`}))}planBStopReceiving({offerRtpParameters:e}){const r=e.encodings[0],n=r.ssrc,i=r.rtx&&r.rtx.ssrc?r.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(s=>s.id!==n&&s.id!==i),i&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(s=>s.ssrcs!==`${n} ${i}`))}}Is.OfferMediaSection=e9;function dm(t){const r=new RegExp("^(audio|video)/(.+)","i").exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");return r[2]}var t9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),r9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n9=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&t9(e,t,r);return r9(e,t),e};Object.defineProperty(cn,"__esModule",{value:!0});cn.RemoteSdp=void 0;const i9=n9(Kt),s9=Ht,Rf=Is,Dp=new s9.Logger("RemoteSdp");class o9{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:s,planB:o=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=r,this._dtlsParameters=n,this._sctpParameters=i,this._plainRtpParameters=s,this._planB=o,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),n){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const a=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:n.fingerprints[a-1].algorithm,hash:n.fingerprints[a-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}s&&(this._sdpObject.origin.address=s.ip,this._sdpObject.origin.ipVer=s.ipVersion)}updateIceParameters(e){Dp.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const r of this._mediaSections)r.setIceParameters(e)}updateDtlsRole(e){Dp.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const r of this._mediaSections)r.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const r=this._mediaSections[e];if(r.closed)return{idx:e,reuseMid:r.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:r,offerRtpParameters:n,answerRtpParameters:i,codecOptions:s,extmapAllowMixed:o=!1}){const a=new Rf.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:n,answerRtpParameters:i,codecOptions:s,extmapAllowMixed:o});r?this._replaceMediaSection(a,r):this._midToIndex.has(a.mid)?this._replaceMediaSection(a):this._addMediaSection(a)}receive({mid:e,kind:r,offerRtpParameters:n,streamId:i,trackId:s}){const o=this._midToIndex.get(e);let a;if(o!==void 0&&(a=this._mediaSections[o]),a)a.planBReceive({offerRtpParameters:n,streamId:i,trackId:s}),this._replaceMediaSection(a);else{a=new Rf.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:r,offerRtpParameters:n,streamId:i,trackId:s});const c=this._mediaSections.find(l=>l.closed);c?this._replaceMediaSection(a,c.mid):this._addMediaSection(a)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const r=this._findMediaSection(e);return e===this._firstMid?(Dp.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(r.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,r){const n=this._findMediaSection(e);n.muxSimulcastStreams(r),this._replaceMediaSection(n)}planBStopReceiving({mid:e,offerRtpParameters:r}){const n=this._findMediaSection(e);n.planBStopReceiving({offerRtpParameters:r}),this._replaceMediaSection(n)}sendSctpAssociation({offerMediaObject:e}){const r=new Rf.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(r)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const r=new Rf.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(r)}getSdp(){return this._sdpObject.origin.sessionVersion++,i9.write(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,r){if(typeof r=="string"){const n=this._midToIndex.get(r);if(n===void 0)throw new Error(`no media section found for reuseMid '${r}'`);const i=this._mediaSections[n];this._mediaSections[n]=e,this._midToIndex.delete(i.mid),this._midToIndex.set(e.mid,n),this._sdpObject.media[n]=e.getObject(),this._regenerateBundleMids()}else{const n=this._midToIndex.get(e.mid);if(n===void 0)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[n]=e,this._sdpObject.media[n]=e.getObject()}}_findMediaSection(e){const r=this._midToIndex.get(e);if(r===void 0)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[r]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}cn.RemoteSdp=o9;var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.parse=void 0;const a9=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function c9(t){const e=a9.exec(t||"");return e?{spatialLayers:Number(e[1]),temporalLayers:Number(e[2])}:{spatialLayers:1,temporalLayers:1}}xi.parse=c9;var l9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),f9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ka=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&l9(e,t,r);return f9(e,t),e};Object.defineProperty(nh,"__esModule",{value:!0});nh.Chrome111=void 0;const ss=Ka(Kt),u9=Ht,dw=Ka(Jt),ko=Ka(fe),Af=Ka(fr),hw=Ka(zn),d9=Ka(wo),h9=dr,p9=Br,m9=cn,g9=xi,ge=new u9.Logger("Chrome111"),pw={OS:1024,MIS:1024};class Xg extends p9.HandlerInterface{static createFactory(){return()=>new Xg}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(ge.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){ge.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=ss.parse(r.sdp),i=Af.extractRtpCapabilities({sdpObject:n});return d9.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return ge.debug("getNativeSctpCapabilities()"),{numStreams:pw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){this.assertNotClosed(),ge.debug("run()"),this._direction=e,this._remoteSdp=new m9.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:ko.getSendingRtpParameters("audio",f),video:ko.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:ko.getSendingRemoteRtpParameters("audio",f),video:ko.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(ge.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){this.assertNotClosed(),ge.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),ge.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});ge.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ge.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){if(this.assertNotClosed(),this.assertSendDirection(),ge.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1){r.forEach((b,S)=>{b.rid=`r${S}`});let p=1,y=1;for(const b of r){const S=b.scalabilityMode?(0,g9.parse)(b.scalabilityMode).temporalLayers:3;S>y&&(y=S)}for(const b of r)b.rid=`r${p++}`,b.scalabilityMode=`L1T${y}`}const s=dw.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=ko.reduceCodecs(s.codecs,i);const o=dw.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=ko.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r}),l=await this._pc.createOffer();let f=ss.parse(l.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),ge.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const u=c.mid;s.mid=u,f=ss.parse(this._pc.localDescription.sdp);const h=f.media[a.idx];if(s.rtcp.cname=Af.getCname({offerMediaObject:h}),!r)s.encodings=hw.getRtpEncodings({offerMediaObject:h});else if(r.length===1){const p=hw.getRtpEncodings({offerMediaObject:h});Object.assign(p[0],r[0]),s.encodings=p}else s.encodings=r;this._remoteSdp.send({offerMediaObject:h,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const g={type:"answer",sdp:this._remoteSdp.getSdp()};return ge.debug("send() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g),this._mapMidTransceiver.set(u,c),{localId:u,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),ge.debug("stopSending() [localId:%s]",e),this._closed)return;const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();ge.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),ge.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();ge.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),ge.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();ge.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?ge.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):ge.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),ge.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();ge.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),ge.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();ge.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};ge.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%pw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=ss.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),ge.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:f,streamId:u}=a;ge.debug("receive() [trackId:%s, kind:%s]",c,l);const h=f.mid||String(this._mapMidTransceiver.size);n.set(c,h),this._remoteSdp.receive({mid:h,kind:l,offerRtpParameters:f,streamId:u||f.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=ss.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,f=n.get(c),u=o.media.find(h=>String(h.mid)===f);Af.applyCodecParameters({offerRtpParameters:l,answerMediaObject:u})}s={type:"answer",sdp:ss.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),ge.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),f=this._pc.getTransceivers().find(u=>u.mid===l);if(f)this._mapMidTransceiver.set(l,f),r.push({localId:l,track:f.receiver.track,rtpReceiver:f.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){ge.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ge.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){ge.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ge.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){ge.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ge.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};ge.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=ss.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=ss.parse(this._pc.localDescription.sdp));const n=Af.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h9.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}nh.Chrome111=Xg;var ih={},v9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),y9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Wa=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&v9(e,t,r);return y9(e,t),e};Object.defineProperty(ih,"__esModule",{value:!0});ih.Chrome74=void 0;const qn=Wa(Kt),w9=Ht,mw=Wa(Jt),Do=Wa(fe),Cf=Wa(fr),Op=Wa(zn),_9=Wa(wo),b9=dr,S9=Br,E9=cn,x9=xi,pe=new w9.Logger("Chrome74"),gw={OS:1024,MIS:1024};class Zg extends S9.HandlerInterface{static createFactory(){return()=>new Zg}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(pe.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){pe.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=qn.parse(r.sdp),i=Cf.extractRtpCapabilities({sdpObject:n});return _9.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return pe.debug("getNativeSctpCapabilities()"),{numStreams:gw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){pe.debug("run()"),this._direction=e,this._remoteSdp=new E9.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Do.getSendingRtpParameters("audio",f),video:Do.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:Do.getSendingRemoteRtpParameters("audio",f),video:Do.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(pe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){this.assertNotClosed(),pe.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),pe.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});pe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};pe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};pe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();pe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),pe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1&&r.forEach((b,S)=>{b.rid=`r${S}`});const s=mw.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=Do.reduceCodecs(s.codecs,i);const o=mw.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Do.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});let l=await this._pc.createOffer(),f=qn.parse(l.sdp),u;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});let h=!1;const g=(0,x9.parse)((r||[{}])[0].scalabilityMode);r&&r.length===1&&g.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(pe.debug("send() | enabling legacy simulcast for VP9 SVC"),h=!0,f=qn.parse(l.sdp),u=f.media[a.idx],Op.addLegacySimulcast({offerMediaObject:u,numStreams:g.spatialLayers}),l={type:"offer",sdp:qn.write(f)}),pe.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const p=c.mid;if(s.mid=p,f=qn.parse(this._pc.localDescription.sdp),u=f.media[a.idx],s.rtcp.cname=Cf.getCname({offerMediaObject:u}),!r)s.encodings=Op.getRtpEncodings({offerMediaObject:u});else if(r.length===1){let b=Op.getRtpEncodings({offerMediaObject:u});Object.assign(b[0],r[0]),h&&(b=[b[0]]),s.encodings=b}else s.encodings=r;if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const b of s.encodings)b.scalabilityMode?b.scalabilityMode=`L1T${g.temporalLayers}`:b.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return pe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(p,c),{localId:p,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),pe.debug("stopSending() [localId:%s]",e),this._closed)return;const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();pe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};pe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),pe.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();pe.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};pe.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),pe.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();pe.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};pe.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?pe.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):pe.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),pe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();pe.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};pe.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),pe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();pe.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};pe.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};pe.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%gw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=qn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),pe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};pe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:f,streamId:u}=a;pe.debug("receive() [trackId:%s, kind:%s]",c,l);const h=f.mid||String(this._mapMidTransceiver.size);n.set(c,h),this._remoteSdp.receive({mid:h,kind:l,offerRtpParameters:f,streamId:u||f.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};pe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=qn.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,f=n.get(c),u=o.media.find(h=>String(h.mid)===f);Cf.applyCodecParameters({offerRtpParameters:l,answerMediaObject:u})}s={type:"answer",sdp:qn.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),pe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),f=this._pc.getTransceivers().find(u=>u.mid===l);if(f)this._mapMidTransceiver.set(l,f),r.push({localId:l,track:f.receiver.track,rtpReceiver:f.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){pe.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};pe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();pe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){pe.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};pe.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();pe.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){pe.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};pe.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();pe.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};pe.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};pe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=qn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}pe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=qn.parse(this._pc.localDescription.sdp));const n=Cf.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new b9.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}ih.Chrome74=Zg;var sh={},R9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zl=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&R9(e,t,r);return A9(e,t),e};Object.defineProperty(sh,"__esModule",{value:!0});sh.Chrome70=void 0;const fn=zl(Kt),C9=Ht,vw=zl(Jt),Oo=zl(fe),Tf=zl(fr),Np=zl(zn),T9=Br,P9=cn,I9=xi,xe=new C9.Logger("Chrome70"),yw={OS:1024,MIS:1024};class ev extends T9.HandlerInterface{static createFactory(){return()=>new ev}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(xe.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){xe.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=fn.parse(r.sdp);return Tf.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return xe.debug("getNativeSctpCapabilities()"),{numStreams:yw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){xe.debug("run()"),this._direction=e,this._remoteSdp=new P9.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Oo.getSendingRtpParameters("audio",f),video:Oo.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:Oo.getSendingRemoteRtpParameters("audio",f),video:Oo.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(xe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){xe.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(xe.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});xe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();xe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),xe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const s=vw.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=Oo.reduceCodecs(s.codecs,i);const o=vw.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Oo.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),f=fn.parse(l.sdp),u;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),r&&r.length>1&&(xe.debug("send() | enabling legacy simulcast"),f=fn.parse(l.sdp),u=f.media[a.idx],Np.addLegacySimulcast({offerMediaObject:u,numStreams:r.length}),l={type:"offer",sdp:fn.write(f)});let h=!1;const g=(0,I9.parse)((r||[{}])[0].scalabilityMode);if(r&&r.length===1&&g.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(xe.debug("send() | enabling legacy simulcast for VP9 SVC"),h=!0,f=fn.parse(l.sdp),u=f.media[a.idx],Np.addLegacySimulcast({offerMediaObject:u,numStreams:g.spatialLayers}),l={type:"offer",sdp:fn.write(f)}),xe.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),r){xe.debug("send() | applying given encodings");const b=c.sender.getParameters();for(let S=0;S<(b.encodings||[]).length;++S){const E=b.encodings[S],w=r[S];if(!w)break;b.encodings[S]=Object.assign(E,w)}await c.sender.setParameters(b)}const p=c.mid;if(s.mid=p,f=fn.parse(this._pc.localDescription.sdp),u=f.media[a.idx],s.rtcp.cname=Tf.getCname({offerMediaObject:u}),s.encodings=Np.getRtpEncodings({offerMediaObject:u}),r)for(let b=0;b<s.encodings.length;++b)r[b]&&Object.assign(s.encodings[b],r[b]);if(h&&(s.encodings=[s.encodings[0]]),s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const b of s.encodings)b.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return xe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(p,c),{localId:p,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){this.assertSendDirection(),xe.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();xe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?xe.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):xe.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),xe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();xe.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),xe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();xe.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};xe.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%yw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=fn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),xe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:f,streamId:u}=a;xe.debug("receive() [trackId:%s, kind:%s]",c,l);const h=f.mid||String(this._mapMidTransceiver.size);n.set(c,h),this._remoteSdp.receive({mid:h,kind:l,offerRtpParameters:f,streamId:u||f.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=fn.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,f=n.get(c),u=o.media.find(h=>String(h.mid)===f);Tf.applyCodecParameters({offerRtpParameters:l,answerMediaObject:u})}s={type:"answer",sdp:fn.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),xe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),f=this._pc.getTransceivers().find(u=>u.mid===l);if(!f)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,f),r.push({localId:l,track:f.receiver.track,rtpReceiver:f.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){xe.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();xe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};xe.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=fn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}xe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=fn.parse(this._pc.localDescription.sdp));const n=Tf.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}sh.Chrome70=ev;var oh={},Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.addLegacySimulcast=Gi.getRtpEncodings=void 0;function k9({offerMediaObject:t,track:e}){const r=new Set;for(const s of t.ssrcs||[]){if(s.attribute!=="msid")continue;if(s.value.split(" ")[1]===e.id){const a=s.id;r.add(a)}}if(r.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${e.id}]`);const n=new Map;for(const s of t.ssrcGroups||[]){if(s.semantics!=="FID")continue;let[o,a]=s.ssrcs.split(/\s+/);o=Number(o),a=Number(a),r.has(o)&&(r.delete(o),r.delete(a),n.set(o,a))}for(const s of r)n.set(s,null);const i=[];for(const[s,o]of n){const a={ssrc:s};o&&(a.rtx={ssrc:o}),i.push(a)}return i}Gi.getRtpEncodings=k9;function D9({offerMediaObject:t,track:e,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");let n,i,s;if(!(t.ssrcs||[]).find(u=>u.attribute!=="msid"?!1:u.value.split(" ")[1]===e.id?(n=u.id,s=u.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${e.id}]`);(t.ssrcGroups||[]).some(u=>{if(u.semantics!=="FID")return!1;const h=u.ssrcs.split(/\s+/);return Number(h[0])===n?(i=Number(h[1]),!0):!1});const a=t.ssrcs.find(u=>u.attribute==="cname"&&u.id===n);if(!a)throw new Error(`a=ssrc line with cname information not found [track.id:${e.id}]`);const c=a.value,l=[],f=[];for(let u=0;u<r;++u)l.push(n+u),i&&f.push(i+u);t.ssrcGroups=t.ssrcGroups||[],t.ssrcs=t.ssrcs||[],t.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(let u=0;u<l.length;++u){const h=l[u];t.ssrcs.push({id:h,attribute:"cname",value:c}),t.ssrcs.push({id:h,attribute:"msid",value:`${s} ${e.id}`})}for(let u=0;u<f.length;++u){const h=l[u],g=f[u];t.ssrcs.push({id:g,attribute:"cname",value:c}),t.ssrcs.push({id:g,attribute:"msid",value:`${s} ${e.id}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${h} ${g}`})}}Gi.addLegacySimulcast=D9;var O9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),N9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vl=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&O9(e,t,r);return N9(e,t),e};Object.defineProperty(oh,"__esModule",{value:!0});oh.Chrome67=void 0;const Jn=Vl(Kt),M9=Ht,ww=Vl(Jt),No=Vl(fe),Pf=Vl(fr),_w=Vl(Gi),L9=Br,j9=cn,ke=new M9.Logger("Chrome67"),bw={OS:1024,MIS:1024};class tv extends L9.HandlerInterface{static createFactory(){return()=>new tv}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(ke.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ke.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Jn.parse(r.sdp);return Pf.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return ke.debug("getNativeSctpCapabilities()"),{numStreams:bw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){ke.debug("run()"),this._direction=e,this._remoteSdp=new j9.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:No.getSendingRtpParameters("audio",f),video:No.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:No.getSendingRemoteRtpParameters("audio",f),video:No.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ke.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){ke.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(ke.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});ke.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ke.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};ke.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ke.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),ke.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&ke.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),o=Jn.parse(s.sdp),a;const c=ww.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=No.reduceCodecs(c.codecs);const l=ww.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(l.codecs=No.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&(ke.debug("send() | enabling simulcast"),o=Jn.parse(s.sdp),a=o.media.find(g=>g.type==="video"),_w.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Jn.write(o)}),ke.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Jn.parse(this._pc.localDescription.sdp),a=o.media.find(g=>g.type===e.kind),c.rtcp.cname=Pf.getCname({offerMediaObject:a}),c.encodings=_w.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let g=0;g<c.encodings.length;++g)r[g]&&Object.assign(c.encodings[g],r[g]);if(c.encodings.length>1&&c.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const g of c.encodings)g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};ke.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const u=String(this._nextSendLocalId);this._nextSendLocalId++;const h=this._pc.getSenders().find(g=>g.track===e);return this._mapSendLocalIdRtpSender.set(u,h),{localId:u,rtpParameters:c,rtpSender:h}}async stopSending(e){this.assertSendDirection(),ke.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(r),r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(e);const n=await this._pc.createOffer();ke.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){ke.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};ke.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?ke.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):ke.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.track;await n.replaceTrack(r),i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),ke.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{o<=r?s.active=!0:s.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),ke.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{i.encodings[o]={...s,...r}}),await n.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");return r.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};ke.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%bw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=Jn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),ke.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};ke.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[];for(const o of e){const{trackId:a,kind:c,rtpParameters:l,streamId:f}=o;ke.debug("receive() [trackId:%s, kind:%s]",a,c);const u=c;this._remoteSdp.receive({mid:u,kind:c,offerRtpParameters:l,streamId:f||l.rtcp.cname,trackId:a})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ke.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();const s=Jn.parse(i.sdp);for(const o of e){const{kind:a,rtpParameters:c}=o,l=a,f=s.media.find(u=>String(u.mid)===l);Pf.applyCodecParameters({offerRtpParameters:c,answerMediaObject:f})}i={type:"answer",sdp:Jn.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),ke.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const o of e){const{kind:a,trackId:c,rtpParameters:l}=o,f=c,u=a,h=this._pc.getReceivers().find(g=>g.track&&g.track.id===f);if(!h)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(f,{mid:u,rtpParameters:l,rtpReceiver:h}),r.push({localId:f,track:h.track,rtpReceiver:h})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){ke.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ke.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ke.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:r}=this._mapRecvLocalIdInfo.get(e)||{};if(!r)throw new Error("associated RTCRtpReceiver not found");return r.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};ke.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};ke.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=Jn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}ke.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Jn.parse(this._pc.localDescription.sdp));const n=Pf.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}oh.Chrome67=tv;var ah={},B9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),F9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hl=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&B9(e,t,r);return F9(e,t),e};Object.defineProperty(ah,"__esModule",{value:!0});ah.Chrome55=void 0;const Kn=Hl(Kt),U9=Ht,gc=dr,Sw=Hl(Jt),Mo=Hl(fe),If=Hl(fr),Ew=Hl(Gi),$9=Br,z9=cn,Ge=new U9.Logger("Chrome55"),xw={OS:1024,MIS:1024};class rv extends $9.HandlerInterface{static createFactory(){return()=>new rv}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(Ge.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Ge.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Kn.parse(r.sdp);return If.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Ge.debug("getNativeSctpCapabilities()"),{numStreams:xw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){Ge.debug("run()"),this._direction=e,this._remoteSdp=new z9.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:Mo.getSendingRtpParameters("audio",f),video:Mo.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:Mo.getSendingRemoteRtpParameters("audio",f),video:Mo.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Ge.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Ge.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Ge.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Ge.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Ge.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ge.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ge.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),Ge.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&Ge.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),o=Kn.parse(s.sdp),a;const c=Sw.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=Mo.reduceCodecs(c.codecs);const l=Sw.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(l.codecs=Mo.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&(Ge.debug("send() | enabling simulcast"),o=Kn.parse(s.sdp),a=o.media.find(h=>h.type==="video"),Ew.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Kn.write(o)}),Ge.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Kn.parse(this._pc.localDescription.sdp),a=o.media.find(h=>h.type===e.kind),c.rtcp.cname=If.getCname({offerMediaObject:a}),c.encodings=Ew.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let h=0;h<c.encodings.length;++h)r[h]&&Object.assign(c.encodings[h],r[h]);if(c.encodings.length>1&&c.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const h of c.encodings)h.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};Ge.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(u,e),{localId:u,rtpParameters:c}}async stopSending(e){this.assertSendDirection(),Ge.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdTrack.get(e);if(!r)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream);const n=await this._pc.createOffer();Ge.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){Ge.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};Ge.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){throw new gc.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,r){throw new gc.UnsupportedError(" not implemented")}async setRtpEncodingParameters(e,r){throw new gc.UnsupportedError("not supported")}async getSenderStats(e){throw new gc.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};Ge.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%xw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=Kn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),Ge.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Ge.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[];for(const o of e){const{trackId:a,kind:c,rtpParameters:l,streamId:f}=o;Ge.debug("receive() [trackId:%s, kind:%s]",a,c);const u=c;this._remoteSdp.receive({mid:u,kind:c,offerRtpParameters:l,streamId:f||l.rtcp.cname,trackId:a})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Ge.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();const s=Kn.parse(i.sdp);for(const o of e){const{kind:a,rtpParameters:c}=o,l=a,f=s.media.find(u=>String(u.mid)===l);If.applyCodecParameters({offerRtpParameters:c,answerMediaObject:f})}i={type:"answer",sdp:Kn.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),Ge.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const o of e){const{kind:a,trackId:c,rtpParameters:l}=o,f=a,u=c,h=o.streamId||l.rtcp.cname,p=this._pc.getRemoteStreams().find(y=>y.id===h).getTrackById(u);if(!p)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(u,{mid:f,rtpParameters:l}),r.push({localId:u,track:p})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Ge.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ge.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ge.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new gc.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};Ge.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};Ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=Kn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}Ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Kn.parse(this._pc.localDescription.sdp));const n=If.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}ah.Chrome55=rv;var ch={},V9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),H9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gl=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&V9(e,t,r);return H9(e,t),e};Object.defineProperty(ch,"__esModule",{value:!0});ch.Firefox60=void 0;const os=Gl(Kt),G9=Ht,Rw=dr,Mp=Gl(Jt),Lo=Gl(fe),kf=Gl(fr),Aw=Gl(zn),q9=Br,J9=cn,K9=xi,ve=new G9.Logger("Firefox60"),Cw={OS:16,MIS:2048};class nv extends q9.HandlerInterface{static createFactory(){return()=>new nv}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(ve.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){ve.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),r=document.createElement("canvas");r.getContext("2d");const i=r.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const s=e.addTransceiver(i,{direction:"sendrecv"}),o=s.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];o.encodings=a,await s.sender.setParameters(o);const c=await e.createOffer();try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}const l=os.parse(c.sdp);return kf.extractRtpCapabilities({sdpObject:l})}catch(s){try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}throw s}}async getNativeSctpCapabilities(){return ve.debug("getNativeSctpCapabilities()"),{numStreams:Cw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){this.assertNotClosed(),ve.debug("run()"),this._direction=e,this._remoteSdp=new J9.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Lo.getSendingRtpParameters("audio",f),video:Lo.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:Lo.getSendingRemoteRtpParameters("audio",f),video:Lo.getSendingRemoteRtpParameters("video",f)},this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ve.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){throw this.assertNotClosed(),new Rw.UnsupportedError("not supported")}async restartIce(e){if(this.assertNotClosed(),ve.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});ve.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ve.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};ve.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ve.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),ve.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&(r=Mp.clone(r,[]),r.length>1&&(r.forEach((p,y)=>{p.rid=`r${y}`}),r.reverse()));const s=Mp.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=Lo.reduceCodecs(s.codecs,i);const o=Mp.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Lo.reduceCodecs(o.codecs,i);const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(r){const p=a.sender.getParameters();p.encodings=r,await a.sender.setParameters(p)}const c=await this._pc.createOffer();let l=os.parse(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l});const f=(0,K9.parse)((r||[{}])[0].scalabilityMode);ve.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u=a.mid;s.mid=u,l=os.parse(this._pc.localDescription.sdp);const h=l.media[l.media.length-1];if(s.rtcp.cname=kf.getCname({offerMediaObject:h}),!r)s.encodings=Aw.getRtpEncodings({offerMediaObject:h});else if(r.length===1){const p=Aw.getRtpEncodings({offerMediaObject:h});Object.assign(p[0],r[0]),s.encodings=p}else s.encodings=r.reverse();if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const p of s.encodings)p.scalabilityMode?p.scalabilityMode=`L1T${f.temporalLayers}`:p.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const g={type:"answer",sdp:this._remoteSdp.getSdp()};return ve.debug("send() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g),this._mapMidTransceiver.set(u,a),{localId:u,rtpParameters:s,rtpSender:a.sender}}async stopSending(e){if(this.assertSendDirection(),ve.debug("stopSending() [localId:%s]",e),this._closed)return;const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.disableMediaSection(r.mid);const n=await this._pc.createOffer();ve.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};ve.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),ve.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();ve.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};ve.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),ve.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const n=await this._pc.createOffer();ve.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};ve.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?ve.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):ve.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),ve.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated transceiver not found");const i=n.sender.getParameters();r=i.encodings.length-1-r,i.encodings.forEach((a,c)=>{c>=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();ve.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};ve.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),ve.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();ve.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};ve.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};ve.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Cw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=os.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:f}),ve.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};ve.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:f,streamId:u}=a;ve.debug("receive() [trackId:%s, kind:%s]",c,l);const h=f.mid||String(this._mapMidTransceiver.size);n.set(c,h),this._remoteSdp.receive({mid:h,kind:l,offerRtpParameters:f,streamId:u||f.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ve.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=os.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,f=n.get(c),u=o.media.find(h=>String(h.mid)===f);kf.applyCodecParameters({offerRtpParameters:l,answerMediaObject:u}),s={type:"answer",sdp:os.write(o)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:o}),ve.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),f=this._pc.getTransceivers().find(u=>u.mid===l);if(!f)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,f),r.push({localId:l,track:f.receiver.track,rtpReceiver:f.receiver})}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){ve.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ve.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ve.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){ve.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ve.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ve.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){ve.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ve.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ve.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};ve.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};ve.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=os.parse(u.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:h})}ve.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=os.parse(this._pc.localDescription.sdp));const n=kf.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Rw.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}ch.Firefox60=nv;var lh={},W9=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Y9=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ya=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&W9(e,t,r);return Y9(e,t),e};Object.defineProperty(lh,"__esModule",{value:!0});lh.Safari12=void 0;const Wn=Ya(Kt),Q9=Ht,Tw=Ya(Jt),jo=Ya(fe),Df=Ya(fr),Pw=Ya(zn),X9=Ya(wo),Z9=dr,eD=Br,tD=cn,rD=xi,me=new Q9.Logger("Safari12"),Iw={OS:1024,MIS:1024};class iv extends eD.HandlerInterface{static createFactory(){return()=>new iv}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(me.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){me.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Wn.parse(r.sdp),i=Df.extractRtpCapabilities({sdpObject:n});return X9.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return me.debug("getNativeSctpCapabilities()"),{numStreams:Iw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){this.assertNotClosed(),me.debug("run()"),this._direction=e,this._remoteSdp=new tD.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:jo.getSendingRtpParameters("audio",f),video:jo.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:jo.getSendingRemoteRtpParameters("audio",f),video:jo.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(me.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){this.assertNotClosed(),me.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),me.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});me.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};me.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};me.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();me.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),me.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const s=Tw.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=jo.reduceCodecs(s.codecs,i);const o=Tw.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=jo.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),f=Wn.parse(l.sdp),u;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});const h=(0,rD.parse)((r||[{}])[0].scalabilityMode);r&&r.length>1&&(me.debug("send() | enabling legacy simulcast"),f=Wn.parse(l.sdp),u=f.media[a.idx],Pw.addLegacySimulcast({offerMediaObject:u,numStreams:r.length}),l={type:"offer",sdp:Wn.write(f)}),me.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const g=c.mid;if(s.mid=g,f=Wn.parse(this._pc.localDescription.sdp),u=f.media[a.idx],s.rtcp.cname=Df.getCname({offerMediaObject:u}),s.encodings=Pw.getRtpEncodings({offerMediaObject:u}),r)for(let y=0;y<s.encodings.length;++y)r[y]&&Object.assign(s.encodings[y],r[y]);if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const y of s.encodings)y.scalabilityMode?y.scalabilityMode=`L1T${h.temporalLayers}`:y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n});const p={type:"answer",sdp:this._remoteSdp.getSdp()};return me.debug("send() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._mapMidTransceiver.set(g,c),{localId:g,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;me.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();me.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};me.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),me.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();me.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};me.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),me.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const n=await this._pc.createOffer();me.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};me.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?me.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):me.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),me.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();me.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};me.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),me.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();me.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};me.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};me.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Iw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=Wn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),me.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};me.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:f,streamId:u}=a;me.debug("receive() [trackId:%s, kind:%s]",c,l);const h=f.mid||String(this._mapMidTransceiver.size);n.set(c,h),this._remoteSdp.receive({mid:h,kind:l,offerRtpParameters:f,streamId:u||f.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};me.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Wn.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,f=n.get(c),u=o.media.find(h=>String(h.mid)===f);Df.applyCodecParameters({offerRtpParameters:l,answerMediaObject:u})}s={type:"answer",sdp:Wn.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),me.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),f=this._pc.getTransceivers().find(u=>u.mid===l);if(!f)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,f),r.push({localId:l,track:f.receiver.track,rtpReceiver:f.receiver})}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){me.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};me.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();me.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){me.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};me.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();me.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){me.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};me.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();me.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};me.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};me.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=Wn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}me.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Wn.parse(this._pc.localDescription.sdp));const n=Df.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Z9.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}lh.Safari12=iv;var fh={},nD=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iD=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ql=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nD(e,t,r);return iD(e,t),e};Object.defineProperty(fh,"__esModule",{value:!0});fh.Safari11=void 0;const Yn=ql(Kt),sD=Ht,kw=ql(Jt),Bo=ql(fe),Of=ql(fr),Dw=ql(Gi),oD=Br,aD=cn,Ne=new sD.Logger("Safari11"),Ow={OS:1024,MIS:1024};class sv extends oD.HandlerInterface{static createFactory(){return()=>new sv}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(Ne.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Ne.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Yn.parse(r.sdp);return Of.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Ne.debug("getNativeSctpCapabilities()"),{numStreams:Ow}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){Ne.debug("run()"),this._direction=e,this._remoteSdp=new aD.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:Bo.getSendingRtpParameters("audio",f),video:Bo.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:Bo.getSendingRemoteRtpParameters("audio",f),video:Bo.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Ne.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Ne.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Ne.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Ne.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Ne.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ne.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ne.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),Ne.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&Ne.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),o=Yn.parse(s.sdp),a;const c=kw.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=Bo.reduceCodecs(c.codecs);const l=kw.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(l.codecs=Bo.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&(Ne.debug("send() | enabling simulcast"),o=Yn.parse(s.sdp),a=o.media.find(g=>g.type==="video"),Dw.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Yn.write(o)}),Ne.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Yn.parse(this._pc.localDescription.sdp),a=o.media.find(g=>g.type===e.kind),c.rtcp.cname=Of.getCname({offerMediaObject:a}),c.encodings=Dw.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let g=0;g<c.encodings.length;++g)r[g]&&Object.assign(c.encodings[g],r[g]);if(c.encodings.length>1&&c.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const g of c.encodings)g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};Ne.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const u=String(this._nextSendLocalId);this._nextSendLocalId++;const h=this._pc.getSenders().find(g=>g.track===e);return this._mapSendLocalIdRtpSender.set(u,h),{localId:u,rtpParameters:c,rtpSender:h}}async stopSending(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(e);const n=await this._pc.createOffer();Ne.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){Ne.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};Ne.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?Ne.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Ne.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.track;await n.replaceTrack(r),i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),Ne.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{o<=r?s.active=!0:s.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),Ne.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{i.encodings[o]={...s,...r}}),await n.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");return r.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};Ne.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Ow.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=Yn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),Ne.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Ne.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[];for(const o of e){const{trackId:a,kind:c,rtpParameters:l,streamId:f}=o;Ne.debug("receive() [trackId:%s, kind:%s]",a,c);const u=c;this._remoteSdp.receive({mid:u,kind:c,offerRtpParameters:l,streamId:f||l.rtcp.cname,trackId:a})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Ne.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();const s=Yn.parse(i.sdp);for(const o of e){const{kind:a,rtpParameters:c}=o,l=a,f=s.media.find(u=>String(u.mid)===l);Of.applyCodecParameters({offerRtpParameters:c,answerMediaObject:f})}i={type:"answer",sdp:Yn.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),Ne.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const o of e){const{kind:a,trackId:c,rtpParameters:l}=o,f=a,u=c,h=this._pc.getReceivers().find(g=>g.track&&g.track.id===u);if(!h)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(u,{mid:f,rtpParameters:l,rtpReceiver:h}),r.push({localId:u,track:h.track,rtpReceiver:h})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Ne.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ne.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ne.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:r}=this._mapRecvLocalIdInfo.get(e)||{};if(!r)throw new Error("associated RTCRtpReceiver not found");return r.getStats()}async pauseReceiving(e){}async resumeReceiving(e){}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};Ne.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};Ne.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=Yn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}Ne.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Yn.parse(this._pc.localDescription.sdp));const n=Of.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}fh.Safari11=sv;var uh={},Oa={},cD=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lD=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fD=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cD(e,t,r);return lD(e,t),e};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.mangleRtpParameters=Oa.getCapabilities=void 0;const r2=fD(Jt);function uD(){const t=RTCRtpReceiver.getCapabilities(),e=r2.clone(t,{});for(const r of e.codecs){if(r.channels=r.numChannels,delete r.numChannels,r.mimeType=r.mimeType||`${r.kind}/${r.name}`,r.parameters){const n=r.parameters;n.apt&&(n.apt=Number(n.apt)),n["packetization-mode"]&&(n["packetization-mode"]=Number(n["packetization-mode"]))}for(const n of r.rtcpFeedback||[])n.parameter||(n.parameter="")}return e}Oa.getCapabilities=uD;function dD(t){const e=r2.clone(t,{});e.mid&&(e.muxId=e.mid,delete e.mid);for(const r of e.codecs)r.channels&&(r.numChannels=r.channels,delete r.channels),r.mimeType&&!r.name&&(r.name=r.mimeType.split("/")[1]),delete r.mimeType;return e}Oa.mangleRtpParameters=dD;var hD=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pD=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ov=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hD(e,t,r);return pD(e,t),e};Object.defineProperty(uh,"__esModule",{value:!0});uh.Edge11=void 0;const mD=Ht,Lp=dr,Nf=ov(Jt),jp=ov(fe),Bp=ov(Oa),gD=Br,Xe=new mD.Logger("Edge11");class av extends gD.HandlerInterface{static createFactory(){return()=>new av}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){Xe.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const e of this._rtpSenders.values())try{e.stop()}catch{}for(const e of this._rtpReceivers.values())try{e.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return Xe.debug("getNativeRtpCapabilities()"),Bp.getCapabilities()}async getNativeSctpCapabilities(){return Xe.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){Xe.debug("run()"),this._sendingRtpParametersByKind={audio:jp.getSendingRtpParameters("audio",f),video:jp.getSendingRtpParameters("video",f)},this._remoteIceParameters=r,this._remoteIceCandidates=n,this._remoteDtlsParameters=i,this._cname=`CNAME-${Nf.generateRandomNumber()}`,this.setIceGatherer({iceServers:o,iceTransportPolicy:a}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new Lp.UnsupportedError("not supported")}async restartIce(e){if(Xe.debug("restartIce()"),this._remoteIceParameters=e,!!this._transportReady){Xe.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){Xe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),Xe.debug("send() | calling new RTCRtpSender()");const s=new RTCRtpSender(e,this._dtlsTransport),o=Nf.clone(this._sendingRtpParametersByKind[e.kind],{});o.codecs=jp.reduceCodecs(o.codecs,i);const a=o.codecs.some(f=>/.+\/rtx$/i.test(f.mimeType));r||(r=[{}]);for(const f of r)f.ssrc=Nf.generateRandomNumber(),a&&(f.rtx={ssrc:Nf.generateRandomNumber()});o.encodings=r,o.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=Bp.mangleRtpParameters(o);Xe.debug("send() | calling rtpSender.send() [params:%o]",c),await s.send(c);const l=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(l,s),{localId:l,rtpParameters:o,rtpSender:s}}async stopSending(e){Xe.debug("stopSending() [localId:%s]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{Xe.debug("stopSending() | calling rtpSender.stop()"),r.stop()}catch(n){throw Xe.warn("stopSending() | rtpSender.stop() failed:%o",n),n}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){r?Xe.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Xe.debug("replaceTrack() [localId:%s, no track]",e);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");n.setTrack(r)}async setMaxSpatialLayer(e,r){Xe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{o<=r?s.active=!0:s.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){Xe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{i.encodings[o]={...s,...r}}),await n.setParameters(i)}async getSenderStats(e){const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");return r.getStats()}async sendDataChannel(e){throw new Lp.UnsupportedError("not implemented")}async receive(e){const r=[];for(const n of e){const{trackId:i,kind:s}=n;Xe.debug("receive() [trackId:%s, kind:%s]",i,s)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const n of e){const{trackId:i,kind:s,rtpParameters:o}=n;Xe.debug("receive() | calling new RTCRtpReceiver()");const a=new RTCRtpReceiver(this._dtlsTransport,s);a.addEventListener("error",f=>{Xe.error('rtpReceiver "error" event [event:%o]',f)});const c=Bp.mangleRtpParameters(o);Xe.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await a.receive(c);const l=i;this._rtpReceivers.set(l,a),r.push({localId:l,track:a.track,rtpReceiver:a})}return r}async stopReceiving(e){for(const r of e){Xe.debug("stopReceiving() [localId:%s]",r);const n=this._rtpReceivers.get(r);if(!n)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(r);try{Xe.debug("stopReceiving() | calling rtpReceiver.stop()"),n.stop()}catch(i){Xe.warn("stopReceiving() | rtpReceiver.stop() failed:%o",i)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const r=this._rtpReceivers.get(e);if(!r)throw new Error("RTCRtpReceiver not found");return r.getStats()}async receiveDataChannel(e){throw new Lp.UnsupportedError("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:r}){const n=new RTCIceGatherer({iceServers:e||[],gatherPolicy:r||"all"});n.addEventListener("error",i=>{Xe.error('iceGatherer "error" event [event:%o]',i)});try{n.gather()}catch(i){Xe.debug("setIceGatherer() | iceGatherer.gather() failed: %s",i.toString())}this._iceGatherer=n}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("candidatepairchange",r=>{Xe.debug('iceTransport "candidatepairchange" event [pair:%o]',r.pair)}),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{Xe.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{Xe.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),e.state==="closed"&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",r=>{Xe.error('dtlsTransport "error" event [event:%o]',r)}),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){Xe.debug("setupTransport()");const r=this._dtlsTransport.getLocalParameters();r.role=e,await new Promise((n,i)=>{this.safeEmit("@connect",{dtlsParameters:r},n,i)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const n of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(n);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(n=>n.algorithm==="sha-256"||n.algorithm==="sha-384"||n.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}uh.Edge11=av;var dh={},vD=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yD=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qa=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vD(e,t,r);return yD(e,t),e};Object.defineProperty(dh,"__esModule",{value:!0});dh.ReactNativeUnifiedPlan=void 0;const Qn=Qa(Kt),wD=Ht,Nw=Qa(Jt),Fo=Qa(fe),Mf=Qa(fr),Fp=Qa(zn),_D=Qa(wo),bD=dr,SD=Br,ED=cn,xD=xi,de=new wD.Logger("ReactNativeUnifiedPlan"),Mw={OS:1024,MIS:1024};class cv extends SD.HandlerInterface{static createFactory(){return()=>new cv}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(de.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){de.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Qn.parse(r.sdp),i=Mf.extractRtpCapabilities({sdpObject:n});return _D.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return de.debug("getNativeSctpCapabilities()"),{numStreams:Mw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){this.assertNotClosed(),de.debug("run()"),this._direction=e,this._remoteSdp=new ED.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Fo.getSendingRtpParameters("audio",f),video:Fo.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:Fo.getSendingRemoteRtpParameters("audio",f),video:Fo.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(de.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){this.assertNotClosed(),de.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),de.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});de.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();de.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),de.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1&&r.forEach((b,S)=>{b.rid=`r${S}`});const s=Nw.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=Fo.reduceCodecs(s.codecs,i);const o=Nw.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Fo.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});let l=await this._pc.createOffer(),f=Qn.parse(l.sdp),u;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});let h=!1;const g=(0,xD.parse)((r||[{}])[0].scalabilityMode);r&&r.length===1&&g.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(de.debug("send() | enabling legacy simulcast for VP9 SVC"),h=!0,f=Qn.parse(l.sdp),u=f.media[a.idx],Fp.addLegacySimulcast({offerMediaObject:u,numStreams:g.spatialLayers}),l={type:"offer",sdp:Qn.write(f)}),de.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);let p=c.mid??void 0;if(p||de.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),s.mid=p,f=Qn.parse(this._pc.localDescription.sdp),u=f.media[a.idx],s.rtcp.cname=Mf.getCname({offerMediaObject:u}),!r)s.encodings=Fp.getRtpEncodings({offerMediaObject:u});else if(r.length===1){let b=Fp.getRtpEncodings({offerMediaObject:u});Object.assign(b[0],r[0]),h&&(b=[b[0]]),s.encodings=b}else s.encodings=r;if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const b of s.encodings)b.scalabilityMode?b.scalabilityMode=`L1T${g.temporalLayers}`:b.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return de.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),p||(p=c.mid,s.mid=p),this._mapMidTransceiver.set(p,c),{localId:p,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;de.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();de.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),de.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();de.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),de.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();de.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?de.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):de.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),de.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();de.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),de.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();de.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};de.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Mw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=Qn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),de.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:f,streamId:u}=a;de.debug("receive() [trackId:%s, kind:%s]",c,l);const h=f.mid||String(this._mapMidTransceiver.size);n.set(c,h),this._remoteSdp.receive({mid:h,kind:l,offerRtpParameters:f,streamId:u||f.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Qn.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,f=n.get(c),u=o.media.find(h=>String(h.mid)===f);Mf.applyCodecParameters({offerRtpParameters:l,answerMediaObject:u})}s={type:"answer",sdp:Qn.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),de.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),f=this._pc.getTransceivers().find(u=>u.mid===l);if(f)this._mapMidTransceiver.set(l,f),r.push({localId:l,track:f.receiver.track,rtpReceiver:f.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){de.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();de.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){de.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();de.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){de.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();de.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};de.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=Qn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}de.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Qn.parse(this._pc.localDescription.sdp));const n=Mf.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new bD.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}dh.ReactNativeUnifiedPlan=cv;var hh={},RD=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AD=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jl=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RD(e,t,r);return AD(e,t),e};Object.defineProperty(hh,"__esModule",{value:!0});hh.ReactNative=void 0;const Xn=Jl(Kt),CD=Ht,vc=dr,Up=Jl(Jt),Uo=Jl(fe),Lf=Jl(fr),Lw=Jl(Gi),TD=Br,PD=cn,$e=new CD.Logger("ReactNative"),jw={OS:1024,MIS:1024};class lv extends TD.HandlerInterface{static createFactory(){return()=>new lv}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if($e.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){$e.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Xn.parse(r.sdp);return Lf.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return $e.debug("getNativeSctpCapabilities()"),{numStreams:jw}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:f}){$e.debug("run()"),this._direction=e,this._remoteSdp=new PD.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:Uo.getSendingRtpParameters("audio",f),video:Uo.getSendingRtpParameters("video",f)},this._sendingRemoteRtpParametersByKind={audio:Uo.getSendingRemoteRtpParameters("audio",f),video:Uo.getSendingRemoteRtpParameters("video",f)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch($e.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){$e.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if($e.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});$e.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};$e.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};$e.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();$e.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),$e.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&$e.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),o=Xn.parse(s.sdp),a;const c=Up.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=Uo.reduceCodecs(c.codecs);const l=Up.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(l.codecs=Uo.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&($e.debug("send() | enabling simulcast"),o=Xn.parse(s.sdp),a=o.media.find(h=>h.type==="video"),Lw.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Xn.write(o)}),$e.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Xn.parse(this._pc.localDescription.sdp),a=o.media.find(h=>h.type===e.kind),c.rtcp.cname=Lf.getCname({offerMediaObject:a}),c.encodings=Lw.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let h=0;h<c.encodings.length;++h)r[h]&&Object.assign(c.encodings[h],r[h]);if(c.encodings.length>1&&(c.codecs[0].mimeType.toLowerCase()==="video/vp8"||c.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const h of c.encodings)h.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};$e.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(u,e),{localId:u,rtpParameters:c}}async stopSending(e){this.assertSendDirection(),$e.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdTrack.get(e);if(!r)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream);const n=await this._pc.createOffer();$e.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){$e.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};$e.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){throw new vc.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,r){throw new vc.UnsupportedError("not implemented")}async setRtpEncodingParameters(e,r){throw new vc.UnsupportedError("not implemented")}async getSenderStats(e){throw new vc.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};$e.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jw.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),f=Xn.parse(l.sdp),u=f.media.find(g=>g.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),$e.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const h={type:"answer",sdp:this._remoteSdp.getSdp()};$e.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:f}=a;$e.debug("receive() [trackId:%s, kind:%s]",c,l);const u=l;let h=a.streamId||f.rtcp.cname;$e.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),h+=`-hack-${Up.generateRandomNumber()}`,n.set(c,h),this._remoteSdp.receive({mid:u,kind:l,offerRtpParameters:f,streamId:h,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};$e.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Xn.parse(s.sdp);for(const a of e){const{kind:c,rtpParameters:l}=a,f=c,u=o.media.find(h=>String(h.mid)===f);Lf.applyCodecParameters({offerRtpParameters:l,answerMediaObject:u})}s={type:"answer",sdp:Xn.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),$e.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{kind:c,trackId:l,rtpParameters:f}=a,u=l,h=c,g=n.get(l),y=this._pc.getRemoteStreams().find(b=>b.id===g).getTrackById(u);if(!y)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(u,{mid:h,rtpParameters:f}),r.push({localId:u,track:y})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){$e.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};$e.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();$e.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new vc.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};$e.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};$e.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();if(!this._transportReady){const h=Xn.parse(u.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h})}$e.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Xn.parse(this._pc.localDescription.sdp));const n=Lf.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}hh.ReactNative=lv;var ID=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kD=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n2=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ID(e,t,r);return kD(e,t),e};Object.defineProperty(po,"__esModule",{value:!0});po.Device=po.detectDevice=void 0;const DD=x4,OD=Ht,ND=Ei,$o=dr,MD=n2(Jt),as=n2(fe),LD=jl,jD=nh,BD=ih,FD=sh,UD=oh,$D=ah,zD=ch,VD=lh,HD=fh,GD=uh,qD=dh,JD=hh,sr=new OD.Logger("Device");function i2(){var t,e,r;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(sr.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"){sr.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(sr.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(sr.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const n=navigator.userAgent,i=new DD.UAParser(n);sr.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",n,i.getResult());const s=i.getBrowser(),o=((t=s.name)==null?void 0:t.toLowerCase())??"",a=parseInt(s.major??"0"),l=((e=i.getEngine().name)==null?void 0:e.toLowerCase())??"",f=i.getOS(),u=((r=f.name)==null?void 0:r.toLowerCase())??"",h=parseFloat(f.version??"0"),g=u==="ios",p=["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(o),y=["firefox","mobile firefox","mobile focus"].includes(o),b=["safari","mobile safari"].includes(o),S=["edge"].includes(o);if((p||S)&&!g&&a>=111)return"Chrome111";if(p&&!g&&a>=74||S&&!g&&a>=88)return"Chrome74";if(p&&!g&&a>=70)return"Chrome70";if(p&&!g&&a>=67)return"Chrome67";if(p&&!g&&a>=55)return"Chrome55";if(y&&!g&&a>=60)return"Firefox60";if(y&&g&&h>=14.3)return"Safari12";if(b&&a>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(b&&a>=11)return"Safari11";if(S&&!g&&a>=11&&a<=18)return"Edge11";if(l==="webkit"&&g&&h>=14.3&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(l==="blink"){const E=n.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(E){const w=Number(E[1]);return w>=111?"Chrome111":w>=74?"Chrome74":w>=70?"Chrome70":w>=67?"Chrome67":"Chrome55"}else return"Chrome111"}else{sr.warn("detectDevice() | browser not supported [name:%s, version:%s]",o,a);return}}else{sr.warn("detectDevice() | unknown device");return}}po.detectDevice=i2;class KD{constructor({handlerName:e,handlerFactory:r,Handler:n}={}){if(this._loaded=!1,this._observer=new ND.EnhancedEventEmitter,sr.debug("constructor()"),n)if(sr.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof n=="string")e=n;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(e&&r)throw new TypeError("just one of handlerName or handlerInterface can be given");if(r)this._handlerFactory=r;else{if(e)sr.debug("constructor() | handler given: %s",e);else if(e=i2(),e)sr.debug("constructor() | detected handler: %s",e);else throw new $o.UnsupportedError("device not supported");switch(e){case"Chrome111":this._handlerFactory=jD.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=BD.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=FD.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=UD.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=$D.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=zD.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=VD.Safari12.createFactory();break;case"Safari11":this._handlerFactory=HD.Safari11.createFactory();break;case"Edge11":this._handlerFactory=GD.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=qD.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=JD.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const i=this._handlerFactory();this._handlerName=i.name,i.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new $o.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new $o.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){sr.debug("load() [routerRtpCapabilities:%o]",e),e=MD.clone(e,void 0);let r;try{if(this._loaded)throw new $o.InvalidStateError("already loaded");as.validateRtpCapabilities(e),r=this._handlerFactory();const n=await r.getNativeRtpCapabilities();sr.debug("load() | got native RTP capabilities:%o",n),as.validateRtpCapabilities(n),this._extendedRtpCapabilities=as.getExtendedRtpCapabilities(n,e),sr.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=as.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=as.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=as.getRecvRtpCapabilities(this._extendedRtpCapabilities),as.validateRtpCapabilities(this._recvRtpCapabilities),sr.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await r.getNativeSctpCapabilities(),sr.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),as.validateSctpCapabilities(this._sctpCapabilities),sr.debug("load() succeeded"),this._loaded=!0,r.close()}catch(n){throw r&&r.close(),n}}canProduce(e){if(this._loaded){if(e!=="audio"&&e!=="video")throw new TypeError(`invalid kind "${e}"`)}else throw new $o.InvalidStateError("not loaded");return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:f}){return sr.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:f})}createRecvTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:f}){return sr.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:f})}createTransport({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:f,appData:u}){if(this._loaded){if(typeof r!="string")throw new TypeError("missing id");if(typeof n!="object")throw new TypeError("missing iceParameters");if(Array.isArray(i)){if(typeof s!="object")throw new TypeError("missing dtlsParameters");if(o&&typeof o!="object")throw new TypeError("wrong sctpParameters");if(u&&typeof u!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new $o.InvalidStateError("not loaded");const h=new LD.Transport({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:f,appData:u,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",h),h}}po.Device=KD;var s2={},o2={};Object.defineProperty(o2,"__esModule",{value:!0});var a2={};Object.defineProperty(a2,"__esModule",{value:!0});(function(t){var e=G&&G.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=G&&G.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(po,t),r(jl,t),r(Bl,t),r(Fl,t),r(Ul,t),r($l,t),r(o2,t),r(a2,t),r(Br,t),r(dr,t)})(s2);(function(t){var e=G&&G.__createBinding||(Object.create?function(l,f,u,h){h===void 0&&(h=u);var g=Object.getOwnPropertyDescriptor(f,u);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[u]}}),Object.defineProperty(l,h,g)}:function(l,f,u,h){h===void 0&&(h=u),l[h]=f[u]}),r=G&&G.__setModuleDefault||(Object.create?function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}:function(l,f){l.default=f}),n=G&&G.__importStar||function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&e(f,l,u);return r(f,l),f},i=G&&G.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.parseScalabilityMode=t.detectDevice=t.Device=t.version=t.types=void 0;const s=i(Xd);t.debug=s.default;const o=po;Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return o.Device}}),Object.defineProperty(t,"detectDevice",{enumerable:!0,get:function(){return o.detectDevice}});const a=n(s2);t.types=a,t.version="3.6.98";var c=xi;Object.defineProperty(t,"parseScalabilityMode",{enumerable:!0,get:function(){return c.parse}})})(k5);let Bw=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const _i=Object.create(null);_i.open="0";_i.close="1";_i.ping="2";_i.pong="3";_i.message="4";_i.upgrade="5";_i.noop="6";const yu=Object.create(null);Object.keys(_i).forEach(t=>{yu[_i[t]]=t});const hm={type:"error",data:"parser error"},c2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",l2=typeof ArrayBuffer=="function",f2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,fv=({type:t,data:e},r,n)=>c2&&e instanceof Blob?r?n(e):Fw(e,n):l2&&(e instanceof ArrayBuffer||f2(e))?r?n(e):Fw(new Blob([e]),n):n(_i[t]+(e||"")),Fw=(t,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};function Uw(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let $p;function WD(t,e){if(c2&&t.data instanceof Blob)return t.data.arrayBuffer().then(Uw).then(e);if(l2&&(t.data instanceof ArrayBuffer||f2(t.data)))return e(Uw(t.data));fv(t,!1,r=>{$p||($p=new TextEncoder),e($p.encode(r))})}const $w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<$w.length;t++)kc[$w.charCodeAt(t)]=t;const YD=t=>{let e=t.length*.75,r=t.length,n,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),f=new Uint8Array(l);for(n=0;n<r;n+=4)s=kc[t.charCodeAt(n)],o=kc[t.charCodeAt(n+1)],a=kc[t.charCodeAt(n+2)],c=kc[t.charCodeAt(n+3)],f[i++]=s<<2|o>>4,f[i++]=(o&15)<<4|a>>2,f[i++]=(a&3)<<6|c&63;return l},QD=typeof ArrayBuffer=="function",uv=(t,e)=>{if(typeof t!="string")return{type:"message",data:u2(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:XD(t.substring(1),e)}:yu[r]?t.length>1?{type:yu[r],data:t.substring(1)}:{type:yu[r]}:hm},XD=(t,e)=>{if(QD){const r=YD(t);return u2(r,e)}else return{base64:!0,data:t}},u2=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},d2=String.fromCharCode(30),ZD=(t,e)=>{const r=t.length,n=new Array(r);let i=0;t.forEach((s,o)=>{fv(s,!1,a=>{n[o]=a,++i===r&&e(n.join(d2))})})},eO=(t,e)=>{const r=t.split(d2),n=[];for(let i=0;i<r.length;i++){const s=uv(r[i],e);if(n.push(s),s.type==="error")break}return n};function tO(){return new TransformStream({transform(t,e){WD(t,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(r)})}})}let zp;function jf(t){return t.reduce((e,r)=>e+r.length,0)}function Bf(t,e){if(t[0].length===e)return t.shift();const r=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)r[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function rO(t,e){zp||(zp=new TextDecoder);const r=[];let n=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if(jf(r)<1)break;const c=Bf(r,1);s=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(jf(r)<2)break;const c=Bf(r,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(jf(r)<8)break;const c=Bf(r,8),l=new DataView(c.buffer,c.byteOffset,c.length),f=l.getUint32(0);if(f>Math.pow(2,53-32)-1){a.enqueue(hm);break}i=f*Math.pow(2,32)+l.getUint32(4),n=3}else{if(jf(r)<i)break;const c=Bf(r,i);a.enqueue(uv(s?c:zp.decode(c),e)),n=0}if(i===0||i>t){a.enqueue(hm);break}}}})}const h2=4;function er(t){if(t)return nO(t)}function nO(t){for(var e in er.prototype)t[e]=er.prototype[e];return t}er.prototype.on=er.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};er.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};er.prototype.off=er.prototype.removeListener=er.prototype.removeAllListeners=er.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};er.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};er.prototype.emitReserved=er.prototype.emit;er.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};er.prototype.hasListeners=function(t){return!!this.listeners(t).length};const mn=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function p2(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const iO=mn.setTimeout,sO=mn.clearTimeout;function ph(t,e){e.useNativeTimers?(t.setTimeoutFn=iO.bind(mn),t.clearTimeoutFn=sO.bind(mn)):(t.setTimeoutFn=mn.setTimeout.bind(mn),t.clearTimeoutFn=mn.clearTimeout.bind(mn))}const oO=1.33;function aO(t){return typeof t=="string"?cO(t):Math.ceil((t.byteLength||t.size)*oO)}function cO(t){let e=0,r=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function lO(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function fO(t){let e={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class uO extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}class dv extends er{constructor(e){super(),this.writable=!1,ph(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,r,n){return super.emitReserved("error",new uO(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=uv(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const r=lO(e);return r.length?"?"+r:""}}const m2="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),pm=64,dO={};let zw=0,Ff=0,Vw;function Hw(t){let e="";do e=m2[t%pm]+e,t=Math.floor(t/pm);while(t>0);return e}function g2(){const t=Hw(+new Date);return t!==Vw?(zw=0,Vw=t):t+"."+Hw(zw++)}for(;Ff<pm;Ff++)dO[m2[Ff]]=Ff;let v2=!1;try{v2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const hO=v2;function y2(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||hO))return new XMLHttpRequest}catch{}if(!e)try{return new mn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function pO(){}const mO=function(){return new y2({xdomain:!1}).responseType!=null}();class gO extends dv{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const r=e&&e.forceBase64;this.supportsBinary=mO&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};eO(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ZD(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=g2()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new mi(this.uri(),e)}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}class mi extends er{constructor(e,r){super(),ph(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.data=r.data!==void 0?r.data:null,this.create()}create(){var e;const r=p2(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const n=this.xhr=new y2(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=mi.requestsCount++,mi.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=pO,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete mi.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}mi.requestsCount=0;mi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Gw);else if(typeof addEventListener=="function"){const t="onpagehide"in mn?"pagehide":"unload";addEventListener(t,Gw,!1)}}function Gw(){for(let t in mi.requests)mi.requests.hasOwnProperty(t)&&mi.requests[t].abort()}const hv=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0))(),Uf=mn.WebSocket||mn.MozWebSocket,qw=!0,vO="arraybuffer",Jw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yO extends dv{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),r=this.opts.protocols,n=Jw?{}:p2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=qw&&!Jw?r?new Uf(e,r):new Uf(e):new Uf(e,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;fv(n,this.supportsBinary,s=>{const o={};try{qw&&this.ws.send(s)}catch{}i&&hv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=g2()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}check(){return!!Uf}}class wO extends dv{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const r=rO(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),i=tO();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{n.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;this.writer.write(n).then(()=>{i&&hv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const _O={websocket:yO,webtransport:wO,polling:gO},bO=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,SO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mm(t){const e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=bO.exec(t||""),s={},o=14;for(;o--;)s[SO[o]]=i[o]||"";return r!=-1&&n!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=EO(s,s.path),s.queryKey=xO(s,s.query),s}function EO(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function xO(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}let w2=class Go extends er{constructor(e,r={}){super(),this.binaryType=vO,this.writeBuffer=[],e&&typeof e=="object"&&(r=e,e=null),e?(e=mm(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=mm(r.host).host),ph(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fO(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=h2,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new _O[e](n)}open(){let e;if(this.opts.rememberUpgrade&&Go.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),n=!1;Go.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",u=>{if(!n)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Go.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function s(){n||(n=!0,f(),r.close(),r=null)}const o=u=>{const h=new Error("probe error: "+u);h.transport=r.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function c(){o("socket closed")}function l(u){r&&u.name!==r.name&&s()}const f=()=>{r.removeListener("open",i),r.removeListener("error",o),r.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};r.once("open",i),r.once("error",o),r.once("close",a),this.once("close",c),this.once("upgrading",l),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",Go.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=aO(i)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(e,r,n){return this.sendPacket("message",e,r,n),this}send(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:e,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){Go.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const r=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}};w2.protocol=h2;function RO(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=mm(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+e,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const AO=typeof ArrayBuffer=="function",CO=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,_2=Object.prototype.toString,TO=typeof Blob=="function"||typeof Blob<"u"&&_2.call(Blob)==="[object BlobConstructor]",PO=typeof File=="function"||typeof File<"u"&&_2.call(File)==="[object FileConstructor]";function pv(t){return AO&&(t instanceof ArrayBuffer||CO(t))||TO&&t instanceof Blob||PO&&t instanceof File}function wu(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(wu(t[r]))return!0;return!1}if(pv(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return wu(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&wu(t[r]))return!0;return!1}function IO(t){const e=[],r=t.data,n=t;return n.data=gm(r,e),n.attachments=e.length,{packet:n,buffers:e}}function gm(t,e){if(!t)return t;if(pv(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=gm(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=gm(t[n],e));return r}return t}function kO(t,e){return t.data=vm(t.data,e),delete t.attachments,t}function vm(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=vm(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=vm(t[r],e));return t}const DO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],OO=5;var Me;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Me||(Me={}));class NO{constructor(e){this.replacer=e}encode(e){return(e.type===Me.EVENT||e.type===Me.ACK)&&wu(e)?this.encodeAsBinary({type:e.type===Me.EVENT?Me.BINARY_EVENT:Me.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===Me.BINARY_EVENT||e.type===Me.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=IO(e),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}function Kw(t){return Object.prototype.toString.call(t)==="[object Object]"}class mv extends er{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const n=r.type===Me.BINARY_EVENT;n||r.type===Me.BINARY_ACK?(r.type=n?Me.EVENT:Me.ACK,this.reconstructor=new MO(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(pv(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(Me[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Me.BINARY_EVENT||n.type===Me.BINARY_ACK){const s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const o=e.substring(s,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(s,r)}else n.nsp="/";const i=e.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}n.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){const s=this.tryParse(e.substr(r));if(mv.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case Me.CONNECT:return Kw(r);case Me.DISCONNECT:return r===void 0;case Me.CONNECT_ERROR:return typeof r=="string"||Kw(r);case Me.EVENT:case Me.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&DO.indexOf(r[0])===-1);case Me.ACK:case Me.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class MO{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=kO(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const LO=Object.freeze(Object.defineProperty({__proto__:null,Decoder:mv,Encoder:NO,get PacketType(){return Me},protocol:OO},Symbol.toStringTag,{value:"Module"}));function Mn(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const jO=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class b2 extends er{constructor(e,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Mn(e,"open",this.onopen.bind(this)),Mn(e,"packet",this.onpacket.bind(this)),Mn(e,"error",this.onerror.bind(this)),Mn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(jO.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const n={type:Me.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const o=this.ids++,a=r.pop();this._registerAckCallback(o,a),n.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=r;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(s),r.apply(this,[null,...o])}}emitWithAck(e,...r){const n=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{r.push((o,a)=>n?o?s(o):i(a):i(o)),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Me.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Me.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Me.EVENT:case Me.BINARY_EVENT:this.onevent(e);break;case Me.ACK:case Me.BINARY_ACK:this.onack(e);break;case Me.DISCONNECT:this.ondisconnect();break;case Me.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:Me.ACK,id:e,data:i}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(r.apply(this,e.data),delete this.acks[e.id])}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Me.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,e.data)}}}function Xa(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Xa.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+r:t-r}return Math.min(t,this.max)|0};Xa.prototype.reset=function(){this.attempts=0};Xa.prototype.setMin=function(t){this.ms=t};Xa.prototype.setMax=function(t){this.max=t};Xa.prototype.setJitter=function(t){this.jitter=t};class ym extends er{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,ph(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Xa({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const i=r.parser||LO;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new w2(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Mn(r,"open",function(){n.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Mn(r,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),r.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Mn(e,"ping",this.onping.bind(this)),Mn(e,"data",this.ondata.bind(this)),Mn(e,"error",this.onerror.bind(this)),Mn(e,"close",this.onclose.bind(this)),Mn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){hv(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new b2(this,e,r),this.nsps[e]=n),n}_destroy(e){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const yc={};function _u(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const r=RO(t,e.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=yc[i]&&s in yc[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new ym(n,e):(yc[i]||(yc[i]=new ym(n,e)),c=yc[i]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}Object.assign(_u,{Manager:ym,Socket:b2,io:_u,connect:_u});function Se(){Se=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(A,m,d){A[m]=d.value},i=typeof Symbol=="function"?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(A,m,d){return Object.defineProperty(A,m,{value:d,enumerable:!0,configurable:!0,writable:!0}),A[m]}try{c({},"")}catch{c=function(m,d,v){return m[d]=v}}function l(A,m,d,v){var R=m&&m.prototype instanceof h?m:h,C=Object.create(R.prototype),x=new F(v||[]);return n(C,"_invoke",{value:D(A,d,x)}),C}function f(A,m,d){try{return{type:"normal",arg:A.call(m,d)}}catch(v){return{type:"throw",arg:v}}}t.wrap=l;var u={};function h(){}function g(){}function p(){}var y={};c(y,s,function(){return this});var b=Object.getPrototypeOf,S=b&&b(b($([])));S&&S!==e&&r.call(S,s)&&(y=S);var E=p.prototype=h.prototype=Object.create(y);function w(A){["next","throw","return"].forEach(function(m){c(A,m,function(d){return this._invoke(m,d)})})}function T(A,m){function d(R,C,x,P){var M=f(A[R],A,C);if(M.type!=="throw"){var O=M.arg,_=O.value;return _&&typeof _=="object"&&r.call(_,"__await")?m.resolve(_.__await).then(function(L){d("next",L,x,P)},function(L){d("throw",L,x,P)}):m.resolve(_).then(function(L){O.value=L,x(O)},function(L){return d("throw",L,x,P)})}P(M.arg)}var v;n(this,"_invoke",{value:function(R,C){function x(){return new m(function(P,M){d(R,C,P,M)})}return v=v?v.then(x,x):x()}})}function D(A,m,d){var v="suspendedStart";return function(R,C){if(v==="executing")throw new Error("Generator is already running");if(v==="completed"){if(R==="throw")throw C;return U()}for(d.method=R,d.arg=C;;){var x=d.delegate;if(x){var P=B(x,d);if(P){if(P===u)continue;return P}}if(d.method==="next")d.sent=d._sent=d.arg;else if(d.method==="throw"){if(v==="suspendedStart")throw v="completed",d.arg;d.dispatchException(d.arg)}else d.method==="return"&&d.abrupt("return",d.arg);v="executing";var M=f(A,m,d);if(M.type==="normal"){if(v=d.done?"completed":"suspendedYield",M.arg===u)continue;return{value:M.arg,done:d.done}}M.type==="throw"&&(v="completed",d.method="throw",d.arg=M.arg)}}}function B(A,m){var d=m.method,v=A.iterator[d];if(v===void 0)return m.delegate=null,d==="throw"&&A.iterator.return&&(m.method="return",m.arg=void 0,B(A,m),m.method==="throw")||d!=="return"&&(m.method="throw",m.arg=new TypeError("The iterator does not provide a '"+d+"' method")),u;var R=f(v,A.iterator,m.arg);if(R.type==="throw")return m.method="throw",m.arg=R.arg,m.delegate=null,u;var C=R.arg;return C?C.done?(m[A.resultName]=C.value,m.next=A.nextLoc,m.method!=="return"&&(m.method="next",m.arg=void 0),m.delegate=null,u):C:(m.method="throw",m.arg=new TypeError("iterator result is not an object"),m.delegate=null,u)}function j(A){var m={tryLoc:A[0]};1 in A&&(m.catchLoc=A[1]),2 in A&&(m.finallyLoc=A[2],m.afterLoc=A[3]),this.tryEntries.push(m)}function N(A){var m=A.completion||{};m.type="normal",delete m.arg,A.completion=m}function F(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(j,this),this.reset(!0)}function $(A){if(A){var m=A[s];if(m)return m.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var d=-1,v=function R(){for(;++d<A.length;)if(r.call(A,d))return R.value=A[d],R.done=!1,R;return R.value=void 0,R.done=!0,R};return v.next=v}}return{next:U}}function U(){return{value:void 0,done:!0}}return g.prototype=p,n(E,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:g,configurable:!0}),g.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(A){var m=typeof A=="function"&&A.constructor;return!!m&&(m===g||(m.displayName||m.name)==="GeneratorFunction")},t.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,p):(A.__proto__=p,c(A,a,"GeneratorFunction")),A.prototype=Object.create(E),A},t.awrap=function(A){return{__await:A}},w(T.prototype),c(T.prototype,o,function(){return this}),t.AsyncIterator=T,t.async=function(A,m,d,v,R){R===void 0&&(R=Promise);var C=new T(l(A,m,d,v),R);return t.isGeneratorFunction(m)?C:C.next().then(function(x){return x.done?x.value:C.next()})},w(E),c(E,a,"Generator"),c(E,s,function(){return this}),c(E,"toString",function(){return"[object Generator]"}),t.keys=function(A){var m=Object(A),d=[];for(var v in m)d.push(v);return d.reverse(),function R(){for(;d.length;){var C=d.pop();if(C in m)return R.value=C,R.done=!1,R}return R.done=!0,R}},t.values=$,F.prototype={constructor:F,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!A)for(var m in this)m.charAt(0)==="t"&&r.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=void 0)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var m=this;function d(M,O){return C.type="throw",C.arg=A,m.next=M,O&&(m.method="next",m.arg=void 0),!!O}for(var v=this.tryEntries.length-1;v>=0;--v){var R=this.tryEntries[v],C=R.completion;if(R.tryLoc==="root")return d("end");if(R.tryLoc<=this.prev){var x=r.call(R,"catchLoc"),P=r.call(R,"finallyLoc");if(x&&P){if(this.prev<R.catchLoc)return d(R.catchLoc,!0);if(this.prev<R.finallyLoc)return d(R.finallyLoc)}else if(x){if(this.prev<R.catchLoc)return d(R.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return d(R.finallyLoc)}}}},abrupt:function(A,m){for(var d=this.tryEntries.length-1;d>=0;--d){var v=this.tryEntries[d];if(v.tryLoc<=this.prev&&r.call(v,"finallyLoc")&&this.prev<v.finallyLoc){var R=v;break}}R&&(A==="break"||A==="continue")&&R.tryLoc<=m&&m<=R.finallyLoc&&(R=null);var C=R?R.completion:{};return C.type=A,C.arg=m,R?(this.method="next",this.next=R.finallyLoc,u):this.complete(C)},complete:function(A,m){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&m&&(this.next=m),u},finish:function(A){for(var m=this.tryEntries.length-1;m>=0;--m){var d=this.tryEntries[m];if(d.finallyLoc===A)return this.complete(d.completion,d.afterLoc),N(d),u}},catch:function(A){for(var m=this.tryEntries.length-1;m>=0;--m){var d=this.tryEntries[m];if(d.tryLoc===A){var v=d.completion;if(v.type==="throw"){var R=v.arg;N(d)}return R}}throw new Error("illegal catch attempt")},delegateYield:function(A,m,d){return this.delegate={iterator:$(A),resultName:m,nextLoc:d},this.method==="next"&&(this.arg=void 0),u}},t}function Ww(t,e,r,n,i,s,o){try{var a=t[s](o),c=a.value}catch(l){r(l);return}a.done?e(c):Promise.resolve(c).then(n,i)}function Yt(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(c){Ww(s,n,i,o,a,"next",c)}function a(c){Ww(s,n,i,o,a,"throw",c)}o(void 0)})}}function BO(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function zo(t,e){if(t==null)return{};var r=BO(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FO(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fs(t){var e=FO(t,"string");return typeof e=="symbol"?e:String(e)}function Ee(t,e,r){return e=fs(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ue(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yw(Object(r),!0).forEach(function(n){Ee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wm(t,e){return wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wm(t,e)}function S2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wm(t,e)}function fd(t){return fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fd(t)}function UO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $O(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kt(t)}function E2(t){var e=UO();return function(){var n=fd(t),i;if(e){var s=fd(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return $O(this,i)}}function gv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fs(n.key),n)}}function vv(t,e,r){return e&&Qw(t.prototype,e),r&&Qw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var zO="https://sdk-sushi.huddle01.com",VO="https://sdk-iriko.huddle01.com",HO=function(){var t=Yt(Se().mark(function e(){var r,n;return Se().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Ia.post("".concat(VO,"/trpc/auth.guest"));case 3:return r=s.sent,n=r.data.result.data.json.accessToken,console.log({accessToken:n}),s.abrupt("return",n);case 9:s.prev=9,s.t0=s.catch(0),console.log({error:s.t0});case 12:case"end":return s.stop()}},e,null,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),GO=[{scaleResolutionDownBy:4,maxBitrate:3e5,rid:"r0",scalabilityMode:"S1T3",maxFramerate:15},{scaleResolutionDownBy:2,maxBitrate:6e5,rid:"r1",scalabilityMode:"S1T3",maxFramerate:30},{scaleResolutionDownBy:1,maxBitrate:9e6,rid:"r2",scalabilityMode:"S1T3",maxFramerate:30}],qO=[{maxBitrate:1e6,networkPriority:"high",maxFramerate:30,dtx:!0}],JO={cam:GO,"share-video":qO,mic:void 0,"share-audio":void 0},KO={audio:{opusStereo:!0,opusFec:!0,opusDtx:!0},video:{videoGoogleStartBitrate:1e3}},WO=function(){function t(){gv(this,t),Ee(this,"_isRecorder",!1),Ee(this,"_handleConnectError",function(e,r){console.info("Connection Error"),console.error({error:e}),r({type:"CLIENT_LOBBY_FAILED"})})}return vv(t,[{key:"_handleConnect",value:function(r){this._machineCB=r,console.log("EventHandler.handleConnect() | EventHandler.ts",this.socket),console.log({this:this,func:"_handleConnect",roomId:this.roomId,meId:this.meId,socket:this.socket}),this._machineCB({type:"CLIENT_LOBBY_JOINED",peerId:this.meId})}},{key:"_handleDisconnect",value:function(r){r({type:"CLIENT_LOBBY_FAILED"}),console.log("EventHandler.handleDisconnect() | EventHandler.ts",this.socket)}}]),t}(),YO=function(t){S2(r,t);var e=E2(r);function r(){var n;return gv(this,r),n=e.call(this),Ee(kt(n),"_consumers",new Map),Ee(kt(n),"_peersConsumers",new Map),Ee(kt(n),"_turn",[{username:"test-turn",urls:"turn:turn.huddle01.com:443?transport=udp",credential:"test-turn"},{username:"test-turn",urls:"turn:turn.huddle01.com:443?transport=tcp",credential:"test-turn"}]),Ee(kt(n),"_produce",function(){var i=Yt(Se().mark(function s(o,a){var c,l;return Se().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n._sendTransport){u.next=3;break}return console.warn("produce() | sendTransport is undefined"),u.abrupt("return");case 3:if(n._device&&n._device.rtpCapabilities.codecs){u.next=5;break}return u.abrupt("return");case 5:return c={cam:n._device.rtpCapabilities.codecs.find(function(h){return h.mimeType.toLowerCase()==="video/h264"&&h.parameters["profile-level-id"]==="42e034"}),"share-video":n._device.rtpCapabilities.codecs.find(function(h){return h.mimeType.toLowerCase()==="video/h264"&&h.parameters["profile-level-id"]==="42e034"}),mic:void 0,"share-audio":void 0},u.next=8,n._sendTransport.produce({track:o,encodings:JO[a],codecOptions:KO[o.kind],codec:c[a],stopTracks:!1,zeroRtpOnPause:!0,disableTrackOnPause:!0,appData:{type:a,share:a==="share-audio"||a==="share-video"}});case 8:return l=u.sent,u.abrupt("return",l);case 10:case"end":return u.stop()}},s)}));return function(s,o){return i.apply(this,arguments)}}()),Ee(kt(n),"_produceAudioStream",function(){var i=Yt(Se().mark(function s(o,a){var c,l;return Se().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n._machineCB=a,console.log("produceAudioStream() | Producing Audio Stream"),u.prev=2,o){u.next=6;break}return console.log("produceAudioStream() | stream is undefined"),u.abrupt("return");case 6:if(!n._audioProducer){u.next=9;break}return console.log("handleCreateWebRTC() | Audio Producer already exists"),u.abrupt("return");case 9:if(c=o.getAudioTracks()[0],c){u.next=13;break}return console.log("enableMic() | Track is undefined"),u.abrupt("return");case 13:return u.next=15,n._produce(c,"mic");case 15:if(l=u.sent,l){u.next=19;break}return console.log("enableMic() | Producer create error"),u.abrupt("return");case 19:if(l.track){u.next=22;break}return console.log("enableMic() | Producer track is undefined"),u.abrupt("return");case 22:n._audioProducer=l,n._audioProducer.on("trackended",function(){console.log("produceAudioStream() | trackended for mic"),n._stopAudioProducer(a).catch(console.error)}),n._audioProducer.on("transportclose",function(){console.log("produceAudioStream() | transportclose for mic"),n._stopAudioProducer(a).catch(console.error)}),n._audioProducer.on("@replacetrack",function(){console.log("produceAudioStream() | @replacetrack for mic")}),n._audioProducer.on("@close",function(){console.log("produceAudioStream() | @close for mic"),n._stopAudioProducer(a).catch(console.error)}),u.next=33;break;case 29:throw u.prev=29,u.t0=u.catch(2),console.error("Error enabling mic",{error:u.t0}),new Error("Error enabling mic");case 33:case"end":return u.stop()}},s,null,[[2,29]])}));return function(s,o){return i.apply(this,arguments)}}()),Ee(kt(n),"_produceVideoStream",function(){var i=Yt(Se().mark(function s(o,a){var c,l;return Se().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n._machineCB=a,console.log("produceVideoStream() | Producing Video Stream"),u.prev=2,o){u.next=6;break}return console.log("produceVideoStream() | stream is undefined"),u.abrupt("return",Promise.reject());case 6:if(!n._videoProducer){u.next=9;break}return console.log("handleCreateWebRTC() | Video Producer already exists"),u.abrupt("return");case 9:if(c=o.getVideoTracks()[0],c){u.next=13;break}return console.log("produceVideoStream() | Track is undefined"),u.abrupt("return");case 13:return u.next=15,n._produce(c,"cam");case 15:if(l=u.sent,l){u.next=19;break}return console.log("produceVideoStream() | Producer create error"),u.abrupt("return");case 19:if(l.track){u.next=22;break}return console.log("produceVideoStream() | Producer track is undefined"),u.abrupt("return");case 22:n._videoProducer=l,n._videoProducer.on("trackended",function(){console.log("enabelCam() | trackended for cam"),n._stopVideoProducer(a).catch(console.error)}),n._videoProducer.on("transportclose",function(){console.log("produceVideoStream() | transportclose for cam"),n._stopVideoProducer(a).catch(console.error)}),n._videoProducer.on("@replacetrack",function(h,g,p){console.log("produceVideoStream() | @replacetrack for cam")}),n._videoProducer.on("@close",function(){console.log("produceVideoStream() | @close for cam"),n._stopVideoProducer(a).catch(console.error)}),u.next=32;break;case 29:u.prev=29,u.t0=u.catch(2),console.error("Error enabling cam",{error:u.t0});case 32:case"end":return u.stop()}},s,null,[[2,29]])}));return function(s,o){return i.apply(this,arguments)}}()),Ee(kt(n),"requestStopAudioProducer",Yt(Se().mark(function i(){return Se().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(console.warn("requestStopAudioProducer()"),o.prev=1,n._audioProducer){o.next=5;break}return console.warn("requestStopAudioProducer() | audioProducer is undefined"),o.abrupt("return");case 5:n.socket.emit("close-producer",{peerId:n.meId,producerId:n._audioProducer.appData.momoProducerId,roomId:n.roomId,appData:{type:"mic"}}),n._audioProducer.close(),o.next=11;break;case 9:o.prev=9,o.t0=o.catch(1);case 11:case"end":return o.stop()}},i,null,[[1,9]])}))),Ee(kt(n),"_stopAudioProducer",function(){var i=Yt(Se().mark(function s(o){return Se().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(n._machineCB=o,console.log("stopAudioProducer() | Stopping audio producer"),c.prev=2,n._audioProducer){c.next=6;break}return console.warn("stopAudioProducer() | audioProducer is undefined"),c.abrupt("return");case 6:if(n._audioProducer=void 0,n._machineCB("CLIENT_MIC_PRODUCER_STOPPED"),n._audioProducer.appData.momoProducerId){c.next=11;break}return console.warn("stopAudioProducer() | momoProducerId is undefined"),c.abrupt("return");case 11:c.next=17;break;case 13:c.prev=13,c.t0=c.catch(2),console.error("Error stopping audio producer"),console.error({error:c.t0});case 17:case"end":return c.stop()}},s,null,[[2,13]])}));return function(s){return i.apply(this,arguments)}}()),Ee(kt(n),"requestStopVideoProducer",Yt(Se().mark(function i(){return Se().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(console.warn("requestStopVideoProducer()"),o.prev=1,n._videoProducer){o.next=5;break}return console.warn("requestStopVideoProducer() | videoProducer is undefined"),o.abrupt("return");case 5:n.socket.emit("close-producer",{peerId:n.meId,producerId:n._videoProducer.appData.momoProducerId,roomId:n.roomId,appData:{type:"cam"}}),n._videoProducer.close(),o.next=11;break;case 9:o.prev=9,o.t0=o.catch(1);case 11:case"end":return o.stop()}},i,null,[[1,9]])}))),Ee(kt(n),"_stopVideoProducer",function(){var i=Yt(Se().mark(function s(o){return Se().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(n._machineCB=o,console.log("stopVideoProducer() | Stopping video producer"),c.prev=2,n._videoProducer){c.next=6;break}return console.warn("stopVideoProducer() | videoProducer is undefined"),c.abrupt("return");case 6:if(n._videoProducer=void 0,n._machineCB("CLIENT_CAM_PRODUCER_STOPPED"),n._videoProducer.appData.momoProducerId){c.next=11;break}return console.warn("stopVideoProducer() | momoProducerId is undefined"),c.abrupt("return");case 11:c.next=17;break;case 13:c.prev=13,c.t0=c.catch(2),console.error("Error stopping video producer"),console.error({error:c.t0});case 17:case"end":return c.stop()}},s,null,[[2,13]])}));return function(s){return i.apply(this,arguments)}}()),Ee(kt(n),"_handleJoinSuccess",function(){var i=Yt(Se().mark(function s(o,a){var c,l,f,u;return Se().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return n._machineCB=a,g.prev=1,console.log("join-success",o),n._device=new k5.Device,g.next=6,n._device.load({routerRtpCapabilities:o.routerRTPCapabilities});case 6:n.socket.emit("create-webrtc-transport",{peerId:o.peerId,roomId:o.roomId,sctpCapabilities:n._device.sctpCapabilities}),c=o.roomMetadata,l=c.peerIds,f=c.peerMetaData,u=o.role,console.log({role:u}),n._machineCB({type:"CLIENT_ME_JOINED",role:u}),console.log("handleJoinSuccess() | peerIds",l),l.map(function(p){var y=f[p];y||console.error("handleJoinSuccess() | No Peer Data Found");var b={peerId:p,role:y.role,displayName:(y==null?void 0:y.displayName)||"No Name Found",avatarUrl:(y==null?void 0:y.avatarUrl)||"/avatars/0.png",joinStatus:"joined:webrtc-creating",isHandRaised:(y==null?void 0:y.isHandRaised)||!1};console.log("handleJoinSuccess",{newPeer:b}),n._machineCB({type:"CLIENT_PEER_JOINED",peer:b})}),g.next=17;break;case 14:g.prev=14,g.t0=g.catch(1),console.debug({err:g.t0});case 17:case"end":return g.stop()}},s,null,[[1,14]])}));return function(s,o){return i.apply(this,arguments)}}()),Ee(kt(n),"_handleProduceSuccess",function(i){console.info("handleProduceSuccess() | Produce Success");var s=i.peerId,o=i.producerId,a=i.roomId,c=i.appData;c.type==="cam"?(n._videoProducer.appData.momoProducerId=o,n._machineCB("CLIENT_CAM_PRODUCER_SUCCESS"),console.log("CLIENT_CAM_PRODUCER_SUCCESS")):(n._audioProducer.appData.momoProducerId=o,n._machineCB("CLIENT_MIC_PRODUCER_SUCCESS"),console.log("CLIENT_MIC_PRODUCER_SUCCESS")),console.log({data:i,type:"PRODUCER_SUCCESS",meta:{peerId:s,producerId:o,roomId:a,audProd:n._audioProducer,vidProd:n._videoProducer}})}),Ee(kt(n),"_handleClientConsumer",function(){var i=Yt(Se().mark(function s(o,a){var c,l,f,u,h;return Se().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n._machineCB=a,console.info("handleClientConsumer() | Client Consumer"),p.prev=2,n._recvTransport){p.next=5;break}throw new Error("No Recv Transport");case 5:return c=o.appData.type,l="".concat(o.producerId,"-").concat(o.appData.type==="cam"||o.appData.type==="mic"?"audio-video":"screenAudio-screenVideo"),p.next=9,n._recvTransport.consume({id:o.id,producerId:o.producerId,kind:o.kind,rtpParameters:o.rtpParameters,appData:Ue(Ue({},o.appData),{},{peerId:o.producerPeerId}),streamId:l});case 9:f=p.sent,n._consumers.set(f.id,f),u=n._peersConsumers.get(o.producerPeerId),n._peersConsumers.set(o.producerPeerId,Ue(Ue({},u),{},Ee({},o.appData.type,f.id))),h={id:f.id,track:f.track,peerId:o.producerPeerId,appData:{type:c,producerPeerId:o.producerPeerId,momoProducerId:o.producerId},connectionState:{stage:"connected",paused:f.paused}},c==="share-video"&&console.log("create-consumer() | Share Video"),c==="cam"&&console.log("create-consumer() | Cam Video"),n._machineCB({type:"CLIENT_CONSUMER_CREATED",consumer:h}),console.log({consumerToAdd:h}),f.on("transportclose",function(){n._consumers.delete(f.id),console.log("client-consumer() | Transport Close"),f.close()}),f.on("trackended",function(){console.log("client-consumer() | Tracked Ended")}),f.on("@pause",function(){console.log("client-consumer() | @pause")}),f.on("@resume",function(){console.log("client-consumer() | @resume")}),f.on("@close",function(){console.log("client-consumer() | @close"),n._consumers.delete(f.id)}),p.next=28;break;case 25:p.prev=25,p.t0=p.catch(2),console.error("Error creating client consumer: ",{error:p.t0,data:o});case 28:case"end":return p.stop()}},s,null,[[2,25]])}));return function(s,o){return i.apply(this,arguments)}}()),Ee(kt(n),"_handleConsumerClosed",function(i,s){var o;n._machineCB=s,console.log("handleConsumerClosed() | Consumer Closed");var a=i.producerPeerId,c=i.appData;if(!i.appData||!i.appData.type){console.error("Need appData and appData.type to close consumer");return}var l=(o=n._peersConsumers.get(a))===null||o===void 0?void 0:o[c.type],f=n._consumers.get(l);if(console.log({appData:c,_peersConsumers:n._peersConsumers,_consumers:n._consumers}),f)f.close(),n._machineCB({type:"CLIENT_CONSUMER_CLOSED",consumerId:l});else{console.error("handleConsumerClosed() | No consumer data of type ".concat(c.type," for peer ").concat(a));return}}),Ee(kt(n),"_handleCreateWebRTC",function(){var i=Yt(Se().mark(function s(o,a){return Se().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(console.info("handleCreateWebRTC() | Creating WebRTC Transport for ".concat(o.peerId)),n._device){l.next=4;break}return console.error("Device not initialized"),l.abrupt("return");case 4:try{n._sendTransport=n._createDeviceTransport(o,"send"),n._recvTransport=n._createDeviceTransport(o,"recv"),console.log(n._sendTransport,n._recvTransport),n._videoStream&&n._produceVideoStream(n._videoStream,a),n._audioStream&&n._produceAudioStream(n._audioStream,a)}catch(f){console.debug({err:f})}n.socket.emit("create-consumers-for-newpeer",{peerId:o.peerId,roomId:o.roomId});case 6:case"end":return l.stop()}},s)}));return function(s,o){return i.apply(this,arguments)}}()),Ee(kt(n),"_createDeviceTransport",function(i,s){var o;if(n._device===void 0){console.warn("createDeviceTransport() | mediasoup device is undefined");return}if(s==="send"?(console.debug("createDeviceTransport() | creating send transport"),o=n._device.createSendTransport({id:i.sendTransportSDPInfo.id,iceParameters:i.sendTransportSDPInfo.iceParameters,iceCandidates:i.sendTransportSDPInfo.iceCandidates,dtlsParameters:i.sendTransportSDPInfo.dtlsParameters,sctpParameters:i.sendTransportSDPInfo.sctpParameters,iceServers:n._turn,proprietaryConstraints:{},appData:{}})):s==="recv"&&(console.debug("createDeviceTransport() | creating recv transport"),o=n._device.createRecvTransport({id:i.recvTransportSDPInfo.id,iceParameters:i.recvTransportSDPInfo.iceParameters,iceCandidates:i.recvTransportSDPInfo.iceCandidates,dtlsParameters:i.recvTransportSDPInfo.dtlsParameters,sctpParameters:i.recvTransportSDPInfo.sctpParameters,iceServers:n._turn,proprietaryConstraints:{},appData:{}})),o===void 0){console.warn("createDeviceTransport() | transport is undefined , transportType is incorrect");return}return o.on("connect",function(a,c,l){var f=a.dtlsParameters;console.info("".concat(s," Transport connect"));try{n.socket.emit("connect-webrtc-transport",{dtlsParameters:f,transportType:s,peerId:i.peerId,roomId:i.roomId}),c()}catch(u){l(u)}}),o.on("produce",function(){var a=Yt(Se().mark(function c(l,f,u){var h,g,p,y,b,S;return Se().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:h=l.kind,g=l.rtpParameters,p=l.appData;try{b=n.socket.emit("transport-produce",{peerId:i.peerId,roomId:i.roomId,producerData:{kind:h,paused:!1,transportId:(y=o)===null||y===void 0?void 0:y.id,rtpParameters:g},appData:{type:p.type,producerPeerId:i.peerId}}),S=b.id,f({id:S})}catch(T){console.debug({err:T}),u(T)}case 2:case"end":return w.stop()}},c)}));return function(c,l,f){return a.apply(this,arguments)}}()),o.on("producedata",function(){var a=Yt(Se().mark(function c(l,f,u){var h,g,p,y,b,S,E;return Se().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:h=l.sctpStreamParameters,g=l.label,p=l.protocol,y=l.appData;try{S=n.socket.emit("transport-produce-data",{peerId:i.peerId,roomId:i.roomId,producerData:{transportId:(b=o)===null||b===void 0?void 0:b.id,sctpStreamParameters:{streamId:h.streamId,maxPacketLifeTime:h.maxPacketLifeTime,maxRetransmits:h.maxRetransmits,ordered:h.ordered},label:g,protocol:p,appData:y}}),E=S.id,f({id:E})}catch(D){console.debug({error:D}),u(D)}case 2:case"end":return T.stop()}},c)}));return function(c,l,f){return a.apply(this,arguments)}}()),console.info("".concat(s," Transport created")),o}),n}return vv(r)}(WO),QO=function(t){S2(r,t);var e=E2(r);function r(){var n;return gv(this,r),n=e.call(this),Ee(kt(n),"_handlePeerLeft",function(i,s){var o=i.peerId;n._machineCB=s,n._machineCB({type:"CLIENT_PEER_LEFT",peerId:o}),n.peers.delete(o),console.info("_handlePeerLeft() | Peer Left",{peerId:o})}),Ee(kt(n),"_handleNewPeer",function(i,s){if(n._machineCB=s,console.info("handleNewPeer() | New Peer Joined",i,{peerId:i.peerId,meId:n.meId,isMe:i.peerId===n.meId}),i.peerId===n.meId){s({type:"CLIENT_ROOM_JOINED"});return}var o={peerId:i.peerId,displayName:i.displayName,avatarUrl:i.avatarUrl||"",joinStatus:"joined:webrtc-creating",isHandRaised:i.isHandRaised||!1,role:i.role};n._machineCB({type:"CLIENT_PEER_JOINED",peer:o}),n.peers.set(i.peerId,o),i.peerId.includes("botId")&&n._machineCB({type:"CLIENT_STARTED_RECORDING"}),console.log(i.peerId,{newPeer:o,peers:n.peers})}),Ee(kt(n),"startRecording",function(){var i=Yt(Se().mark(function s(o){return Se().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(o){c.next=2;break}throw new Error("startRecording() | No sourceUrl provided.");case 2:if(!o.includes("localhost")){c.next=4;break}throw new Error("startRecording() | Recording cannot be started on localhost.");case 4:return console.log("HuddleWebClient | startRecording() | Starting recording",{sourceUrl:o}),c.abrupt("return",new Promise(function(l,f){n.socket.emit("start-recording",{sourceUrl:o},function(u){u.success?l(u):(console.error("startRecording() | Error starting recording",u.error),f(u))})}));case 6:case"end":return c.stop()}},s)}));return function(s){return i.apply(this,arguments)}}()),Ee(kt(n),"stopRecording",Yt(Se().mark(function i(){return Se().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(a,c){n.socket.emit("stop-recording",{ipfs:!1},function(l){l.success?a(l):(console.error("stopRecording() | Error in stopping recording",l.data),c(l))})}));case 1:case"end":return o.stop()}},i)}))),Ee(kt(n),"startStreaming",function(){var i=Yt(Se().mark(function s(o){return Se().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(o.sourceUrl){c.next=2;break}throw new Error("startStreaming() | No sourceUrl provided.");case 2:if(!o.sourceUrl.includes("localhost")){c.next=4;break}throw new Error("startStreaming() | Streaming cannot be started on localhost.");case 4:return c.abrupt("return",new Promise(function(l,f){n.socket.emit("start-livestream",o,function(u){u.success?l(u):(console.error("startStreaming() | Error in starting streaming",u.data),f(u))})}));case 5:case"end":return c.stop()}},s)}));return function(s){return i.apply(this,arguments)}}()),Ee(kt(n),"stopStreaming",Yt(Se().mark(function i(){return Se().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(a,c){n.socket.emit("stop-livestream",null,function(l){l.success?a(l):(console.error("stopStreaming() | Error in stopping streaming",l.data),c(l))})}));case 1:case"end":return o.stop()}},i)}))),Ee(kt(n),"setDisplayName",function(i){var s={data:{displayName:{name:i}},peerId:n.meId};return console.log({displayName:i,namePayload:s}),new Promise(function(o,a){n.socket.emit("peer-set-displayName",s,function(c){c.success?o(i):a(c)})})}),Ee(kt(n),"handlePeerUpdatedHandleName",function(i){console.log("handlePeerUpdatedHandleName",i.data.displayName.name,i.peerId),n._machineCB({type:"CLIENT_DISPLAY_NAME_CHANGED",displayName:i.data.displayName.name,peerId:i.peerId})}),n.meId="peerId-".concat(Bw()),n.peers=new Map,n}return vv(r,[{key:"joinLobby",value:function(){var n=Yt(Se().mark(function s(o,a,c,l){var f=this,u,h,g=arguments;return Se().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(u=g.length>4&&g[4]!==void 0?g[4]:"user",a){y.next=3;break}throw new Error("Error: joinLobby() | No roomId passed");case 3:if(u==="recorder"&&(this.meId="botId-".concat(Bw())),this.roomId=a,y.t0=c,y.t0){y.next=10;break}return y.next=9,HO();case 9:y.t0=y.sent;case 10:if(h=y.t0,h){y.next=13;break}throw new Error("joinLobby() | HuddleWebClient.ts | No token found");case 13:this.socket=_u("".concat(zO,"/").concat(a),{reconnectionAttempts:10,auth:function(S){return S({peerId:f.meId,token:h,projectId:o})}}),this.socket.on("connect",function(){return f._handleConnect(l)}),this.socket.on("join-success",function(b){return f._handleJoinSuccess(b,l)}),this.socket.on("disconnect",function(){return f._handleDisconnect(l)}),this.socket.on("connect_error",function(b){f._handleConnectError(b,l)}),this.socket.io.on("reconnect",function(b){console.warn("reconnecting",b)}),this.socket.io.on("reconnect_attempt",function(b){console.log("reconnect_attempt",b)}),this.socket.io.on("reconnect_error",function(b){console.log("reconnect_error",b),console.error({error:b})}),this.socket.io.on("reconnect_failed",function(){console.log("reconnect_failed")}),this.socket.on("create-webrtc-success",function(b){return f._handleCreateWebRTC(b,l)}),this.socket.on("transport-produce-success",function(b){return f._handleProduceSuccess(b)}),this.socket.on("create-client-consumer",function(b){return f._handleClientConsumer(b,l)}),this.socket.on("consumer-closed",function(b){return f._handleConsumerClosed(b,l)}),this.socket.on("new-peer",function(b){return f._handleNewPeer(b,l)}),this.socket.on("peer-left",function(b){return f._handlePeerLeft(b,l)}),this.socket.on("meeting-ended",function(){f._close(l)}),this.socket.on("kicked",function(){f._close(l)}),this.socket.on("recording-started",function(){console.log("HuddleWebClient | recording-started"),f._machineCB=l,f._machineCB("CLIENT_STARTED_RECORDING")}),this.socket.on("recording-stopped",function(){console.log("HuddleWebClient | recording-stopped"),console.log("CLIENT_STOPPED_RECORDING"),f._machineCB=l,f._machineCB("CLIENT_STOPPED_RECORDING")}),this.socket.on("recording-data",function(b){f._machineCB=l,console.log("RECORDING DATA",{data:b}),f._machineCB({type:"CLIENT_RECORDING_DATA",recordingData:b})}),this.socket.on("livestream-started",function(b){f._machineCB=l,console.log("LIVESTREAM STARTED",{data:b}),f._machineCB({type:"CLIENT_STARTED_STREAMING",livestreamData:{livestreamingPlatform:b.platform,playbackId:b.playbackId}})}),this.socket.on("livestream-stopped",function(){f._machineCB=l,f._machineCB("CLIENT_STOPPED_STREAMING")}),this.socket.on("peer-updated-displayName",this.handlePeerUpdatedHandleName),console.log({func:"joinLobby",roomId:this.roomId,meId:this.meId,socket:this.socket});case 37:case"end":return y.stop()}},s,this)}));function i(s,o,a,c){return n.apply(this,arguments)}return i}()},{key:"joinRoom",value:function(){var n=Yt(Se().mark(function s(){var o=this;return Se().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.info("roomJoinRequest() | Joining room ".concat(this.roomId)),c.abrupt("return",new Promise(function(l,f){o.socket.emit("join-request",function(u){u.success?l(u):(console.error("roomJoinRequest() | Error starting recording",u.data),f(u))})}));case 2:case"end":return c.stop()}},s,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"leaveRoom",value:function(i){this.socket.emit("endMeeting"),this._close(i)}},{key:"_close",value:function(i){var s,o,a,c,l,f;this._machineCB=i,this.socket&&((s=this._videoProducer)===null||s===void 0||(o=s.track)===null||o===void 0||o.stop(),(a=this._audioProducer)===null||a===void 0||(c=a.track)===null||c===void 0||c.stop(),this._stopVideoProducer(i),this._stopAudioProducer(i),(l=this._recvTransport)===null||l===void 0||l.close(),(f=this._sendTransport)===null||f===void 0||f.close(),this.socket.disconnect(),this._machineCB("CLIENT_ROOM_LEFT"))}}]),r}(YO),XO=function(t){return t.host="host",t.moderator="moderator",t.speaker="speaker",t.listener="listener",t.peer="peer",t}({}),x2=_4({predictableActionArguments:!0,id:"Meeting Machine",tsTypes:{},initial:"Idle",context:{projectId:"",displayName:"Guest",peerId:"",roomId:"",error:"",role:XO.peer,huddleClient:new QO,micEnabled:!1,camEnabled:!1,micStream:null,camStream:null,peers:{},peersToConsumers:{},consumers:{},recordingData:{},livestreamData:{}},schema:{context:{},events:{},services:{}},states:{Idle:{on:{INIT:{target:"Initialized",actions:"assignProjectIdToContext"}}},Initialized:{initial:"NotJoined",states:{NotJoined:{on:{JOIN_LOBBY:{target:"JoiningLobby"}}},JoiningLobby:{on:{CLIENT_LOBBY_FAILED:{target:"JoinLobbyFailed"},CLIENT_LOBBY_JOINED:{target:"JoinedLobby"}},invoke:{src:function(e,r){return function(n){if(r.type==="JOIN_LOBBY")return e.huddleClient.joinLobby(e.projectId,r.roomId,r.accessToken,n,r.userType)}},onError:{target:"JoinLobbyFailed",actions:"assignErrorToContext"}}},JoinLobbyFailed:{on:{JOIN_LOBBY:{target:"JoiningLobby"}}},JoinedLobby:{entry:"assignPeerIdToContext",on:{JOIN_ROOM:"JoiningRoom",LEAVE_LOBBY:"NotJoined"},type:"parallel",states:{Emitted:{initial:"NotEmitted",states:{NotEmitted:{after:{100:"Emitted"}},Emitted:{type:"final"}}},DisplayName:{initial:"NotSet",states:{NotSet:{on:{SET_DISPLAY_NAME:"Loading"}},Loading:{invoke:{src:function(e,r){return function(n){if(r.type==="SET_DISPLAY_NAME")return e.huddleClient.setDisplayName(r.displayName)}},onDone:{target:"DisplayNameSet",actions:"assignDisplayNameToContext"}}},DisplayNameSet:{on:{SET_DISPLAY_NAME:"Loading"}}}},Mic:{initial:"Muted",states:{Muted:{on:{ENABLE_MIC:{target:"Loading"}}},Loading:{invoke:{src:"loadMicStream",onDone:{target:"Unmuted",actions:"assignMicStreamToContext"},onError:{target:"Muted",actions:"assignErrorToContext"}}},Unmuted:{on:{DISABLE_MIC:{target:"Muted",actions:"stopMicStream"}}}}},Cam:{initial:"Off",states:{Off:{on:{ENABLE_CAM:{target:"Loading"}}},Loading:{invoke:{src:"loadCamStream",onDone:{target:"On",actions:"assignCamStreamToContext"},onError:{target:"Off",actions:"assignErrorToContext"}}},On:{on:{DISABLE_CAM:{target:"Off",actions:"stopCamStream"}}}}}}},JoiningRoom:{on:{CLIENT_ROOM_JOINED:"JoinedRoom",CLIENT_ME_JOINED:{actions:$t(function(t,e){return{role:e.role}})},CLIENT_PEER_JOINED:{actions:$t(function(t,e){return{peers:Ue(Ue({},t.peers),{},Ee({},e.peer.peerId,e.peer)),peersToConsumers:Ue(Ue({},t.peersToConsumers),{},Ee({},e.peer.peerId,{mic:null,cam:null,"share-audio":null,"share-video":null}))}})},CLIENT_PEER_LEFT:{actions:$t(function(t,e){var r=t.peers,n=e.peerId;r[n];var i=zo(r,[n].map(fs)),s=Object.values(t.consumers).filter(function(a){return a.peerId===e.peerId}),o=t.consumers;return s.forEach(function(a){delete o[a.id]}),{peers:i,consumers:o}})},CLIENT_CONSUMER_CREATED:{actions:$t(function(t,e){return{consumers:Ue(Ue({},t.consumers),{},Ee({},e.consumer.id,e.consumer)),peersToConsumers:Ue(Ue({},t.peersToConsumers),{},Ee({},e.consumer.peerId,Ue(Ue({},t.peersToConsumers[e.consumer.peerId]),{},Ee({},e.consumer.appData.type,e.consumer.id))))}})},CLIENT_CONSUMER_CLOSED:{actions:$t(function(t,e){var r=t.consumers,n=e.consumerId,i=r[n],s=zo(r,[n].map(fs)),o=t.peersToConsumers[i.peerId],a=i.appData.type;o[a];var c=zo(o,[a].map(fs));return{consumers:s,peersToConsumers:Ue(Ue({},t.peersToConsumers),{},Ee({},i.peerId,Ue({mic:null,cam:null,"share-audio":null,"share-video":null},c)))}})}},invoke:{onError:{target:"JoinRoomFailed",actions:"assignErrorToContext"},src:function(e){return e.huddleClient.joinRoom()}}},JoinRoomFailed:{on:{JOIN_ROOM:"JoiningRoom"}},JoinedRoom:{on:{LEAVE_ROOM:"LeavingRoom"},type:"parallel",states:{Emitted:{initial:"NotEmitted",states:{NotEmitted:{after:{100:"Emitted"}},Emitted:{type:"final"}}},DisplayName:{initial:"DisplayNameSet",on:{CLIENT_DISPLAY_NAME_CHANGED:{target:"DisplayName",actions:$t(function(t,e){return{peers:Ue(Ue({},t.peers),{},Ee({},e.peerId,Ue(Ue({},t.peers[e.peerId]),{},{displayName:e.displayName})))}})}},states:{Loading:{invoke:{src:function(){var t=Yt(Se().mark(function r(n,i){return Se().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i.type!=="SET_DISPLAY_NAME"){o.next=4;break}return o.next=3,n.huddleClient.setDisplayName(i.displayName);case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},r)}));function e(r,n){return t.apply(this,arguments)}return e}(),onDone:{target:"DisplayNameSet",actions:"assignDisplayNameToContext"}}},DisplayNameSet:{on:{SET_DISPLAY_NAME:"Loading"}}}},Peers:{initial:"Peers",states:{Peers:{on:{CLIENT_ME_JOINED:{actions:$t(function(t,e){return{role:e.role}})},CLIENT_PEER_JOINED:{target:"Peers",actions:$t(function(t,e){return{peers:Ue(Ue({},t.peers),{},Ee({},e.peer.peerId,e.peer)),peersToConsumers:Ue(Ue({},t.peersToConsumers),{},Ee({},e.peer.peerId,{mic:null,cam:null,"share-audio":null,"share-video":null}))}})},CLIENT_PEER_LEFT:{actions:$t(function(t,e){var r=t.peers,n=e.peerId;r[n];var i=zo(r,[n].map(fs)),s=Object.values(t.consumers).filter(function(a){return a.peerId===e.peerId}),o=t.consumers;return s.forEach(function(a){delete o[a.id]}),{peers:i,consumers:o}})},CLIENT_CONSUMER_CREATED:{actions:$t(function(t,e){return{consumers:Ue(Ue({},t.consumers),{},Ee({},e.consumer.id,e.consumer)),peersToConsumers:Ue(Ue({},t.peersToConsumers),{},Ee({},e.consumer.peerId,Ue(Ue({},t.peersToConsumers[e.consumer.peerId]),{},Ee({},e.consumer.appData.type,e.consumer.id))))}})},CLIENT_CONSUMER_CLOSED:{actions:$t(function(t,e){var r=t.consumers,n=e.consumerId,i=r[n],s=zo(r,[n].map(fs)),o=t.peersToConsumers[i.peerId],a=i.appData.type;o[a];var c=zo(o,[a].map(fs));return{consumers:s,peersToConsumers:Ue(Ue({},t.peersToConsumers),{},Ee({},i.peerId,Ue({mic:null,cam:null,"share-audio":null,"share-video":null},c)))}})}}}}},Mic:{initial:"Idle",states:{Idle:{invoke:{src:function(e){return e.micStream?Promise.resolve(e.micStream):Promise.reject()},onDone:{target:"Unmuted"},onError:{target:"Muted"}}},Muted:{entry:"checkMicStream",on:{ENABLE_MIC:{target:"Loading"},UNMUTE:{target:"Unmuted"}}},Loading:{invoke:{src:"loadMicStream",onDone:{target:"Unmuted",actions:"assignMicStreamToContext"},onError:{target:"Muted",actions:"assignErrorToContext"}}},Unmuted:{on:{DISABLE_MIC:{target:"Muted",actions:"stopMicStream"},PRODUCE_MIC:"ProducingMicLoading"}},ProducingMicLoading:{invoke:{src:function(e,r){return function(n){if(r.type==="PRODUCE_MIC")return e.huddleClient._produceAudioStream(r.stream,n)}},onError:{target:"Unmuted",actions:"assignErrorToContext"}},on:{CLIENT_MIC_PRODUCER_SUCCESS:"ProducingMic"}},ProducingMic:{on:{STOP_PRODUCING_MIC:"StoppingProducingMic"}},StoppingProducingMic:{invoke:{src:function(e){return function(r){return e.huddleClient.requestStopAudioProducer()}},onError:{target:"Unmuted",actions:"assignErrorToContext"}},on:{CLIENT_MIC_PRODUCER_STOPPED:"Unmuted"}}}},Cam:{initial:"Idle",states:{Idle:{invoke:{src:function(e){return e.camStream?Promise.resolve(e.camStream):Promise.reject()},onDone:{target:"On"},onError:{target:"Off"}}},Off:{entry:"checkCamStream",on:{ENABLE_CAM:{target:"Loading"},ON:{target:"On"}}},Loading:{invoke:{src:"loadCamStream",onDone:{target:"On",actions:"assignCamStreamToContext"},onError:{target:"Off",actions:"assignErrorToContext"}}},On:{on:{DISABLE_CAM:{target:"Off",actions:"stopCamStream"},PRODUCE_CAM:"ProducingCamLoading"}},ProducingCamLoading:{invoke:{src:function(e,r){return function(n){if(r.type==="PRODUCE_CAM")return e.huddleClient._produceVideoStream(r.stream,n)}},onError:{target:"On",actions:"assignErrorToContext"}},on:{CLIENT_CAM_PRODUCER_SUCCESS:{target:"ProducingCam"}}},ProducingCam:{on:{STOP_PRODUCING_CAM:"StoppingProducingCam"}},StoppingProducingCam:{invoke:{src:function(e){return function(r){return e.huddleClient.requestStopVideoProducer()}},onError:{target:"On",actions:"assignErrorToContext"}},on:{CLIENT_CAM_PRODUCER_STOPPED:"On"}}}},Recording:{initial:"Idle",states:{Idle:{on:{START_RECORDING:"Starting"}},Starting:{invoke:{src:function(e,r){if(r.type==="START_RECORDING")return e.huddleClient.startRecording(r.sourceUrl)},onError:{target:"Idle",actions:"assignErrorToContext"},onDone:{target:"RecorderJoining"}}},RecorderJoining:{on:{CLIENT_STARTED_RECORDING:"Recording"}},Recording:{on:{STOP_RECORDING:"Stopping"}},Stopping:{invoke:{src:function(e){return e.huddleClient.stopRecording()},onError:{target:"Idle",actions:"assignErrorToContext"},onDone:{target:"RecorderLeaving"}}},RecorderLeaving:{on:{CLIENT_RECORDING_DATA:{actions:$t(function(t,e){return{recordingData:e.recordingData}}),target:"Stopped"}}},Stopped:{on:{START_RECORDING:"Starting"}}}},Streaming:{initial:"Idle",states:{Idle:{on:{START_STREAMING:"Starting"}},Starting:{invoke:{src:function(e,r){if(r.type==="START_STREAMING")return e.huddleClient.startStreaming(r.streamingData)},onError:{target:"Idle",actions:"assignErrorToContext"},onDone:{target:"RecorderJoining"}}},RecorderJoining:{on:{CLIENT_STARTED_STREAMING:{target:"Streaming",actions:$t(function(t,e){return{livestreamData:e.livestreamData}})}}},Streaming:{on:{STOP_STREAMING:"Stopping"}},Stopping:{invoke:{src:function(e){return e.huddleClient.stopRecording()},onError:{target:"Idle",actions:"assignErrorToContext"},onDone:{target:"RecorderLeaving"}}},RecorderLeaving:{on:{CLIENT_STOPPED_STREAMING:{target:"Stopped"}}},Stopped:{on:{START_STREAMING:"Starting"}}}}}},LeavingRoom:{on:{CLIENT_ROOM_LEFT:"NotJoined"},invoke:{src:function(e){return function(r){return e.huddleClient.leaveRoom(r)}},onDone:{actions:$t(function(t,e){var r,n;return(r=t.micStream)===null||r===void 0||r.getTracks().forEach(function(i){return i.stop()}),(n=t.camStream)===null||n===void 0||n.getTracks().forEach(function(i){return i.stop()}),{micStream:null,camStream:null}})},onError:{target:"JoinedRoom",actions:"assignErrorToContext"}}}}}}},{actions:{assignMicStreamToContext:$t(function(t,e){return{micStream:e.data}}),assignDisplayNameToContext:$t(function(t,e){return{displayName:e.data}}),assignCamStreamToContext:$t(function(t,e){return{camStream:e.data}}),assignErrorToContext:$t(function(t,e){return{error:e.data.message}}),assignProjectIdToContext:$t(function(t,e){if(e.type==="INIT")return{projectId:e.projectId}}),assignPeerIdToContext:$t(function(t,e){if(e.type==="CLIENT_LOBBY_JOINED")return{peerId:e.peerId}}),stopMicStream:$t(function(t){return t.micStream.getTracks().forEach(function(e){return e.stop()}),{micStream:null}}),stopCamStream:$t(function(t){return t.camStream.getTracks().forEach(function(e){return e.stop()}),{micStream:null}}),checkMicStream:function(e,r){e.micStream&&(console.log({type:"UNMUTE"}),Zy({type:"UNMUTE"}))},checkCamStream:function(e,r){e.camStream&&(console.log({type:"ON"}),Zy({type:"ON"}))}}}),ZO=x2.withConfig({services:{loadCamStream:function(){return navigator.mediaDevices.getUserMedia({video:!0,audio:!1})},loadMicStream:function(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}}}),eN=Gg(ZO).onTransition(function(t){return console.log(t.value)});eN.start();let tN=0;function wc(t,e){const r=`atom${++tN}`,n={toString:()=>r};return typeof t=="function"?n.read=t:(n.init=t,n.read=i=>i(n),n.write=(i,s,o)=>s(n,typeof o=="function"?o(i(n)):o)),e&&(n.write=e),n}const Xw=t=>"init"in t,Zw=t=>!!t.write,ud=new WeakMap,rN=(t,e)=>{ud.set(t,e),t.catch(()=>{}).finally(()=>ud.delete(t))},e_=(t,e)=>{const r=ud.get(t);r&&(ud.delete(t),r(e))},t_=(t,e)=>{t.status="fulfilled",t.value=e},r_=(t,e)=>{t.status="rejected",t.reason=e},nN=t=>typeof(t==null?void 0:t.then)=="function",$f=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),n_=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),_c=t=>"v"in t&&t.v instanceof Promise,iN=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,zf=t=>{if("e"in t)throw t.e;return t.v},sN=()=>{const t=new WeakMap,e=new WeakMap,r=new Map;let n,i;const s=N=>t.get(N),o=(N,F)=>{const $=t.get(N);if(t.set(N,F),r.has(N)||r.set(N,$),$&&_c($)){const U="v"in F?F.v instanceof Promise?F.v:Promise.resolve(F.v):Promise.reject(F.e);e_($.v,U)}},a=(N,F,$)=>{const U=new Map;let A=!1;$.forEach((m,d)=>{!m&&d===N&&(m=F),m&&(U.set(d,m),F.d.get(d)!==m&&(A=!0))}),(A||F.d.size!==U.size)&&(F.d=U)},c=(N,F,$)=>{const U=s(N),A={d:(U==null?void 0:U.d)||new Map,v:F};if($&&a(N,A,$),U&&$f(U,A)&&U.d===A.d)return U;if(U&&_c(U)&&_c(A)&&iN(U,A)){if(U.d===A.d)return U;A.v=U.v}return o(N,A),A},l=(N,F,$,U)=>{if(nN(F)){let A;const m=new Promise((d,v)=>{let R=!1;F.then(C=>{if(!R){R=!0;const x=s(N),P=c(N,m,$);t_(m,C),d(C),(x==null?void 0:x.d)!==P.d&&D(N,P,x==null?void 0:x.d)}},C=>{if(!R){R=!0;const x=s(N),P=c(N,m,$);r_(m,C),v(C),(x==null?void 0:x.d)!==P.d&&D(N,P,x==null?void 0:x.d)}}),A=C=>{R||(R=!0,C.then(x=>t_(m,x),x=>r_(m,x)),d(C))}});return m.orig=F,m.status="pending",rN(m,d=>{d&&A(d),U==null||U()}),c(N,m,$)}return c(N,F,$)},f=(N,F,$)=>{const U=s(N),A={d:(U==null?void 0:U.d)||new Map,e:F};return $&&a(N,A,$),U&&n_(U,A)&&U.d===A.d?U:(o(N,A),A)},u=(N,F)=>{const $=s(N);if(!F&&$&&(e.has(N)||Array.from($.d).every(([C,x])=>C===N||u(C)===x)))return $;const U=new Map;let A=!0;const m=C=>{if(C===N){const P=s(C);if(P)return U.set(C,P),zf(P);if(Xw(C))return U.set(C,void 0),C.init;throw new Error("no atom init")}const x=u(C);return U.set(C,x),zf(x)};let d,v;const R={get signal(){return d||(d=new AbortController),d.signal},get setSelf(){return!v&&Zw(N)&&(v=(...C)=>{if(!A)return E(N,...C)}),v}};try{const C=N.read(m,R);return l(N,C,U,()=>d==null?void 0:d.abort())}catch(C){return f(N,C,U)}finally{A=!1}},h=N=>zf(u(N)),g=N=>{let F=e.get(N);return F||(F=w(N)),F},p=(N,F)=>!F.l.size&&(!F.t.size||F.t.size===1&&F.t.has(N)),y=N=>{const F=e.get(N);F&&p(N,F)&&T(N)},b=N=>{const F=new Map,$=new WeakMap,U=m=>{const d=e.get(m);d==null||d.t.forEach(v=>{v!==m&&(F.set(v,(F.get(v)||new Set).add(m)),$.set(v,($.get(v)||0)+1),U(v))})};U(N);const A=m=>{const d=e.get(m);d==null||d.t.forEach(v=>{var R;if(v!==m){let C=$.get(v);if(C&&$.set(v,--C),!C){let x=!!((R=F.get(v))!=null&&R.size);if(x){const P=s(v),M=u(v,!0);x=!P||!$f(P,M)}x||F.forEach(P=>P.delete(v))}A(v)}})};A(N)},S=(N,...F)=>{let $=!0;const U=d=>zf(u(d)),A=(d,...v)=>{let R;if(d===N){if(!Xw(d))throw new Error("atom not writable");const C=s(d),x=l(d,v[0]);(!C||!$f(C,x))&&b(d)}else R=S(d,...v);if(!$){const C=B()}return R},m=N.write(U,A,...F);return $=!1,m},E=(N,...F)=>{const $=S(N,...F),U=B();return $},w=(N,F)=>{var $;($=s(N))==null||$.d.forEach((A,m)=>{const d=e.get(m);d?d.t.add(N):m!==N&&w(m,N)}),u(N);const U={t:new Set(F&&[F]),l:new Set};if(e.set(N,U),Zw(N)&&N.onMount){const A=N.onMount((...m)=>E(N,...m));A&&(U.u=A)}return U},T=N=>{var F;const $=(F=e.get(N))==null?void 0:F.u;$&&$(),e.delete(N);const U=s(N);U&&(_c(U)&&e_(U.v),U.d.forEach((A,m)=>{if(m!==N){const d=e.get(m);d&&(d.t.delete(N),p(m,d)&&T(m))}}))},D=(N,F,$)=>{const U=new Set(F.d.keys());$==null||$.forEach((A,m)=>{if(U.has(m)){U.delete(m);return}const d=e.get(m);d&&(d.t.delete(N),p(m,d)&&T(m))}),U.forEach(A=>{const m=e.get(A);m?m.t.add(N):e.has(N)&&w(A,N)})},B=()=>{let N;for(;r.size;){const F=Array.from(r);r.clear(),F.forEach(([$,U])=>{const A=s($);if(A){A.d!==(U==null?void 0:U.d)&&D($,A,U==null?void 0:U.d);const m=e.get($);m&&!(U&&!_c(U)&&($f(U,A)||n_(U,A)))&&m.l.forEach(d=>d())}})}};return{get:h,set:E,sub:(N,F)=>{const $=g(N),U=B(),A=$.l;return A.add(F),()=>{A.delete(F),y(N)}}}};let Vp;const oN=()=>(Vp||(Vp=sN()),Vp);function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dd.apply(this,arguments)}const aN=["guards","actions","services","delays","context"],cN=Symbol();function lN(t,e){const r=wc(null),n=wc(o=>{const a=o(r);if(a)return a;let c=!0;const l=(...D)=>{if(c)return o(...D);throw new Error("get not allowed after initialization")},f=i_(t)?t(l):t,u=i_(e)?e(l):e;c=!1;const h=u||{},{guards:g,actions:p,services:y,delays:b,context:S}=h,E=function(D,B){if(D==null)return{};var j,N,F={},$=Object.keys(D);for(N=0;N<$.length;N++)B.indexOf(j=$[N])>=0||(F[j]=D[j]);return F}(h,aN),w=dd({},g&&{guards:g},p&&{actions:p},y&&{services:y},b&&{delays:b}),T=f.withConfig(w,()=>dd({},f.context,S));return{machine:T,service:Gg(T,E)}},(o,a)=>{a(r,o(n))});n.onMount=o=>{o()};const i=wc(null),s=wc(o=>{var a;return(a=o(i))!=null?a:o(n).machine.initialState},(o,a,c)=>{const{service:l}=o(n);l.onTransition(f=>{a(i,f)}),l.start(),c(()=>{const{service:f}=o(n);f.stop()})});return s.onMount=o=>{let a;return o(c=>{a===!1?c():a=c}),()=>{a&&a(),a=!1}},wc(o=>o(s),(o,a,c)=>{const{service:l}=o(n);if(c===cN){l.stop(),a(r,null),a(n);const{service:f}=o(n);f.onTransition(u=>{a(i,u)}),f.start()}else l.send(c)})}const i_=t=>typeof t=="function",fN=V.createContext(void 0),R2=t=>{const e=V.useContext(fN);return(t==null?void 0:t.store)||e||oN()},uN=t=>typeof(t==null?void 0:t.then)=="function",dN=Ce.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function hN(t,e){const r=R2(e),[[n,i,s],o]=V.useReducer(l=>{const f=r.get(t);return Object.is(l[0],f)&&l[1]===r&&l[2]===t?l:[f,r,t]},void 0,()=>[r.get(t),r,t]);let a=n;(i!==r||s!==t)&&(o(),a=r.get(t));const c=e==null?void 0:e.delay;return V.useEffect(()=>{const l=r.sub(t,()=>{if(typeof c=="number"){setTimeout(o,c);return}o()});return o(),l},[r,t,c]),V.useDebugValue(a),uN(a)?dN(a):a}function pN(t,e){const r=R2(e);return V.useCallback((...i)=>r.set(t,...i),[r,t])}function mN(t,e){return[hN(t,e),pN(t,e)]}function gN(t){if(Array.isArray(t))return t}function vN(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,a=[],c=!0,l=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(f){l=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}function s_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yN(t,e){if(t){if(typeof t=="string")return s_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s_(t,e)}}function wN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(t,e){return gN(t)||vN(t,e)||yN(t,e)||wN()}var _N=function(){return navigator.mediaDevices.getUserMedia({audio:!1,video:!0})},bN=function(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!1})},SN=lN(x2,{devTools:!0,services:{loadCamStream:_N,loadMicStream:bN}});function xn(){var t=mN(SN),e=_o(t,2),r=e[0],n=e[1];return{state:r,send:n}}function EN(){var t=xn(),e=t.state,r=t.send,n=function(o){return r({type:"INIT",projectId:o})},i=e.matches("Initialized");return n.isCallable=!i,{initialize:n,isInitialized:i}}var xN={"lobby:joined":"Initialized.JoinedLobby.Emitted.NotEmitted","lobby:cam-on":"Initialized.JoinedLobby.Cam.On","lobby:cam-off":"Initialized.JoinedLobby.Cam.Off","lobby:mic-on":"Initialized.JoinedLobby.Mic.Unmuted","lobby:mic-off":"Initialized.JoinedLobby.Mic.Muted","lobby:failed":"Initialized.JoinLobbyFailed","room:joined":"Initialized.JoinedRoom.Emitted.NotEmitted","room:failed":"Initialized.JoinLobbyFailed","room:new-peer":"Initialized.JoinedRoom.Peers.Peers","room:peer-left":"Initialized.JoinedRoom.Peers.Peers","room:audio-producing":"Initialized.JoinedRoom.Mic.ProducingMic","room:video-producing":"Initialized.JoinedRoom.Cam.ProducingCam","room:recording-started":"Initialized.JoinedRoom.Recording.Recording","room:recording-stopped":"Initialized.JoinedRoom.Recording.Stopped","room:livestream-started":"Initialized.JoinedRoom.Streaming.Streaming","room:livestream-stopped":"Initialized.JoinedRoom.Streaming.Stopped"},bu=function(e,r){var n=xn(),i=n.state;V.useEffect(function(){i.matches(xN[e])&&r()},[i])};function hd(){return hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hd.apply(this,arguments)}function Sl(){Sl=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(A,m,d){A[m]=d.value},i=typeof Symbol=="function"?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(A,m,d){return Object.defineProperty(A,m,{value:d,enumerable:!0,configurable:!0,writable:!0}),A[m]}try{c({},"")}catch{c=function(m,d,v){return m[d]=v}}function l(A,m,d,v){var R=m&&m.prototype instanceof h?m:h,C=Object.create(R.prototype),x=new F(v||[]);return n(C,"_invoke",{value:D(A,d,x)}),C}function f(A,m,d){try{return{type:"normal",arg:A.call(m,d)}}catch(v){return{type:"throw",arg:v}}}t.wrap=l;var u={};function h(){}function g(){}function p(){}var y={};c(y,s,function(){return this});var b=Object.getPrototypeOf,S=b&&b(b($([])));S&&S!==e&&r.call(S,s)&&(y=S);var E=p.prototype=h.prototype=Object.create(y);function w(A){["next","throw","return"].forEach(function(m){c(A,m,function(d){return this._invoke(m,d)})})}function T(A,m){function d(R,C,x,P){var M=f(A[R],A,C);if(M.type!=="throw"){var O=M.arg,_=O.value;return _&&typeof _=="object"&&r.call(_,"__await")?m.resolve(_.__await).then(function(L){d("next",L,x,P)},function(L){d("throw",L,x,P)}):m.resolve(_).then(function(L){O.value=L,x(O)},function(L){return d("throw",L,x,P)})}P(M.arg)}var v;n(this,"_invoke",{value:function(R,C){function x(){return new m(function(P,M){d(R,C,P,M)})}return v=v?v.then(x,x):x()}})}function D(A,m,d){var v="suspendedStart";return function(R,C){if(v==="executing")throw new Error("Generator is already running");if(v==="completed"){if(R==="throw")throw C;return U()}for(d.method=R,d.arg=C;;){var x=d.delegate;if(x){var P=B(x,d);if(P){if(P===u)continue;return P}}if(d.method==="next")d.sent=d._sent=d.arg;else if(d.method==="throw"){if(v==="suspendedStart")throw v="completed",d.arg;d.dispatchException(d.arg)}else d.method==="return"&&d.abrupt("return",d.arg);v="executing";var M=f(A,m,d);if(M.type==="normal"){if(v=d.done?"completed":"suspendedYield",M.arg===u)continue;return{value:M.arg,done:d.done}}M.type==="throw"&&(v="completed",d.method="throw",d.arg=M.arg)}}}function B(A,m){var d=m.method,v=A.iterator[d];if(v===void 0)return m.delegate=null,d==="throw"&&A.iterator.return&&(m.method="return",m.arg=void 0,B(A,m),m.method==="throw")||d!=="return"&&(m.method="throw",m.arg=new TypeError("The iterator does not provide a '"+d+"' method")),u;var R=f(v,A.iterator,m.arg);if(R.type==="throw")return m.method="throw",m.arg=R.arg,m.delegate=null,u;var C=R.arg;return C?C.done?(m[A.resultName]=C.value,m.next=A.nextLoc,m.method!=="return"&&(m.method="next",m.arg=void 0),m.delegate=null,u):C:(m.method="throw",m.arg=new TypeError("iterator result is not an object"),m.delegate=null,u)}function j(A){var m={tryLoc:A[0]};1 in A&&(m.catchLoc=A[1]),2 in A&&(m.finallyLoc=A[2],m.afterLoc=A[3]),this.tryEntries.push(m)}function N(A){var m=A.completion||{};m.type="normal",delete m.arg,A.completion=m}function F(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(j,this),this.reset(!0)}function $(A){if(A){var m=A[s];if(m)return m.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var d=-1,v=function R(){for(;++d<A.length;)if(r.call(A,d))return R.value=A[d],R.done=!1,R;return R.value=void 0,R.done=!0,R};return v.next=v}}return{next:U}}function U(){return{value:void 0,done:!0}}return g.prototype=p,n(E,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:g,configurable:!0}),g.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(A){var m=typeof A=="function"&&A.constructor;return!!m&&(m===g||(m.displayName||m.name)==="GeneratorFunction")},t.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,p):(A.__proto__=p,c(A,a,"GeneratorFunction")),A.prototype=Object.create(E),A},t.awrap=function(A){return{__await:A}},w(T.prototype),c(T.prototype,o,function(){return this}),t.AsyncIterator=T,t.async=function(A,m,d,v,R){R===void 0&&(R=Promise);var C=new T(l(A,m,d,v),R);return t.isGeneratorFunction(m)?C:C.next().then(function(x){return x.done?x.value:C.next()})},w(E),c(E,a,"Generator"),c(E,s,function(){return this}),c(E,"toString",function(){return"[object Generator]"}),t.keys=function(A){var m=Object(A),d=[];for(var v in m)d.push(v);return d.reverse(),function R(){for(;d.length;){var C=d.pop();if(C in m)return R.value=C,R.done=!1,R}return R.done=!0,R}},t.values=$,F.prototype={constructor:F,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!A)for(var m in this)m.charAt(0)==="t"&&r.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=void 0)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var m=this;function d(M,O){return C.type="throw",C.arg=A,m.next=M,O&&(m.method="next",m.arg=void 0),!!O}for(var v=this.tryEntries.length-1;v>=0;--v){var R=this.tryEntries[v],C=R.completion;if(R.tryLoc==="root")return d("end");if(R.tryLoc<=this.prev){var x=r.call(R,"catchLoc"),P=r.call(R,"finallyLoc");if(x&&P){if(this.prev<R.catchLoc)return d(R.catchLoc,!0);if(this.prev<R.finallyLoc)return d(R.finallyLoc)}else if(x){if(this.prev<R.catchLoc)return d(R.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return d(R.finallyLoc)}}}},abrupt:function(A,m){for(var d=this.tryEntries.length-1;d>=0;--d){var v=this.tryEntries[d];if(v.tryLoc<=this.prev&&r.call(v,"finallyLoc")&&this.prev<v.finallyLoc){var R=v;break}}R&&(A==="break"||A==="continue")&&R.tryLoc<=m&&m<=R.finallyLoc&&(R=null);var C=R?R.completion:{};return C.type=A,C.arg=m,R?(this.method="next",this.next=R.finallyLoc,u):this.complete(C)},complete:function(A,m){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&m&&(this.next=m),u},finish:function(A){for(var m=this.tryEntries.length-1;m>=0;--m){var d=this.tryEntries[m];if(d.finallyLoc===A)return this.complete(d.completion,d.afterLoc),N(d),u}},catch:function(A){for(var m=this.tryEntries.length-1;m>=0;--m){var d=this.tryEntries[m];if(d.tryLoc===A){var v=d.completion;if(v.type==="throw"){var R=v.arg;N(d)}return R}}throw new Error("illegal catch attempt")},delegateYield:function(A,m,d){return this.delegate={iterator:$(A),resultName:m,nextLoc:d},this.method==="next"&&(this.arg=void 0),u}},t}function o_(t,e,r,n,i,s,o){try{var a=t[s](o),c=a.value}catch(l){r(l);return}a.done?e(c):Promise.resolve(c).then(n,i)}function A2(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(c){o_(s,n,i,o,a,"next",c)}function a(c){o_(s,n,i,o,a,"throw",c)}o(void 0)})}}function RN(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function C2(t,e){if(t==null)return{};var r=RN(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var T2=function(e){var r,n,i=xn(),s=i.state,o=s.context.peers,a=s.context.consumers,c=s.context.peersToConsumers;if(!o[e])return{peer:null,error:"Peer not found"};var l=c[e],f={peerId:e,role:o[e].role,mic:((r=a[l==null?void 0:l.mic])===null||r===void 0?void 0:r.track)||null,cam:((n=a[l==null?void 0:l.cam])===null||n===void 0?void 0:n.track)||null,displayName:o[e].displayName};return{peer:f,error:null}},AN=["peerId","track","debug"],P2=function(e){var r=e.peerId,n=e.track,i=e.debug,s=C2(e,AN),o=V.useRef(null),a=T2(r),c=a.peer,l=function(u){var h=new MediaStream;return h.addTrack(u),h};return V.useEffect(function(){var f=n||(c==null?void 0:c.mic),u=o.current;u&&f&&(u.srcObject=l(f),u.onloadedmetadata=A2(Sl().mark(function h(){return Sl().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.warn("audioCard() | Metadata loaded..."),p.prev=1,p.next=4,u.play();case 4:p.next=9;break;case 6:p.prev=6,p.t0=p.catch(1),console.error(p.t0);case 9:case"end":return p.stop()}},h,null,[[1,6]])})),u.onerror=function(){console.error("audioCard() | Error is hapenning...")})},[]),Ce.createElement(Ce.Fragment,null,i&&Ce.createElement("div",null,r),Ce.createElement("audio",hd({},s,{ref:o}),"Audio"))},CN=["peerId","track","debug"],I2=function(e){var r=e.peerId,n=e.track,i=e.debug,s=C2(e,CN),o=V.useRef(null),a=T2(r),c=a.peer,l=function(u){var h=new MediaStream;return h.addTrack(u),h};return V.useEffect(function(){var f=n||(c==null?void 0:c.cam),u=o.current;u&&f&&(u.srcObject=l(f),u.onloadedmetadata=A2(Sl().mark(function h(){return Sl().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.warn("videoCard() | Metadata loaded..."),p.prev=1,u.muted=!0,p.next=5,u.play();case 5:p.next=10;break;case 7:p.prev=7,p.t0=p.catch(1),console.error(p.t0);case 10:case"end":return p.stop()}},h,null,[[1,7]])})),u.onerror=function(){console.error("videoCard() | Error is hapenning...")})},[]),Ce.createElement(Ce.Fragment,null,i&&Ce.createElement(Ce.Fragment,null,c==null?void 0:c.displayName,": ",r),Ce.createElement("video",hd({},s,{ref:o}),"Video"))},TN=function(){var e=xn(),r=e.state,n=e.send,i=V.useState(""),s=_o(i,2),o=s[0],a=s[1],c=["Initialized.JoinedLobby.Mic.Loading","Initialized.JoinedRoom.Mic.ProducingMicLoading","Initialized.JoinedRoom.Mic.StoppingProducingMic"].some(r.matches),l=r.context.micStream,f=r.matches("Initialized.JoinedLobby.Mic.Muted")&&!c,u=r.matches("Initialized.JoinedRoom.Mic.Unmuted")&&!c&&r.context.micStream,h=r.matches("Initialized.JoinedRoom.Mic.ProducingMic"),g=h&&!c,p=["Initialized.JoinedRoom.Mic.Unmuted","Initialized.JoinedLobby.Mic.Unmuted"].some(r.matches)&&!c,y=function(){if(!r.matches("Initialized.JoinedLobby"))return a("You are not in the lobby");if(r.matches("Initialized.JoinedLobby.Mic.Unmuted"))return a("Already Fetched Audio Stream");n("ENABLE_MIC")},b=function(T){if(!r.context.micStream)return a("No Mic Stream");if(!r.matches("Initialized.JoinedRoom"))return a("You are not in the room");if(r.matches("Initialized.JoinedRoom.Mic.ProducingMic"))return a("Already Producing Audio Stream");n({type:"PRODUCE_MIC",stream:T})},S=function(){if(!r.matches("Initialized.JoinedRoom"))return a("You are not in the room");if(!r.matches("Initialized.JoinedRoom.Mic.ProducingMic"))return a("Already Stopped Producing Audio Stream");n("STOP_PRODUCING_MIC")},E=function(){if(!r.matches("Initialized.JoinedLobby"))return a("You are not in the lobby");if(!r.matches("Initialized.JoinedLobby.Mic.Unmuted"))return a("Already Stopped Audio Stream");n("DISABLE_MIC")};return y.isCallable=f,b.isCallable=u,S.isCallable=g,E.isCallable=p,{stream:l,isLoading:c,isProducing:h,fetchAudioStream:y,produceAudio:b,stopProducingAudio:S,stopAudioStream:E,error:o}},PN=function(){var e=xn(),r=e.state,n=e.send,i=V.useState(""),s=_o(i,2),o=s[0],a=s[1],c=["Initialized.JoinLobbyFailed","Initialized.NotJoined"].some(r.matches),l=r.matches("Initialized.JoinedLobby"),f=r.matches("Initialized.JoiningLobby"),u=function(p,y){if(!p)return a("No room id provided");if(!c)return a("You are not in initialized state");n({type:"JOIN_LOBBY",roomId:p,accessToken:y})},h=function(){if(!l)return a("You are not in the lobby");n("LEAVE_LOBBY")};return u.isCallable=c,h.isCallable=l,{isLoading:f,isLobbyJoined:l,joinLobby:u,leaveLobby:h,error:o}},k2=function(){var e=xn(),r=e.state,n=r.context.peers,i=r.context.consumers,s=r.context.peersToConsumers,o=Object.keys(n),a={};return o.forEach(function(c){var l,f,u=s[c];a[c]={peerId:c,role:n[c].role,mic:((l=i[u==null?void 0:u.mic])===null||l===void 0?void 0:l.track)||null,cam:((f=i[u==null?void 0:u.cam])===null||f===void 0?void 0:f.track)||null,displayName:n[c].displayName}}),{peerIds:o,peers:a}},IN=function(){var e=xn(),r=e.state,n=e.send,i=V.useState(""),s=_o(i,2),o=s[0],a=s[1],c=r.context.recordingData,l=r.matches("Initialized.JoinedRoom"),f=["Initialized.JoinedRoom.Recording.RecorderJoining","Initialized.JoinedRoom.Recording.Starting"].some(r.matches),u=r.matches("Initialized.JoinedRoom.Recording.Recording"),h=["Initialized.JoinedRoom.Recording.RecorderLeaving","Initialized.JoinedRoom.Recording.Stopping"].some(r.matches),g=function(b){if(b.includes("localhost"))return a("recording is not allowed on localhost");if(f)return a("Please wait.. recording is already starting");if(u)return a("Recording is already in progress");if(h)return a("Please wait.. recording is about to stop");if(!l)return a("Please join a room first");console.log("useRecording() | startRecording() | sourceUrl",{sourceUrl:b}),n({type:"START_RECORDING",sourceUrl:b})},p=function(){if(f)return a("Please wait.. recording is about to start");if(h)return a("Please wait.. recording is already stopping");if(!u)return a("Recording is not in progress");if(!l)return a("Please join a room first");n({type:"STOP_RECORDING"})};return g.isCallable=!f&&!u&&!h&&l,p.isCallable=u&&l,{isStarting:f,inProgress:u,isStopping:h,data:c,startRecording:g,stopRecording:p,error:o}},kN=function(){var e=xn(),r=e.state,n=e.send,i=V.useState(""),s=_o(i,2),o=s[0],a=s[1],c=r.matches("Initialized.JoinedLobby"),l=r.matches("Initialized.JoinedRoom"),f=r.matches("Initialized.JoiningRoom"),u=function(){if(!c)return a("Cannot join room when not in lobby");n("JOIN_ROOM")},h=function(){if(!l)return a("Cannot leave room when not in a room");n("LEAVE_ROOM")};return u.isCallable=c,h.isCallable=l,{roomId:r.context.roomId,isLoading:f,isRoomJoined:l,joinRoom:u,leaveRoom:h,error:o}},DN=function(){var e=xn(),r=e.state,n=e.send,i=V.useState(""),s=_o(i,2),o=s[0],a=s[1],c=["Initialized.JoinedLobby.Cam.Loading","Initialized.JoinedRoom.Cam.ProducingCamLoading","Initialized.JoinedRoom.Cam.StoppingProducingCam"].some(r.matches),l=r.context.camStream,f=["Initialized.JoinedRoom.Cam.On","Initialized.JoinedLobby.Cam.On"].some(r.matches),u=["Initialized.JoinedRoom.Cam.Off","Initialized.JoinedLobby.Cam.Off"].some(r.matches),h=["Initialized.JoinedRoom","Initialized.JoinedLobby"].some(r.matches),g=u&&!c,p=r.matches("Initialized.JoinedRoom.Cam.On")&&!c&&r.context.camStream,y=r.matches("Initialized.JoinedRoom.Cam.ProducingCam"),b=y&&!c,S=f&&!c,E=function(){if(!h)return a("You are not in the lobby or room");if(f||r.matches("Initialized.JoinedRoom.Cam.ProducingCam"))return a("Already Fetched Video Stream");n("ENABLE_CAM")},w=function(j){if(!r.context.camStream)return a("No Video Stream");if(!r.matches("Initialized.JoinedRoom"))return a("You are not in the room");if(r.matches("Initialized.JoinedRoom.Cam.ProducingCam"))return a("Already Producing Video Stream");n({type:"PRODUCE_CAM",stream:j})},T=function(){if(!r.matches("Initialized.JoinedRoom"))return a("You are not in the room");if(!r.matches("Initialized.JoinedRoom.Cam.ProducingCam"))return a("Already Stopped Producing Video Stream");n("STOP_PRODUCING_CAM")},D=function(){if(!["Initialized.JoinedLobby","Initialized.JoinedRoom"].some(r.matches))return a("You are not in the lobby or room");if(!f)return a("Already Stopped Video Stream");n("DISABLE_CAM")};return E.isCallable=g,w.isCallable=p,T.isCallable=b,D.isCallable=S,{stream:l,isLoading:c,isProducing:y,fetchVideoStream:E,produceVideo:w,stopProducingVideo:T,stopVideoStream:D,error:o}},ON=function(){var e=xn(),r=e.state,n=e.send,i=V.useState(""),s=_o(i,2),o=s[0],a=s[1],c=r.matches("Initialized.JoinedLobby.DisplayName.Loading"),l=r.matches("Initialized.JoinedLobby")||r.matches("Initialized.JoinedRoom"),f=function(h){if(!l)return a("You are not in the lobby or room yet");n({type:"SET_DISPLAY_NAME",displayName:h})};return f.isCallable=l,{setDisplayName:f,error:o,isLoading:c,displayName:r.context.displayName}},NN=function(e,r){var n=xn(),i=n.send;V.useEffect(function(){e&&i([{type:"INIT",projectId:r},{type:"JOIN_LOBBY",roomId:e,userType:"recorder"}])},[e]),bu("lobby:joined",function(){i("JOIN_ROOM")})};const Cr=({children:t,onClick:e,disabled:r})=>k.jsx("button",{onClick:e,className:`bg-green-500 px-4 py-3 rounded-lg text-white ${r?"opacity-50":""}`,disabled:r,children:t}),MN=({paid:t})=>{const e=V.useRef(),{state:r,send:n}=xn(),[i,s]=V.useState(""),[o,a]=V.useState("Guest"),[c,l]=V.useState(""),[f,u]=V.useState(""),{initialize:h}=EN(),{joinLobby:g}=PN(),{fetchAudioStream:p,produceAudio:y,stopAudioStream:b,stopProducingAudio:S,stream:E}=TN(),{fetchVideoStream:w,produceVideo:T,stopVideoStream:D,stopProducingVideo:B,stream:j}=DN(),{joinRoom:N,leaveRoom:F}=kN();bu("lobby:cam-on",()=>{j&&e.current&&(e.current.srcObject=j)});const{peers:$}=k2(),{startRecording:U,stopRecording:A,error:m,data:d}=IN(),{setDisplayName:v,error:R}=ON();return bu("room:joined",()=>{console.log("room:joined")}),bu("lobby:joined",()=>{console.log("lobby:joined")}),k.jsxs("div",{children:[k.jsx("div",{className:"video"}),t?k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"room",children:[k.jsx("h3",{children:"Your Project id: 2hHNjpYUlb9boxKto2Rw4p0RdcsA0PVl "}),k.jsx("h3",{children:"Your Room id: vui-jket-utx "})]}),k.jsxs("div",{className:"grid grid-cols-2",children:[k.jsxs("div",{children:[k.jsxs("table",{children:[k.jsx("tr",{children:k.jsx("th",{colspan:"2",className:"text-2xl",children:"Room State"})}),k.jsx("tr",{children:k.jsx("td",{colspan:"2",className:"break-words",children:JSON.stringify(r.value)})}),k.jsxs("tr",{children:[k.jsx("th",{className:"text-2xl",children:"Me Id"}),k.jsx("td",{className:"break-words",children:JSON.stringify(r.context.peerId)})]}),k.jsxs("tr",{children:[k.jsx("th",{className:"text-2xl",children:"DisplayName"}),k.jsx("td",{className:"break-words",children:JSON.stringify(r.context.displayName)})]}),k.jsx("tr",{children:k.jsx("th",{colspan:"2",className:"text-2xl",children:"Recording Data"})}),k.jsx("tr",{children:k.jsx("td",{colspan:"2",className:"break-words",children:JSON.stringify(d)})}),k.jsx("tr",{children:k.jsx("th",{colspan:"2",className:"text-2xl",children:"Error"})}),k.jsx("tr",{children:k.jsx("td",{colspan:"2",className:"break-words text-red-500",children:JSON.stringify(r.context.error)})}),k.jsx("tr",{children:k.jsx("th",{colspan:"2",className:"text-2xl",children:"Peers"})}),k.jsx("tr",{children:k.jsx("td",{colspan:"2",className:"break-words",children:JSON.stringify($)})}),k.jsx("tr",{children:k.jsx("th",{colspan:"2",className:"text-2xl",children:"Consumers"})}),k.jsx("tr",{children:k.jsx("td",{colspan:"2",className:"break-words",children:JSON.stringify(r.context.consumers)})})]}),k.jsx("h2",{className:"text-3xl text-blue-500 font-extrabold",children:"Idle"}),k.jsx("input",{type:"text",placeholder:"Your Project Id",value:c,onChange:C=>l(C.target.value),className:"border-2 border-gray-300 h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none mr-2"}),k.jsx(Cr,{disabled:!h.isCallable,onClick:()=>{h(c)},children:"INIT"}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("h2",{className:"text-3xl text-red-500 font-extrabold",children:"Initialized"}),k.jsx("input",{type:"text",placeholder:"Your Room Id",value:i,onChange:C=>s(C.target.value),className:"border-2 border-gray-300 h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none mr-2"}),k.jsx("input",{type:"text",placeholder:"Your Access Token (optional)",value:f,onChange:C=>u(C.target.value),className:"border-2 border-gray-300 h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none mr-2"}),k.jsx(Cr,{disabled:!g.isCallable,onClick:()=>{f?g(i,f):g(i)},children:"JOIN_LOBBY"}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("h2",{className:"text-3xl text-yellow-500 font-extrabold",children:"Lobby"}),k.jsxs("div",{className:"flex gap-4 flex-wrap",children:[k.jsx("input",{type:"text",placeholder:"Your Room Id",value:o,onChange:C=>a(C.target.value),className:"border-2 border-gray-300 h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none mr-2"}),k.jsx(Cr,{disabled:!v.isCallable,onClick:()=>{v(o)},children:`SET_DISPLAY_NAME error: ${R}`}),k.jsx(Cr,{disabled:!w.isCallable,onClick:w,children:"FETCH_VIDEO_STREAM"}),k.jsx(Cr,{disabled:!p.isCallable,onClick:p,children:"FETCH_AUDIO_STREAM"}),k.jsx(Cr,{disabled:!N.isCallable,onClick:N,children:"JOIN_ROOM"}),k.jsx(Cr,{disabled:!r.matches("Initialized.JoinedLobby"),onClick:()=>n("LEAVE_LOBBY"),children:"LEAVE_LOBBY"}),k.jsx(Cr,{disabled:!D.isCallable,onClick:D,children:"STOP_VIDEO_STREAM"}),k.jsx(Cr,{disabled:!b.isCallable,onClick:b,children:"STOP_AUDIO_STREAM"})]}),k.jsx("br",{}),k.jsx("h2",{className:"text-3xl text-green-600 font-extrabold",children:"Room"}),k.jsxs("div",{className:"flex gap-4 flex-wrap",children:[k.jsx(Cr,{disabled:!y.isCallable,onClick:()=>y(E),children:"PRODUCE_MIC"}),k.jsx(Cr,{disabled:!T.isCallable,onClick:()=>T(j),children:"PRODUCE_CAM"}),k.jsx(Cr,{disabled:!S.isCallable,onClick:()=>S(),children:"STOP_PRODUCING_MIC"}),k.jsx(Cr,{disabled:!B.isCallable,onClick:()=>B(),children:"STOP_PRODUCING_CAM"}),k.jsx(Cr,{disabled:!U.isCallable,onClick:()=>U(`${window.location.href}rec/${i}`),children:`START_RECORDING error: ${m}`}),k.jsx(Cr,{disabled:!A.isCallable,onClick:A,children:"STOP_RECORDING"}),k.jsx(Cr,{disabled:!F.isCallable,onClick:F,children:"LEAVE_ROOM"})]})]}),k.jsxs("div",{className:"video-stream",children:[k.jsx("video",{className:"video-stream",ref:e,autoPlay:!0,muted:!0}),k.jsxs("div",{className:"grid grid-cols-4",children:[Object.values($).filter(C=>C.cam).map(C=>k.jsxs(k.Fragment,{children:["role: ",C.role,k.jsx(I2,{peerId:C.peerId,track:C.cam,debug:!0},C.peerId)]})),Object.values($).filter(C=>C.mic).map(C=>k.jsx(P2,{peerId:C.peerId,track:C.mic},C.peerId))]})]})]})]}):k.jsx(k.Fragment,{children:k.jsx("h1",{className:"pls-pay",children:"Please pay to access this content."})})]})},LN=()=>{var i,s;const t=x8(),[e,r]=V.useState(((i=t.roomId)==null?void 0:i.toString())||""),{peers:n}=k2();return V.useEffect(()=>{var o;r(((o=t.roomId)==null?void 0:o.toString())||"")},[(s=t.roomId)==null?void 0:s.toString()]),NN(e,""),k.jsx("div",{className:"grid grid-cols-2",children:k.jsxs("div",{children:["Peers:",k.jsxs("div",{className:"grid grid-cols-4",children:[Object.values(n).filter(o=>o.cam).map(o=>k.jsx(I2,{peerId:o.peerId,track:o.cam},o.peerId)),Object.values(n).filter(o=>o.mic).map(o=>k.jsx(P2,{peerId:o.peerId,track:o.mic},o.peerId))]})]})})},jN=()=>{const t=[{avatar:"https://media.licdn.com/dms/image/D5603AQGIGapy-hYhtg/profile-displayphoto-shrink_400_400/0/1684462806428?e=1697673600&v=beta&t=8LqO86gqTU5f1C7iTvlnnhjwMJE1wGXgGvbbddGKPnk",name:"Kartik Bhatt",title:"Blockchain Developer",desc:"Blockchain Innovator, Tech Enthusiast, Distributed Ledger",linkedin:"javascript:void(0)",twitter:"javascript:void(0)"},{avatar:"https://media.licdn.com/dms/image/D4D03AQHlVKMu_PJhIQ/profile-displayphoto-shrink_400_400/0/1685900503917?e=1697673600&v=beta&t=K3htv_4-YMPlEDoF-1zGRMwK2nekB5Fq-QQ0GlpeOIw",name:"Bikram Narayan Dhanraj",title:"Frontend and Backend Developer",desc:"Creative Designer of User Experiences,  Maestro of Frontend and Backend Design",linkedin:"javascript:void(0)",twitter:"javascript:void(0)"},{avatar:"https://media.licdn.com/dms/image/D5603AQE7S43cHsZ5nA/profile-displayphoto-shrink_400_400/0/1676894690271?e=1697673600&v=beta&t=18qk23ZMd4rABLN9ipl-5OdJpsLq5qSwaRgG1JBuLI8",name:"Jenil Jain",title:"Backend Developer",desc:"Backend Architect, Database Dynamo, Logic Wizard, Backend Development Prodigy.",linkedin:"javascript:void(0)",twitter:"javascript:void(0)"}];return k.jsx("section",{className:"py-14",children:k.jsxs("div",{className:"max-w-screen-xl mx-auto px-4 text-center md:px-8",children:[k.jsxs("div",{className:"max-w-xl mx-auto",children:[k.jsx("h3",{className:"text-gray-800 text-3xl font-semibold sm:text-4xl",children:"Meet our team"}),k.jsx("p",{className:"text-gray-600 mt-3",children:"Synergetic Experts Crafting Innovative Coffee Matchmaking Experience."})]}),k.jsx("div",{className:"mt-12",children:k.jsx("ul",{className:"grid gap-8 sm:grid-cols-2 md:grid-cols-3",children:t.map((e,r)=>k.jsxs("li",{children:[k.jsx("div",{className:"w-24 h-24 mx-auto",children:k.jsx("img",{src:e.avatar,className:"w-full h-full rounded-full",alt:""})}),k.jsxs("div",{className:"mt-2",children:[k.jsx("h4",{className:"text-gray-700 font-semibold sm:text-lg",children:e.name}),k.jsx("p",{className:"text-indigo-600",children:e.title}),k.jsx("p",{className:"text-gray-600 mt-2",children:e.desc}),k.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-gray-400",children:[k.jsx("a",{href:e.twitter,children:k.jsxs("svg",{className:"w-5 h-5 duration-150 hover:text-gray-500",fill:"currentColor",viewBox:"0 0 48 48",children:[k.jsx("g",{"clip-path":"url(#clip0_17_80)",children:k.jsx("path",{fill:"currentColor",d:"M15.1 43.5c18.11 0 28.017-15.006 28.017-28.016 0-.422-.01-.853-.029-1.275A19.998 19.998 0 0048 9.11c-1.795.798-3.7 1.32-5.652 1.546a9.9 9.9 0 004.33-5.445 19.794 19.794 0 01-6.251 2.39 9.86 9.86 0 00-16.788 8.979A27.97 27.97 0 013.346 6.299 9.859 9.859 0 006.393 19.44a9.86 9.86 0 01-4.462-1.228v.122a9.844 9.844 0 007.901 9.656 9.788 9.788 0 01-4.442.169 9.867 9.867 0 009.195 6.843A19.75 19.75 0 010 39.078 27.937 27.937 0 0015.1 43.5z"})}),k.jsx("defs",{children:k.jsx("clipPath",{id:"clip0_17_80",children:k.jsx("path",{fill:"currentColor",d:"M0 0h48v48H0z"})})})]})}),k.jsx("a",{href:e.linkedin,children:k.jsxs("svg",{className:"w-5 h-5 duration-150 hover:text-gray-500",fill:"none",viewBox:"0 0 48 48",children:[k.jsx("g",{"clip-path":"url(#clip0_17_68)",children:k.jsx("path",{fill:"currentColor",d:"M44.447 0H3.544C1.584 0 0 1.547 0 3.46V44.53C0 46.444 1.584 48 3.544 48h40.903C46.407 48 48 46.444 48 44.54V3.46C48 1.546 46.406 0 44.447 0zM14.24 40.903H7.116V17.991h7.125v22.912zM10.678 14.87a4.127 4.127 0 01-4.134-4.125 4.127 4.127 0 014.134-4.125 4.125 4.125 0 010 8.25zm30.225 26.034h-7.115V29.766c0-2.653-.047-6.075-3.704-6.075-3.703 0-4.265 2.896-4.265 5.887v11.325h-7.107V17.991h6.826v3.13h.093c.947-1.8 3.272-3.702 6.731-3.702 7.21 0 8.541 4.744 8.541 10.912v12.572z"})}),k.jsx("defs",{children:k.jsx("clipPath",{id:"clip0_17_68",children:k.jsx("path",{fill:"currentColor",d:"M0 0h48v48H0z"})})})]})})]})]})]},r))})})]})})},BN=({seName:t,seEmail:e,reName:r,reEmail:n,setReEmail:i,setReName:s,setSeEmail:o,setSeName:a})=>{var c=JSON.parse(localStorage.getItem("myData"));console.log("Opposite"),c&&(a(c.userName),o(c.email));const[l,f]=V.useState(""),[u,h]=V.useState(""),[g,p]=V.useState(!!e),y=async b=>{b.preventDefault();const S={service_id:"service_p4m24no",template_id:"template_77atf8a",user_id:"sNJSJaVemORijVXIS",template_params:{from_name:t,to_name:r,date:l,time:u,from_email:e,to_email:n}};try{const E=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(E.ok)console.log("Your data has been sent successfully...");else{console.log("Some error occurred");const w=await E.json();console.log(w)}}catch(E){console.log("An error occurred while sending the request:",E)}};return k.jsxs("div",{className:"email-container",children:[k.jsx("h2",{children:"Select Date and Time for Coffee"}),!g&&k.jsx("h1",{className:"text-red-500"}),k.jsx("table",{className:"email-table",children:k.jsxs("tbody",{children:[k.jsxs("tr",{children:[k.jsx("th",{children:"From:"}),k.jsx("td",{children:t})]}),k.jsxs("tr",{children:[k.jsx("th",{children:"Sender Email:"}),k.jsx("td",{children:e})]}),k.jsxs("tr",{children:[k.jsx("th",{children:"Receiver Name:"}),k.jsx("td",{children:r})]}),k.jsxs("tr",{children:[k.jsx("th",{children:"Receiver Email:"}),k.jsx("td",{children:n})]})]})}),k.jsxs("form",{onSubmit:y,children:[k.jsx("label",{children:"Date:"}),k.jsx("input",{type:"date",className:"email-input",value:l,onChange:b=>f(b.target.value),required:!0}),k.jsx("br",{}),k.jsx("label",{children:"Time:"}),k.jsx("input",{type:"time",className:"email-input",value:u,onChange:b=>h(b.target.value),required:!0}),k.jsx("br",{}),k.jsx("button",{type:"submit",className:"send-button",children:"Send Coffee Invitation"})]})]})},FN=({sex:t,setSex:e,reName:r,setReName:n,reEmail:i,setReEmail:s})=>{const[o,a]=V.useState([]);V.useEffect(()=>{(async()=>{try{const u=await Ia.get("http://localhost:8000/users");var f=JSON.parse(localStorage.getItem("myData"));console.log("Opposite"),f&&(e(f.gender),n(f.userName),s(f.email));const h=u.data.allUsers.filter(g=>g.gender!=t);a(h)}catch(u){console.error("Error fetching profiles:",u)}})()},[t]);const c=l=>{n(l.userName),s(l.email)};return k.jsxs(k.Fragment,{children:[k.jsx("h2",{children:"Opposite Gender Profiles"}),k.jsx("h2",{}),k.jsx("div",{className:"opposite-gender-profiles",children:o.map(l=>k.jsx(Ur,{to:"/opposite/email",children:k.jsxs("div",{className:"profile-card",onClick:()=>c(l),children:[k.jsx("img",{src:l.photo,alt:l.userName}),k.jsxs("p",{children:["Name: ",l.userName]}),k.jsxs("p",{children:["Gender: ",l.gender]}),k.jsxs("p",{children:["Age: ",l.age]}),k.jsxs("p",{children:["Id: ",l._id]}),k.jsxs("p",{children:["Email: ",l.email]})]},l._id)},l._id))})]})};const UN=({contract:t,account:e})=>{const[r,n]=V.useState(null),[i,s]=V.useState("No image selected"),o=async c=>{if(c.preventDefault(),!r){alert("Please select an image to upload.");return}try{const l=new FormData;l.append("file",r);const u=`https://gateway.pinata.cloud/ipfs/${(await Ia({method:"post",url:"https://api.pinata.cloud/pinning/pinFileToIPFS",data:l,headers:{pinata_api_key:"ba36d8a2dfc40a2d09c5",pinata_secret_api_key:"4ce297a65641e4bfb963a9fcf32393c377af33f61017b09ed49d93ea18f90f98","Content-Type":"multipart/form-data"}})).data.IpfsHash}`;t.add(e,u),console.log(u),alert("Image uploaded successfully."),s("No image selected"),n(null)}catch(l){l.response&&(console.log("Server responded with:",l.response.data),console.log("Status code:",l.response.status)),alert("Unable to upload image to Pinata. Please try again later.")}},a=c=>{const l=c.target.files[0];l&&(n(l),s(l.name))};return k.jsx("div",{className:"top-container",children:k.jsxs("form",{className:"form",onSubmit:o,children:[k.jsx("label",{htmlFor:"file-upload",className:"choose",children:"Choose Image"}),k.jsx("input",{className:"chooseimg",disabled:!e,type:"file",id:"file-upload",name:"data",onChange:a}),k.jsxs("span",{className:"Imagesall",children:["Image: ",i]}),k.jsx("button",{type:"submit",className:"upload",disabled:!r,children:"Upload File"})]})})},$N=({contract:t,account:e})=>{const[r,n]=V.useState([]),[i,s]=V.useState(""),o=async()=>{try{const c=i||e,l=await t.display(c);if(l.length>0){const f=l.map((u,h)=>k.jsx("a",{href:`https://gateway.pinata.cloud/ipfs/${u.substring(6)}`,target:"_blank",rel:"noopener noreferrer",children:k.jsx("img",{src:`${u}`,alt:"new",className:"image-list"})},h));n(f)}else alert("No images to display")}catch(c){console.error("Error:",c),alert("An error occurred")}},a=c=>{s(c.target.value)};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"image-list",children:r}),k.jsx("input",{type:"text",placeholder:"Enter Address",className:"address",value:i,onChange:a}),k.jsx("button",{className:"center button",id:"get-data",onClick:o,children:"Get Data"})]})};const zN=({setModalOpen:t,contract:e})=>{const r=async()=>{const n=document.querySelector(".address").value;await e.allow(n),t(!1)};return V.useEffect(()=>{e&&(async()=>{const i=await e.shareAccess();let s=document.querySelector("#selectNumber");const o=i;for(let a=0;a<o.length;a++){let c=o[a],l=document.createElement("option");l.textContent=c,l.value=c,s.appendChild(l)}})()},[e]),k.jsx(k.Fragment,{children:k.jsx("div",{className:"modalBackground",children:k.jsxs("div",{className:"modalContainer",children:[k.jsx("div",{className:"title",children:"Share with"}),k.jsx("div",{className:"body",children:k.jsx("input",{type:"text",className:"address",placeholder:"Enter Address"})}),k.jsx("form",{id:"myForm",children:k.jsx("select",{id:"selectNumber",children:k.jsx("option",{className:"address",children:"People With Access"})})}),k.jsxs("div",{className:"footer",children:[k.jsx("button",{onClick:()=>t(!1),id:"cancelBtn",children:"Cancel"}),k.jsx("button",{onClick:r,children:"Share"})]})]})})})};function VN({paid:t}){const[e,r]=V.useState(""),[n,i]=V.useState(null),[s,o]=V.useState(null),[a,c]=V.useState(!1);return V.useEffect(()=>{const l=new Tg(window.ethereum);l&&(async()=>{if(l){window.ethereum.on("chainChanged",()=>{window.location.reload()}),window.ethereum.on("accountsChanged",()=>{window.location.reload()}),await l.send("eth_requestAccounts",[]);const u=l.getSigner(),h=await u.getAddress();r(h);let g="0xAFa194923a01C76A2C9E783a970d09BBE6A09022";const p=new Ag(g,Pg.abi,u);console.log(p),i(p),o(l)}else alert("Metamask is not installed")})()},[]),k.jsxs("div",{children:[k.jsxs("div",{className:"toporder",children:[k.jsx("img",{className:"photoipfs",src:"https://i.imgur.com/xmrplgH.png"}),k.jsx("h1",{className:"headingdapp",children:"dappDrive"})]}),k.jsx("p",{className:"middleliners",children:"Collecting love's snapshots, our hearts treasure each frame of togetherness."}),k.jsxs("p",{className:"myAccount",children:["Account : ",e||"Not Connected"]}),k.jsx(UN,{account:e,provider:s,contract:n}),k.jsx($N,{contract:n,account:e}),!a&&k.jsx("button",{className:"share",onClick:()=>c(!0),children:"Share"}),a&&k.jsx(zN,{setModalOpen:c,contract:n})]})}const HN=()=>{const[t,e]=V.useState(""),[r,n]=V.useState(""),[i,s]=V.useState(null),[o,a]=V.useState(!1),c=async l=>{l.preventDefault();const f={userName:t,cadd:r};try{const h=await Ia.post("http://localhost:8000/login",f);localStorage.setItem("myData",JSON.stringify(h.data.data));var u=JSON.parse(localStorage.getItem("myData"));console.log(u),ct.success("Login Successfull"),window.alert("Login Successfull"),a(!0)}catch(h){console.error("Error logging in:",h)}};return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"login-container",children:[k.jsx("h2",{children:"Login Form"}),k.jsxs("form",{onSubmit:c,className:"login-form",children:[k.jsxs("div",{className:"input-container",children:[k.jsx("label",{children:"Username:"}),k.jsx("input",{type:"text",value:t,onChange:l=>e(l.target.value),className:"input-field"})]}),k.jsxs("div",{className:"input-container",children:[k.jsx("label",{children:"CADD:"}),k.jsx("input",{type:"text",value:r,onChange:l=>n(l.target.value),className:"input-field"})]}),k.jsx("button",{type:"submit",className:"submit-button",children:"Login"})]}),i&&k.jsxs("div",{className:"response-container",children:[k.jsx("h3",{children:"Response from Server:"}),k.jsx("p",{children:i.msg}),k.jsx("pre",{children:JSON.stringify(i.data,null,2)})]})]}),o&&k.jsx(Ur,{to:"/opposite",children:k.jsx("button",{className:"ml-3 mg-1",children:"Browse"})})]})};function GN(){const[t,e]=V.useState("Account not connected"),[r,n]=V.useState(""),[i,s]=V.useState(""),[o,a]=V.useState(""),[c,l]=V.useState(""),[f,u]=V.useState(""),[h,g]=V.useState(!1);return k.jsxs(k.Fragment,{children:[k.jsx("header",{className:"App-head",children:k.jsx("div",{className:"pt-16",children:k.jsxs(H8,{children:[k.jsx(Q8,{}),k.jsxs(B8,{children:[k.jsx(Wr,{path:"/",element:k.jsxs("div",{children:[k.jsx(Y8,{}),k.jsx(W8,{}),k.jsx(KP,{}),k.jsx(jN,{}),k.jsx(jE,{account:t,setAccount:e})]})}),k.jsx(Wr,{path:"/product",element:k.jsx(Z8,{})}),k.jsx(Wr,{path:"/chatvideo",element:k.jsx(MN,{paid:h})}),k.jsx(Wr,{path:"/opposite",element:k.jsx(FN,{sex:r,setSex:n,reName:c,setReName:l,reEmail:f,setReEmail:u})}),k.jsx(Wr,{path:"/opposite/email",element:k.jsx(BN,{seName:i,seEmail:o,reName:c,reEmail:f,setReEmail:u,setReName:l,setSeEmail:a,setSeName:s})}),k.jsx(Wr,{path:"/rec/:roomId",element:k.jsx(LN,{})}),k.jsx(Wr,{path:"/ipfsphotoshare",element:k.jsx(VN,{paid:h})}),k.jsx(Wr,{path:"/wallet",element:k.jsx(tI,{account:t,setAccount:e,setPaid:g,paid:h})}),k.jsx(Wr,{path:"/buy",element:k.jsx(KE,{setPaid:g,paid:h})}),k.jsx(Wr,{path:"/form",element:k.jsx(y3,{sex:r,setSex:n,seName:i,setSeName:s,seEmail:o,setSeEmail:a})}),k.jsx(Wr,{path:"/chat",element:k.jsx(A3,{account:t,setAccount:e})}),k.jsx(Wr,{path:"/login",element:k.jsx(HN,{})})]})]})})}),k.jsx(w3,{})]})}const qN="modulepreload",JN=function(t){return"/"+t},a_={},KN=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=JN(s),s in a_)return;a_[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const u=i[f];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":qN,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((f,u)=>{l.addEventListener("load",f),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},WN=t=>{t&&t instanceof Function&&KN(()=>import("./web-vitals-60d3425a.js"),[]).then(({getCLS:e,getFID:r,getFCP:n,getLCP:i,getTTFB:s})=>{e(t),r(t),n(t),i(t),s(t)})},YN=Hp.createRoot(document.getElementById("root"));YN.render(k.jsx(Ce.StrictMode,{children:k.jsx(GN,{})}));WN();
